(self.webpackChunkuntitled=self.webpackChunkuntitled||[]).push([[179],{999:(E,I,T)=>{"use strict";function S(t){return"function"==typeof t}function w(t){const e=t(s=>{Error.call(s),s.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const g=w(t=>function(e){t(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((s,o)=>`${o+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function m(t,n){if(t){const e=t.indexOf(n);0<=e&&t.splice(e,1)}}class p{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const d of e)d.remove(this);else e.remove(this);const{initialTeardown:s}=this;if(S(s))try{s()}catch(d){n=d instanceof g?d.errors:[d]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const d of o)try{c(d)}catch(C){n=n??[],C instanceof g?n=[...n,...C.errors]:n.push(C)}}if(n)throw new g(n)}}add(n){var e;if(n&&n!==this)if(this.closed)c(n);else{if(n instanceof p){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(n)}}_hasParent(n){const{_parentage:e}=this;return e===n||Array.isArray(e)&&e.includes(n)}_addParent(n){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(n),e):e?[e,n]:n}_removeParent(n){const{_parentage:e}=this;e===n?this._parentage=null:Array.isArray(e)&&m(e,n)}remove(n){const{_finalizers:e}=this;e&&m(e,n),n instanceof p&&n._removeParent(this)}}p.EMPTY=(()=>{const t=new p;return t.closed=!0,t})();const a=p.EMPTY;function u(t){return t instanceof p||t&&"closed"in t&&S(t.remove)&&S(t.add)&&S(t.unsubscribe)}function c(t){S(t)?t():t.unsubscribe()}const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},f={setTimeout(t,n,...e){const{delegate:s}=f;return s?.setTimeout?s.setTimeout(t,n,...e):setTimeout(t,n,...e)},clearTimeout(t){const{delegate:n}=f;return(n?.clearTimeout||clearTimeout)(t)},delegate:void 0};function v(t){f.setTimeout(()=>{const{onUnhandledError:n}=l;if(!n)throw t;n(t)})}function _(){}const h=x("C",void 0,void 0);function x(t,n,e){return{kind:t,value:n,error:e}}let D=null;function M(t){if(l.useDeprecatedSynchronousErrorHandling){const n=!D;if(n&&(D={errorThrown:!1,error:null}),t(),n){const{errorThrown:e,error:s}=D;if(D=null,e)throw s}}else t()}class A extends p{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,u(n)&&n.add(this)):this.destination=$}static create(n,e,s){return new V(n,e,s)}next(n){this.isStopped?z(function b(t){return x("N",t,void 0)}(n),this):this._next(n)}error(n){this.isStopped?z(function y(t){return x("E",void 0,t)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?z(h,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const N=Function.prototype.bind;function L(t,n){return N.call(t,n)}class B{constructor(n){this.partialObserver=n}next(n){const{partialObserver:e}=this;if(e.next)try{e.next(n)}catch(s){U(s)}}error(n){const{partialObserver:e}=this;if(e.error)try{e.error(n)}catch(s){U(s)}else U(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(e){U(e)}}}class V extends A{constructor(n,e,s){let o;if(super(),S(n)||!n)o={next:n??void 0,error:e??void 0,complete:s??void 0};else{let d;this&&l.useDeprecatedNextContext?(d=Object.create(n),d.unsubscribe=()=>this.unsubscribe(),o={next:n.next&&L(n.next,d),error:n.error&&L(n.error,d),complete:n.complete&&L(n.complete,d)}):o=n}this.destination=new B(o)}}function U(t){l.useDeprecatedSynchronousErrorHandling?function O(t){l.useDeprecatedSynchronousErrorHandling&&D&&(D.errorThrown=!0,D.error=t)}(t):v(t)}function z(t,n){const{onStoppedNotification:e}=l;e&&f.setTimeout(()=>e(t,n))}const $={closed:!0,next:_,error:function j(t){throw t},complete:_},X="function"==typeof Symbol&&Symbol.observable||"@@observable";function Z(t){return t}function ee(t){return 0===t.length?Z:1===t.length?t[0]:function(e){return t.reduce((s,o)=>o(s),e)}}let ie=(()=>{class t{constructor(e){e&&(this._subscribe=e)}lift(e){const s=new t;return s.source=this,s.operator=e,s}subscribe(e,s,o){const d=function Pe(t){return t&&t instanceof A||function Me(t){return t&&S(t.next)&&S(t.error)&&S(t.complete)}(t)&&u(t)}(e)?e:new V(e,s,o);return M(()=>{const{operator:C,source:P}=this;d.add(C?C.call(d,P):P?this._subscribe(d):this._trySubscribe(d))}),d}_trySubscribe(e){try{return this._subscribe(e)}catch(s){e.error(s)}}forEach(e,s){return new(s=re(s))((o,d)=>{const C=new V({next:P=>{try{e(P)}catch(R){d(R),C.unsubscribe()}},error:d,complete:o});this.subscribe(C)})}_subscribe(e){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(e)}[X](){return this}pipe(...e){return ee(e)(this)}toPromise(e){return new(e=re(e))((s,o)=>{let d;this.subscribe(C=>d=C,C=>o(C),()=>s(d))})}}return t.create=n=>new t(n),t})();function re(t){var n;return null!==(n=t??l.Promise)&&void 0!==n?n:Promise}const Oe=w(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Se=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const s=new me(this,this);return s.operator=e,s}_throwIfClosed(){if(this.closed)throw new Oe}next(e){M(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const s of this.currentObservers)s.next(e)}})}error(e){M(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:s}=this;for(;s.length;)s.shift().error(e)}})}complete(){M(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:s,isStopped:o,observers:d}=this;return s||o?a:(this.currentObservers=null,d.push(e),new p(()=>{this.currentObservers=null,m(d,e)}))}_checkFinalizedStatuses(e){const{hasError:s,thrownError:o,isStopped:d}=this;s?e.error(o):d&&e.complete()}asObservable(){const e=new ie;return e.source=this,e}}return t.create=(n,e)=>new me(n,e),t})();class me extends Se{constructor(n,e){super(),this.destination=n,this.source=e}next(n){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===s||s.call(e,n)}error(n){var e,s;null===(s=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===s||s.call(e,n)}complete(){var n,e;null===(e=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===e||e.call(n)}_subscribe(n){var e,s;return null!==(s=null===(e=this.source)||void 0===e?void 0:e.subscribe(n))&&void 0!==s?s:a}}function _e(t){return S(t?.lift)}function ye(t){return n=>{if(_e(n))return n.lift(function(e){try{return t(e,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,n,e,s,o){return new be(t,n,e,s,o)}class be extends A{constructor(n,e,s,o,d,C){super(n),this.onFinalize=d,this.shouldUnsubscribe=C,this._next=e?function(P){try{e(P)}catch(R){n.error(R)}}:super._next,this._error=o?function(P){try{o(P)}catch(R){n.error(R)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(P){n.error(P)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Ce(t,n){return ye((e,s)=>{let o=0;e.subscribe(le(s,d=>{s.next(t.call(n,d,o++))}))})}function Fe(t){return this instanceof Fe?(this.v=t,this):new Fe(t)}function To(t,n,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,s=e.apply(t,n||[]),d=[];return o={},C("next"),C("throw"),C("return"),o[Symbol.asyncIterator]=function(){return this},o;function C(Y){s[Y]&&(o[Y]=function(G){return new Promise(function(K,ne){d.push([Y,G,K,ne])>1||P(Y,G)})})}function P(Y,G){try{!function R(Y){Y.value instanceof Fe?Promise.resolve(Y.value.v).then(k,F):H(d[0][2],Y)}(s[Y](G))}catch(K){H(d[0][3],K)}}function k(Y){P("next",Y)}function F(Y){P("throw",Y)}function H(Y,G){Y(G),d.shift(),d.length&&P(d[0][0],d[0][1])}}function Nt(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function ti(t){var n="function"==typeof Symbol&&Symbol.iterator,e=n&&t[n],s=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},s("next"),s("throw"),s("return"),e[Symbol.asyncIterator]=function(){return this},e);function s(d){e[d]=t[d]&&function(C){return new Promise(function(P,R){!function o(d,C,P,R){Promise.resolve(R).then(function(k){d({value:k,done:P})},C)}(P,R,(C=t[d](C)).done,C.value)})}}}const Do=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Po(t){return S(t?.then)}function cl(t){return S(t[X])}function Mo(t){return Symbol.asyncIterator&&S(t?.[Symbol.asyncIterator])}function ul(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Yi=function cn(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ws(t){return S(t?.[Yi])}function Es(t){return To(this,arguments,function*(){const e=t.getReader();try{for(;;){const{value:s,done:o}=yield Fe(e.read());if(o)return yield Fe(void 0);yield yield Fe(s)}}finally{e.releaseLock()}})}function dl(t){return S(t?.getReader)}function Ht(t){if(t instanceof ie)return t;if(null!=t){if(cl(t))return function Oo(t){return new ie(n=>{const e=t[X]();if(S(e.subscribe))return e.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(Do(t))return function rr(t){return new ie(n=>{for(let e=0;e<t.length&&!n.closed;e++)n.next(t[e]);n.complete()})}(t);if(Po(t))return function Wn(t){return new ie(n=>{t.then(e=>{n.closed||(n.next(e),n.complete())},e=>n.error(e)).then(null,v)})}(t);if(Mo(t))return Kr(t);if(ws(t))return function hl(t){return new ie(n=>{for(const e of t)if(n.next(e),n.closed)return;n.complete()})}(t);if(dl(t))return function xi(t){return Kr(Es(t))}(t)}throw ul(t)}function Kr(t){return new ie(n=>{(function pl(t,n){var e,s,o,d;return function Je(t,n,e,s){return new(e||(e=Promise))(function(d,C){function P(F){try{k(s.next(F))}catch(H){C(H)}}function R(F){try{k(s.throw(F))}catch(H){C(H)}}function k(F){F.done?d(F.value):function o(d){return d instanceof e?d:new e(function(C){C(d)})}(F.value).then(P,R)}k((s=s.apply(t,n||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Nt(t);!(s=yield e.next()).done;)if(n.next(s.value),n.closed)return}catch(C){o={error:C}}finally{try{s&&!s.done&&(d=e.return)&&(yield d.call(e))}finally{if(o)throw o.error}}n.complete()})})(t,n).catch(e=>n.error(e))})}function qn(t,n,e,s=0,o=!1){const d=n.schedule(function(){e(),o?t.add(this.schedule(null,s)):this.unsubscribe()},s);if(t.add(d),!o)return d}function Xt(t,n,e=1/0){return S(n)?Xt((s,o)=>Ce((d,C)=>n(s,d,o,C))(Ht(t(s,o))),e):("number"==typeof n&&(e=n),ye((s,o)=>function Bu(t,n,e,s,o,d,C,P){const R=[];let k=0,F=0,H=!1;const Y=()=>{H&&!R.length&&!k&&n.complete()},G=ne=>k<s?K(ne):R.push(ne),K=ne=>{d&&n.next(ne),k++;let se=!1;Ht(e(ne,F++)).subscribe(le(n,he=>{o?.(he),d?G(he):n.next(he)},()=>{se=!0},void 0,()=>{if(se)try{for(k--;R.length&&k<s;){const he=R.shift();C?qn(n,C,()=>K(he)):K(he)}Y()}catch(he){n.error(he)}}))};return t.subscribe(le(n,G,()=>{H=!0,Y()})),()=>{P?.()}}(s,o,t,e)))}function sr(t=1/0){return Xt(Z,t)}const Vn=new ie(t=>t.complete());function Vu(t){return t[t.length-1]}function yg(t){return S(Vu(t))?t.pop():void 0}function Io(t){return function cE(t){return t&&S(t.schedule)}(Vu(t))?t.pop():void 0}function bg(t,n=0){return ye((e,s)=>{e.subscribe(le(s,o=>qn(s,t,()=>s.next(o),n),()=>qn(s,t,()=>s.complete(),n),o=>qn(s,t,()=>s.error(o),n)))})}function Cg(t,n=0){return ye((e,s)=>{s.add(t.schedule(()=>e.subscribe(s),n))})}function wg(t,n){if(!t)throw new Error("Iterable cannot be null");return new ie(e=>{qn(e,n,()=>{const s=t[Symbol.asyncIterator]();qn(e,n,()=>{s.next().then(o=>{o.done?e.complete():e.next(o.value)})},0,!0)})})}function un(t,n){return n?function mE(t,n){if(null!=t){if(cl(t))return function dE(t,n){return Ht(t).pipe(Cg(n),bg(n))}(t,n);if(Do(t))return function pE(t,n){return new ie(e=>{let s=0;return n.schedule(function(){s===t.length?e.complete():(e.next(t[s++]),e.closed||this.schedule())})})}(t,n);if(Po(t))return function hE(t,n){return Ht(t).pipe(Cg(n),bg(n))}(t,n);if(Mo(t))return wg(t,n);if(ws(t))return function fE(t,n){return new ie(e=>{let s;return qn(e,n,()=>{s=t[Yi](),qn(e,n,()=>{let o,d;try{({value:o,done:d}=s.next())}catch(C){return void e.error(C)}d?e.complete():e.next(o)},0,!0)}),()=>S(s?.return)&&s.return()})}(t,n);if(dl(t))return function gE(t,n){return wg(Es(t),n)}(t,n)}throw ul(t)}(t,n):Ht(t)}function ju(t,n,...e){if(!0===n)return void t();if(!1===n)return;const s=new V({next:()=>{s.unsubscribe(),t()}});return n(...e).subscribe(s)}function Ft(t){for(let n in t)if(t[n]===Ft)return n;throw Error("Could not find renamed property on target object.")}function Hu(t,n){for(const e in n)n.hasOwnProperty(e)&&!t.hasOwnProperty(e)&&(t[e]=n[e])}function Bt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Bt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const e=n.indexOf("\n");return-1===e?n:n.substring(0,e)}function Uu(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const yE=Ft({__forward_ref__:Ft});function Tt(t){return t.__forward_ref__=Tt,t.toString=function(){return Bt(this())},t}function Ze(t){return zu(t)?t():t}function zu(t){return"function"==typeof t&&t.hasOwnProperty(yE)&&t.__forward_ref__===Tt}function Yu(t){return t&&!!t.\u0275providers}class xe extends Error{constructor(n,e){super(function fl(t,n){return`NG0${Math.abs(t)}${n?": "+n.trim():""}`}(n,e)),this.code=n}}function rt(t){return"string"==typeof t?t:null==t?"":String(t)}function gl(t,n){throw new xe(-201,!1)}function ii(t,n){null==t&&function It(t,n,e,s){throw new Error(`ASSERTION ERROR: ${t}`+(null==s?"":` [Expected=> ${e} ${s} ${n} <=Actual]`))}(n,t,null,"!=")}function We(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Lt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ml(t){return Eg(t,_l)||Eg(t,xg)}function Eg(t,n){return t.hasOwnProperty(n)?t[n]:null}function Sg(t){return t&&(t.hasOwnProperty(Gu)||t.hasOwnProperty(PE))?t[Gu]:null}const _l=Ft({\u0275prov:Ft}),Gu=Ft({\u0275inj:Ft}),xg=Ft({ngInjectableDef:Ft}),PE=Ft({ngInjectorDef:Ft});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let $u;function pi(t){const n=$u;return $u=t,n}function Tg(t,n,e){const s=ml(t);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:e&Qe.Optional?null:void 0!==n?n:void gl(Bt(t))}const Ut=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ao={},Xu="__NG_DI_FLAG__",vl="ngTempTokenPath",IE=/\n/gm,Dg="__source";let Ro;function Ss(t){const n=Ro;return Ro=t,n}function RE(t,n=Qe.Default){if(void 0===Ro)throw new xe(-203,!1);return null===Ro?Tg(t,void 0,n):Ro.get(t,n&Qe.Optional?null:void 0,n)}function je(t,n=Qe.Default){return(function ME(){return $u}()||RE)(Ze(t),n)}function Dt(t,n=Qe.Default){return je(t,yl(n))}function yl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ju(t){const n=[];for(let e=0;e<t.length;e++){const s=Ze(t[e]);if(Array.isArray(s)){if(0===s.length)throw new xe(900,!1);let o,d=Qe.Default;for(let C=0;C<s.length;C++){const P=s[C],R=NE(P);"number"==typeof R?-1===R?o=P.token:d|=R:o=P}n.push(je(o,d))}else n.push(je(s))}return n}function No(t,n){return t[Xu]=n,t.prototype[Xu]=n,t}function NE(t){return t[Xu]}function Mr(t){return{toString:t}.toString()}var Ti=(()=>((Ti=Ti||{})[Ti.OnPush=0]="OnPush",Ti[Ti.Default=1]="Default",Ti))(),Gi=(()=>{return(t=Gi||(Gi={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Gi;var t})();const ar={},Pt=[],bl=Ft({\u0275cmp:Ft}),Wu=Ft({\u0275dir:Ft}),qu=Ft({\u0275pipe:Ft}),Mg=Ft({\u0275mod:Ft}),lr=Ft({\u0275fac:Ft}),ko=Ft({__NG_ELEMENT_ID__:Ft});let FE=0;function en(t){return Mr(()=>{const e=!0===t.standalone,s={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ti.OnPush,directiveDefs:null,pipeDefs:null,standalone:e,dependencies:e&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||Pt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Gi.Emulated,id:"c"+FE++,styles:t.styles||Pt,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},d=t.dependencies,C=t.features;return o.inputs=Ag(t.inputs,s),o.outputs=Ag(t.outputs),C&&C.forEach(P=>P(o)),o.directiveDefs=d?()=>("function"==typeof d?d():d).map(Og).filter(Ig):null,o.pipeDefs=d?()=>("function"==typeof d?d():d).map(jn).filter(Ig):null,o})}function Og(t){return At(t)||Dn(t)}function Ig(t){return null!==t}function Vt(t){return Mr(()=>({type:t.type,bootstrap:t.bootstrap||Pt,declarations:t.declarations||Pt,imports:t.imports||Pt,exports:t.exports||Pt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ag(t,n){if(null==t)return ar;const e={};for(const s in t)if(t.hasOwnProperty(s)){let o=t[s],d=o;Array.isArray(o)&&(d=o[1],o=o[0]),e[o]=s,n&&(n[o]=d)}return e}const Ge=en;function At(t){return t[bl]||null}function Dn(t){return t[Wu]||null}function jn(t){return t[qu]||null}function ri(t,n){const e=t[Mg]||null;if(!e&&!0===n)throw new Error(`Type ${Bt(t)} does not have '\u0275mod' property.`);return e}function Zn(t){return Array.isArray(t)&&"object"==typeof t[1]}function Pi(t){return Array.isArray(t)&&!0===t[1]}function Qu(t){return 0!=(4&t.flags)}function Sl(t){return t.componentOffset>-1}function xl(t){return 1==(1&t.flags)}function Mi(t){return null!==t.template}function zE(t){return 0!=(256&t[2])}function ns(t,n){return t.hasOwnProperty(lr)?t[lr]:null}class $E{constructor(n,e,s){this.previousValue=n,this.currentValue=e,this.firstChange=s}isFirstChange(){return this.firstChange}}function Cn(){return kg}function kg(t){return t.type.prototype.ngOnChanges&&(t.setInput=JE),XE}function XE(){const t=Fg(this),n=t?.current;if(n){const e=t.previous;if(e===ar)t.previous=n;else for(let s in n)e[s]=n[s];t.current=null,this.ngOnChanges(n)}}function JE(t,n,e,s){const o=this.declaredInputs[e],d=Fg(t)||function WE(t,n){return t[Lg]=n}(t,{previous:ar,current:null}),C=d.current||(d.current={}),P=d.previous,R=P[o];C[o]=new $E(R&&R.currentValue,n,P===ar),t[s]=n}Cn.ngInherit=!0;const Lg="__ngSimpleChanges__";function Fg(t){return t[Lg]||null}function dn(t){for(;Array.isArray(t);)t=t[0];return t}function Tl(t,n){return dn(n[t])}function oi(t,n){return dn(n[t.index])}function rd(t,n){return t.data[n]}function ai(t,n){const e=n[t];return Zn(e)?e:e[0]}function Dl(t){return 64==(64&t[2])}function Or(t,n){return null==n?null:t[n]}function Bg(t){t[18]=0}function sd(t,n){t[5]+=n;let e=t,s=t[3];for(;null!==s&&(1===n&&1===e[5]||-1===n&&0===e[5]);)s[5]+=n,e=s,s=s[3]}const it={lFrame:Jg(null),bindingsEnabled:!0};function jg(){return it.bindingsEnabled}function we(){return it.lFrame.lView}function wt(){return it.lFrame.tView}function pe(t){return it.lFrame.contextLView=t,t[8]}function fe(t){return it.lFrame.contextLView=null,t}function En(){let t=Hg();for(;null!==t&&64===t.type;)t=t.parent;return t}function Hg(){return it.lFrame.currentTNode}function $i(t,n){const e=it.lFrame;e.currentTNode=t,e.isParent=n}function od(){return it.lFrame.isParent}function ad(){it.lFrame.isParent=!1}function Hn(){const t=it.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Os(){return it.lFrame.bindingIndex++}function ur(t){const n=it.lFrame,e=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,e}function d2(t,n){const e=it.lFrame;e.bindingIndex=e.bindingRootIndex=t,ld(n)}function ld(t){it.lFrame.currentDirectiveIndex=t}function Gg(){return it.lFrame.currentQueryIndex}function ud(t){it.lFrame.currentQueryIndex=t}function p2(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function $g(t,n,e){if(e&Qe.SkipSelf){let o=n,d=t;for(;!(o=o.parent,null!==o||e&Qe.Host||(o=p2(d),null===o||(d=d[15],10&o.type))););if(null===o)return!1;n=o,t=d}const s=it.lFrame=Xg();return s.currentTNode=n,s.lView=t,!0}function dd(t){const n=Xg(),e=t[1];it.lFrame=n,n.currentTNode=e.firstChild,n.lView=t,n.tView=e,n.contextLView=t,n.bindingIndex=e.bindingStartIndex,n.inI18n=!1}function Xg(){const t=it.lFrame,n=null===t?null:t.child;return null===n?Jg(t):n}function Jg(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function Wg(){const t=it.lFrame;return it.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const qg=Wg;function hd(){const t=Wg();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Un(){return it.lFrame.selectedIndex}function is(t){it.lFrame.selectedIndex=t}function qt(){const t=it.lFrame;return rd(t.tView,t.selectedIndex)}function Pl(t,n){for(let e=n.directiveStart,s=n.directiveEnd;e<s;e++){const d=t.data[e].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:P,ngAfterViewInit:R,ngAfterViewChecked:k,ngOnDestroy:F}=d;C&&(t.contentHooks||(t.contentHooks=[])).push(-e,C),P&&((t.contentHooks||(t.contentHooks=[])).push(e,P),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(e,P)),R&&(t.viewHooks||(t.viewHooks=[])).push(-e,R),k&&((t.viewHooks||(t.viewHooks=[])).push(e,k),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(e,k)),null!=F&&(t.destroyHooks||(t.destroyHooks=[])).push(e,F)}}function Ml(t,n,e){Kg(t,n,3,e)}function Ol(t,n,e,s){(3&t[2])===e&&Kg(t,n,e,s)}function pd(t,n){let e=t[2];(3&e)===n&&(e&=2047,e+=1,t[2]=e)}function Kg(t,n,e,s){const d=s??-1,C=n.length-1;let P=0;for(let R=void 0!==s?65535&t[18]:0;R<C;R++)if("number"==typeof n[R+1]){if(P=n[R],null!=s&&P>=s)break}else n[R]<0&&(t[18]+=65536),(P<d||-1==d)&&(w2(t,e,n,R),t[18]=(4294901760&t[18])+R+2),R++}function w2(t,n,e,s){const o=e[s]<0,d=e[s+1],P=t[o?-e[s]:e[s]];if(o){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{d.call(P)}finally{}}}else try{d.call(P)}finally{}}class Ho{constructor(n,e,s){this.factory=n,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=s}}function gd(t,n,e){let s=0;for(;s<e.length;){const o=e[s];if("number"==typeof o){if(0!==o)break;s++;const d=e[s++],C=e[s++],P=e[s++];t.setAttribute(n,C,P,d)}else{const d=o,C=e[++s];Qg(d)?t.setProperty(n,d,C):t.setAttribute(n,d,C),s++}}return s}function Zg(t){return 3===t||4===t||6===t}function Qg(t){return 64===t.charCodeAt(0)}function zo(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let e=-1;for(let s=0;s<n.length;s++){const o=n[s];"number"==typeof o?e=o:0===e||em(t,e,o,null,-1===e||2===e?n[++s]:null)}}return t}function em(t,n,e,s,o){let d=0,C=t.length;if(-1===n)C=-1;else for(;d<t.length;){const P=t[d++];if("number"==typeof P){if(P===n){C=-1;break}if(P>n){C=d-1;break}}}for(;d<t.length;){const P=t[d];if("number"==typeof P)break;if(P===e){if(null===s)return void(null!==o&&(t[d+1]=o));if(s===t[d+1])return void(t[d+2]=o)}d++,null!==s&&d++,null!==o&&d++}-1!==C&&(t.splice(C,0,n),d=C+1),t.splice(d++,0,e),null!==s&&t.splice(d++,0,s),null!==o&&t.splice(d++,0,o)}function tm(t){return-1!==t}function Is(t){return 32767&t}function As(t,n){let e=function D2(t){return t>>16}(t),s=n;for(;e>0;)s=s[15],e--;return s}let md=!0;function Il(t){const n=md;return md=t,n}let P2=0;const Xi={};function Al(t,n){const e=vd(t,n);if(-1!==e)return e;const s=n[1];s.firstCreatePass&&(t.injectorIndex=n.length,_d(s.data,t),_d(n,null),_d(s.blueprint,null));const o=Rl(t,n),d=t.injectorIndex;if(tm(o)){const C=Is(o),P=As(o,n),R=P[1].data;for(let k=0;k<8;k++)n[d+k]=P[C+k]|R[C+k]}return n[d+8]=o,d}function _d(t,n){t.push(0,0,0,0,0,0,0,0,n)}function vd(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function Rl(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let e=0,s=null,o=n;for(;null!==o;){if(s=um(o),null===s)return-1;if(e++,o=o[15],-1!==s.injectorIndex)return s.injectorIndex|e<<16}return-1}function yd(t,n,e){!function M2(t,n,e){let s;"string"==typeof e?s=e.charCodeAt(0)||0:e.hasOwnProperty(ko)&&(s=e[ko]),null==s&&(s=e[ko]=P2++);const o=255&s;n.data[t+(o>>5)]|=1<<o}(t,n,e)}function rm(t,n,e){if(e&Qe.Optional||void 0!==t)return t;gl()}function sm(t,n,e,s){if(e&Qe.Optional&&void 0===s&&(s=null),0==(e&(Qe.Self|Qe.Host))){const o=t[9],d=pi(void 0);try{return o?o.get(n,s,e&Qe.Optional):Tg(n,s,e&Qe.Optional)}finally{pi(d)}}return rm(s,0,e)}function om(t,n,e,s=Qe.Default,o){if(null!==t){if(1024&n[2]){const C=function N2(t,n,e,s,o){let d=t,C=n;for(;null!==d&&null!==C&&1024&C[2]&&!(256&C[2]);){const P=am(d,C,e,s|Qe.Self,Xi);if(P!==Xi)return P;let R=d.parent;if(!R){const k=C[21];if(k){const F=k.get(e,Xi,s);if(F!==Xi)return F}R=um(C),C=C[15]}d=R}return o}(t,n,e,s,Xi);if(C!==Xi)return C}const d=am(t,n,e,s,Xi);if(d!==Xi)return d}return sm(n,e,s,o)}function am(t,n,e,s,o){const d=function A2(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(ko)?t[ko]:void 0;return"number"==typeof n?n>=0?255&n:R2:n}(e);if("function"==typeof d){if(!$g(n,t,s))return s&Qe.Host?rm(o,0,s):sm(n,e,s,o);try{const C=d(s);if(null!=C||s&Qe.Optional)return C;gl()}finally{qg()}}else if("number"==typeof d){let C=null,P=vd(t,n),R=-1,k=s&Qe.Host?n[16][6]:null;for((-1===P||s&Qe.SkipSelf)&&(R=-1===P?Rl(t,n):n[P+8],-1!==R&&cm(s,!1)?(C=n[1],P=Is(R),n=As(R,n)):P=-1);-1!==P;){const F=n[1];if(lm(d,P,F.data)){const H=I2(P,n,e,C,s,k);if(H!==Xi)return H}R=n[P+8],-1!==R&&cm(s,n[1].data[P+8]===k)&&lm(d,P,n)?(C=F,P=Is(R),n=As(R,n)):P=-1}}return o}function I2(t,n,e,s,o,d){const C=n[1],P=C.data[t+8],F=Nl(P,C,e,null==s?Sl(P)&&md:s!=C&&0!=(3&P.type),o&Qe.Host&&d===P);return null!==F?Rs(n,C,F,P):Xi}function Nl(t,n,e,s,o){const d=t.providerIndexes,C=n.data,P=1048575&d,R=t.directiveStart,F=d>>20,Y=o?P+F:t.directiveEnd;for(let G=s?P:P+F;G<Y;G++){const K=C[G];if(G<R&&e===K||G>=R&&K.type===e)return G}if(o){const G=C[R];if(G&&Mi(G)&&G.type===e)return R}return null}function Rs(t,n,e,s){let o=t[e];const d=n.data;if(function E2(t){return t instanceof Ho}(o)){const C=o;C.resolving&&function bE(t,n){const e=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new xe(-200,`Circular dependency in DI detected for ${t}${e}`)}(function Ot(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():rt(t)}(d[e]));const P=Il(C.canSeeViewProviders);C.resolving=!0;const R=C.injectImpl?pi(C.injectImpl):null;$g(t,s,Qe.Default);try{o=t[e]=C.factory(void 0,d,t,s),n.firstCreatePass&&e>=s.directiveStart&&function C2(t,n,e){const{ngOnChanges:s,ngOnInit:o,ngDoCheck:d}=n.type.prototype;if(s){const C=kg(n);(e.preOrderHooks||(e.preOrderHooks=[])).push(t,C),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,C)}o&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-t,o),d&&((e.preOrderHooks||(e.preOrderHooks=[])).push(t,d),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(t,d))}(e,d[e],n)}finally{null!==R&&pi(R),Il(P),C.resolving=!1,qg()}}return o}function lm(t,n,e){return!!(e[n+(t>>5)]&1<<t)}function cm(t,n){return!(t&Qe.Self||t&Qe.Host&&n)}class Ns{constructor(n,e){this._tNode=n,this._lView=e}get(n,e,s){return om(this._tNode,this._lView,n,yl(s),e)}}function R2(){return new Ns(En(),we())}function On(t){return Mr(()=>{const n=t.prototype.constructor,e=n[lr]||bd(n),s=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==s;){const d=o[lr]||bd(o);if(d&&d!==e)return d;o=Object.getPrototypeOf(o)}return d=>new d})}function bd(t){return zu(t)?()=>{const n=bd(Ze(t));return n&&n()}:ns(t)}function um(t){const n=t[1],e=n.type;return 2===e?n.declTNode:1===e?t[6]:null}const Ls="__parameters__";function Bs(t,n,e){return Mr(()=>{const s=function Cd(t){return function(...e){if(t){const s=t(...e);for(const o in s)this[o]=s[o]}}}(n);function o(...d){if(this instanceof o)return s.apply(this,d),this;const C=new o(...d);return P.annotation=C,P;function P(R,k,F){const H=R.hasOwnProperty(Ls)?R[Ls]:Object.defineProperty(R,Ls,{value:[]})[Ls];for(;H.length<=F;)H.push(null);return(H[F]=H[F]||[]).push(C),R}}return e&&(o.prototype=Object.create(e.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class Ve{constructor(n,e){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=We({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function li(t,n){void 0===n&&(n=t);for(let e=0;e<t.length;e++){let s=t[e];Array.isArray(s)?(n===t&&(n=t.slice(0,e)),li(s,n)):n!==t&&n.push(s)}return n}function rs(t,n){t.forEach(e=>Array.isArray(e)?rs(e,n):n(e))}function hm(t,n,e){n>=t.length?t.push(e):t.splice(n,0,e)}function Ll(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function $o(t,n){const e=[];for(let s=0;s<t;s++)e.push(n);return e}function ci(t,n,e){let s=Vs(t,n);return s>=0?t[1|s]=e:(s=~s,function B2(t,n,e,s){let o=t.length;if(o==n)t.push(e,s);else if(1===o)t.push(s,t[0]),t[0]=e;else{for(o--,t.push(t[o-1],t[o]);o>n;)t[o]=t[o-2],o--;t[n]=e,t[n+1]=s}}(t,s,n,e)),s}function Ed(t,n){const e=Vs(t,n);if(e>=0)return t[1|e]}function Vs(t,n){return function gm(t,n,e){let s=0,o=t.length>>e;for(;o!==s;){const d=s+(o-s>>1),C=t[d<<e];if(n===C)return d<<e;C>n?o=d:s=d+1}return~(o<<e)}(t,n,1)}const Xo=No(Bs("Optional"),8),Jo=No(Bs("SkipSelf"),4);var Qn=(()=>((Qn=Qn||{})[Qn.Important=1]="Important",Qn[Qn.DashCase=2]="DashCase",Qn))();const Md=new Map;let oS=0;const Id="__ngContext__";function In(t,n){Zn(n)?(t[Id]=n[20],function lS(t){Md.set(t[20],t)}(n)):t[Id]=n}function Rd(t,n){return undefined(t,n)}function Zo(t){const n=t[3];return Pi(n)?n[3]:n}function Nd(t){return Lm(t[13])}function kd(t){return Lm(t[4])}function Lm(t){for(;null!==t&&!Pi(t);)t=t[4];return t}function Hs(t,n,e,s,o){if(null!=s){let d,C=!1;Pi(s)?d=s:Zn(s)&&(C=!0,s=s[0]);const P=dn(s);0===t&&null!==e?null==o?Um(n,e,P):ss(n,e,P,o||null,!0):1===t&&null!==e?ss(n,e,P,o||null,!0):2===t?function Ud(t,n,e){const s=jl(t,n);s&&function MS(t,n,e,s){t.removeChild(n,e,s)}(t,s,n,e)}(n,P,C):3===t&&n.destroyNode(P),null!=d&&function AS(t,n,e,s,o){const d=e[7];d!==dn(e)&&Hs(n,t,s,d,o);for(let P=10;P<e.length;P++){const R=e[P];Qo(R[1],R,t,n,s,d)}}(n,t,d,e,o)}}function Fd(t,n,e){return t.createElement(n,e)}function Bm(t,n){const e=t[9],s=e.indexOf(n),o=n[3];512&n[2]&&(n[2]&=-513,sd(o,-1)),e.splice(s,1)}function Bd(t,n){if(t.length<=10)return;const e=10+n,s=t[e];if(s){const o=s[17];null!==o&&o!==t&&Bm(o,s),n>0&&(t[e-1][4]=s[4]);const d=Ll(t,10+n);!function CS(t,n){Qo(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(s[1],s);const C=d[19];null!==C&&C.detachView(d[1]),s[3]=null,s[4]=null,s[2]&=-65}return s}function Vm(t,n){if(!(128&n[2])){const e=n[11];e.destroyNode&&Qo(t,n,e,3,null,null),function SS(t){let n=t[13];if(!n)return Vd(t[1],t);for(;n;){let e=null;if(Zn(n))e=n[13];else{const s=n[10];s&&(e=s)}if(!e){for(;n&&!n[4]&&n!==t;)Zn(n)&&Vd(n[1],n),n=n[3];null===n&&(n=t),Zn(n)&&Vd(n[1],n),e=n&&n[4]}n=e}}(n)}}function Vd(t,n){if(!(128&n[2])){n[2]&=-65,n[2]|=128,function PS(t,n){let e;if(null!=t&&null!=(e=t.destroyHooks))for(let s=0;s<e.length;s+=2){const o=n[e[s]];if(!(o instanceof Ho)){const d=e[s+1];if(Array.isArray(d))for(let C=0;C<d.length;C+=2){const P=o[d[C]],R=d[C+1];try{R.call(P)}finally{}}else try{d.call(o)}finally{}}}}(t,n),function DS(t,n){const e=t.cleanup,s=n[7];let o=-1;if(null!==e)for(let d=0;d<e.length-1;d+=2)if("string"==typeof e[d]){const C=e[d+1],P="function"==typeof C?C(n):dn(n[C]),R=s[o=e[d+2]],k=e[d+3];"boolean"==typeof k?P.removeEventListener(e[d],R,k):k>=0?s[o=k]():s[o=-k].unsubscribe(),d+=2}else{const C=s[o=e[d+1]];e[d].call(C)}if(null!==s){for(let d=o+1;d<s.length;d++)(0,s[d])();n[7]=null}}(t,n),1===n[1].type&&n[11].destroy();const e=n[17];if(null!==e&&Pi(n[3])){e!==n[3]&&Bm(e,n);const s=n[19];null!==s&&s.detachView(t)}!function cS(t){Md.delete(t[20])}(n)}}function jm(t,n,e){return function Hm(t,n,e){let s=n;for(;null!==s&&40&s.type;)s=(n=s).parent;if(null===s)return e[0];{const{componentOffset:o}=s;if(o>-1){const{encapsulation:d}=t.data[s.directiveStart+o];if(d===Gi.None||d===Gi.Emulated)return null}return oi(s,e)}}(t,n.parent,e)}function ss(t,n,e,s,o){t.insertBefore(n,e,s,o)}function Um(t,n,e){t.appendChild(n,e)}function zm(t,n,e,s,o){null!==s?ss(t,n,e,s,o):Um(t,n,e)}function jl(t,n){return t.parentNode(n)}function Ym(t,n,e){return $m(t,n,e)}let Gd,$m=function Gm(t,n,e){return 40&t.type?oi(t,e):null};function Hl(t,n,e,s){const o=jm(t,s,n),d=n[11],P=Ym(s.parent||n[6],s,n);if(null!=o)if(Array.isArray(e))for(let R=0;R<e.length;R++)zm(d,o,e[R],P,!1);else zm(d,o,e,P,!1)}function Ul(t,n){if(null!==n){const e=n.type;if(3&e)return oi(n,t);if(4&e)return Hd(-1,t[n.index]);if(8&e){const s=n.child;if(null!==s)return Ul(t,s);{const o=t[n.index];return Pi(o)?Hd(-1,o):dn(o)}}if(32&e)return Rd(n,t)()||dn(t[n.index]);{const s=Jm(t,n);return null!==s?Array.isArray(s)?s[0]:Ul(Zo(t[16]),s):Ul(t,n.next)}}return null}function Jm(t,n){return null!==n?t[16][6].projection[n.projection]:null}function Hd(t,n){const e=10+t+1;if(e<n.length){const s=n[e],o=s[1].firstChild;if(null!==o)return Ul(s,o)}return n[7]}function zd(t,n,e,s,o,d,C){for(;null!=e;){const P=s[e.index],R=e.type;if(C&&0===n&&(P&&In(dn(P),s),e.flags|=2),32!=(32&e.flags))if(8&R)zd(t,n,e.child,s,o,d,!1),Hs(n,t,o,P,d);else if(32&R){const k=Rd(e,s);let F;for(;F=k();)Hs(n,t,o,F,d);Hs(n,t,o,P,d)}else 16&R?Wm(t,n,s,e,o,d):Hs(n,t,o,P,d);e=C?e.projectionNext:e.next}}function Qo(t,n,e,s,o,d){zd(e,s,t.firstChild,n,o,d,!1)}function Wm(t,n,e,s,o,d){const C=e[16],R=C[6].projection[s.projection];if(Array.isArray(R))for(let k=0;k<R.length;k++)Hs(n,t,o,R[k],d);else zd(t,n,R,C[3],o,d,!0)}function qm(t,n,e){""===e?t.removeAttribute(n,"class"):t.setAttribute(n,"class",e)}function Km(t,n,e){const{mergedAttrs:s,classes:o,styles:d}=e;null!==s&&gd(t,n,s),null!==o&&qm(t,n,o),null!==d&&function NS(t,n,e){t.setAttribute(n,"style",e)}(t,n,d)}class n_{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ar(t){return t instanceof n_?t.changingThisBreaksApplicationSecurity:t}const $l=new Ve("ENVIRONMENT_INITIALIZER"),h_=new Ve("INJECTOR",-1),p_=new Ve("INJECTOR_DEF_TYPES");class f_{get(n,e=Ao){if(e===Ao){const s=new Error(`NullInjectorError: No provider for ${Bt(n)}!`);throw s.name="NullInjectorError",s}return e}}function lx(...t){return{\u0275providers:g_(0,t),\u0275fromNgModule:!0}}function g_(t,...n){const e=[],s=new Set;let o;return rs(n,d=>{const C=d;Kd(C,e,[],s)&&(o||(o=[]),o.push(C))}),void 0!==o&&m_(o,e),e}function m_(t,n){for(let e=0;e<t.length;e++){const{providers:o}=t[e];Zd(o,d=>{n.push(d)})}}function Kd(t,n,e,s){if(!(t=Ze(t)))return!1;let o=null,d=Sg(t);const C=!d&&At(t);if(d||C){if(C&&!C.standalone)return!1;o=t}else{const R=t.ngModule;if(d=Sg(R),!d)return!1;o=R}const P=s.has(o);if(C){if(P)return!1;if(s.add(o),C.dependencies){const R="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const k of R)Kd(k,n,e,s)}}else{if(!d)return!1;{if(null!=d.imports&&!P){let k;s.add(o);try{rs(d.imports,F=>{Kd(F,n,e,s)&&(k||(k=[]),k.push(F))})}finally{}void 0!==k&&m_(k,n)}if(!P){const k=ns(o)||(()=>new o);n.push({provide:o,useFactory:k,deps:Pt},{provide:p_,useValue:o,multi:!0},{provide:$l,useValue:()=>je(o),multi:!0})}const R=d.providers;null==R||P||Zd(R,F=>{n.push(F)})}}return o!==t&&void 0!==t.providers}function Zd(t,n){for(let e of t)Yu(e)&&(e=e.\u0275providers),Array.isArray(e)?Zd(e,n):n(e)}const cx=Ft({provide:String,useValue:Ft});function Qd(t){return null!==t&&"object"==typeof t&&cx in t}function as(t){return"function"==typeof t}const eh=new Ve("Set Injector scope."),Xl={},dx={};let th;function Jl(){return void 0===th&&(th=new f_),th}class hr{}class y_ extends hr{constructor(n,e,s,o){super(),this.parent=e,this.source=s,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ih(n,C=>this.processProvider(C)),this.records.set(h_,Us(void 0,this)),o.has("environment")&&this.records.set(hr,Us(void 0,this));const d=this.records.get(eh);null!=d&&"string"==typeof d.value&&this.scopes.add(d.value),this.injectorDefTypes=new Set(this.get(p_.multi,Pt,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();for(const n of this._onDestroyHooks)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(n){this._onDestroyHooks.push(n)}runInContext(n){this.assertNotDestroyed();const e=Ss(this),s=pi(void 0);try{return n()}finally{Ss(e),pi(s)}}get(n,e=Ao,s=Qe.Default){this.assertNotDestroyed(),s=yl(s);const o=Ss(this),d=pi(void 0);try{if(!(s&Qe.SkipSelf)){let P=this.records.get(n);if(void 0===P){const R=function mx(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ve}(n)&&ml(n);P=R&&this.injectableDefInScope(R)?Us(nh(n),Xl):null,this.records.set(n,P)}if(null!=P)return this.hydrate(n,P)}return(s&Qe.Self?Jl():this.parent).get(n,e=s&Qe.Optional&&e===Ao?null:e)}catch(C){if("NullInjectorError"===C.name){if((C[vl]=C[vl]||[]).unshift(Bt(n)),o)throw C;return function kE(t,n,e,s){const o=t[vl];throw n[Dg]&&o.unshift(n[Dg]),t.message=function LE(t,n,e,s=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let o=Bt(n);if(Array.isArray(n))o=n.map(Bt).join(" -> ");else if("object"==typeof n){let d=[];for(let C in n)if(n.hasOwnProperty(C)){let P=n[C];d.push(C+":"+("string"==typeof P?JSON.stringify(P):Bt(P)))}o=`{${d.join(", ")}}`}return`${e}${s?"("+s+")":""}[${o}]: ${t.replace(IE,"\n  ")}`}("\n"+t.message,o,e,s),t.ngTokenPath=o,t[vl]=null,t}(C,n,"R3InjectorError",this.source)}throw C}finally{pi(d),Ss(o)}}resolveInjectorInitializers(){const n=Ss(this),e=pi(void 0);try{const s=this.get($l.multi,Pt,Qe.Self);for(const o of s)o()}finally{Ss(n),pi(e)}}toString(){const n=[],e=this.records;for(const s of e.keys())n.push(Bt(s));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(n){let e=as(n=Ze(n))?n:Ze(n&&n.provide);const s=function px(t){return Qd(t)?Us(void 0,t.useValue):Us(b_(t),Xl)}(n);if(as(n)||!0!==n.multi)this.records.get(e);else{let o=this.records.get(e);o||(o=Us(void 0,Xl,!0),o.factory=()=>Ju(o.multi),this.records.set(e,o)),e=n,o.multi.push(n)}this.records.set(e,s)}hydrate(n,e){return e.value===Xl&&(e.value=dx,e.value=e.factory()),"object"==typeof e.value&&e.value&&function gx(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(n){if(!n.providedIn)return!1;const e=Ze(n.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function nh(t){const n=ml(t),e=null!==n?n.factory:ns(t);if(null!==e)return e;if(t instanceof Ve)throw new xe(204,!1);if(t instanceof Function)return function hx(t){const n=t.length;if(n>0)throw $o(n,"?"),new xe(204,!1);const e=function TE(t){const n=t&&(t[_l]||t[xg]);if(n){const e=function DE(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),n}return null}(t);return null!==e?()=>e.factory(t):()=>new t}(t);throw new xe(204,!1)}function b_(t,n,e){let s;if(as(t)){const o=Ze(t);return ns(o)||nh(o)}if(Qd(t))s=()=>Ze(t.useValue);else if(function v_(t){return!(!t||!t.useFactory)}(t))s=()=>t.useFactory(...Ju(t.deps||[]));else if(function __(t){return!(!t||!t.useExisting)}(t))s=()=>je(Ze(t.useExisting));else{const o=Ze(t&&(t.useClass||t.provide));if(!function fx(t){return!!t.deps}(t))return ns(o)||nh(o);s=()=>new o(...Ju(t.deps))}return s}function Us(t,n,e=!1){return{factory:t,value:n,multi:e?[]:void 0}}function ih(t,n){for(const e of t)Array.isArray(e)?ih(e,n):e&&Yu(e)?ih(e.\u0275providers,n):n(e)}class _x{}class C_{}class yx{resolveComponentFactory(n){throw function vx(t){const n=Error(`No component factory found for ${Bt(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let ia=(()=>{class t{}return t.NULL=new yx,t})();function bx(){return zs(En(),we())}function zs(t,n){return new Wt(oi(t,n))}let Wt=(()=>{class t{constructor(e){this.nativeElement=e}}return t.__NG_ELEMENT_ID__=bx,t})();function Cx(t){return t instanceof Wt?t.nativeElement:t}class E_{}let mi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function wx(){const t=we(),e=ai(En().index,t);return(Zn(e)?e:t)[11]}(),t})(),Ex=(()=>{class t{}return t.\u0275prov=We({token:t,providedIn:"root",factory:()=>null}),t})();class ra{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Sx=new ra("15.0.0"),rh={};function oh(t){return t.ngOriginalError}class Ys{constructor(){this._console=console}handleError(n){const e=this._findOriginalError(n);this._console.error("ERROR",n),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(n){let e=n&&oh(n);for(;e&&oh(e);)e=oh(e);return e||null}}function pr(t){return t instanceof Function?t():t}function x_(t,n,e){let s=t.length;for(;;){const o=t.indexOf(n,e);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const d=n.length;if(o+d===s||t.charCodeAt(o+d)<=32)return o}e=o+1}}const T_="ng-template";function kx(t,n,e){let s=0;for(;s<t.length;){let o=t[s++];if(e&&"class"===o){if(o=t[s],-1!==x_(o.toLowerCase(),n,0))return!0}else if(1===o){for(;s<t.length&&"string"==typeof(o=t[s++]);)if(o.toLowerCase()===n)return!0;return!1}}return!1}function D_(t){return 4===t.type&&t.value!==T_}function Lx(t,n,e){return n===(4!==t.type||e?t.value:T_)}function Fx(t,n,e){let s=4;const o=t.attrs||[],d=function jx(t){for(let n=0;n<t.length;n++)if(Zg(t[n]))return n;return t.length}(o);let C=!1;for(let P=0;P<n.length;P++){const R=n[P];if("number"!=typeof R){if(!C)if(4&s){if(s=2|1&s,""!==R&&!Lx(t,R,e)||""===R&&1===n.length){if(Oi(s))return!1;C=!0}}else{const k=8&s?R:n[++P];if(8&s&&null!==t.attrs){if(!kx(t.attrs,k,e)){if(Oi(s))return!1;C=!0}continue}const H=Bx(8&s?"class":R,o,D_(t),e);if(-1===H){if(Oi(s))return!1;C=!0;continue}if(""!==k){let Y;Y=H>d?"":o[H+1].toLowerCase();const G=8&s?Y:null;if(G&&-1!==x_(G,k,0)||2&s&&k!==Y){if(Oi(s))return!1;C=!0}}}}else{if(!C&&!Oi(s)&&!Oi(R))return!1;if(C&&Oi(R))continue;C=!1,s=R|1&s}}return Oi(s)||C}function Oi(t){return 0==(1&t)}function Bx(t,n,e,s){if(null===n)return-1;let o=0;if(s||!e){let d=!1;for(;o<n.length;){const C=n[o];if(C===t)return o;if(3===C||6===C)d=!0;else{if(1===C||2===C){let P=n[++o];for(;"string"==typeof P;)P=n[++o];continue}if(4===C)break;if(0===C){o+=4;continue}}o+=d?1:2}return-1}return function Hx(t,n){let e=t.indexOf(4);if(e>-1)for(e++;e<t.length;){const s=t[e];if("number"==typeof s)return-1;if(s===n)return e;e++}return-1}(n,t)}function P_(t,n,e=!1){for(let s=0;s<n.length;s++)if(Fx(t,n[s],e))return!0;return!1}function Ux(t,n){e:for(let e=0;e<n.length;e++){const s=n[e];if(t.length===s.length){for(let o=0;o<t.length;o++)if(t[o]!==s[o])continue e;return!0}}return!1}function M_(t,n){return t?":not("+n.trim()+")":n}function zx(t){let n=t[0],e=1,s=2,o="",d=!1;for(;e<t.length;){let C=t[e];if("string"==typeof C)if(2&s){const P=t[++e];o+="["+C+(P.length>0?'="'+P+'"':"")+"]"}else 8&s?o+="."+C:4&s&&(o+=" "+C);else""!==o&&!Oi(C)&&(n+=M_(d,o),o=""),s=C,d=d||!Oi(s);e++}return""!==o&&(n+=M_(d,o)),n}const st={};function Q(t){O_(wt(),we(),Un()+t,!1)}function O_(t,n,e,s){if(!s)if(3==(3&n[2])){const d=t.preOrderCheckHooks;null!==d&&Ml(n,d,e)}else{const d=t.preOrderHooks;null!==d&&Ol(n,d,0,e)}is(e)}function N_(t,n=null,e=null,s){const o=k_(t,n,e,s);return o.resolveInjectorInitializers(),o}function k_(t,n=null,e=null,s,o=new Set){const d=[e||Pt,lx(t)];return s=s||("object"==typeof t?void 0:Bt(t)),new y_(d,n||Jl(),s||null,o)}let _i=(()=>{class t{static create(e,s){if(Array.isArray(e))return N_({name:""},s,e,"");{const o=e.name??"";return N_({name:o},e.parent,e.providers,o)}}}return t.THROW_IF_NOT_FOUND=Ao,t.NULL=new f_,t.\u0275prov=We({token:t,providedIn:"any",factory:()=>je(h_)}),t.__NG_ELEMENT_ID__=-1,t})();function ae(t,n=Qe.Default){const e=we();return null===e?je(t,n):om(En(),e,Ze(t),n)}function dh(){throw new Error("invalid")}function ql(t,n){return t<<17|n<<2}function Ii(t){return t>>17&32767}function hh(t){return 2|t}function fr(t){return(131068&t)>>2}function ph(t,n){return-131069&t|n<<2}function fh(t){return 1|t}function Z_(t,n){const e=t.contentQueries;if(null!==e)for(let s=0;s<e.length;s+=2){const o=e[s],d=e[s+1];if(-1!==d){const C=t.data[d];ud(o),C.contentQueries(2,n[d],d)}}}function Ql(t,n,e,s,o,d,C,P,R,k,F){const H=n.blueprint.slice();return H[0]=o,H[2]=76|s,(null!==F||t&&1024&t[2])&&(H[2]|=1024),Bg(H),H[3]=H[15]=t,H[8]=e,H[10]=C||t&&t[10],H[11]=P||t&&t[11],H[12]=R||t&&t[12]||null,H[9]=k||t&&t[9]||null,H[6]=d,H[20]=function aS(){return oS++}(),H[21]=F,H[16]=2==n.type?t[16]:H,H}function Xs(t,n,e,s,o){let d=t.data[n];if(null===d)d=function wh(t,n,e,s,o){const d=Hg(),C=od(),R=t.data[n]=function xT(t,n,e,s,o,d){return{type:e,index:s,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:d,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?d:d&&d.parent,e,n,s,o);return null===t.firstChild&&(t.firstChild=R),null!==d&&(C?null==d.child&&null!==R.parent&&(d.child=R):null===d.next&&(d.next=R)),R}(t,n,e,s,o),function u2(){return it.lFrame.inI18n}()&&(d.flags|=32);else if(64&d.type){d.type=e,d.value=s,d.attrs=o;const C=function jo(){const t=it.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();d.injectorIndex=null===C?-1:C.injectorIndex}return $i(d,!0),d}function sa(t,n,e,s){if(0===e)return-1;const o=n.length;for(let d=0;d<e;d++)n.push(s),t.blueprint.push(s),t.data.push(null);return o}function Eh(t,n,e){dd(n);try{const s=t.viewQuery;null!==s&&Rh(1,s,e);const o=t.template;null!==o&&Q_(t,n,o,1,e),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Z_(t,n),t.staticViewQueries&&Rh(2,t.viewQuery,e);const d=t.components;null!==d&&function wT(t,n){for(let e=0;e<n.length;e++)YT(t,n[e])}(n,d)}catch(s){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),s}finally{n[2]&=-5,hd()}}function ec(t,n,e,s){const o=n[2];if(128!=(128&o)){dd(n);try{Bg(n),function zg(t){return it.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==e&&Q_(t,n,e,2,s);const C=3==(3&o);if(C){const k=t.preOrderCheckHooks;null!==k&&Ml(n,k,null)}else{const k=t.preOrderHooks;null!==k&&Ol(n,k,0,null),pd(n,0)}if(function UT(t){for(let n=Nd(t);null!==n;n=kd(n)){if(!n[2])continue;const e=n[9];for(let s=0;s<e.length;s++){const o=e[s],d=o[3];0==(512&o[2])&&sd(d,1),o[2]|=512}}}(n),function HT(t){for(let n=Nd(t);null!==n;n=kd(n))for(let e=10;e<n.length;e++){const s=n[e],o=s[1];Dl(s)&&ec(o,s,o.template,s[8])}}(n),null!==t.contentQueries&&Z_(t,n),C){const k=t.contentCheckHooks;null!==k&&Ml(n,k)}else{const k=t.contentHooks;null!==k&&Ol(n,k,1),pd(n,1)}!function bT(t,n){const e=t.hostBindingOpCodes;if(null!==e)try{for(let s=0;s<e.length;s++){const o=e[s];if(o<0)is(~o);else{const d=o,C=e[++s],P=e[++s];d2(C,d),P(2,n[d])}}}finally{is(-1)}}(t,n);const P=t.components;null!==P&&function CT(t,n){for(let e=0;e<n.length;e++)zT(t,n[e])}(n,P);const R=t.viewQuery;if(null!==R&&Rh(2,R,s),C){const k=t.viewCheckHooks;null!==k&&Ml(n,k)}else{const k=t.viewHooks;null!==k&&Ol(n,k,2),pd(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[2]&=-41,512&n[2]&&(n[2]&=-513,sd(n[3],-1))}finally{hd()}}}function Q_(t,n,e,s,o){const d=Un(),C=2&s;try{is(-1),C&&n.length>22&&O_(t,n,22,!1),e(s,o)}finally{is(d)}}function Sh(t,n,e){if(Qu(n)){const o=n.directiveEnd;for(let d=n.directiveStart;d<o;d++){const C=t.data[d];C.contentQueries&&C.contentQueries(1,e[d],d)}}}function xh(t,n,e){!jg()||(function IT(t,n,e,s){const o=e.directiveStart,d=e.directiveEnd;t.firstCreatePass||Al(e,n),In(s,n);const C=e.initialInputs;for(let P=o;P<d;P++){const R=t.data[P],k=Mi(R);k&&BT(n,e,R);const F=Rs(n,t,P,e);In(F,n),null!==C&&VT(0,P-o,F,R,0,C),k&&(ai(e.index,n)[8]=F)}}(t,n,e,oi(e,n)),64==(64&e.flags)&&a0(t,n,e))}function Th(t,n,e=oi){const s=n.localNames;if(null!==s){let o=n.index+1;for(let d=0;d<s.length;d+=2){const C=s[d+1],P=-1===C?e(n,t):t[C];t[o++]=P}}}function e0(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Dh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Dh(t,n,e,s,o,d,C,P,R,k){const F=22+s,H=F+o,Y=function ET(t,n){const e=[];for(let s=0;s<n;s++)e.push(s<t?null:st);return e}(F,H),G="function"==typeof k?k():k;return Y[1]={type:t,blueprint:Y,template:e,queries:null,viewQuery:P,declTNode:n,data:Y.slice().fill(null,F),bindingStartIndex:F,expandoStartIndex:H,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof d?d():d,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:R,consts:G,incompleteFirstPass:!1}}function t0(t,n,e,s){const o=c0(n);null===e?o.push(s):(o.push(e),t.firstCreatePass&&u0(t).push(s,o.length-1))}function n0(t,n,e,s){for(let o in t)if(t.hasOwnProperty(o)){e=null===e?{}:e;const d=t[o];null===s?r0(e,n,o,d):s.hasOwnProperty(o)&&r0(e,n,s[o],d)}return e}function r0(t,n,e,s){t.hasOwnProperty(e)?t[e].push(n,s):t[e]=[n,s]}function s0(t,n){const e=ai(n,t);16&e[2]||(e[2]|=32)}function Ph(t,n,e,s){let o=!1;if(jg()){const d=null===s?null:{"":-1},C=function RT(t,n){const e=t.directiveRegistry;let s=null,o=null;if(e)for(let d=0;d<e.length;d++){const C=e[d];if(P_(n,C.selectors,!1))if(s||(s=[]),Mi(C))if(null!==C.findHostDirectiveDefs){const P=[];o=o||new Map,C.findHostDirectiveDefs(C,P,o),s.unshift(...P,C),Mh(t,n,P.length)}else s.unshift(C),Mh(t,n,0);else o=o||new Map,C.findHostDirectiveDefs?.(C,s,o),s.push(C)}return null===s?null:[s,o]}(t,e);let P,R;null===C?P=R=null:[P,R]=C,null!==P&&(o=!0,o0(t,n,e,P,d,R)),d&&function NT(t,n,e){if(n){const s=t.localNames=[];for(let o=0;o<n.length;o+=2){const d=e[n[o+1]];if(null==d)throw new xe(-301,!1);s.push(n[o],d)}}}(e,s,d)}return e.mergedAttrs=zo(e.mergedAttrs,e.attrs),o}function o0(t,n,e,s,o,d){for(let k=0;k<s.length;k++)yd(Al(e,n),t,s[k].type);!function LT(t,n,e){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+e,t.providerIndexes=n}(e,t.data.length,s.length);for(let k=0;k<s.length;k++){const F=s[k];F.providersResolver&&F.providersResolver(F)}let C=!1,P=!1,R=sa(t,n,s.length,null);for(let k=0;k<s.length;k++){const F=s[k];e.mergedAttrs=zo(e.mergedAttrs,F.hostAttrs),FT(t,e,n,R,F),kT(R,F,o),null!==F.contentQueries&&(e.flags|=4),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(e.flags|=64);const H=F.type.prototype;!C&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(e.index),C=!0),!P&&(H.ngOnChanges||H.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(e.index),P=!0),R++}!function TT(t,n,e){const o=n.directiveEnd,d=t.data,C=n.attrs,P=[];let R=null,k=null;for(let F=n.directiveStart;F<o;F++){const H=d[F],Y=e?e.get(H):null,K=Y?Y.outputs:null;R=n0(H.inputs,F,R,Y?Y.inputs:null),k=n0(H.outputs,F,k,K);const ne=null===R||null===C||D_(n)?null:jT(R,F,C);P.push(ne)}null!==R&&(R.hasOwnProperty("class")&&(n.flags|=8),R.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=P,n.inputs=R,n.outputs=k}(t,e,d)}function a0(t,n,e){const s=e.directiveStart,o=e.directiveEnd,d=e.index,C=function h2(){return it.lFrame.currentDirectiveIndex}();try{is(d);for(let P=s;P<o;P++){const R=t.data[P],k=n[P];ld(P),(null!==R.hostBindings||0!==R.hostVars||null!==R.hostAttrs)&&AT(R,k)}}finally{is(-1),ld(C)}}function AT(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function Mh(t,n,e){n.componentOffset=e,(t.components||(t.components=[])).push(n.index)}function kT(t,n,e){if(e){if(n.exportAs)for(let s=0;s<n.exportAs.length;s++)e[n.exportAs[s]]=t;Mi(n)&&(e[""]=t)}}function FT(t,n,e,s,o){t.data[s]=o;const d=o.factory||(o.factory=ns(o.type)),C=new Ho(d,Mi(o),ae);t.blueprint[s]=C,e[s]=C,function MT(t,n,e,s,o){const d=o.hostBindings;if(d){let C=t.hostBindingOpCodes;null===C&&(C=t.hostBindingOpCodes=[]);const P=~n.index;(function OT(t){let n=t.length;for(;n>0;){const e=t[--n];if("number"==typeof e&&e<0)return e}return 0})(C)!=P&&C.push(P),C.push(e,s,d)}}(t,n,s,sa(t,e,o.hostVars,st),o)}function BT(t,n,e){const s=oi(n,t),o=e0(e),d=t[10],C=tc(t,Ql(t,o,null,e.onPush?32:16,s,n,d,d.createRenderer(s,e),null,null,null));t[n.index]=C}function Ji(t,n,e,s,o,d){const C=oi(t,n);!function Oh(t,n,e,s,o,d,C){if(null==d)t.removeAttribute(n,o,e);else{const P=null==C?rt(d):C(d,s||"",o);t.setAttribute(n,o,P,e)}}(n[11],C,d,t.value,e,s,o)}function VT(t,n,e,s,o,d){const C=d[n];if(null!==C){const P=s.setInput;for(let R=0;R<C.length;){const k=C[R++],F=C[R++],H=C[R++];null!==P?s.setInput(e,H,k,F):e[F]=H}}}function jT(t,n,e){let s=null,o=0;for(;o<e.length;){const d=e[o];if(0!==d)if(5!==d){if("number"==typeof d)break;if(t.hasOwnProperty(d)){null===s&&(s=[]);const C=t[d];for(let P=0;P<C.length;P+=2)if(C[P]===n){s.push(d,C[P+1],e[o+1]);break}}o+=2}else o+=2;else o+=4}return s}function l0(t,n,e,s){return new Array(t,!0,!1,n,null,0,s,e,null,null)}function zT(t,n){const e=ai(n,t);if(Dl(e)){const s=e[1];48&e[2]?ec(s,e,s.template,e[8]):e[5]>0&&Ih(e)}}function Ih(t){for(let s=Nd(t);null!==s;s=kd(s))for(let o=10;o<s.length;o++){const d=s[o];if(Dl(d))if(512&d[2]){const C=d[1];ec(C,d,C.template,d[8])}else d[5]>0&&Ih(d)}const e=t[1].components;if(null!==e)for(let s=0;s<e.length;s++){const o=ai(e[s],t);Dl(o)&&o[5]>0&&Ih(o)}}function YT(t,n){const e=ai(n,t),s=e[1];(function GT(t,n){for(let e=n.length;e<t.blueprint.length;e++)n.push(t.blueprint[e])})(s,e),Eh(s,e,e[8])}function tc(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Ah(t){for(;t;){t[2]|=32;const n=Zo(t);if(zE(t)&&!n)return t;t=n}return null}function nc(t,n,e,s=!0){const o=n[10];o.begin&&o.begin();try{ec(t,n,t.template,e)}catch(C){throw s&&h0(n,C),C}finally{o.end&&o.end()}}function Rh(t,n,e){ud(0),n(t,e)}function c0(t){return t[7]||(t[7]=[])}function u0(t){return t.cleanup||(t.cleanup=[])}function h0(t,n){const e=t[9],s=e?e.get(Ys,null):null;s&&s.handleError(n)}function Nh(t,n,e,s,o){for(let d=0;d<e.length;){const C=e[d++],P=e[d++],R=n[C],k=t.data[C];null!==k.setInput?k.setInput(R,o,s,P):R[P]=o}}function gr(t,n,e){const s=Tl(n,t);!function Fm(t,n,e){t.setValue(n,e)}(t[11],s,e)}function ic(t,n,e){let s=e?t.styles:null,o=e?t.classes:null,d=0;if(null!==n)for(let C=0;C<n.length;C++){const P=n[C];"number"==typeof P?d=P:1==d?o=Uu(o,P):2==d&&(s=Uu(s,P+": "+n[++C]+";"))}e?t.styles=s:t.stylesWithoutHost=s,e?t.classes=o:t.classesWithoutHost=o}function rc(t,n,e,s,o=!1){for(;null!==e;){const d=n[e.index];if(null!==d&&s.push(dn(d)),Pi(d))for(let P=10;P<d.length;P++){const R=d[P],k=R[1].firstChild;null!==k&&rc(R[1],R,k,s)}const C=e.type;if(8&C)rc(t,n,e.child,s);else if(32&C){const P=Rd(e,n);let R;for(;R=P();)s.push(R)}else if(16&C){const P=Jm(n,e);if(Array.isArray(P))s.push(...P);else{const R=Zo(n[16]);rc(R[1],R,P,s,!0)}}e=o?e.projectionNext:e.next}return s}class oa{constructor(n,e){this._lView=n,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,e=n[1];return rc(e,n,e.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Pi(n)){const e=n[8],s=e?e.indexOf(this):-1;s>-1&&(Bd(n,s),Ll(e,s))}this._attachedToViewContainer=!1}Vm(this._lView[1],this._lView)}onDestroy(n){t0(this._lView[1],this._lView,null,n)}markForCheck(){Ah(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){nc(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ES(t,n){Qo(t,n,n[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=n}}class $T extends oa{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;nc(n[1],n,n[8],!1)}checkNoChanges(){}get context(){return null}}class kh extends ia{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const e=At(n);return new aa(e,this.ngModule)}}function p0(t){const n=[];for(let e in t)t.hasOwnProperty(e)&&n.push({propName:t[e],templateName:e});return n}class JT{constructor(n,e){this.injector=n,this.parentInjector=e}get(n,e,s){s=yl(s);const o=this.injector.get(n,rh,s);return o!==rh||e===rh?o:this.parentInjector.get(n,e,s)}}class aa extends C_{constructor(n,e){super(),this.componentDef=n,this.ngModule=e,this.componentType=n.type,this.selector=function Yx(t){return t.map(zx).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return p0(this.componentDef.inputs)}get outputs(){return p0(this.componentDef.outputs)}create(n,e,s,o){let d=(o=o||this.ngModule)instanceof hr?o:o?.injector;d&&null!==this.componentDef.getStandaloneInjector&&(d=this.componentDef.getStandaloneInjector(d)||d);const C=d?new JT(n,d):n,P=C.get(E_,null);if(null===P)throw new xe(407,!1);const R=C.get(Ex,null),k=P.createRenderer(null,this.componentDef),F=this.componentDef.selectors[0][0]||"div",H=s?function ST(t,n,e){return t.selectRootElement(n,e===Gi.ShadowDom)}(k,s,this.componentDef.encapsulation):Fd(k,F,function XT(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(F)),Y=this.componentDef.onPush?288:272,G=Dh(0,null,null,1,0,null,null,null,null,null),K=Ql(null,G,null,Y,null,null,P,k,R,C,null);let ne,se;dd(K);try{const he=this.componentDef;let Ee,ge=null;he.findHostDirectiveDefs?(Ee=[],ge=new Map,he.findHostDirectiveDefs(he,Ee,ge),Ee.push(he)):Ee=[he];const ke=function KT(t,n){const e=t[1];return t[22]=n,Xs(e,22,2,"#host",null)}(K,H),tt=function ZT(t,n,e,s,o,d,C,P){const R=o[1];!function QT(t,n,e,s){for(const o of t)n.mergedAttrs=zo(n.mergedAttrs,o.hostAttrs);null!==n.mergedAttrs&&(ic(n,n.mergedAttrs,!0),null!==e&&Km(s,e,n))}(s,t,n,C);const k=d.createRenderer(n,e),F=Ql(o,e0(e),null,e.onPush?32:16,o[t.index],t,d,k,P||null,null,null);return R.firstCreatePass&&Mh(R,t,s.length-1),tc(o,F),o[t.index]=F}(ke,H,he,Ee,K,P,k);se=rd(G,22),H&&function tD(t,n,e,s){if(s)gd(t,e,["ng-version",Sx.full]);else{const{attrs:o,classes:d}=function Gx(t){const n=[],e=[];let s=1,o=2;for(;s<t.length;){let d=t[s];if("string"==typeof d)2===o?""!==d&&n.push(d,t[++s]):8===o&&e.push(d);else{if(!Oi(o))break;o=d}s++}return{attrs:n,classes:e}}(n.selectors[0]);o&&gd(t,e,o),d&&d.length>0&&qm(t,e,d.join(" "))}}(k,he,H,s),void 0!==e&&function nD(t,n,e){const s=t.projection=[];for(let o=0;o<n.length;o++){const d=e[o];s.push(null!=d?Array.from(d):null)}}(se,this.ngContentSelectors,e),ne=function eD(t,n,e,s,o,d){const C=En(),P=o[1],R=oi(C,o);o0(P,o,C,e,null,s);for(let F=0;F<e.length;F++)In(Rs(o,P,C.directiveStart+F,C),o);a0(P,o,C),R&&In(R,o);const k=Rs(o,P,C.directiveStart+C.componentOffset,C);if(t[8]=o[8]=k,null!==d)for(const F of d)F(k,n);return Sh(P,C,t),k}(tt,he,Ee,ge,K,[iD]),Eh(G,K,null)}finally{hd()}return new qT(this.componentType,ne,zs(se,K),K,se)}}class qT extends _x{constructor(n,e,s,o,d){super(),this.location=s,this._rootLView=o,this._tNode=d,this.instance=e,this.hostView=this.changeDetectorRef=new $T(o),this.componentType=n}setInput(n,e){const s=this._tNode.inputs;let o;if(null!==s&&(o=s[n])){const d=this._rootLView;Nh(d[1],d,o,n,e),s0(d,this._tNode.index)}}get injector(){return new Ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function iD(){const t=En();Pl(we()[1],t)}function kt(t){let n=function f0(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),e=!0;const s=[t];for(;n;){let o;if(Mi(t))o=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new xe(903,!1);o=n.\u0275dir}if(o){if(e){s.push(o);const C=t;C.inputs=Lh(t.inputs),C.declaredInputs=Lh(t.declaredInputs),C.outputs=Lh(t.outputs);const P=o.hostBindings;P&&aD(t,P);const R=o.viewQuery,k=o.contentQueries;if(R&&sD(t,R),k&&oD(t,k),Hu(t.inputs,o.inputs),Hu(t.declaredInputs,o.declaredInputs),Hu(t.outputs,o.outputs),Mi(o)&&o.data.animation){const F=t.data;F.animation=(F.animation||[]).concat(o.data.animation)}}const d=o.features;if(d)for(let C=0;C<d.length;C++){const P=d[C];P&&P.ngInherit&&P(t),P===kt&&(e=!1)}}n=Object.getPrototypeOf(n)}!function rD(t){let n=0,e=null;for(let s=t.length-1;s>=0;s--){const o=t[s];o.hostVars=n+=o.hostVars,o.hostAttrs=zo(o.hostAttrs,e=zo(e,o.hostAttrs))}}(s)}function Lh(t){return t===ar?{}:t===Pt?[]:t}function sD(t,n){const e=t.viewQuery;t.viewQuery=e?(s,o)=>{n(s,o),e(s,o)}:n}function oD(t,n){const e=t.contentQueries;t.contentQueries=e?(s,o,d)=>{n(s,o,d),e(s,o,d)}:n}function aD(t,n){const e=t.hostBindings;t.hostBindings=e?(s,o)=>{n(s,o),e(s,o)}:n}let sc=null;function ls(){if(!sc){const t=Ut.Symbol;if(t&&t.iterator)sc=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<n.length;++e){const s=n[e];"entries"!==s&&"size"!==s&&Map.prototype[s]===Map.prototype.entries&&(sc=s)}}}return sc}function la(t){return!!Fh(t)&&(Array.isArray(t)||!(t instanceof Map)&&ls()in t)}function Fh(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Wi(t,n,e){return t[n]=e}function ca(t,n){return t[n]}function An(t,n,e){return!Object.is(t[n],e)&&(t[n]=e,!0)}function cs(t,n,e,s){const o=An(t,n,e);return An(t,n+1,s)||o}function oc(t,n,e,s,o){const d=cs(t,n,e,s);return An(t,n+2,o)||d}function vi(t,n,e,s,o,d){const C=cs(t,n,e,s);return cs(t,n+2,o,d)||C}function jt(t,n,e,s){const o=we();return An(o,Os(),n)&&(wt(),Ji(qt(),o,t,n,e,s)),jt}function qs(t,n,e,s,o,d){const P=cs(t,function cr(){return it.lFrame.bindingIndex}(),e,o);return ur(2),P?n+rt(e)+s+rt(o)+d:st}function te(t,n,e,s,o,d,C,P){const R=we(),k=wt(),F=t+22,H=k.firstCreatePass?function _D(t,n,e,s,o,d,C,P,R){const k=n.consts,F=Xs(n,t,4,C||null,Or(k,P));Ph(n,e,F,Or(k,R)),Pl(n,F);const H=F.tViews=Dh(2,F,s,o,d,n.directiveRegistry,n.pipeRegistry,null,n.schemas,k);return null!==n.queries&&(n.queries.template(n,F),H.queries=n.queries.embeddedTView(F)),F}(F,k,R,n,e,s,o,d,C):k.data[F];$i(H,!1);const Y=R[11].createComment("");Hl(k,R,Y,H),In(Y,R),tc(R,R[F]=l0(Y,R,Y,H)),xl(H)&&xh(k,R,H),null!=C&&Th(R,H,P)}function wn(t){return function Ms(t,n){return t[n]}(function c2(){return it.lFrame.contextLView}(),22+t)}function q(t,n,e){const s=we();return An(s,Os(),n)&&function ui(t,n,e,s,o,d,C,P){const R=oi(n,e);let F,k=n.inputs;!P&&null!=k&&(F=k[s])?(Nh(t,e,F,s,o),Sl(n)&&s0(e,n.index)):3&n.type&&(s=function DT(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(s),o=null!=C?C(o,n.value||"",s):o,d.setProperty(R,s,o))}(wt(),qt(),s,t,n,s[11],e,!1),q}function Bh(t,n,e,s,o){const C=o?"class":"style";Nh(t,e,n.inputs[C],C,s)}function de(t,n,e,s){const o=we(),d=wt(),C=22+t,P=o[11],R=o[C]=Fd(P,n,function b2(){return it.lFrame.currentNamespace}()),k=d.firstCreatePass?function yD(t,n,e,s,o,d,C){const P=n.consts,k=Xs(n,t,2,o,Or(P,d));return Ph(n,e,k,Or(P,C)),null!==k.attrs&&ic(k,k.attrs,!1),null!==k.mergedAttrs&&ic(k,k.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,k),k}(C,d,o,0,n,e,s):d.data[C];return $i(k,!0),Km(P,R,k),32!=(32&k.flags)&&Hl(d,o,R,k),0===function r2(){return it.lFrame.elementDepthCount}()&&In(R,o),function s2(){it.lFrame.elementDepthCount++}(),xl(k)&&(xh(d,o,k),Sh(d,k,o)),null!==s&&Th(o,k),de}function ue(){let t=En();od()?ad():(t=t.parent,$i(t,!1));const n=t;!function o2(){it.lFrame.elementDepthCount--}();const e=wt();return e.firstCreatePass&&(Pl(e,t),Qu(t)&&e.queries.elementEnd(t)),null!=n.classesWithoutHost&&function x2(t){return 0!=(8&t.flags)}(n)&&Bh(e,n,we(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function T2(t){return 0!=(16&t.flags)}(n)&&Bh(e,n,we(),n.stylesWithoutHost,!1),ue}function pt(t,n,e,s){return de(t,n,e,s),ue(),pt}function at(t,n,e){const s=we(),o=wt(),d=t+22,C=o.firstCreatePass?function bD(t,n,e,s,o){const d=n.consts,C=Or(d,s),P=Xs(n,t,8,"ng-container",C);return null!==C&&ic(P,C,!0),Ph(n,e,P,Or(d,o)),null!==n.queries&&n.queries.elementStart(n,P),P}(d,o,s,n,e):o.data[d];$i(C,!0);const P=s[d]=s[11].createComment("");return Hl(o,s,P,C),In(P,s),xl(C)&&(xh(o,s,C),Sh(o,C,s)),null!=e&&Th(s,C),at}function lt(){let t=En();const n=wt();return od()?ad():(t=t.parent,$i(t,!1)),n.firstCreatePass&&(Pl(n,t),Qu(t)&&n.queries.elementEnd(t)),lt}function nt(t,n,e){return at(t,n,e),lt(),nt}function ct(){return we()}function ua(t){return!!t&&"function"==typeof t.then}const Vh=function D0(t){return!!t&&"function"==typeof t.subscribe};function Ae(t,n,e,s){const o=we(),d=wt(),C=En();return function M0(t,n,e,s,o,d,C,P){const R=xl(s),F=t.firstCreatePass&&u0(t),H=n[8],Y=c0(n);let G=!0;if(3&s.type||P){const se=oi(s,n),he=P?P(se):se,Ee=Y.length,ge=P?tt=>P(dn(tt[s.index])):s.index;let ke=null;if(!P&&R&&(ke=function CD(t,n,e,s){const o=t.cleanup;if(null!=o)for(let d=0;d<o.length-1;d+=2){const C=o[d];if(C===e&&o[d+1]===s){const P=n[7],R=o[d+2];return P.length>R?P[R]:null}"string"==typeof C&&(d+=2)}return null}(t,n,o,s.index)),null!==ke)(ke.__ngLastListenerFn__||ke).__ngNextListenerFn__=d,ke.__ngLastListenerFn__=d,G=!1;else{d=I0(s,n,H,d,!1);const tt=e.listen(he,o,d);Y.push(d,tt),F&&F.push(o,ge,Ee,Ee+1)}}else d=I0(s,n,H,d,!1);const K=s.outputs;let ne;if(G&&null!==K&&(ne=K[o])){const se=ne.length;if(se)for(let he=0;he<se;he+=2){const Ct=n[ne[he]][ne[he+1]].subscribe(d),Si=Y.length;Y.push(d,Ct),F&&F.push(o,s.index,Si,-(Si+1))}}}(d,o,o[11],C,t,n,0,s),Ae}function O0(t,n,e,s){try{return!1!==e(s)}catch(o){return h0(t,o),!1}}function I0(t,n,e,s,o){return function d(C){if(C===Function)return s;Ah(t.componentOffset>-1?ai(t.index,n):n);let R=O0(n,0,s,C),k=d.__ngNextListenerFn__;for(;k;)R=O0(n,0,k,C)&&R,k=k.__ngNextListenerFn__;return o&&!1===R&&(C.preventDefault(),C.returnValue=!1),R}}function J(t=1){return function f2(t){return(it.lFrame.contextLView=function g2(t,n){for(;t>0;)n=n[15],t--;return n}(t,it.lFrame.contextLView))[8]}(t)}function wD(t,n){let e=null;const s=function Vx(t){const n=t.attrs;if(null!=n){const e=n.indexOf(5);if(0==(1&e))return n[e+1]}return null}(t);for(let o=0;o<n.length;o++){const d=n[o];if("*"!==d){if(null===s?P_(t,d,!0):Ux(s,d))return o}else e=o}return e}function ac(t){const n=we()[16][6];if(!n.projection){const s=n.projection=$o(t?t.length:1,null),o=s.slice();let d=n.child;for(;null!==d;){const C=t?wD(d,t):0;null!==C&&(o[C]?o[C].projectionNext=d:s[C]=d,o[C]=d),d=d.next}}}function da(t,n=0,e){const s=we(),o=wt(),d=Xs(o,22+t,16,null,e||null);null===d.projection&&(d.projection=n),ad(),32!=(32&d.flags)&&function IS(t,n,e){Wm(n[11],0,n,e,jm(t,e,n),Ym(e.parent||n[6],e,n))}(o,s,d)}function H0(t,n,e,s,o){const d=t[e+1],C=null===n;let P=s?Ii(d):fr(d),R=!1;for(;0!==P&&(!1===R||C);){const F=t[P+1];xD(t[P],n)&&(R=!0,t[P+1]=s?fh(F):hh(F)),P=s?Ii(F):fr(F)}R&&(t[e+1]=s?hh(d):fh(d))}function xD(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Vs(t,n)>=0}const _n={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function U0(t){return t.substring(_n.key,_n.keyEnd)}function TD(t){return t.substring(_n.value,_n.valueEnd)}function z0(t,n){const e=_n.textEnd;return e===n?-1:(n=_n.keyEnd=function MD(t,n,e){for(;n<e&&t.charCodeAt(n)>32;)n++;return n}(t,_n.key=n,e),io(t,n,e))}function Y0(t,n){const e=_n.textEnd;let s=_n.key=io(t,n,e);return e===s?-1:(s=_n.keyEnd=function OD(t,n,e){let s;for(;n<e&&(45===(s=t.charCodeAt(n))||95===s||(-33&s)>=65&&(-33&s)<=90||s>=48&&s<=57);)n++;return n}(t,s,e),s=$0(t,s,e),s=_n.value=io(t,s,e),s=_n.valueEnd=function ID(t,n,e){let s=-1,o=-1,d=-1,C=n,P=C;for(;C<e;){const R=t.charCodeAt(C++);if(59===R)return P;34===R||39===R?P=C=X0(t,R,C,e):n===C-4&&85===d&&82===o&&76===s&&40===R?P=C=X0(t,41,C,e):R>32&&(P=C),d=o,o=s,s=-33&R}return P}(t,s,e),$0(t,s,e))}function G0(t){_n.key=0,_n.keyEnd=0,_n.value=0,_n.valueEnd=0,_n.textEnd=t.length}function io(t,n,e){for(;n<e&&t.charCodeAt(n)<=32;)n++;return n}function $0(t,n,e,s){return(n=io(t,n,e))<e&&n++,n}function X0(t,n,e,s){let o=-1,d=e;for(;d<s;){const C=t.charCodeAt(d++);if(C==n&&92!==o)return d;o=92==C&&92===o?0:C}throw new Error}function lc(t,n,e){return Ai(t,n,e,!1),lc}function kr(t,n){return Ai(t,n,null,!0),kr}function Rn(t){Ri(q0,AD,t,!1)}function AD(t,n){for(let e=function PD(t){return G0(t),Y0(t,io(t,0,_n.textEnd))}(n);e>=0;e=Y0(n,e))q0(t,U0(n),TD(n))}function Kt(t){Ri(ci,qi,t,!0)}function qi(t,n){for(let e=function DD(t){return G0(t),z0(t,io(t,0,_n.textEnd))}(n);e>=0;e=z0(n,e))ci(t,U0(n),!0)}function Ai(t,n,e,s){const o=we(),d=wt(),C=ur(2);d.firstUpdatePass&&W0(d,t,C,s),n!==st&&An(o,C,n)&&K0(d,d.data[Un()],o,o[11],t,o[C+1]=function VD(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=Bt(Ar(t)))),t}(n,e),s,C)}function Ri(t,n,e,s){const o=wt(),d=ur(2);o.firstUpdatePass&&W0(o,null,d,s);const C=we();if(e!==st&&An(C,d,e)){const P=o.data[Un()];if(Q0(P,s)&&!J0(o,d)){let R=s?P.classesWithoutHost:P.stylesWithoutHost;null!==R&&(e=Uu(R,e||"")),Bh(o,P,C,e,s)}else!function BD(t,n,e,s,o,d,C,P){o===st&&(o=Pt);let R=0,k=0,F=0<o.length?o[0]:null,H=0<d.length?d[0]:null;for(;null!==F||null!==H;){const Y=R<o.length?o[R+1]:void 0,G=k<d.length?d[k+1]:void 0;let ne,K=null;F===H?(R+=2,k+=2,Y!==G&&(K=H,ne=G)):null===H||null!==F&&F<H?(R+=2,K=F):(k+=2,K=H,ne=G),null!==K&&K0(t,n,e,s,K,ne,C,P),F=R<o.length?o[R]:null,H=k<d.length?d[k]:null}}(o,P,C,C[11],C[d+1],C[d+1]=function FD(t,n,e){if(null==e||""===e)return Pt;const s=[],o=Ar(e);if(Array.isArray(o))for(let d=0;d<o.length;d++)t(s,o[d],!0);else if("object"==typeof o)for(const d in o)o.hasOwnProperty(d)&&t(s,d,o[d]);else"string"==typeof o&&n(s,o);return s}(t,n,e),s,d)}}function J0(t,n){return n>=t.expandoStartIndex}function W0(t,n,e,s){const o=t.data;if(null===o[e+1]){const d=o[Un()],C=J0(t,e);Q0(d,s)&&null===n&&!C&&(n=!1),n=function RD(t,n,e,s){const o=function cd(t){const n=it.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let d=s?n.residualClasses:n.residualStyles;if(null===o)0===(s?n.classBindings:n.styleBindings)&&(e=ha(e=Hh(null,t,n,e,s),n.attrs,s),d=null);else{const C=n.directiveStylingLast;if(-1===C||t[C]!==o)if(e=Hh(o,t,n,e,s),null===d){let R=function ND(t,n,e){const s=e?n.classBindings:n.styleBindings;if(0!==fr(s))return t[Ii(s)]}(t,n,s);void 0!==R&&Array.isArray(R)&&(R=Hh(null,t,n,R[1],s),R=ha(R,n.attrs,s),function kD(t,n,e,s){t[Ii(e?n.classBindings:n.styleBindings)]=s}(t,n,s,R))}else d=function LD(t,n,e){let s;const o=n.directiveEnd;for(let d=1+n.directiveStylingLast;d<o;d++)s=ha(s,t[d].hostAttrs,e);return ha(s,n.attrs,e)}(t,n,s)}return void 0!==d&&(s?n.residualClasses=d:n.residualStyles=d),e}(o,d,n,s),function ED(t,n,e,s,o,d){let C=d?n.classBindings:n.styleBindings,P=Ii(C),R=fr(C);t[s]=e;let F,k=!1;if(Array.isArray(e)){const H=e;F=H[1],(null===F||Vs(H,F)>0)&&(k=!0)}else F=e;if(o)if(0!==R){const Y=Ii(t[P+1]);t[s+1]=ql(Y,P),0!==Y&&(t[Y+1]=ph(t[Y+1],s)),t[P+1]=function uT(t,n){return 131071&t|n<<17}(t[P+1],s)}else t[s+1]=ql(P,0),0!==P&&(t[P+1]=ph(t[P+1],s)),P=s;else t[s+1]=ql(R,0),0===P?P=s:t[R+1]=ph(t[R+1],s),R=s;k&&(t[s+1]=hh(t[s+1])),H0(t,F,s,!0),H0(t,F,s,!1),function SD(t,n,e,s,o){const d=o?t.residualClasses:t.residualStyles;null!=d&&"string"==typeof n&&Vs(d,n)>=0&&(e[s+1]=fh(e[s+1]))}(n,F,t,s,d),C=ql(P,R),d?n.classBindings=C:n.styleBindings=C}(o,d,n,e,C,s)}}function Hh(t,n,e,s,o){let d=null;const C=e.directiveEnd;let P=e.directiveStylingLast;for(-1===P?P=e.directiveStart:P++;P<C&&(d=n[P],s=ha(s,d.hostAttrs,o),d!==t);)P++;return null!==t&&(e.directiveStylingLast=P),s}function ha(t,n,e){const s=e?1:2;let o=-1;if(null!==n)for(let d=0;d<n.length;d++){const C=n[d];"number"==typeof C?o=C:o===s&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ci(t,C,!!e||n[++d]))}return void 0===t?null:t}function q0(t,n,e){ci(t,n,Ar(e))}function K0(t,n,e,s,o,d,C,P){if(!(3&n.type))return;const R=t.data,k=R[P+1];cc(function Y_(t){return 1==(1&t)}(k)?Z0(R,n,e,o,fr(k),C):void 0)||(cc(d)||function z_(t){return 2==(2&t)}(k)&&(d=Z0(R,null,e,o,P,C)),function RS(t,n,e,s,o){if(n)o?t.addClass(e,s):t.removeClass(e,s);else{let d=-1===s.indexOf("-")?void 0:Qn.DashCase;null==o?t.removeStyle(e,s,d):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),d|=Qn.Important),t.setStyle(e,s,o,d))}}(s,C,Tl(Un(),e),o,d))}function Z0(t,n,e,s,o,d){const C=null===n;let P;for(;o>0;){const R=t[o],k=Array.isArray(R),F=k?R[1]:R,H=null===F;let Y=e[o+1];Y===st&&(Y=H?Pt:void 0);let G=H?Ed(Y,s):F===s?Y:void 0;if(k&&!cc(G)&&(G=Ed(R,s)),cc(G)&&(P=G,C))return P;const K=t[o+1];o=C?Ii(K):fr(K)}if(null!==n){let R=d?n.residualClasses:n.residualStyles;null!=R&&(P=Ed(R,s))}return P}function cc(t){return void 0!==t}function Q0(t,n){return 0!=(t.flags&(n?8:16))}function qe(t,n=""){const e=we(),s=wt(),o=t+22,d=s.firstCreatePass?Xs(s,o,1,n,null):s.data[o],C=e[o]=function Ld(t,n){return t.createText(n)}(e[11],n);Hl(s,e,C,d),$i(d,!1)}function Zt(t){return Ni("",t,""),Zt}function Ni(t,n,e){const s=we(),o=function Ws(t,n,e,s){return An(t,Os(),e)?n+rt(e)+s:st}(s,t,n,e);return o!==st&&gr(s,Un(),o),Ni}function Uh(t,n,e,s,o){const d=we(),C=qs(d,t,n,e,s,o);return C!==st&&gr(d,Un(),C),Uh}const so="en-US";let bv=so;function Gh(t,n,e,s,o){if(t=Ze(t),Array.isArray(t))for(let d=0;d<t.length;d++)Gh(t[d],n,e,s,o);else{const d=wt(),C=we();let P=as(t)?t:Ze(t.provide),R=b_(t);const k=En(),F=1048575&k.providerIndexes,H=k.directiveStart,Y=k.providerIndexes>>20;if(as(t)||!t.multi){const G=new Ho(R,o,ae),K=Xh(P,n,o?F:F+Y,H);-1===K?(yd(Al(k,C),d,P),$h(d,t,n.length),n.push(P),k.directiveStart++,k.directiveEnd++,o&&(k.providerIndexes+=1048576),e.push(G),C.push(G)):(e[K]=G,C[K]=G)}else{const G=Xh(P,n,F+Y,H),K=Xh(P,n,F,F+Y),ne=G>=0&&e[G],se=K>=0&&e[K];if(o&&!se||!o&&!ne){yd(Al(k,C),d,P);const he=function iM(t,n,e,s,o){const d=new Ho(t,e,ae);return d.multi=[],d.index=n,d.componentProviders=0,Gv(d,o,s&&!e),d}(o?nM:tM,e.length,o,s,R);!o&&se&&(e[K].providerFactory=he),$h(d,t,n.length,0),n.push(P),k.directiveStart++,k.directiveEnd++,o&&(k.providerIndexes+=1048576),e.push(he),C.push(he)}else $h(d,t,G>-1?G:K,Gv(e[o?K:G],R,!o&&s));!o&&s&&se&&e[K].componentProviders++}}}function $h(t,n,e,s){const o=as(n),d=function ux(t){return!!t.useClass}(n);if(o||d){const R=(d?Ze(n.useClass):n).prototype.ngOnDestroy;if(R){const k=t.destroyHooks||(t.destroyHooks=[]);if(!o&&n.multi){const F=k.indexOf(e);-1===F?k.push(e,[s,R]):k[F+1].push(s,R)}else k.push(e,R)}}}function Gv(t,n,e){return e&&t.componentProviders++,t.multi.push(n)-1}function Xh(t,n,e,s){for(let o=e;o<s;o++)if(n[o]===t)return o;return-1}function tM(t,n,e,s){return Jh(this.multi,[])}function nM(t,n,e,s){const o=this.multi;let d;if(this.providerFactory){const C=this.providerFactory.componentProviders,P=Rs(e,e[1],this.providerFactory.index,s);d=P.slice(0,C),Jh(o,d);for(let R=C;R<P.length;R++)d.push(P[R])}else d=[],Jh(o,d);return d}function Jh(t,n){for(let e=0;e<t.length;e++)n.push((0,t[e])());return n}function Mt(t,n=[]){return e=>{e.providersResolver=(s,o)=>function eM(t,n,e){const s=wt();if(s.firstCreatePass){const o=Mi(t);Gh(e,s.data,s.blueprint,o,!0),Gh(n,s.data,s.blueprint,o,!1)}}(s,o?o(t):t,n)}}class ds{}class $v{}class Xv extends ds{constructor(n,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new kh(this);const s=ri(n);this._bootstrapComponents=pr(s.bootstrap),this._r3Injector=k_(n,e,[{provide:ds,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],Bt(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Wh extends $v{constructor(n){super(),this.moduleType=n}create(n){return new Xv(this.moduleType,n)}}class sM extends ds{constructor(n,e,s){super(),this.componentFactoryResolver=new kh(this),this.instance=null;const o=new y_([...n,{provide:ds,useValue:this},{provide:ia,useValue:this.componentFactoryResolver}],e||Jl(),s,new Set(["environment"]));this.injector=o,o.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function fc(t,n,e=null){return new sM(t,n,e).injector}let oM=(()=>{class t{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const s=g_(0,e.type),o=s.length>0?fc([s],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,o)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=We({token:t,providedIn:"environment",factory:()=>new t(je(hr))}),t})();function Jv(t){t.getStandaloneInjector=n=>n.get(oM).getOrCreateStandaloneInjector(t)}function Lr(t,n,e){const s=Hn()+t,o=we();return o[s]===st?Wi(o,s,e?n.call(e):n()):ca(o,s)}function ut(t,n,e,s){return function r1(t,n,e,s,o,d){const C=n+e;return An(t,C,o)?Wi(t,C+1,d?s.call(d,o):s(o)):ya(t,C+1)}(we(),Hn(),t,n,e,s)}function sn(t,n,e,s,o){return function s1(t,n,e,s,o,d,C){const P=n+e;return cs(t,P,o,d)?Wi(t,P+2,C?s.call(C,o,d):s(o,d)):ya(t,P+2)}(we(),Hn(),t,n,e,s,o)}function mr(t,n,e,s,o,d){return function o1(t,n,e,s,o,d,C,P){const R=n+e;return oc(t,R,o,d,C)?Wi(t,R+3,P?s.call(P,o,d,C):s(o,d,C)):ya(t,R+3)}(we(),Hn(),t,n,e,s,o,d)}function va(t,n,e,s,o,d,C){return function a1(t,n,e,s,o,d,C,P,R){const k=n+e;return vi(t,k,o,d,C,P)?Wi(t,k+4,R?s.call(R,o,d,C,P):s(o,d,C,P)):ya(t,k+4)}(we(),Hn(),t,n,e,s,o,d,C)}function gc(t,n,e,s,o,d,C,P){const R=Hn()+t,k=we(),F=vi(k,R,e,s,o,d);return An(k,R+4,C)||F?Wi(k,R+5,P?n.call(P,e,s,o,d,C):n(e,s,o,d,C)):ca(k,R+5)}function oo(t,n,e,s,o,d,C,P,R){const k=Hn()+t,F=we(),H=vi(F,k,e,s,o,d);return cs(F,k+4,C,P)||H?Wi(F,k+6,R?n.call(R,e,s,o,d,C,P):n(e,s,o,d,C,P)):ca(F,k+6)}function n1(t,n,e,s){return function l1(t,n,e,s,o,d){let C=n+e,P=!1;for(let R=0;R<o.length;R++)An(t,C++,o[R])&&(P=!0);return P?Wi(t,C,s.apply(d,o)):ya(t,C)}(we(),Hn(),t,n,e,s)}function ya(t,n){const e=t[n];return e===st?void 0:e}function Kh(t){return n=>{setTimeout(t,void 0,n)}}const Te=class EM extends Se{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,e,s){let o=n,d=e||(()=>null),C=s;if(n&&"object"==typeof n){const R=n;o=R.next?.bind(R),d=R.error?.bind(R),C=R.complete?.bind(R)}this.__isAsync&&(d=Kh(d),o&&(o=Kh(o)),C&&(C=Kh(C)));const P=super.subscribe({next:o,error:d,complete:C});return n instanceof p&&n.add(P),P}};function SM(){return this._results[ls()]()}class Zh{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ls(),s=Zh.prototype;s[e]||(s[e]=SM)}get changes(){return this._changes||(this._changes=new Te)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,e){return this._results.reduce(n,e)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,e){const s=this;s.dirty=!1;const o=li(n);(this._changesDetected=!function L2(t,n,e){if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++){let o=t[s],d=n[s];if(e&&(o=e(o),d=e(d)),d!==o)return!1}return!0}(s._results,o,e))&&(s._results=o,s.length=o.length,s.last=o[this.length-1],s.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ki=(()=>{class t{}return t.__NG_ELEMENT_ID__=DM,t})();const xM=ki,TM=class extends xM{constructor(n,e,s){super(),this._declarationLView=n,this._declarationTContainer=e,this.elementRef=s}createEmbeddedView(n,e){const s=this._declarationTContainer.tViews,o=Ql(this._declarationLView,s,n,16,null,s.declTNode,null,null,null,null,e||null);o[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(o[19]=C.createEmbeddedView(s)),Eh(s,o,n),new oa(o)}};function DM(){return mc(En(),we())}function mc(t,n){return 4&t.type?new TM(n,t,zs(t,n)):null}let Li=(()=>{class t{}return t.__NG_ELEMENT_ID__=PM,t})();function PM(){return d1(En(),we())}const MM=Li,c1=class extends MM{constructor(n,e,s){super(),this._lContainer=n,this._hostTNode=e,this._hostLView=s}get element(){return zs(this._hostTNode,this._hostLView)}get injector(){return new Ns(this._hostTNode,this._hostLView)}get parentInjector(){const n=Rl(this._hostTNode,this._hostLView);if(tm(n)){const e=As(n,this._hostLView),s=Is(n);return new Ns(e[1].data[s+8],e)}return new Ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const e=u1(this._lContainer);return null!==e&&e[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,e,s){let o,d;"number"==typeof s?o=s:null!=s&&(o=s.index,d=s.injector);const C=n.createEmbeddedView(e||{},d);return this.insert(C,o),C}createComponent(n,e,s,o,d){const C=n&&!function Go(t){return"function"==typeof t}(n);let P;if(C)P=e;else{const H=e||{};P=H.index,s=H.injector,o=H.projectableNodes,d=H.environmentInjector||H.ngModuleRef}const R=C?n:new aa(At(n)),k=s||this.parentInjector;if(!d&&null==R.ngModule){const Y=(C?k:this.parentInjector).get(hr,null);Y&&(d=Y)}const F=R.create(k,o,void 0,d);return this.insert(F.hostView,P),F}insert(n,e){const s=n._lView,o=s[1];if(function n2(t){return Pi(t[3])}(s)){const F=this.indexOf(n);if(-1!==F)this.detach(F);else{const H=s[3],Y=new c1(H,H[6],H[3]);Y.detach(Y.indexOf(n))}}const d=this._adjustIndex(e),C=this._lContainer;!function xS(t,n,e,s){const o=10+s,d=e.length;s>0&&(e[o-1][4]=n),s<d-10?(n[4]=e[o],hm(e,10+s,n)):(e.push(n),n[4]=null),n[3]=e;const C=n[17];null!==C&&e!==C&&function TS(t,n){const e=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===e?t[9]=[n]:e.push(n)}(C,n);const P=n[19];null!==P&&P.insertView(t),n[2]|=64}(o,s,C,d);const P=Hd(d,C),R=s[11],k=jl(R,C[7]);return null!==k&&function wS(t,n,e,s,o,d){s[0]=o,s[6]=n,Qo(t,s,e,1,o,d)}(o,C[6],R,s,k,P),n.attachToViewContainerRef(),hm(Qh(C),d,n),n}move(n,e){return this.insert(n,e)}indexOf(n){const e=u1(this._lContainer);return null!==e?e.indexOf(n):-1}remove(n){const e=this._adjustIndex(n,-1),s=Bd(this._lContainer,e);s&&(Ll(Qh(this._lContainer),e),Vm(s[1],s))}detach(n){const e=this._adjustIndex(n,-1),s=Bd(this._lContainer,e);return s&&null!=Ll(Qh(this._lContainer),e)?new oa(s):null}_adjustIndex(n,e=0){return n??this.length+e}};function u1(t){return t[8]}function Qh(t){return t[8]||(t[8]=[])}function d1(t,n){let e;const s=n[t.index];if(Pi(s))e=s;else{let o;if(8&t.type)o=dn(s);else{const d=n[11];o=d.createComment("");const C=oi(t,n);ss(d,jl(d,C),o,function OS(t,n){return t.nextSibling(n)}(d,C),!1)}n[t.index]=e=l0(s,n,o,t),tc(n,e)}return new c1(e,t,n)}class ep{constructor(n){this.queryList=n,this.matches=null}clone(){return new ep(this.queryList)}setDirty(){this.queryList.setDirty()}}class tp{constructor(n=[]){this.queries=n}createEmbeddedView(n){const e=n.queries;if(null!==e){const s=null!==n.contentQueries?n.contentQueries[0]:e.length,o=[];for(let d=0;d<s;d++){const C=e.getByIndex(d);o.push(this.queries[C.indexInDeclarationView].clone())}return new tp(o)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let e=0;e<this.queries.length;e++)null!==m1(n,e).matches&&this.queries[e].setDirty()}}class h1{constructor(n,e,s=null){this.predicate=n,this.flags=e,this.read=s}}class np{constructor(n=[]){this.queries=n}elementStart(n,e){for(let s=0;s<this.queries.length;s++)this.queries[s].elementStart(n,e)}elementEnd(n){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(n)}embeddedTView(n){let e=null;for(let s=0;s<this.length;s++){const o=null!==e?e.length:0,d=this.getByIndex(s).embeddedTView(n,o);d&&(d.indexInDeclarationView=s,null!==e?e.push(d):e=[d])}return null!==e?new np(e):null}template(n,e){for(let s=0;s<this.queries.length;s++)this.queries[s].template(n,e)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class ip{constructor(n,e=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(n,e){this.isApplyingToNode(e)&&this.matchTNode(n,e)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,e){this.elementStart(n,e)}embeddedTView(n,e){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,e),new ip(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let s=n.parent;for(;null!==s&&8&s.type&&s.index!==e;)s=s.parent;return e===(null!==s?s.index:-1)}return this._appliesToNextNode}matchTNode(n,e){const s=this.metadata.predicate;if(Array.isArray(s))for(let o=0;o<s.length;o++){const d=s[o];this.matchTNodeWithReadOption(n,e,AM(e,d)),this.matchTNodeWithReadOption(n,e,Nl(e,n,d,!1,!1))}else s===ki?4&e.type&&this.matchTNodeWithReadOption(n,e,-1):this.matchTNodeWithReadOption(n,e,Nl(e,n,s,!1,!1))}matchTNodeWithReadOption(n,e,s){if(null!==s){const o=this.metadata.read;if(null!==o)if(o===Wt||o===Li||o===ki&&4&e.type)this.addMatch(e.index,-2);else{const d=Nl(e,n,o,!1,!1);null!==d&&this.addMatch(e.index,d)}else this.addMatch(e.index,s)}}addMatch(n,e){null===this.matches?this.matches=[n,e]:this.matches.push(n,e)}}function AM(t,n){const e=t.localNames;if(null!==e)for(let s=0;s<e.length;s+=2)if(e[s]===n)return e[s+1];return null}function NM(t,n,e,s){return-1===e?function RM(t,n){return 11&t.type?zs(t,n):4&t.type?mc(t,n):null}(n,t):-2===e?function kM(t,n,e){return e===Wt?zs(n,t):e===ki?mc(n,t):e===Li?d1(n,t):void 0}(t,n,s):Rs(t,t[1],e,n)}function p1(t,n,e,s){const o=n[19].queries[s];if(null===o.matches){const d=t.data,C=e.matches,P=[];for(let R=0;R<C.length;R+=2){const k=C[R];P.push(k<0?null:NM(n,d[k],C[R+1],e.metadata.read))}o.matches=P}return o.matches}function rp(t,n,e,s){const o=t.queries.getByIndex(e),d=o.matches;if(null!==d){const C=p1(t,n,o,e);for(let P=0;P<d.length;P+=2){const R=d[P];if(R>0)s.push(C[P/2]);else{const k=d[P+1],F=n[-R];for(let H=10;H<F.length;H++){const Y=F[H];Y[17]===Y[3]&&rp(Y[1],Y,k,s)}if(null!==F[9]){const H=F[9];for(let Y=0;Y<H.length;Y++){const G=H[Y];rp(G[1],G,k,s)}}}}}return s}function St(t){const n=we(),e=wt(),s=Gg();ud(s+1);const o=m1(e,s);if(t.dirty&&function t2(t){return 4==(4&t[2])}(n)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const d=o.crossesNgTemplate?rp(e,n,s,[]):p1(e,n,o,s);t.reset(d,Cx),t.notifyOnChanges()}return!0}return!1}function Yt(t,n,e){const s=wt();s.firstCreatePass&&(g1(s,new h1(t,n,e),-1),2==(2&n)&&(s.staticViewQueries=!0)),f1(s,we(),n)}function Fr(t,n,e,s){const o=wt();if(o.firstCreatePass){const d=En();g1(o,new h1(n,e,s),d.index),function FM(t,n){const e=t.contentQueries||(t.contentQueries=[]);n!==(e.length?e[e.length-1]:-1)&&e.push(t.queries.length-1,n)}(o,t),2==(2&e)&&(o.staticContentQueries=!0)}f1(o,we(),e)}function xt(){return function LM(t,n){return t[19].queries[n].queryList}(we(),Gg())}function f1(t,n,e){const s=new Zh(4==(4&e));t0(t,n,s,s.destroy),null===n[19]&&(n[19]=new tp),n[19].queries.push(new ep(s))}function g1(t,n,e){null===t.queries&&(t.queries=new np),t.queries.track(new ip(n,e))}function m1(t,n){return t.queries.getByIndex(n)}function Ki(t,n){return mc(t,n)}function vc(...t){}const yc=new Ve("Application Initializer");let bc=(()=>{class t{constructor(e){this.appInits=e,this.resolve=vc,this.reject=vc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,o)=>{this.resolve=s,this.reject=o})}runInitializers(){if(this.initialized)return;const e=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const d=this.appInits[o]();if(ua(d))e.push(d);else if(Vh(d)){const C=new Promise((P,R)=>{d.subscribe({complete:P,error:R})});e.push(C)}}Promise.all(e).then(()=>{s()}).catch(o=>{this.reject(o)}),0===e.length&&s(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(je(yc,8))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const wa=new Ve("AppId",{providedIn:"root",factory:function k1(){return`${cp()}${cp()}${cp()}`}});function cp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const L1=new Ve("Platform Initializer"),up=new Ve("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),F1=new Ve("appBootstrapListener");let iO=(()=>{class t{log(e){console.log(e)}warn(e){console.warn(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const _r=new Ve("LocaleId",{providedIn:"root",factory:()=>Dt(_r,Qe.Optional|Qe.SkipSelf)||function rO(){return typeof $localize<"u"&&$localize.locale||so}()});class oO{constructor(n,e){this.ngModuleFactory=n,this.componentFactories=e}}let dp=(()=>{class t{compileModuleSync(e){return new Wh(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const s=this.compileModuleSync(e),d=pr(ri(e).declarations).reduce((C,P)=>{const R=At(P);return R&&C.push(new aa(R)),C},[]);return new oO(s,d)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const cO=(()=>Promise.resolve(0))();function hp(t){typeof Zone>"u"?cO.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Gt{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!s&&e,o.shouldCoalesceRunChangeDetection=s,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function uO(){let t=Ut.requestAnimationFrame,n=Ut.cancelAnimationFrame;if(typeof Zone<"u"&&t&&n){const e=t[Zone.__symbol__("OriginalDelegate")];e&&(t=e);const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function pO(t){const n=()=>{!function hO(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ut,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,fp(t),t.isCheckStableRunning=!0,pp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),fp(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,s,o,d,C,P)=>{try{return j1(t),e.invokeTask(o,d,C,P)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||t.shouldCoalesceRunChangeDetection)&&n(),H1(t)}},onInvoke:(e,s,o,d,C,P,R)=>{try{return j1(t),e.invoke(o,d,C,P,R)}finally{t.shouldCoalesceRunChangeDetection&&n(),H1(t)}},onHasTask:(e,s,o,d)=>{e.hasTask(o,d),s===o&&("microTask"==d.change?(t._hasPendingMicrotasks=d.microTask,fp(t),pp(t)):"macroTask"==d.change&&(t.hasPendingMacrotasks=d.macroTask))},onHandleError:(e,s,o,d)=>(e.handleError(o,d),t.runOutsideAngular(()=>t.onError.emit(d)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gt.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Gt.isInAngularZone())throw new xe(909,!1)}run(n,e,s){return this._inner.run(n,e,s)}runTask(n,e,s,o){const d=this._inner,C=d.scheduleEventTask("NgZoneEvent: "+o,n,dO,vc,vc);try{return d.runTask(C,e,s)}finally{d.cancelTask(C)}}runGuarded(n,e,s){return this._inner.runGuarded(n,e,s)}runOutsideAngular(n){return this._outer.run(n)}}const dO={};function pp(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fp(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function j1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function H1(t){t._nesting--,pp(t)}class fO{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Te,this.onMicrotaskEmpty=new Te,this.onStable=new Te,this.onError=new Te}run(n,e,s){return n.apply(e,s)}runGuarded(n,e,s){return n.apply(e,s)}runOutsideAngular(n){return n()}runTask(n,e,s,o){return n.apply(e,s)}}const U1=new Ve(""),Cc=new Ve("");let _p,gp=(()=>{class t{constructor(e,s,o){this._ngZone=e,this.registry=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,_p||(function gO(t){_p=t}(o),o.addToWindow(s)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gt.assertNotInAngularZone(),hp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hp(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(s=>!s.updateCb||!s.updateCb(e)||(clearTimeout(s.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,s,o){let d=-1;s&&s>0&&(d=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==d),e(this._didWork,this.getPendingTasks())},s)),this._callbacks.push({doneCb:e,timeoutId:d,updateCb:o})}whenStable(e,s,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,s,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,s,o){return[]}}return t.\u0275fac=function(e){return new(e||t)(je(Gt),je(mp),je(Cc))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})(),mp=(()=>{class t{constructor(){this._applications=new Map}registerApplication(e,s){this._applications.set(e,s)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,s=!0){return _p?.findTestabilityInTree(this,e,s)??null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Br=null;const z1=new Ve("AllowMultipleToken"),vp=new Ve("PlatformDestroyListeners");class Y1{constructor(n,e){this.name=n,this.token=e}}function $1(t,n,e=[]){const s=`Platform: ${n}`,o=new Ve(s);return(d=[])=>{let C=yp();if(!C||C.injector.get(z1,!1)){const P=[...e,...d,{provide:o,useValue:!0}];t?t(P):function vO(t){if(Br&&!Br.get(z1,!1))throw new xe(400,!1);Br=t;const n=t.get(J1);(function G1(t){const n=t.get(L1,null);n&&n.forEach(e=>e())})(t)}(function X1(t=[],n){return _i.create({name:n,providers:[{provide:eh,useValue:"platform"},{provide:vp,useValue:new Set([()=>Br=null])},...t]})}(P,s))}return function bO(t){const n=yp();if(!n)throw new xe(401,!1);return n}()}}function yp(){return Br?.get(J1)??null}let J1=(()=>{class t{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,s){const o=function q1(t,n){let e;return e="noop"===t?new fO:("zone.js"===t?void 0:t)||new Gt(n),e}(s?.ngZone,function W1(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(s)),d=[{provide:Gt,useValue:o}];return o.run(()=>{const C=_i.create({providers:d,parent:this.injector,name:e.moduleType.name}),P=e.create(C),R=P.injector.get(Ys,null);if(!R)throw new xe(402,!1);return o.runOutsideAngular(()=>{const k=o.onError.subscribe({next:F=>{R.handleError(F)}});P.onDestroy(()=>{Ec(this._modules,P),k.unsubscribe()})}),function K1(t,n,e){try{const s=e();return ua(s)?s.catch(o=>{throw n.runOutsideAngular(()=>t.handleError(o)),o}):s}catch(s){throw n.runOutsideAngular(()=>t.handleError(s)),s}}(R,o,()=>{const k=P.injector.get(bc);return k.runInitializers(),k.donePromise.then(()=>(function Cv(t){ii(t,"Expected localeId to be defined"),"string"==typeof t&&(bv=t.toLowerCase().replace(/_/g,"-"))}(P.injector.get(_r,so)||so),this._moduleDoBootstrap(P),P))})})}bootstrapModule(e,s=[]){const o=Z1({},s);return function mO(t,n,e){const s=new Wh(e);return Promise.resolve(s)}(0,0,e).then(d=>this.bootstrapModuleFactory(d,o))}_moduleDoBootstrap(e){const s=e.injector.get(wc);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(o=>s.bootstrap(o));else{if(!e.instance.ngDoBootstrap)throw new xe(403,!1);e.instance.ngDoBootstrap(s)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s());const e=this._injector.get(vp,null);e&&(e.forEach(s=>s()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(je(_i))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function Z1(t,n){return Array.isArray(n)?n.reduce(Z1,t):{...t,...n}}let wc=(()=>{class t{constructor(e,s,o){this._zone=e,this._injector=s,this._exceptionHandler=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const d=new ie(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),C=new ie(P=>{let R;this._zone.runOutsideAngular(()=>{R=this._zone.onStable.subscribe(()=>{Gt.assertNotInAngularZone(),hp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const k=this._zone.onUnstable.subscribe(()=>{Gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{R.unsubscribe(),k.unsubscribe()}});this.isStable=function _E(...t){const n=Io(t),e=function uE(t,n){return"number"==typeof Vu(t)?t.pop():n}(t,1/0),s=t;return s.length?1===s.length?Ht(s[0]):sr(e)(un(s,n)):Vn}(d,C.pipe(function vE(t={}){const{connector:n=(()=>new Se),resetOnError:e=!0,resetOnComplete:s=!0,resetOnRefCountZero:o=!0}=t;return d=>{let C,P,R,k=0,F=!1,H=!1;const Y=()=>{P?.unsubscribe(),P=void 0},G=()=>{Y(),C=R=void 0,F=H=!1},K=()=>{const ne=C;G(),ne?.unsubscribe()};return ye((ne,se)=>{k++,!H&&!F&&Y();const he=R=R??n();se.add(()=>{k--,0===k&&!H&&!F&&(P=ju(K,o))}),he.subscribe(se),!C&&k>0&&(C=new V({next:Ee=>he.next(Ee),error:Ee=>{H=!0,Y(),P=ju(G,e,Ee),he.error(Ee)},complete:()=>{F=!0,Y(),P=ju(G,s),he.complete()}}),Ht(ne).subscribe(C))})(d)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,s){const o=e instanceof C_;if(!this._injector.get(bc).done)throw!o&&function xs(t){const n=At(t)||Dn(t)||jn(t);return null!==n&&n.standalone}(e),new xe(405,false);let C;C=o?e:this._injector.get(ia).resolveComponentFactory(e),this.componentTypes.push(C.componentType);const P=function _O(t){return t.isBoundToModule}(C)?void 0:this._injector.get(ds),k=C.create(_i.NULL,[],s||C.selector,P),F=k.location.nativeElement,H=k.injector.get(U1,null);return H?.registerApplication(F),k.onDestroy(()=>{this.detachView(k.hostView),Ec(this.components,k),H?.unregisterApplication(F)}),this._loadComponent(k),k}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const s=e;this._views.push(s),s.attachToAppRef(this)}detachView(e){const s=e;Ec(this._views,s),s.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(F1,[]).concat(this._bootstrapListeners).forEach(o=>o(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ec(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new xe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(e){return new(e||t)(je(Gt),je(hr),je(Ys))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ec(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}let $n=(()=>{class t{}return t.__NG_ELEMENT_ID__=wO,t})();function wO(t){return function EO(t,n,e){if(Sl(t)&&!e){const s=ai(t.index,n);return new oa(s,s)}return 47&t.type?new oa(n[16],n):null}(En(),we(),16==(16&t))}class iy{constructor(){}supports(n){return la(n)}create(n){return new MO(n)}}const PO=(t,n)=>n;class MO{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||PO}forEachItem(n){let e;for(e=this._itHead;null!==e;e=e._next)n(e)}forEachOperation(n){let e=this._itHead,s=this._removalsHead,o=0,d=null;for(;e||s;){const C=!s||e&&e.currentIndex<sy(s,o,d)?e:s,P=sy(C,o,d),R=C.currentIndex;if(C===s)o--,s=s._nextRemoved;else if(e=e._next,null==C.previousIndex)o++;else{d||(d=[]);const k=P-o,F=R-o;if(k!=F){for(let Y=0;Y<k;Y++){const G=Y<d.length?d[Y]:d[Y]=0,K=G+Y;F<=K&&K<k&&(d[Y]=G+1)}d[C.previousIndex]=F-k}}P!==R&&n(C,P,R)}}forEachPreviousItem(n){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachMovedItem(n){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}forEachIdentityChange(n){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)n(e)}diff(n){if(null==n&&(n=[]),!la(n))throw new xe(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let o,d,C,e=this._itHead,s=!1;if(Array.isArray(n)){this.length=n.length;for(let P=0;P<this.length;P++)d=n[P],C=this._trackByFn(P,d),null!==e&&Object.is(e.trackById,C)?(s&&(e=this._verifyReinsertion(e,d,C,P)),Object.is(e.item,d)||this._addIdentityChange(e,d)):(e=this._mismatch(e,d,C,P),s=!0),e=e._next}else o=0,function fD(t,n){if(Array.isArray(t))for(let e=0;e<t.length;e++)n(t[e]);else{const e=t[ls()]();let s;for(;!(s=e.next()).done;)n(s.value)}}(n,P=>{C=this._trackByFn(o,P),null!==e&&Object.is(e.trackById,C)?(s&&(e=this._verifyReinsertion(e,P,C,o)),Object.is(e.item,P)||this._addIdentityChange(e,P)):(e=this._mismatch(e,P,C,o),s=!0),e=e._next,o++}),this.length=o;return this._truncate(e),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,e,s,o){let d;return null===n?d=this._itTail:(d=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._reinsertAfter(n,d,o)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(s,o))?(Object.is(n.item,e)||this._addIdentityChange(n,e),this._moveAfter(n,d,o)):n=this._addAfter(new OO(e,s),d,o),n}_verifyReinsertion(n,e,s,o){let d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==d?n=this._reinsertAfter(d,n._prev,o):n.currentIndex!=o&&(n.currentIndex=o,this._addToMoves(n,o)),n}_truncate(n){for(;null!==n;){const e=n._next;this._addToRemovals(this._unlink(n)),n=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,e,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const o=n._prevRemoved,d=n._nextRemoved;return null===o?this._removalsHead=d:o._nextRemoved=d,null===d?this._removalsTail=o:d._prevRemoved=o,this._insertAfter(n,e,s),this._addToMoves(n,s),n}_moveAfter(n,e,s){return this._unlink(n),this._insertAfter(n,e,s),this._addToMoves(n,s),n}_addAfter(n,e,s){return this._insertAfter(n,e,s),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,e,s){const o=null===e?this._itHead:e._next;return n._next=o,n._prev=e,null===o?this._itTail=n:o._prev=n,null===e?this._itHead=n:e._next=n,null===this._linkedRecords&&(this._linkedRecords=new ry),this._linkedRecords.put(n),n.currentIndex=s,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const e=n._prev,s=n._next;return null===e?this._itHead=s:e._next=s,null===s?this._itTail=e:s._prev=e,n}_addToMoves(n,e){return n.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ry),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,e){return n.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class OO{constructor(n,e){this.item=n,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class IO{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,e){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===e||e<=s.currentIndex)&&Object.is(s.trackById,n))return s;return null}remove(n){const e=n._prevDup,s=n._nextDup;return null===e?this._head=s:e._nextDup=s,null===s?this._tail=e:s._prevDup=e,null===this._head}}class ry{constructor(){this.map=new Map}put(n){const e=n.trackById;let s=this.map.get(e);s||(s=new IO,this.map.set(e,s)),s.add(n)}get(n,e){const o=this.map.get(n);return o?o.get(n,e):null}remove(n){const e=n.trackById;return this.map.get(e).remove(n)&&this.map.delete(e),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sy(t,n,e){const s=t.previousIndex;if(null===s)return s;let o=0;return e&&s<e.length&&(o=e[s]),s+n+o}class oy{constructor(){}supports(n){return n instanceof Map||Fh(n)}create(){return new AO}}class AO{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let e;for(e=this._mapHead;null!==e;e=e._next)n(e)}forEachPreviousItem(n){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)n(e)}forEachChangedItem(n){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)n(e)}forEachAddedItem(n){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)n(e)}forEachRemovedItem(n){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)n(e)}diff(n){if(n){if(!(n instanceof Map||Fh(n)))throw new xe(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(n,(s,o)=>{if(e&&e.key===o)this._maybeAddToChanges(e,s),this._appendAfter=e,e=e._next;else{const d=this._getOrCreateRecordForKey(o,s);e=this._insertBeforeOrAppend(e,d)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let s=e;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,e){if(n){const s=n._prev;return e._next=n,e._prev=s,n._prev=e,s&&(s._next=e),n===this._mapHead&&(this._mapHead=e),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(n,e){if(this._records.has(n)){const o=this._records.get(n);this._maybeAddToChanges(o,e);const d=o._prev,C=o._next;return d&&(d._next=C),C&&(C._prev=d),o._next=null,o._prev=null,o}const s=new RO(n);return this._records.set(n,s),s.currentValue=e,this._addToAdditions(s),s}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,e){Object.is(e,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=e,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,e){n instanceof Map?n.forEach(e):Object.keys(n).forEach(s=>e(n[s],s))}}class RO{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ay(){return new Tc([new iy])}let Tc=(()=>{class t{constructor(e){this.factories=e}static create(e,s){if(null!=s){const o=s.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:s=>t.create(e,s||ay()),deps:[[t,new Jo,new Xo]]}}find(e){const s=this.factories.find(o=>o.supports(e));if(null!=s)return s;throw new xe(901,!1)}}return t.\u0275prov=We({token:t,providedIn:"root",factory:ay}),t})();function ly(){return new Ea([new oy])}let Ea=(()=>{class t{constructor(e){this.factories=e}static create(e,s){if(s){const o=s.factories.slice();e=e.concat(o)}return new t(e)}static extend(e){return{provide:t,useFactory:s=>t.create(e,s||ly()),deps:[[t,new Jo,new Xo]]}}find(e){const s=this.factories.find(o=>o.supports(e));if(s)return s;throw new xe(901,!1)}}return t.\u0275prov=We({token:t,providedIn:"root",factory:ly}),t})();const LO=$1(null,"core",[]);let FO=(()=>{class t{constructor(e){}}return t.\u0275fac=function(e){return new(e||t)(je(wc))},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({}),t})();let Dc=null;function Zi(){return Dc}class jO{}const Nn=new Ve("DocumentToken");let Sp=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:function(){return function HO(){return je(cy)}()},providedIn:"platform"}),t})();const UO=new Ve("Location Initialized");let cy=(()=>{class t extends Sp{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zi().getBaseHref(this._doc)}onPopState(e){const s=Zi().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",e,!1),()=>s.removeEventListener("popstate",e)}onHashChange(e){const s=Zi().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",e,!1),()=>s.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,s,o){uy()?this._history.pushState(e,s,o):this.location.hash=o}replaceState(e,s,o){uy()?this._history.replaceState(e,s,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(je(Nn))},t.\u0275prov=We({token:t,factory:function(){return function zO(){return new cy(je(Nn))}()},providedIn:"platform"}),t})();function uy(){return!!window.history.pushState}function xp(t,n){if(0==t.length)return n;if(0==n.length)return t;let e=0;return t.endsWith("/")&&e++,n.startsWith("/")&&e++,2==e?t+n.substring(1):1==e?t+n:t+"/"+n}function dy(t){const n=t.match(/#|\?|$/),e=n&&n.index||t.length;return t.slice(0,e-("/"===t[e-1]?1:0))+t.slice(e)}function yr(t){return t&&"?"!==t[0]?"?"+t:t}let ps=(()=>{class t{historyGo(e){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:function(){return Dt(py)},providedIn:"root"}),t})();const hy=new Ve("appBaseHref");let py=(()=>{class t extends ps{constructor(e,s){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??Dt(Nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return xp(this._baseHref,e)}path(e=!1){const s=this._platformLocation.pathname+yr(this._platformLocation.search),o=this._platformLocation.hash;return o&&e?`${s}${o}`:s}pushState(e,s,o,d){const C=this.prepareExternalUrl(o+yr(d));this._platformLocation.pushState(e,s,C)}replaceState(e,s,o,d){const C=this.prepareExternalUrl(o+yr(d));this._platformLocation.replaceState(e,s,C)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(je(Sp),je(hy,8))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),YO=(()=>{class t extends ps{constructor(e,s){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(e){const s=xp(this._baseHref,e);return s.length>0?"#"+s:s}pushState(e,s,o,d){let C=this.prepareExternalUrl(o+yr(d));0==C.length&&(C=this._platformLocation.pathname),this._platformLocation.pushState(e,s,C)}replaceState(e,s,o,d){let C=this.prepareExternalUrl(o+yr(d));0==C.length&&(C=this._platformLocation.pathname),this._platformLocation.replaceState(e,s,C)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return t.\u0275fac=function(e){return new(e||t)(je(Sp),je(hy,8))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})(),Tp=(()=>{class t{constructor(e){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const s=this._locationStrategy.getBaseHref();this._baseHref=dy(fy(s)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,s=""){return this.path()==this.normalize(e+yr(s))}normalize(e){return t.stripTrailingSlash(function $O(t,n){return t&&n.startsWith(t)?n.substring(t.length):n}(this._baseHref,fy(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,s="",o=null){this._locationStrategy.pushState(o,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+yr(s)),o)}replaceState(e,s="",o=null){this._locationStrategy.replaceState(o,"",e,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+yr(s)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",s){this._urlChangeListeners.forEach(o=>o(e,s))}subscribe(e,s,o){return this._subject.subscribe({next:e,error:s,complete:o})}}return t.normalizeQueryParams=yr,t.joinWithSlash=xp,t.stripTrailingSlash=dy,t.\u0275fac=function(e){return new(e||t)(je(ps))},t.\u0275prov=We({token:t,factory:function(){return function GO(){return new Tp(je(ps))}()},providedIn:"root"}),t})();function fy(t){return t.replace(/\/index.html$/,"")}function Ey(t,n){n=encodeURIComponent(n);for(const e of t.split(";")){const s=e.indexOf("="),[o,d]=-1==s?[e,""]:[e.slice(0,s),e.slice(s+1)];if(o.trim()===n)return decodeURIComponent(d)}return null}let Vi=(()=>{class t{constructor(e,s,o,d){this._iterableDiffers=e,this._keyValueDiffers=s,this._ngEl=o,this._renderer=d,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(la(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachChangedItem(s=>this._toggleClass(s.key,s.currentValue)),e.forEachRemovedItem(s=>{s.previousValue&&this._toggleClass(s.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(s=>{if("string"!=typeof s.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Bt(s.item)}`);this._toggleClass(s.item,!0)}),e.forEachRemovedItem(s=>this._toggleClass(s.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!0)):Object.keys(e).forEach(s=>this._toggleClass(s,!!e[s])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(s=>this._toggleClass(s,!1)):Object.keys(e).forEach(s=>this._toggleClass(s,!1)))}_toggleClass(e,s){(e=e.trim())&&e.split(/\s+/g).forEach(o=>{s?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return t.\u0275fac=function(e){return new(e||t)(ae(Tc),ae(Ea),ae(Wt),ae(mi))},t.\u0275dir=Ge({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),t})();class OI{constructor(n,e,s,o){this.$implicit=n,this.ngForOf=e,this.index=s,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fs=(()=>{class t{constructor(e,s,o){this._viewContainer=e,this._template=s,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const s=this._viewContainer;e.forEachOperation((o,d,C)=>{if(null==o.previousIndex)s.createEmbeddedView(this._template,new OI(o.item,this._ngForOf,-1,-1),null===C?void 0:C);else if(null==C)s.remove(null===d?void 0:d);else if(null!==d){const P=s.get(d);s.move(P,C),Ty(P,o)}});for(let o=0,d=s.length;o<d;o++){const P=s.get(o).context;P.index=o,P.count=d,P.ngForOf=this._ngForOf}e.forEachIdentityChange(o=>{Ty(s.get(o.currentIndex),o)})}static ngTemplateContextGuard(e,s){return!0}}return t.\u0275fac=function(e){return new(e||t)(ae(Li),ae(ki),ae(Tc))},t.\u0275dir=Ge({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function Ty(t,n){t.context.$implicit=n.item}let Ci=(()=>{class t{constructor(e,s){this._viewContainer=e,this._context=new AI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Dy("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Dy("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,s){return!0}}return t.\u0275fac=function(e){return new(e||t)(ae(Li),ae(ki))},t.\u0275dir=Ge({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),t})();class AI{constructor(){this.$implicit=null,this.ngIf=null}}function Dy(t,n){if(n&&!n.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Bt(n)}'.`)}let ji=(()=>{class t{constructor(e,s,o){this._ngEl=e,this._differs=s,this._renderer=o,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,s){const[o,d]=e.split("."),C=-1===o.indexOf("-")?void 0:Qn.DashCase;null!=s?this._renderer.setStyle(this._ngEl.nativeElement,o,d?`${s}${d}`:s,C):this._renderer.removeStyle(this._ngEl.nativeElement,o,C)}_applyChanges(e){e.forEachRemovedItem(s=>this._setStyle(s.key,null)),e.forEachAddedItem(s=>this._setStyle(s.key,s.currentValue)),e.forEachChangedItem(s=>this._setStyle(s.key,s.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(Ea),ae(mi))},t.\u0275dir=Ge({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),t})(),Qi=(()=>{class t{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const s=this._viewContainerRef;if(this._viewRef&&s.remove(s.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:o,ngTemplateOutletContext:d,ngTemplateOutletInjector:C}=this;this._viewRef=s.createEmbeddedView(o,d,C?{injector:C}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return t.\u0275fac=function(e){return new(e||t)(ae(Li))},t.\u0275dir=Ge({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Cn]}),t})(),kn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({}),t})();let lA=(()=>{class t{}return t.\u0275prov=We({token:t,providedIn:"root",factory:()=>new cA(je(Nn),window)}),t})();class cA{constructor(n,e){this.document=n,this.window=e,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const e=function uA(t,n){const e=t.getElementById(n)||t.getElementsByName(n)[0];if(e)return e;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const s=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=s.currentNode;for(;o;){const d=o.shadowRoot;if(d){const C=d.getElementById(n)||d.querySelector(`[name="${n}"]`);if(C)return C}o=s.nextNode()}}return null}(this.document,n);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=n)}}scrollToElement(n){const e=n.getBoundingClientRect(),s=e.left+this.window.pageXOffset,o=e.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo(s-d[0],o-d[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=Iy(this.window.history)||Iy(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Iy(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Ay{}class FA extends jO{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Up extends FA{static makeCurrent(){!function VO(t){Dc||(Dc=t)}(new Up)}onAndCancel(n,e,s){return n.addEventListener(e,s,!1),()=>{n.removeEventListener(e,s,!1)}}dispatchEvent(n,e){n.dispatchEvent(e)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,e){return(e=e||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,e){return"window"===e?window:"document"===e?n:"body"===e?n.body:null}getBaseHref(n){const e=function BA(){return Da=Da||document.querySelector("base"),Da?Da.getAttribute("href"):null}();return null==e?null:function VA(t){Bc=Bc||document.createElement("a"),Bc.setAttribute("href",t);const n=Bc.pathname;return"/"===n.charAt(0)?n:`/${n}`}(e)}resetBaseElement(){Da=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return Ey(document.cookie,n)}}let Bc,Da=null;const By=new Ve("TRANSITION_ID"),HA=[{provide:yc,useFactory:function jA(t,n,e){return()=>{e.get(bc).donePromise.then(()=>{const s=Zi(),o=n.querySelectorAll(`style[ng-transition="${t}"]`);for(let d=0;d<o.length;d++)s.remove(o[d])})}},deps:[By,Nn,_i],multi:!0}];let zA=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();const Vc=new Ve("EventManagerPlugins");let jc=(()=>{class t{constructor(e,s){this._zone=s,this._eventNameToPlugin=new Map,e.forEach(o=>o.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,s,o){return this._findPluginFor(s).addEventListener(e,s,o)}addGlobalEventListener(e,s,o){return this._findPluginFor(s).addGlobalEventListener(e,s,o)}getZone(){return this._zone}_findPluginFor(e){const s=this._eventNameToPlugin.get(e);if(s)return s;const o=this._plugins;for(let d=0;d<o.length;d++){const C=o[d];if(C.supports(e))return this._eventNameToPlugin.set(e,C),C}throw new Error(`No event manager plugin found for event ${e}`)}}return t.\u0275fac=function(e){return new(e||t)(je(Vc),je(Gt))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();class Vy{constructor(n){this._doc=n}addGlobalEventListener(n,e,s){const o=Zi().getGlobalEventTarget(this._doc,n);if(!o)throw new Error(`Unsupported event target ${o} for event ${e}`);return this.addEventListener(o,e,s)}}let jy=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(e){const s=new Set;e.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),s.add(o))}),this.onStylesAdded(s)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})(),Pa=(()=>{class t extends jy{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,s,o){e.forEach(d=>{const C=this._doc.createElement("style");C.textContent=d,o.push(s.appendChild(C))})}addHost(e){const s=[];this._addStylesToHost(this._stylesSet,e,s),this._hostNodes.set(e,s)}removeHost(e){const s=this._hostNodes.get(e);s&&s.forEach(Hy),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((s,o)=>{this._addStylesToHost(e,o,s)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Hy))}}return t.\u0275fac=function(e){return new(e||t)(je(Nn))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();function Hy(t){Zi().remove(t)}const zp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yp=/%COMP%/g;function Hc(t,n,e){for(let s=0;s<n.length;s++){let o=n[s];Array.isArray(o)?Hc(t,o,e):(o=o.replace(Yp,t),e.push(o))}return e}function Yy(t){return n=>{if("__ngUnwrap__"===n)return t;!1===t(n)&&(n.preventDefault(),n.returnValue=!1)}}let Gp=(()=>{class t{constructor(e,s,o){this.eventManager=e,this.sharedStylesHost=s,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new $p(e)}createRenderer(e,s){if(!e||!s)return this.defaultRenderer;switch(s.encapsulation){case Gi.Emulated:{let o=this.rendererByCompId.get(s.id);return o||(o=new WA(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,o)),o.applyToHost(e),o}case 1:case Gi.ShadowDom:return new qA(this.eventManager,this.sharedStylesHost,e,s);default:if(!this.rendererByCompId.has(s.id)){const o=Hc(s.id,s.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(je(jc),je(Pa),je(wa))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();class $p{constructor(n){this.eventManager=n,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(n,e){return e?document.createElementNS(zp[e]||e,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,e){($y(n)?n.content:n).appendChild(e)}insertBefore(n,e,s){n&&($y(n)?n.content:n).insertBefore(e,s)}removeChild(n,e){n&&n.removeChild(e)}selectRootElement(n,e){let s="string"==typeof n?document.querySelector(n):n;if(!s)throw new Error(`The selector "${n}" did not match any elements`);return e||(s.textContent=""),s}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,e,s,o){if(o){e=o+":"+e;const d=zp[o];d?n.setAttributeNS(d,e,s):n.setAttribute(e,s)}else n.setAttribute(e,s)}removeAttribute(n,e,s){if(s){const o=zp[s];o?n.removeAttributeNS(o,e):n.removeAttribute(`${s}:${e}`)}else n.removeAttribute(e)}addClass(n,e){n.classList.add(e)}removeClass(n,e){n.classList.remove(e)}setStyle(n,e,s,o){o&(Qn.DashCase|Qn.Important)?n.style.setProperty(e,s,o&Qn.Important?"important":""):n.style[e]=s}removeStyle(n,e,s){s&Qn.DashCase?n.style.removeProperty(e):n.style[e]=""}setProperty(n,e,s){n[e]=s}setValue(n,e){n.nodeValue=e}listen(n,e,s){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,e,Yy(s)):this.eventManager.addEventListener(n,e,Yy(s))}}function $y(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class WA extends $p{constructor(n,e,s,o){super(n),this.component=s;const d=Hc(o+"-"+s.id,s.styles,[]);e.addStyles(d),this.contentAttr=function $A(t){return"_ngcontent-%COMP%".replace(Yp,t)}(o+"-"+s.id),this.hostAttr=function XA(t){return"_nghost-%COMP%".replace(Yp,t)}(o+"-"+s.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,e){const s=super.createElement(n,e);return super.setAttribute(s,this.contentAttr,""),s}}class qA extends $p{constructor(n,e,s,o){super(n),this.sharedStylesHost=e,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=Hc(o.id,o.styles,[]);for(let C=0;C<d.length;C++){const P=document.createElement("style");P.textContent=d[C],this.shadowRoot.appendChild(P)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,e){return super.appendChild(this.nodeOrShadowRoot(n),e)}insertBefore(n,e,s){return super.insertBefore(this.nodeOrShadowRoot(n),e,s)}removeChild(n,e){return super.removeChild(this.nodeOrShadowRoot(n),e)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let KA=(()=>{class t extends Vy{constructor(e){super(e)}supports(e){return!0}addEventListener(e,s,o){return e.addEventListener(s,o,!1),()=>this.removeEventListener(e,s,o)}removeEventListener(e,s,o){return e.removeEventListener(s,o)}}return t.\u0275fac=function(e){return new(e||t)(je(Nn))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();const Xy=["alt","control","meta","shift"],ZA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QA={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let eR=(()=>{class t extends Vy{constructor(e){super(e)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,s,o){const d=t.parseEventName(s),C=t.eventCallback(d.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zi().onAndCancel(e,d.domEventName,C))}static parseEventName(e){const s=e.toLowerCase().split("."),o=s.shift();if(0===s.length||"keydown"!==o&&"keyup"!==o)return null;const d=t._normalizeKey(s.pop());let C="",P=s.indexOf("code");if(P>-1&&(s.splice(P,1),C="code."),Xy.forEach(k=>{const F=s.indexOf(k);F>-1&&(s.splice(F,1),C+=k+".")}),C+=d,0!=s.length||0===d.length)return null;const R={};return R.domEventName=o,R.fullKey=C,R}static matchEventFullKeyCode(e,s){let o=ZA[e.key]||e.key,d="";return s.indexOf("code.")>-1&&(o=e.code,d="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Xy.forEach(C=>{C!==o&&(0,QA[C])(e)&&(d+=C+".")}),d+=o,d===s)}static eventCallback(e,s,o){return d=>{t.matchEventFullKeyCode(d,e)&&o.runGuarded(()=>s(d))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return t.\u0275fac=function(e){return new(e||t)(je(Nn))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();const rR=$1(LO,"browser",[{provide:up,useValue:"browser"},{provide:L1,useValue:function tR(){Up.makeCurrent()},multi:!0},{provide:Nn,useFactory:function iR(){return function BS(t){Gd=t}(document),document},deps:[]}]),qy=new Ve(""),Ky=[{provide:Cc,useClass:class UA{addToWindow(n){Ut.getAngularTestability=(s,o=!0)=>{const d=n.findTestabilityInTree(s,o);if(null==d)throw new Error("Could not find testability for element.");return d},Ut.getAllAngularTestabilities=()=>n.getAllTestabilities(),Ut.getAllAngularRootElements=()=>n.getAllRootElements(),Ut.frameworkStabilizers||(Ut.frameworkStabilizers=[]),Ut.frameworkStabilizers.push(s=>{const o=Ut.getAllAngularTestabilities();let d=o.length,C=!1;const P=function(R){C=C||R,d--,0==d&&s(C)};o.forEach(function(R){R.whenStable(P)})})}findTestabilityInTree(n,e,s){return null==e?null:n.getTestability(e)??(s?Zi().isShadowRoot(e)?this.findTestabilityInTree(n,e.host,!0):this.findTestabilityInTree(n,e.parentElement,!0):null)}},deps:[]},{provide:U1,useClass:gp,deps:[Gt,mp,Cc]},{provide:gp,useClass:gp,deps:[Gt,mp,Cc]}],Zy=[{provide:eh,useValue:"root"},{provide:Ys,useFactory:function nR(){return new Ys},deps:[]},{provide:Vc,useClass:KA,multi:!0,deps:[Nn,Gt,up]},{provide:Vc,useClass:eR,multi:!0,deps:[Nn]},{provide:Gp,useClass:Gp,deps:[jc,Pa,wa]},{provide:E_,useExisting:Gp},{provide:jy,useExisting:Pa},{provide:Pa,useClass:Pa,deps:[Nn]},{provide:jc,useClass:jc,deps:[Vc,Gt]},{provide:Ay,useClass:zA,deps:[]},[]];let sR=(()=>{class t{constructor(e){}static withServerTransition(e){return{ngModule:t,providers:[{provide:wa,useValue:e.appId},{provide:By,useExisting:wa},HA]}}}return t.\u0275fac=function(e){return new(e||t)(je(qy,12))},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({providers:[...Zy,...Ky],imports:[kn,FO]}),t})(),Qy=(()=>{class t{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return t.\u0275fac=function(e){return new(e||t)(je(Nn))},t.\u0275prov=We({token:t,factory:function(e){let s=null;return s=e?new e:function aR(){return new Qy(je(Nn))}(),s},providedIn:"root"}),t})();function Ye(...t){return un(t,Io(t))}typeof window<"u"&&window;class Ui extends Se{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const e=super._subscribe(n);return!e.closed&&n.next(this._value),e}getValue(){const{hasError:n,thrownError:e,_value:s}=this;if(n)throw e;return this._throwIfClosed(),s}next(n){super.next(this._value=n)}}const Uc=w(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:gR}=Array,{getPrototypeOf:mR,prototype:_R,keys:vR}=Object;function nb(t){if(1===t.length){const n=t[0];if(gR(n))return{args:n,keys:null};if(function yR(t){return t&&"object"==typeof t&&mR(t)===_R}(n)){const e=vR(n);return{args:e.map(s=>n[s]),keys:e}}}return{args:t,keys:null}}const{isArray:bR}=Array;function ib(t){return Ce(n=>function CR(t,n){return bR(n)?t(...n):t(n)}(t,n))}function rb(t,n){return t.reduce((e,s,o)=>(e[s]=n[o],e),{})}function sb(...t){const n=Io(t),e=yg(t),{args:s,keys:o}=nb(t);if(0===s.length)return un([],n);const d=new ie(function wR(t,n,e=Z){return s=>{ob(n,()=>{const{length:o}=t,d=new Array(o);let C=o,P=o;for(let R=0;R<o;R++)ob(n,()=>{const k=un(t[R],n);let F=!1;k.subscribe(le(s,H=>{d[R]=H,F||(F=!0,P--),P||s.next(e(d.slice()))},()=>{--C||s.complete()}))},s)},s)}}(s,n,o?C=>rb(o,C):Z));return e?d.pipe(ib(e)):d}function ob(t,n,e){t?qn(e,t,n):n()}function Wp(...t){return function ER(){return sr(1)}()(un(t,Io(t)))}function ab(t){return new ie(n=>{Ht(t()).subscribe(n)})}function Ma(t,n){const e=S(t)?t:()=>t,s=o=>o.error(e());return new ie(n?o=>n.schedule(s,0,o):s)}function qp(){return ye((t,n)=>{let e=null;t._refCount++;const s=le(n,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(e=null);const o=t._connection,d=e;e=null,o&&(!d||o===d)&&o.unsubscribe(),n.unsubscribe()});t.subscribe(s),s.closed||(e=t.connect())})}class lb extends ie{constructor(n,e){super(),this.source=n,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,_e(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new p;const e=this.getSubject();n.add(this.source.subscribe(le(e,void 0,()=>{this._teardown(),e.complete()},s=>{this._teardown(),e.error(s)},()=>this._teardown()))),n.closed&&(this._connection=null,n=p.EMPTY)}return n}refCount(){return qp()(this)}}function er(t,n){return ye((e,s)=>{let o=null,d=0,C=!1;const P=()=>C&&!o&&s.complete();e.subscribe(le(s,R=>{o?.unsubscribe();let k=0;const F=d++;Ht(t(R,F)).subscribe(o=le(s,H=>s.next(n?n(R,H,F,k++):H),()=>{o=null,P()}))},()=>{C=!0,P()}))})}function Oa(t){return t<=0?()=>Vn:ye((n,e)=>{let s=0;n.subscribe(le(e,o=>{++s<=t&&(e.next(o),t<=s&&e.complete())}))})}function Cr(t,n){return ye((e,s)=>{let o=0;e.subscribe(le(s,d=>t.call(n,d,o++)&&s.next(d)))})}function zc(t){return ye((n,e)=>{let s=!1;n.subscribe(le(e,o=>{s=!0,e.next(o)},()=>{s||e.next(t),e.complete()}))})}function cb(t=xR){return ye((n,e)=>{let s=!1;n.subscribe(le(e,o=>{s=!0,e.next(o)},()=>s?e.complete():e.error(t())))})}function xR(){return new Uc}function jr(t,n){const e=arguments.length>=2;return s=>s.pipe(t?Cr((o,d)=>t(o,d,s)):Z,Oa(1),e?zc(n):cb(()=>new Uc))}function Hr(t,n){return S(n)?Xt(t,n,1):Xt(t,1)}function Ln(t,n,e){const s=S(t)||n||e?{next:t,error:n,complete:e}:t;return s?ye((o,d)=>{var C;null===(C=s.subscribe)||void 0===C||C.call(s);let P=!0;o.subscribe(le(d,R=>{var k;null===(k=s.next)||void 0===k||k.call(s,R),d.next(R)},()=>{var R;P=!1,null===(R=s.complete)||void 0===R||R.call(s),d.complete()},R=>{var k;P=!1,null===(k=s.error)||void 0===k||k.call(s,R),d.error(R)},()=>{var R,k;P&&(null===(R=s.unsubscribe)||void 0===R||R.call(s)),null===(k=s.finalize)||void 0===k||k.call(s)}))}):Z}function Ur(t){return ye((n,e)=>{let d,s=null,o=!1;s=n.subscribe(le(e,void 0,void 0,C=>{d=Ht(t(C,Ur(t)(n))),s?(s.unsubscribe(),s=null,d.subscribe(e)):o=!0})),o&&(s.unsubscribe(),s=null,d.subscribe(e))})}function TR(t,n,e,s,o){return(d,C)=>{let P=e,R=n,k=0;d.subscribe(le(C,F=>{const H=k++;R=P?t(R,F,H):(P=!0,F),s&&C.next(R)},o&&(()=>{P&&C.next(R),C.complete()})))}}function ub(t,n){return ye(TR(t,n,arguments.length>=2,!0))}function Kp(t){return t<=0?()=>Vn:ye((n,e)=>{let s=[];n.subscribe(le(e,o=>{s.push(o),t<s.length&&s.shift()},()=>{for(const o of s)e.next(o);e.complete()},void 0,()=>{s=null}))})}function db(t,n){const e=arguments.length>=2;return s=>s.pipe(t?Cr((o,d)=>t(o,d,s)):Z,Kp(1),e?zc(n):cb(()=>new Uc))}function Zp(t){return ye((n,e)=>{try{n.subscribe(e)}finally{e.add(t)}})}const mt="primary",Ia=Symbol("RouteTitle");class MR{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e[0]:e}return null}getAll(n){if(this.has(n)){const e=this.params[n];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function uo(t){return new MR(t)}function OR(t,n,e){const s=e.path.split("/");if(s.length>t.length||"full"===e.pathMatch&&(n.hasChildren()||s.length<t.length))return null;const o={};for(let d=0;d<s.length;d++){const C=s[d],P=t[d];if(C.startsWith(":"))o[C.substring(1)]=P;else if(C!==P.path)return null}return{consumed:t.slice(0,s.length),posParams:o}}function tr(t,n){const e=t?Object.keys(t):void 0,s=n?Object.keys(n):void 0;if(!e||!s||e.length!=s.length)return!1;let o;for(let d=0;d<e.length;d++)if(o=e[d],!hb(t[o],n[o]))return!1;return!0}function hb(t,n){if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;const e=[...t].sort(),s=[...n].sort();return e.every((o,d)=>s[d]===o)}return t===n}function pb(t){return Array.prototype.concat.apply([],t)}function fb(t){return t.length>0?t[t.length-1]:null}function Sn(t,n){for(const e in t)t.hasOwnProperty(e)&&n(t[e],e)}function zr(t){return Vh(t)?t:ua(t)?un(Promise.resolve(t)):Ye(t)}const Yc=!1,AR={exact:function _b(t,n,e){if(!ms(t.segments,n.segments)||!Gc(t.segments,n.segments,e)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const s in n.children)if(!t.children[s]||!_b(t.children[s],n.children[s],e))return!1;return!0},subset:vb},gb={exact:function RR(t,n){return tr(t,n)},subset:function NR(t,n){return Object.keys(n).length<=Object.keys(t).length&&Object.keys(n).every(e=>hb(t[e],n[e]))},ignored:()=>!0};function mb(t,n,e){return AR[e.paths](t.root,n.root,e.matrixParams)&&gb[e.queryParams](t.queryParams,n.queryParams)&&!("exact"===e.fragment&&t.fragment!==n.fragment)}function vb(t,n,e){return yb(t,n,n.segments,e)}function yb(t,n,e,s){if(t.segments.length>e.length){const o=t.segments.slice(0,e.length);return!(!ms(o,e)||n.hasChildren()||!Gc(o,e,s))}if(t.segments.length===e.length){if(!ms(t.segments,e)||!Gc(t.segments,e,s))return!1;for(const o in n.children)if(!t.children[o]||!vb(t.children[o],n.children[o],s))return!1;return!0}{const o=e.slice(0,t.segments.length),d=e.slice(t.segments.length);return!!(ms(t.segments,o)&&Gc(t.segments,o,s)&&t.children[mt])&&yb(t.children[mt],n,d,s)}}function Gc(t,n,e){return n.every((s,o)=>gb[e](t[o].parameters,s.parameters))}class gs{constructor(n=new vt([],{}),e={},s=null){this.root=n,this.queryParams=e,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uo(this.queryParams)),this._queryParamMap}toString(){return FR.serialize(this)}}class vt{constructor(n,e){this.segments=n,this.children=e,this.parent=null,Sn(e,(s,o)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $c(this)}}class Aa{constructor(n,e){this.path=n,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=uo(this.parameters)),this._parameterMap}toString(){return Eb(this)}}function ms(t,n){return t.length===n.length&&t.every((e,s)=>e.path===n[s].path)}let bb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:function(){return new Qp},providedIn:"root"}),t})();class Qp{parse(n){const e=new $R(n);return new gs(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(n){const e=`/${Ra(n.root,!0)}`,s=function jR(t){const n=Object.keys(t).map(e=>{const s=t[e];return Array.isArray(s)?s.map(o=>`${Xc(e)}=${Xc(o)}`).join("&"):`${Xc(e)}=${Xc(s)}`}).filter(e=>!!e);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${e}${s}${"string"==typeof n.fragment?`#${function BR(t){return encodeURI(t)}(n.fragment)}`:""}`}}const FR=new Qp;function $c(t){return t.segments.map(n=>Eb(n)).join("/")}function Ra(t,n){if(!t.hasChildren())return $c(t);if(n){const e=t.children[mt]?Ra(t.children[mt],!1):"",s=[];return Sn(t.children,(o,d)=>{d!==mt&&s.push(`${d}:${Ra(o,!1)}`)}),s.length>0?`${e}(${s.join("//")})`:e}{const e=function LR(t,n){let e=[];return Sn(t.children,(s,o)=>{o===mt&&(e=e.concat(n(s,o)))}),Sn(t.children,(s,o)=>{o!==mt&&(e=e.concat(n(s,o)))}),e}(t,(s,o)=>o===mt?[Ra(t.children[mt],!1)]:[`${o}:${Ra(s,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[mt]?`${$c(t)}/${e[0]}`:`${$c(t)}/(${e.join("//")})`}}function Cb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xc(t){return Cb(t).replace(/%3B/gi,";")}function ef(t){return Cb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jc(t){return decodeURIComponent(t)}function wb(t){return Jc(t.replace(/\+/g,"%20"))}function Eb(t){return`${ef(t.path)}${function VR(t){return Object.keys(t).map(n=>`;${ef(n)}=${ef(t[n])}`).join("")}(t.parameters)}`}const HR=/^[^\/()?;=#]+/;function Wc(t){const n=t.match(HR);return n?n[0]:""}const UR=/^[^=?&#]+/,YR=/^[^&#]+/;class $R{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vt([],{}):new vt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(n.length>0||Object.keys(e).length>0)&&(s[mt]=new vt(n,e)),s}parseSegment(){const n=Wc(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new xe(4009,Yc);return this.capture(n),new Aa(Jc(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const e=Wc(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const o=Wc(this.remaining);o&&(s=o,this.capture(s))}n[Jc(e)]=Jc(s)}parseQueryParam(n){const e=function zR(t){const n=t.match(UR);return n?n[0]:""}(this.remaining);if(!e)return;this.capture(e);let s="";if(this.consumeOptional("=")){const C=function GR(t){const n=t.match(YR);return n?n[0]:""}(this.remaining);C&&(s=C,this.capture(s))}const o=wb(e),d=wb(s);if(n.hasOwnProperty(o)){let C=n[o];Array.isArray(C)||(C=[C],n[o]=C),C.push(d)}else n[o]=d}parseParens(n){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=Wc(this.remaining),o=this.remaining[s.length];if("/"!==o&&")"!==o&&";"!==o)throw new xe(4010,Yc);let d;s.indexOf(":")>-1?(d=s.slice(0,s.indexOf(":")),this.capture(d),this.capture(":")):n&&(d=mt);const C=this.parseChildren();e[d]=1===Object.keys(C).length?C[mt]:new vt([],C),this.consumeOptional("//")}return e}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new xe(4011,Yc)}}function tf(t){return t.segments.length>0?new vt([],{[mt]:t}):t}function qc(t){const n={};for(const s of Object.keys(t.children)){const d=qc(t.children[s]);(d.segments.length>0||d.hasChildren())&&(n[s]=d)}return function XR(t){if(1===t.numberOfChildren&&t.children[mt]){const n=t.children[mt];return new vt(t.segments.concat(n.segments),n.children)}return t}(new vt(t.segments,n))}function _s(t){return t instanceof gs}function qR(t,n,e,s,o){if(0===e.length)return ho(n.root,n.root,n.root,s,o);const d=function Tb(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new xb(!0,0,t);let n=0,e=!1;const s=t.reduce((o,d,C)=>{if("object"==typeof d&&null!=d){if(d.outlets){const P={};return Sn(d.outlets,(R,k)=>{P[k]="string"==typeof R?R.split("/"):R}),[...o,{outlets:P}]}if(d.segmentPath)return[...o,d.segmentPath]}return"string"!=typeof d?[...o,d]:0===C?(d.split("/").forEach((P,R)=>{0==R&&"."===P||(0==R&&""===P?e=!0:".."===P?n++:""!=P&&o.push(P))}),o):[...o,d]},[]);return new xb(e,n,s)}(e);return d.toRoot()?ho(n.root,n.root,new vt([],{}),s,o):function C(R){const k=function ZR(t,n,e,s){if(t.isAbsolute)return new po(n.root,!0,0);if(-1===s)return new po(e,e===n.root,0);return function Db(t,n,e){let s=t,o=n,d=e;for(;d>o;){if(d-=o,s=s.parent,!s)throw new xe(4005,!1);o=s.segments.length}return new po(s,!1,o-d)}(e,s+(Na(t.commands[0])?0:1),t.numberOfDoubleDots)}(d,n,t.snapshot?._urlSegment,R),F=k.processChildren?La(k.segmentGroup,k.index,d.commands):rf(k.segmentGroup,k.index,d.commands);return ho(n.root,k.segmentGroup,F,s,o)}(t.snapshot?._lastPathIndex)}function Na(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ka(t){return"object"==typeof t&&null!=t&&t.outlets}function ho(t,n,e,s,o){let C,d={};s&&Sn(s,(R,k)=>{d[k]=Array.isArray(R)?R.map(F=>`${F}`):`${R}`}),C=t===n?e:Sb(t,n,e);const P=tf(qc(C));return new gs(P,d,o)}function Sb(t,n,e){const s={};return Sn(t.children,(o,d)=>{s[d]=o===n?e:Sb(o,n,e)}),new vt(t.segments,s)}class xb{constructor(n,e,s){if(this.isAbsolute=n,this.numberOfDoubleDots=e,this.commands=s,n&&s.length>0&&Na(s[0]))throw new xe(4003,!1);const o=s.find(ka);if(o&&o!==fb(s))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class po{constructor(n,e,s){this.segmentGroup=n,this.processChildren=e,this.index=s}}function rf(t,n,e){if(t||(t=new vt([],{})),0===t.segments.length&&t.hasChildren())return La(t,n,e);const s=function eN(t,n,e){let s=0,o=n;const d={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(s>=e.length)return d;const C=t.segments[o],P=e[s];if(ka(P))break;const R=`${P}`,k=s<e.length-1?e[s+1]:null;if(o>0&&void 0===R)break;if(R&&k&&"object"==typeof k&&void 0===k.outlets){if(!Mb(R,k,C))return d;s+=2}else{if(!Mb(R,{},C))return d;s++}o++}return{match:!0,pathIndex:o,commandIndex:s}}(t,n,e),o=e.slice(s.commandIndex);if(s.match&&s.pathIndex<t.segments.length){const d=new vt(t.segments.slice(0,s.pathIndex),{});return d.children[mt]=new vt(t.segments.slice(s.pathIndex),t.children),La(d,0,o)}return s.match&&0===o.length?new vt(t.segments,{}):s.match&&!t.hasChildren()?sf(t,n,e):s.match?La(t,0,o):sf(t,n,e)}function La(t,n,e){if(0===e.length)return new vt(t.segments,{});{const s=function QR(t){return ka(t[0])?t[0].outlets:{[mt]:t}}(e),o={};return Sn(s,(d,C)=>{"string"==typeof d&&(d=[d]),null!==d&&(o[C]=rf(t.children[C],n,d))}),Sn(t.children,(d,C)=>{void 0===s[C]&&(o[C]=d)}),new vt(t.segments,o)}}function sf(t,n,e){const s=t.segments.slice(0,n);let o=0;for(;o<e.length;){const d=e[o];if(ka(d)){const R=tN(d.outlets);return new vt(s,R)}if(0===o&&Na(e[0])){s.push(new Aa(t.segments[n].path,Pb(e[0]))),o++;continue}const C=ka(d)?d.outlets[mt]:`${d}`,P=o<e.length-1?e[o+1]:null;C&&P&&Na(P)?(s.push(new Aa(C,Pb(P))),o+=2):(s.push(new Aa(C,{})),o++)}return new vt(s,{})}function tN(t){const n={};return Sn(t,(e,s)=>{"string"==typeof e&&(e=[e]),null!==e&&(n[s]=sf(new vt([],{}),0,e))}),n}function Pb(t){const n={};return Sn(t,(e,s)=>n[s]=`${e}`),n}function Mb(t,n,e){return t==e.path&&tr(n,e.parameters)}class wr{constructor(n,e){this.id=n,this.url=e}}class af extends wr{constructor(n,e,s="imperative",o=null){super(n,e),this.type=0,this.navigationTrigger=s,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vs extends wr{constructor(n,e,s){super(n,e),this.urlAfterRedirects=s,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Kc extends wr{constructor(n,e,s,o){super(n,e),this.reason=s,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ob extends wr{constructor(n,e,s,o){super(n,e),this.error=s,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nN extends wr{constructor(n,e,s,o){super(n,e),this.urlAfterRedirects=s,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iN extends wr{constructor(n,e,s,o){super(n,e),this.urlAfterRedirects=s,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rN extends wr{constructor(n,e,s,o,d){super(n,e),this.urlAfterRedirects=s,this.state=o,this.shouldActivate=d,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sN extends wr{constructor(n,e,s,o){super(n,e),this.urlAfterRedirects=s,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oN extends wr{constructor(n,e,s,o){super(n,e),this.urlAfterRedirects=s,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aN{constructor(n){this.route=n,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lN{constructor(n){this.route=n,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class cN{constructor(n){this.snapshot=n,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uN{constructor(n){this.snapshot=n,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dN{constructor(n){this.snapshot=n,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hN{constructor(n){this.snapshot=n,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ib{constructor(n,e,s){this.routerEvent=n,this.position=e,this.anchor=s,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ab{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const e=this.pathFromRoot(n);return e.length>1?e[e.length-2]:null}children(n){const e=lf(n,this._root);return e?e.children.map(s=>s.value):[]}firstChild(n){const e=lf(n,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(n){const e=cf(n,this._root);return e.length<2?[]:e[e.length-2].children.map(o=>o.value).filter(o=>o!==n)}pathFromRoot(n){return cf(n,this._root).map(e=>e.value)}}function lf(t,n){if(t===n.value)return n;for(const e of n.children){const s=lf(t,e);if(s)return s}return null}function cf(t,n){if(t===n.value)return[n];for(const e of n.children){const s=cf(t,e);if(s.length)return s.unshift(n),s}return[]}class Er{constructor(n,e){this.value=n,this.children=e}toString(){return`TreeNode(${this.value})`}}function fo(t){const n={};return t&&t.children.forEach(e=>n[e.value.outlet]=e),n}class Rb extends Ab{constructor(n,e){super(n),this.snapshot=e,uf(this,n)}toString(){return this.snapshot.toString()}}function Nb(t,n){const e=function fN(t,n){const C=new Zc([],{},{},"",{},mt,n,null,t.root,-1,{});return new Lb("",new Er(C,[]))}(t,n),s=new Ui([new Aa("",{})]),o=new Ui({}),d=new Ui({}),C=new Ui({}),P=new Ui(""),R=new go(s,o,C,P,d,mt,n,e.root);return R.snapshot=e.root,new Rb(new Er(R,[]),e)}class go{constructor(n,e,s,o,d,C,P,R){this.url=n,this.params=e,this.queryParams=s,this.fragment=o,this.data=d,this.outlet=C,this.component=P,this.title=this.data?.pipe(Ce(k=>k[Ia]))??Ye(void 0),this._futureSnapshot=R}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(n=>uo(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(n=>uo(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kb(t,n="emptyOnly"){const e=t.pathFromRoot;let s=0;if("always"!==n)for(s=e.length-1;s>=1;){const o=e[s],d=e[s-1];if(o.routeConfig&&""===o.routeConfig.path)s--;else{if(d.component)break;s--}}return function gN(t){return t.reduce((n,e)=>({params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(s))}class Zc{constructor(n,e,s,o,d,C,P,R,k,F,H){this.url=n,this.params=e,this.queryParams=s,this.fragment=o,this.data=d,this.outlet=C,this.component=P,this.routeConfig=R,this._urlSegment=k,this._lastPathIndex=F,this._resolve=H}get title(){return this.data?.[Ia]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=uo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=uo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Lb extends Ab{constructor(n,e){super(e),this.url=n,uf(this,e)}toString(){return Fb(this._root)}}function uf(t,n){n.value._routerState=t,n.children.forEach(e=>uf(t,e))}function Fb(t){const n=t.children.length>0?` { ${t.children.map(Fb).join(", ")} } `:"";return`${t.value}${n}`}function df(t){if(t.snapshot){const n=t.snapshot,e=t._futureSnapshot;t.snapshot=e,tr(n.queryParams,e.queryParams)||t.queryParams.next(e.queryParams),n.fragment!==e.fragment&&t.fragment.next(e.fragment),tr(n.params,e.params)||t.params.next(e.params),function IR(t,n){if(t.length!==n.length)return!1;for(let e=0;e<t.length;++e)if(!tr(t[e],n[e]))return!1;return!0}(n.url,e.url)||t.url.next(e.url),tr(n.data,e.data)||t.data.next(e.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function hf(t,n){const e=tr(t.params,n.params)&&function kR(t,n){return ms(t,n)&&t.every((e,s)=>tr(e.parameters,n[s].parameters))}(t.url,n.url);return e&&!(!t.parent!=!n.parent)&&(!t.parent||hf(t.parent,n.parent))}function Fa(t,n,e){if(e&&t.shouldReuseRoute(n.value,e.value.snapshot)){const s=e.value;s._futureSnapshot=n.value;const o=function _N(t,n,e){return n.children.map(s=>{for(const o of e.children)if(t.shouldReuseRoute(s.value,o.value.snapshot))return Fa(t,s,o);return Fa(t,s)})}(t,n,e);return new Er(s,o)}{if(t.shouldAttach(n.value)){const d=t.retrieve(n.value);if(null!==d){const C=d.route;return C.value._futureSnapshot=n.value,C.children=n.children.map(P=>Fa(t,P)),C}}const s=function vN(t){return new go(new Ui(t.url),new Ui(t.params),new Ui(t.queryParams),new Ui(t.fragment),new Ui(t.data),t.outlet,t.component,t)}(n.value),o=n.children.map(d=>Fa(t,d));return new Er(s,o)}}const pf="ngNavigationCancelingError";function Bb(t,n){const{redirectTo:e,navigationBehaviorOptions:s}=_s(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,o=Vb(!1,0,n);return o.url=e,o.navigationBehaviorOptions=s,o}function Vb(t,n,e){const s=new Error("NavigationCancelingError: "+(t||""));return s[pf]=!0,s.cancellationCode=n,e&&(s.url=e),s}function jb(t){return Hb(t)&&_s(t.url)}function Hb(t){return t&&t[pf]}class yN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ba,this.attachRef=null}}let Ba=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(e,s){const o=this.getOrCreateContext(e);o.outlet=s,this.contexts.set(e,o)}onChildOutletDestroyed(e){const s=this.getContext(e);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let s=this.getContext(e);return s||(s=new yN,this.contexts.set(e,s)),s}getContext(e){return this.contexts.get(e)||null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Qc=!1;let ff=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=mt,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=Dt(Ba),this.location=Dt(Li),this.changeDetector=Dt($n),this.environmentInjector=Dt(hr)}ngOnChanges(e){if(e.name){const{firstChange:s,previousValue:o}=e.name;if(s)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,Qc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,Qc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,Qc);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,s){this.activated=e,this._activatedRoute=s,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,s){if(this.isActivated)throw new xe(4013,Qc);this._activatedRoute=e;const o=this.location,C=e._futureSnapshot.component,P=this.parentContexts.getOrCreateContext(this.name).children,R=new bN(e,P,o.injector);if(s&&function CN(t){return!!t.resolveComponentFactory}(s)){const k=s.resolveComponentFactory(C);this.activated=o.createComponent(k,o.length,R)}else this.activated=o.createComponent(C,{index:o.length,injector:R,environmentInjector:s??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ge({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Cn]}),t})();class bN{constructor(n,e,s){this.route=n,this.childContexts=e,this.parent=s}get(n,e){return n===go?this.route:n===Ba?this.childContexts:this.parent.get(n,e)}}let gf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=en({type:t,selectors:[["ng-component"]],standalone:!0,features:[Jv],decls:1,vars:0,template:function(e,s){1&e&&pt(0,"router-outlet")},dependencies:[ff],encapsulation:2}),t})();function Ub(t,n){return t.providers&&!t._injector&&(t._injector=fc(t.providers,n,`Route: ${t.path}`)),t._injector??n}function _f(t){const n=t.children&&t.children.map(_f),e=n?{...t,children:n}:{...t};return!e.component&&!e.loadComponent&&(n||e.loadChildren)&&e.outlet&&e.outlet!==mt&&(e.component=gf),e}function wi(t){return t.outlet||mt}function zb(t,n){const e=t.filter(s=>wi(s)===n);return e.push(...t.filter(s=>wi(s)!==n)),e}function Va(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let n=t.parent;n;n=n.parent){const e=n.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class TN{constructor(n,e,s,o){this.routeReuseStrategy=n,this.futureState=e,this.currState=s,this.forwardEvent=o}activate(n){const e=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,s,n),df(this.futureState.root),this.activateChildRoutes(e,s,n)}deactivateChildRoutes(n,e,s){const o=fo(e);n.children.forEach(d=>{const C=d.value.outlet;this.deactivateRoutes(d,o[C],s),delete o[C]}),Sn(o,(d,C)=>{this.deactivateRouteAndItsChildren(d,s)})}deactivateRoutes(n,e,s){const o=n.value,d=e?e.value:null;if(o===d)if(o.component){const C=s.getContext(o.outlet);C&&this.deactivateChildRoutes(n,e,C.children)}else this.deactivateChildRoutes(n,e,s);else d&&this.deactivateRouteAndItsChildren(e,s)}deactivateRouteAndItsChildren(n,e){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,e):this.deactivateRouteAndOutlet(n,e)}detachAndStoreRouteSubtree(n,e){const s=e.getContext(n.value.outlet),o=s&&n.value.component?s.children:e,d=fo(n);for(const C of Object.keys(d))this.deactivateRouteAndItsChildren(d[C],o);if(s&&s.outlet){const C=s.outlet.detach(),P=s.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:C,route:n,contexts:P})}}deactivateRouteAndOutlet(n,e){const s=e.getContext(n.value.outlet),o=s&&n.value.component?s.children:e,d=fo(n);for(const C of Object.keys(d))this.deactivateRouteAndItsChildren(d[C],o);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(n,e,s){const o=fo(e);n.children.forEach(d=>{this.activateRoutes(d,o[d.value.outlet],s),this.forwardEvent(new hN(d.value.snapshot))}),n.children.length&&this.forwardEvent(new uN(n.value.snapshot))}activateRoutes(n,e,s){const o=n.value,d=e?e.value:null;if(df(o),o===d)if(o.component){const C=s.getOrCreateContext(o.outlet);this.activateChildRoutes(n,e,C.children)}else this.activateChildRoutes(n,e,s);else if(o.component){const C=s.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const P=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),C.children.onOutletReAttached(P.contexts),C.attachRef=P.componentRef,C.route=P.route.value,C.outlet&&C.outlet.attach(P.componentRef,P.route.value),df(P.route.value),this.activateChildRoutes(n,null,C.children)}else{const P=Va(o.snapshot),R=P?.get(ia)??null;C.attachRef=null,C.route=o,C.resolver=R,C.injector=P,C.outlet&&C.outlet.activateWith(o,C.injector),this.activateChildRoutes(n,null,C.children)}}else this.activateChildRoutes(n,null,s)}}class Yb{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class eu{constructor(n,e){this.component=n,this.route=e}}function DN(t,n,e){const s=t._root;return ja(s,n?n._root:null,e,[s.value])}function mo(t,n){const e=Symbol(),s=n.get(t,e);return s===e?"function"!=typeof t||function xE(t){return null!==ml(t)}(t)?n.get(t):t:s}function ja(t,n,e,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const d=fo(n);return t.children.forEach(C=>{(function MN(t,n,e,s,o={canDeactivateChecks:[],canActivateChecks:[]}){const d=t.value,C=n?n.value:null,P=e?e.getContext(t.value.outlet):null;if(C&&d.routeConfig===C.routeConfig){const R=function ON(t,n,e){if("function"==typeof e)return e(t,n);switch(e){case"pathParamsChange":return!ms(t.url,n.url);case"pathParamsOrQueryParamsChange":return!ms(t.url,n.url)||!tr(t.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hf(t,n)||!tr(t.queryParams,n.queryParams);default:return!hf(t,n)}}(C,d,d.routeConfig.runGuardsAndResolvers);R?o.canActivateChecks.push(new Yb(s)):(d.data=C.data,d._resolvedData=C._resolvedData),ja(t,n,d.component?P?P.children:null:e,s,o),R&&P&&P.outlet&&P.outlet.isActivated&&o.canDeactivateChecks.push(new eu(P.outlet.component,C))}else C&&Ha(n,P,o),o.canActivateChecks.push(new Yb(s)),ja(t,null,d.component?P?P.children:null:e,s,o)})(C,d[C.value.outlet],e,s.concat([C.value]),o),delete d[C.value.outlet]}),Sn(d,(C,P)=>Ha(C,e.getContext(P),o)),o}function Ha(t,n,e){const s=fo(t),o=t.value;Sn(s,(d,C)=>{Ha(d,o.component?n?n.children.getContext(C):null:n,e)}),e.canDeactivateChecks.push(new eu(o.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,o))}function Ua(t){return"function"==typeof t}function vf(t){return t instanceof Uc||"EmptyError"===t?.name}const tu=Symbol("INITIAL_VALUE");function _o(){return er(t=>sb(t.map(n=>n.pipe(Oa(1),function SR(...t){const n=Io(t);return ye((e,s)=>{(n?Wp(t,e,n):Wp(t,e)).subscribe(s)})}(tu)))).pipe(Ce(n=>{for(const e of n)if(!0!==e){if(e===tu)return tu;if(!1===e||e instanceof gs)return e}return!0}),Cr(n=>n!==tu),Oa(1)))}function Gb(t){return function W(...t){return ee(t)}(Ln(n=>{if(_s(n))throw Bb(0,n)}),Ce(n=>!0===n))}const yf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $b(t,n,e,s,o){const d=bf(t,n,e);return d.matched?function XN(t,n,e,s){const o=n.canMatch;return o&&0!==o.length?Ye(o.map(C=>{const P=mo(C,t);return zr(function LN(t){return t&&Ua(t.canMatch)}(P)?P.canMatch(n,e):t.runInContext(()=>P(n,e)))})).pipe(_o(),Gb()):Ye(!0)}(s=Ub(n,s),n,e).pipe(Ce(C=>!0===C?d:{...yf})):Ye(d)}function bf(t,n,e){if(""===n.path)return"full"===n.pathMatch&&(t.hasChildren()||e.length>0)?{...yf}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const o=(n.matcher||OR)(e,t,n);if(!o)return{...yf};const d={};Sn(o.posParams,(P,R)=>{d[R]=P.path});const C=o.consumed.length>0?{...d,...o.consumed[o.consumed.length-1].parameters}:d;return{matched:!0,consumedSegments:o.consumed,remainingSegments:e.slice(o.consumed.length),parameters:C,positionalParamSegments:o.posParams??{}}}function nu(t,n,e,s){if(e.length>0&&function qN(t,n,e){return e.some(s=>iu(t,n,s)&&wi(s)!==mt)}(t,e,s)){const d=new vt(n,function WN(t,n,e,s){const o={};o[mt]=s,s._sourceSegment=t,s._segmentIndexShift=n.length;for(const d of e)if(""===d.path&&wi(d)!==mt){const C=new vt([],{});C._sourceSegment=t,C._segmentIndexShift=n.length,o[wi(d)]=C}return o}(t,n,s,new vt(e,t.children)));return d._sourceSegment=t,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:[]}}if(0===e.length&&function KN(t,n,e){return e.some(s=>iu(t,n,s))}(t,e,s)){const d=new vt(t.segments,function JN(t,n,e,s,o){const d={};for(const C of s)if(iu(t,e,C)&&!o[wi(C)]){const P=new vt([],{});P._sourceSegment=t,P._segmentIndexShift=n.length,d[wi(C)]=P}return{...o,...d}}(t,n,e,s,t.children));return d._sourceSegment=t,d._segmentIndexShift=n.length,{segmentGroup:d,slicedSegments:e}}const o=new vt(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=n.length,{segmentGroup:o,slicedSegments:e}}function iu(t,n,e){return(!(t.hasChildren()||n.length>0)||"full"!==e.pathMatch)&&""===e.path}function Xb(t,n,e,s){return!!(wi(t)===s||s!==mt&&iu(n,e,t))&&("**"===t.path||bf(n,t,e).matched)}function Jb(t,n,e){return 0===n.length&&!t.children[e]}const ru=!1;class su{constructor(n){this.segmentGroup=n||null}}class Wb{constructor(n){this.urlTree=n}}function za(t){return Ma(new su(t))}function qb(t){return Ma(new Wb(t))}class t3{constructor(n,e,s,o,d){this.injector=n,this.configLoader=e,this.urlSerializer=s,this.urlTree=o,this.config=d,this.allowRedirects=!0}apply(){const n=nu(this.urlTree.root,[],[],this.config).segmentGroup,e=new vt(n.segments,n.children);return this.expandSegmentGroup(this.injector,this.config,e,mt).pipe(Ce(d=>this.createUrlTree(qc(d),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ur(d=>{if(d instanceof Wb)return this.allowRedirects=!1,this.match(d.urlTree);throw d instanceof su?this.noMatchError(d):d}))}match(n){return this.expandSegmentGroup(this.injector,this.config,n.root,mt).pipe(Ce(o=>this.createUrlTree(qc(o),n.queryParams,n.fragment))).pipe(Ur(o=>{throw o instanceof su?this.noMatchError(o):o}))}noMatchError(n){return new xe(4002,ru)}createUrlTree(n,e,s){const o=tf(n);return new gs(o,e,s)}expandSegmentGroup(n,e,s,o){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(n,e,s).pipe(Ce(d=>new vt([],d))):this.expandSegment(n,s,e,s.segments,o,!0)}expandChildren(n,e,s){const o=[];for(const d of Object.keys(s.children))"primary"===d?o.unshift(d):o.push(d);return un(o).pipe(Hr(d=>{const C=s.children[d],P=zb(e,d);return this.expandSegmentGroup(n,P,C,d).pipe(Ce(R=>({segment:R,outlet:d})))}),ub((d,C)=>(d[C.outlet]=C.segment,d),{}),db())}expandSegment(n,e,s,o,d,C){return un(s).pipe(Hr(P=>this.expandSegmentAgainstRoute(n,e,s,P,o,d,C).pipe(Ur(k=>{if(k instanceof su)return Ye(null);throw k}))),jr(P=>!!P),Ur((P,R)=>{if(vf(P))return Jb(e,o,d)?Ye(new vt([],{})):za(e);throw P}))}expandSegmentAgainstRoute(n,e,s,o,d,C,P){return Xb(o,e,d,C)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(n,e,o,d,C):P&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,e,s,o,d,C):za(e):za(e)}expandSegmentAgainstRouteUsingRedirect(n,e,s,o,d,C){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,s,o,C):this.expandRegularSegmentAgainstRouteUsingRedirect(n,e,s,o,d,C)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,e,s,o){const d=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?qb(d):this.lineralizeSegments(s,d).pipe(Xt(C=>{const P=new vt(C,{});return this.expandSegment(n,P,e,C,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,e,s,o,d,C){const{matched:P,consumedSegments:R,remainingSegments:k,positionalParamSegments:F}=bf(e,o,d);if(!P)return za(e);const H=this.applyRedirectCommands(R,o.redirectTo,F);return o.redirectTo.startsWith("/")?qb(H):this.lineralizeSegments(o,H).pipe(Xt(Y=>this.expandSegment(n,e,s,Y.concat(k),C,!1)))}matchSegmentAgainstRoute(n,e,s,o,d){return"**"===s.path?(n=Ub(s,n),s.loadChildren?(s._loadedRoutes?Ye({routes:s._loadedRoutes,injector:s._loadedInjector}):this.configLoader.loadChildren(n,s)).pipe(Ce(P=>(s._loadedRoutes=P.routes,s._loadedInjector=P.injector,new vt(o,{})))):Ye(new vt(o,{}))):$b(e,s,o,n).pipe(er(({matched:C,consumedSegments:P,remainingSegments:R})=>C?this.getChildConfig(n=s._injector??n,s,o).pipe(Xt(F=>{const H=F.injector??n,Y=F.routes,{segmentGroup:G,slicedSegments:K}=nu(e,P,R,Y),ne=new vt(G.segments,G.children);if(0===K.length&&ne.hasChildren())return this.expandChildren(H,Y,ne).pipe(Ce(ge=>new vt(P,ge)));if(0===Y.length&&0===K.length)return Ye(new vt(P,{}));const se=wi(s)===d;return this.expandSegment(H,ne,Y,K,se?mt:d,!0).pipe(Ce(Ee=>new vt(P.concat(Ee.segments),Ee.children)))})):za(e)))}getChildConfig(n,e,s){return e.children?Ye({routes:e.children,injector:n}):e.loadChildren?void 0!==e._loadedRoutes?Ye({routes:e._loadedRoutes,injector:e._loadedInjector}):function $N(t,n,e,s){const o=n.canLoad;return void 0===o||0===o.length?Ye(!0):Ye(o.map(C=>{const P=mo(C,t);return zr(function AN(t){return t&&Ua(t.canLoad)}(P)?P.canLoad(n,e):t.runInContext(()=>P(n,e)))})).pipe(_o(),Gb())}(n,e,s).pipe(Xt(o=>o?this.configLoader.loadChildren(n,e).pipe(Ln(d=>{e._loadedRoutes=d.routes,e._loadedInjector=d.injector})):function QN(t){return Ma(Vb(ru,3))}())):Ye({routes:[],injector:n})}lineralizeSegments(n,e){let s=[],o=e.root;for(;;){if(s=s.concat(o.segments),0===o.numberOfChildren)return Ye(s);if(o.numberOfChildren>1||!o.children[mt])return Ma(new xe(4e3,ru));o=o.children[mt]}}applyRedirectCommands(n,e,s){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),n,s)}applyRedirectCreateUrlTree(n,e,s,o){const d=this.createSegmentGroup(n,e.root,s,o);return new gs(d,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(n,e){const s={};return Sn(n,(o,d)=>{if("string"==typeof o&&o.startsWith(":")){const P=o.substring(1);s[d]=e[P]}else s[d]=o}),s}createSegmentGroup(n,e,s,o){const d=this.createSegments(n,e.segments,s,o);let C={};return Sn(e.children,(P,R)=>{C[R]=this.createSegmentGroup(n,P,s,o)}),new vt(d,C)}createSegments(n,e,s,o){return e.map(d=>d.path.startsWith(":")?this.findPosParam(n,d,o):this.findOrReturn(d,s))}findPosParam(n,e,s){const o=s[e.path.substring(1)];if(!o)throw new xe(4001,ru);return o}findOrReturn(n,e){let s=0;for(const o of e){if(o.path===n.path)return e.splice(s),o;s++}return n}}class i3{}class o3{constructor(n,e,s,o,d,C,P){this.injector=n,this.rootComponentType=e,this.config=s,this.urlTree=o,this.url=d,this.paramsInheritanceStrategy=C,this.urlSerializer=P}recognize(){const n=nu(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,n,mt).pipe(Ce(e=>{if(null===e)return null;const s=new Zc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},mt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Er(s,e),d=new Lb(this.url,o);return this.inheritParamsAndData(d._root),d}))}inheritParamsAndData(n){const e=n.value,s=kb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(s.params),e.data=Object.freeze(s.data),n.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(n,e,s,o){return 0===s.segments.length&&s.hasChildren()?this.processChildren(n,e,s):this.processSegment(n,e,s,s.segments,o)}processChildren(n,e,s){return un(Object.keys(s.children)).pipe(Hr(o=>{const d=s.children[o],C=zb(e,o);return this.processSegmentGroup(n,C,d,o)}),ub((o,d)=>o&&d?(o.push(...d),o):null),function DR(t,n=!1){return ye((e,s)=>{let o=0;e.subscribe(le(s,d=>{const C=t(d,o++);(C||n)&&s.next(d),!C&&s.complete()}))})}(o=>null!==o),zc(null),db(),Ce(o=>{if(null===o)return null;const d=Zb(o);return function a3(t){t.sort((n,e)=>n.value.outlet===mt?-1:e.value.outlet===mt?1:n.value.outlet.localeCompare(e.value.outlet))}(d),d}))}processSegment(n,e,s,o,d){return un(e).pipe(Hr(C=>this.processSegmentAgainstRoute(C._injector??n,C,s,o,d)),jr(C=>!!C),Ur(C=>{if(vf(C))return Jb(s,o,d)?Ye([]):Ye(null);throw C}))}processSegmentAgainstRoute(n,e,s,o,d){if(e.redirectTo||!Xb(e,s,o,d))return Ye(null);let C;if("**"===e.path){const P=o.length>0?fb(o).parameters:{},R=eC(s)+o.length;C=Ye({snapshot:new Zc(o,P,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tC(e),wi(e),e.component??e._loadedComponent??null,e,Qb(s),R,nC(e)),consumedSegments:[],remainingSegments:[]})}else C=$b(s,e,o,n).pipe(Ce(({matched:P,consumedSegments:R,remainingSegments:k,parameters:F})=>{if(!P)return null;const H=eC(s)+R.length;return{snapshot:new Zc(R,F,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tC(e),wi(e),e.component??e._loadedComponent??null,e,Qb(s),H,nC(e)),consumedSegments:R,remainingSegments:k}}));return C.pipe(er(P=>{if(null===P)return Ye(null);const{snapshot:R,consumedSegments:k,remainingSegments:F}=P;n=e._injector??n;const H=e._loadedInjector??n,Y=function l3(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:G,slicedSegments:K}=nu(s,k,F,Y.filter(se=>void 0===se.redirectTo));if(0===K.length&&G.hasChildren())return this.processChildren(H,Y,G).pipe(Ce(se=>null===se?null:[new Er(R,se)]));if(0===Y.length&&0===K.length)return Ye([new Er(R,[])]);const ne=wi(e)===d;return this.processSegment(H,Y,G,K,ne?mt:d).pipe(Ce(se=>null===se?null:[new Er(R,se)]))}))}}function c3(t){const n=t.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function Zb(t){const n=[],e=new Set;for(const s of t){if(!c3(s)){n.push(s);continue}const o=n.find(d=>s.value.routeConfig===d.value.routeConfig);void 0!==o?(o.children.push(...s.children),e.add(o)):n.push(s)}for(const s of e){const o=Zb(s.children);n.push(new Er(s.value,o))}return n.filter(s=>!e.has(s))}function Qb(t){let n=t;for(;n._sourceSegment;)n=n._sourceSegment;return n}function eC(t){let n=t,e=n._segmentIndexShift??0;for(;n._sourceSegment;)n=n._sourceSegment,e+=n._segmentIndexShift??0;return e-1}function tC(t){return t.data||{}}function nC(t){return t.resolve||{}}function iC(t){return"string"==typeof t.title||null===t.title}function Cf(t){return er(n=>{const e=t(n);return e?un(e).pipe(Ce(()=>n)):Ye(n)})}let rC=(()=>{class t{buildTitle(e){let s,o=e.root;for(;void 0!==o;)s=this.getResolvedTitleForRoute(o)??s,o=o.children.find(d=>d.outlet===mt);return s}getResolvedTitleForRoute(e){return e.data[Ia]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:function(){return Dt(sC)},providedIn:"root"}),t})(),sC=(()=>{class t extends rC{constructor(e){super(),this.title=e}updateTitle(e){const s=this.buildTitle(e);void 0!==s&&this.title.setTitle(s)}}return t.\u0275fac=function(e){return new(e||t)(je(Qy))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class _3{}class v3{shouldDetach(n){return!1}store(n,e){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,e){return n.routeConfig===e.routeConfig}}class y3 extends v3{}const ou=new Ve("",{providedIn:"root",factory:()=>({})}),vo=new Ve("ROUTES");let wf=(()=>{class t{constructor(e,s){this.injector=e,this.compiler=s,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Ye(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const s=zr(e.loadComponent()).pipe(Ce(aC),Ln(d=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=d}),Zp(()=>{this.componentLoaders.delete(e)})),o=new lb(s,()=>new Se).pipe(qp());return this.componentLoaders.set(e,o),o}loadChildren(e,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Ye({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);const d=this.loadModuleFactoryOrRoutes(s.loadChildren).pipe(Ce(P=>{this.onLoadEndListener&&this.onLoadEndListener(s);let R,k,F=!1;Array.isArray(P)?k=P:(R=P.create(e).injector,k=pb(R.get(vo,[],Qe.Self|Qe.Optional)));return{routes:k.map(_f),injector:R}}),Zp(()=>{this.childrenLoaders.delete(s)})),C=new lb(d,()=>new Se).pipe(qp());return this.childrenLoaders.set(s,C),C}loadModuleFactoryOrRoutes(e){return zr(e()).pipe(Ce(aC),Xt(o=>o instanceof $v||Array.isArray(o)?Ye(o):un(this.compiler.compileModuleAsync(o))))}}return t.\u0275fac=function(e){return new(e||t)(je(_i),je(dp))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function aC(t){return function w3(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}class E3{}class S3{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,e){return n}}function x3(t){throw t}function T3(t,n,e){return n.parse("/")}const D3={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},P3={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function lC(){const t=Dt(bb),n=Dt(Ba),e=Dt(Tp),s=Dt(_i),o=Dt(dp),d=Dt(vo,{optional:!0})??[],C=Dt(ou,{optional:!0})??{},P=Dt(sC),R=Dt(rC,{optional:!0}),k=Dt(E3,{optional:!0}),F=Dt(_3,{optional:!0}),H=new an(null,t,n,e,s,o,pb(d));return k&&(H.urlHandlingStrategy=k),F&&(H.routeReuseStrategy=F),H.titleStrategy=R??P,function M3(t,n){t.errorHandler&&(n.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(n.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(n.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.urlUpdateStrategy&&(n.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(n.canceledNavigationResolution=t.canceledNavigationResolution)}(C,H),H}let an=(()=>{class t{constructor(e,s,o,d,C,P,R){this.rootComponentType=e,this.urlSerializer=s,this.rootContexts=o,this.location=d,this.config=R,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Se,this.errorHandler=x3,this.malformedUriErrorHandler=T3,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ye(void 0),this.urlHandlingStrategy=new S3,this.routeReuseStrategy=new y3,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.configLoader=C.get(wf),this.configLoader.onLoadEndListener=Y=>this.triggerEvent(new lN(Y)),this.configLoader.onLoadStartListener=Y=>this.triggerEvent(new aN(Y)),this.ngModule=C.get(ds),this.console=C.get(iO);const H=C.get(Gt);this.isNgZoneEnabled=H instanceof Gt&&Gt.isInAngularZone(),this.resetConfig(R),this.currentUrlTree=new gs,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Nb(this.currentUrlTree,this.rootComponentType),this.transitions=new Ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const s=this.events;return e.pipe(Cr(o=>0!==o.id),Ce(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),er(o=>{let d=!1,C=!1;return Ye(o).pipe(Ln(P=>{this.currentNavigation={id:P.id,initialUrl:P.rawUrl,extractedUrl:P.extractedUrl,trigger:P.source,extras:P.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),er(P=>{const R=this.browserUrlTree.toString(),k=!this.navigated||P.extractedUrl.toString()!==R||R!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||k)&&this.urlHandlingStrategy.shouldProcessUrl(P.rawUrl))return cC(P.source)&&(this.browserUrlTree=P.extractedUrl),Ye(P).pipe(er(H=>{const Y=this.transitions.getValue();return s.next(new af(H.id,this.serializeUrl(H.extractedUrl),H.source,H.restoredState)),Y!==this.transitions.getValue()?Vn:Promise.resolve(H)}),function n3(t,n,e,s){return er(o=>function e3(t,n,e,s,o){return new t3(t,n,e,s,o).apply()}(t,n,e,o.extractedUrl,s).pipe(Ce(d=>({...o,urlAfterRedirects:d}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ln(H=>{this.currentNavigation={...this.currentNavigation,finalUrl:H.urlAfterRedirects},o.urlAfterRedirects=H.urlAfterRedirects}),function d3(t,n,e,s,o){return Xt(d=>function s3(t,n,e,s,o,d,C="emptyOnly"){return new o3(t,n,e,s,o,C,d).recognize().pipe(er(P=>null===P?function r3(t){return new ie(n=>n.error(t))}(new i3):Ye(P)))}(t,n,e,d.urlAfterRedirects,s.serialize(d.urlAfterRedirects),s,o).pipe(Ce(C=>({...d,targetSnapshot:C}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy),Ln(H=>{if(o.targetSnapshot=H.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!H.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(H.urlAfterRedirects,H.rawUrl);this.setBrowserUrl(G,H)}this.browserUrlTree=H.urlAfterRedirects}const Y=new nN(H.id,this.serializeUrl(H.extractedUrl),this.serializeUrl(H.urlAfterRedirects),H.targetSnapshot);s.next(Y)}));if(k&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Y,extractedUrl:G,source:K,restoredState:ne,extras:se}=P,he=new af(Y,this.serializeUrl(G),K,ne);s.next(he);const Ee=Nb(G,this.rootComponentType).snapshot;return Ye(o={...P,targetSnapshot:Ee,urlAfterRedirects:G,extras:{...se,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=P.rawUrl,P.resolve(null),Vn}),Ln(P=>{const R=new iN(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot);this.triggerEvent(R)}),Ce(P=>o={...P,guards:DN(P.targetSnapshot,P.currentSnapshot,this.rootContexts)}),function BN(t,n){return Xt(e=>{const{targetSnapshot:s,currentSnapshot:o,guards:{canActivateChecks:d,canDeactivateChecks:C}}=e;return 0===C.length&&0===d.length?Ye({...e,guardsResult:!0}):function VN(t,n,e,s){return un(t).pipe(Xt(o=>function GN(t,n,e,s,o){const d=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return d&&0!==d.length?Ye(d.map(P=>{const R=Va(n)??o,k=mo(P,R);return zr(function kN(t){return t&&Ua(t.canDeactivate)}(k)?k.canDeactivate(t,n,e,s):R.runInContext(()=>k(t,n,e,s))).pipe(jr())})).pipe(_o()):Ye(!0)}(o.component,o.route,e,n,s)),jr(o=>!0!==o,!0))}(C,s,o,t).pipe(Xt(P=>P&&function IN(t){return"boolean"==typeof t}(P)?function jN(t,n,e,s){return un(n).pipe(Hr(o=>Wp(function UN(t,n){return null!==t&&n&&n(new cN(t)),Ye(!0)}(o.route.parent,s),function HN(t,n){return null!==t&&n&&n(new dN(t)),Ye(!0)}(o.route,s),function YN(t,n,e){const s=n[n.length-1],d=n.slice(0,n.length-1).reverse().map(C=>function PN(t){const n=t.routeConfig?t.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:t,guards:n}:null}(C)).filter(C=>null!==C).map(C=>ab(()=>Ye(C.guards.map(R=>{const k=Va(C.node)??e,F=mo(R,k);return zr(function NN(t){return t&&Ua(t.canActivateChild)}(F)?F.canActivateChild(s,t):k.runInContext(()=>F(s,t))).pipe(jr())})).pipe(_o())));return Ye(d).pipe(_o())}(t,o.path,e),function zN(t,n,e){const s=n.routeConfig?n.routeConfig.canActivate:null;if(!s||0===s.length)return Ye(!0);const o=s.map(d=>ab(()=>{const C=Va(n)??e,P=mo(d,C);return zr(function RN(t){return t&&Ua(t.canActivate)}(P)?P.canActivate(n,t):C.runInContext(()=>P(n,t))).pipe(jr())}));return Ye(o).pipe(_o())}(t,o.route,e))),jr(o=>!0!==o,!0))}(s,d,t,n):Ye(P)),Ce(P=>({...e,guardsResult:P})))})}(this.ngModule.injector,P=>this.triggerEvent(P)),Ln(P=>{if(o.guardsResult=P.guardsResult,_s(P.guardsResult))throw Bb(0,P.guardsResult);const R=new rN(P.id,this.serializeUrl(P.extractedUrl),this.serializeUrl(P.urlAfterRedirects),P.targetSnapshot,!!P.guardsResult);this.triggerEvent(R)}),Cr(P=>!!P.guardsResult||(this.restoreHistory(P),this.cancelNavigationTransition(P,"",3),!1)),Cf(P=>{if(P.guards.canActivateChecks.length)return Ye(P).pipe(Ln(R=>{const k=new sN(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);this.triggerEvent(k)}),er(R=>{let k=!1;return Ye(R).pipe(function h3(t,n){return Xt(e=>{const{targetSnapshot:s,guards:{canActivateChecks:o}}=e;if(!o.length)return Ye(e);let d=0;return un(o).pipe(Hr(C=>function p3(t,n,e,s){const o=t.routeConfig,d=t._resolve;return void 0!==o?.title&&!iC(o)&&(d[Ia]=o.title),function f3(t,n,e,s){const o=function g3(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===o.length)return Ye({});const d={};return un(o).pipe(Xt(C=>function m3(t,n,e,s){const o=Va(n)??s,d=mo(t,o);return zr(d.resolve?d.resolve(n,e):o.runInContext(()=>d(n,e)))}(t[C],n,e,s).pipe(jr(),Ln(P=>{d[C]=P}))),Kp(1),function PR(t){return Ce(()=>t)}(d),Ur(C=>vf(C)?Vn:Ma(C)))}(d,t,n,s).pipe(Ce(C=>(t._resolvedData=C,t.data=kb(t,e).resolve,o&&iC(o)&&(t.data[Ia]=o.title),null)))}(C.route,s,t,n)),Ln(()=>d++),Kp(1),Xt(C=>d===o.length?Ye(e):Vn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ln({next:()=>k=!0,complete:()=>{k||(this.restoreHistory(R),this.cancelNavigationTransition(R,"",2))}}))}),Ln(R=>{const k=new oN(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);this.triggerEvent(k)}))}),Cf(P=>{const R=k=>{const F=[];k.routeConfig?.loadComponent&&!k.routeConfig._loadedComponent&&F.push(this.configLoader.loadComponent(k.routeConfig).pipe(Ln(H=>{k.component=H}),Ce(()=>{})));for(const H of k.children)F.push(...R(H));return F};return sb(R(P.targetSnapshot.root)).pipe(zc(),Oa(1))}),Cf(()=>this.afterPreactivation()),Ce(P=>{const R=function mN(t,n,e){const s=Fa(t,n._root,e?e._root:void 0);return new Rb(s,n)}(this.routeReuseStrategy,P.targetSnapshot,P.currentRouterState);return o={...P,targetRouterState:R}}),Ln(P=>{this.currentUrlTree=P.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(P.urlAfterRedirects,P.rawUrl),this.routerState=P.targetRouterState,"deferred"===this.urlUpdateStrategy&&(P.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,P),this.browserUrlTree=P.urlAfterRedirects)}),((t,n,e)=>Ce(s=>(new TN(n,s.targetRouterState,s.currentRouterState,e).activate(t),s)))(this.rootContexts,this.routeReuseStrategy,P=>this.triggerEvent(P)),Ln({next(){d=!0},complete(){d=!0}}),Zp(()=>{d||C||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ur(P=>{if(C=!0,Hb(P)){jb(P)||(this.navigated=!0,this.restoreHistory(o,!0));const R=new Kc(o.id,this.serializeUrl(o.extractedUrl),P.message,P.cancellationCode);if(s.next(R),jb(P)){const k=this.urlHandlingStrategy.merge(P.url,this.rawUrlTree),F={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cC(o.source)};this.scheduleNavigation(k,"imperative",null,F,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const R=new Ob(o.id,this.serializeUrl(o.extractedUrl),P,o.targetSnapshot??void 0);s.next(R);try{o.resolve(this.errorHandler(P))}catch(k){o.reject(k)}}return Vn}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const s="popstate"===e.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{const o={replaceUrl:!0},d=e.state?.navigationId?e.state:null;if(d){const P={...d};delete P.navigationId,delete P.\u0275routerPageId,0!==Object.keys(P).length&&(o.state=P)}const C=this.parseUrl(e.url);this.scheduleNavigation(C,s,d,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(_f),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,s={}){const{relativeTo:o,queryParams:d,fragment:C,queryParamsHandling:P,preserveFragment:R}=s,k=o||this.routerState.root,F=R?this.currentUrlTree.fragment:C;let H=null;switch(P){case"merge":H={...this.currentUrlTree.queryParams,...d};break;case"preserve":H=this.currentUrlTree.queryParams;break;default:H=d||null}return null!==H&&(H=this.removeEmptyProps(H)),qR(k,this.currentUrlTree,e,H,F??null)}navigateByUrl(e,s={skipLocationChange:!1}){const o=_s(e)?e:this.parseUrl(e),d=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(d,"imperative",null,s)}navigate(e,s={skipLocationChange:!1}){return function O3(t){for(let n=0;n<t.length;n++){if(null==t[n])throw new xe(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,s),s)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let s;try{s=this.urlSerializer.parse(e)}catch(o){s=this.malformedUriErrorHandler(o,this.urlSerializer,e)}return s}isActive(e,s){let o;if(o=!0===s?{...D3}:!1===s?{...P3}:s,_s(e))return mb(this.currentUrlTree,e,o);const d=this.parseUrl(e);return mb(this.currentUrlTree,d,o)}removeEmptyProps(e){return Object.keys(e).reduce((s,o)=>{const d=e[o];return null!=d&&(s[o]=d),s},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new vs(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,s,o,d,C){if(this.disposed)return Promise.resolve(!1);let P,R,k;C?(P=C.resolve,R=C.reject,k=C.promise):k=new Promise((Y,G)=>{P=Y,R=G});const F=++this.navigationId;let H;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),H=o&&o.\u0275routerPageId?o.\u0275routerPageId:d.replaceUrl||d.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):H=0,this.setTransition({id:F,targetPageId:H,source:s,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:d,resolve:P,reject:R,promise:k,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),k.catch(Y=>Promise.reject(Y))}setBrowserUrl(e,s){const o=this.urlSerializer.serialize(e),d={...s.extras.state,...this.generateNgRouterState(s.id,s.targetPageId)};this.location.isCurrentPathEqualTo(o)||s.extras.replaceUrl?this.location.replaceState(o,"",d):this.location.go(o,"",d)}restoreHistory(e,s=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,s,o){const d=new Kc(e.id,this.serializeUrl(e.extractedUrl),s,o);this.triggerEvent(d),e.resolve(!1)}generateNgRouterState(e,s){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:s}:{navigationId:e}}}return t.\u0275fac=function(e){dh()},t.\u0275prov=We({token:t,factory:function(){return lC()},providedIn:"root"}),t})();function cC(t){return"imperative"!==t}class uC{}let R3=(()=>{class t{constructor(e,s,o,d,C){this.router=e,this.injector=o,this.preloadingStrategy=d,this.loader=C}setUpPreloading(){this.subscription=this.router.events.pipe(Cr(e=>e instanceof vs),Hr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,s){const o=[];for(const d of s){d.providers&&!d._injector&&(d._injector=fc(d.providers,e,`Route: ${d.path}`));const C=d._injector??e,P=d._loadedInjector??C;d.loadChildren&&!d._loadedRoutes&&void 0===d.canLoad||d.loadComponent&&!d._loadedComponent?o.push(this.preloadConfig(C,d)):(d.children||d._loadedRoutes)&&o.push(this.processRoutes(P,d.children??d._loadedRoutes))}return un(o).pipe(sr())}preloadConfig(e,s){return this.preloadingStrategy.preload(s,()=>{let o;o=s.loadChildren&&void 0===s.canLoad?this.loader.loadChildren(e,s):Ye(null);const d=o.pipe(Xt(C=>null===C?Ye(void 0):(s._loadedRoutes=C.routes,s._loadedInjector=C.injector,this.processRoutes(C.injector??e,C.routes))));return s.loadComponent&&!s._loadedComponent?un([d,this.loader.loadComponent(s)]).pipe(sr()):d})}}return t.\u0275fac=function(e){return new(e||t)(je(an),je(dp),je(hr),je(uC),je(wf))},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Sf=new Ve("");let dC=(()=>{class t{constructor(e,s,o,d={}){this.router=e,this.viewportScroller=s,this.zone=o,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof af?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof vs&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ib&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,s){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new Ib(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){dh()},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();function bo(t,n){return{\u0275kind:t,\u0275providers:n}}function pC(){const t=Dt(_i);return n=>{const e=t.get(wc);if(n!==e.components[0])return;const s=t.get(an),o=t.get(fC);1===t.get(Tf)&&s.initialNavigation(),t.get(gC,null,Qe.Optional)?.setUpPreloading(),t.get(Sf,null,Qe.Optional)?.init(),s.resetRootComponentType(e.componentTypes[0]),o.next(),o.complete()}}const fC=new Ve("",{factory:()=>new Se}),Tf=new Ve("",{providedIn:"root",factory:()=>1});const gC=new Ve("");function B3(t){return bo(0,[{provide:gC,useExisting:R3},{provide:uC,useExisting:t}])}const mC=new Ve("ROUTER_FORROOT_GUARD"),V3=[Tp,{provide:bb,useClass:Qp},{provide:an,useFactory:lC},Ba,{provide:go,useFactory:function hC(t){return t.routerState.root},deps:[an]},wf,[]];function j3(){return new Y1("Router",an)}let _C=(()=>{class t{constructor(e){}static forRoot(e,s){return{ngModule:t,providers:[V3,[],{provide:vo,multi:!0,useValue:e},{provide:mC,useFactory:Y3,deps:[[an,new Xo,new Jo]]},{provide:ou,useValue:s||{}},s?.useHash?{provide:ps,useClass:YO}:{provide:ps,useClass:py},{provide:Sf,useFactory:()=>{const t=Dt(an),n=Dt(lA),e=Dt(Gt),s=Dt(ou);return s.scrollOffset&&n.setOffset(s.scrollOffset),new dC(t,n,e,s)}},s?.preloadingStrategy?B3(s.preloadingStrategy).\u0275providers:[],{provide:Y1,multi:!0,useFactory:j3},s?.initialNavigation?G3(s):[],[{provide:vC,useFactory:pC},{provide:F1,multi:!0,useExisting:vC}]]}}static forChild(e){return{ngModule:t,providers:[{provide:vo,multi:!0,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(je(mC,8))},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[gf]}),t})();function Y3(t){return"guarded"}function G3(t){return["disabled"===t.initialNavigation?bo(3,[{provide:yc,multi:!0,useFactory:()=>{const n=Dt(an);return()=>{n.setUpLocationChangeListener()}}},{provide:Tf,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?bo(2,[{provide:Tf,useValue:0},{provide:yc,multi:!0,deps:[_i],useFactory:n=>{const e=n.get(UO,Promise.resolve());let s=!1;return()=>e.then(()=>new Promise(d=>{const C=n.get(an),P=n.get(fC);(function o(d){n.get(an).events.pipe(Cr(P=>P instanceof vs||P instanceof Kc||P instanceof Ob),Ce(P=>P instanceof vs||P instanceof Kc&&(0===P.code||1===P.code)&&null),Cr(P=>null!==P),Oa(1)).subscribe(()=>{d()})})(()=>{d(!0),s=!0}),C.afterPreactivation=()=>(d(!0),s||P.closed?Ye(void 0):P),C.initialNavigation()}))}}]).\u0275providers:[]]}const vC=new Ve("");class lu{constructor(){this.title="lab4"}static#e=this.\u0275fac=function(e){return new(e||lu)};static#t=this.\u0275cmp=en({type:lu,selectors:[["app-root"]],decls:1,vars:0,template:function(e,s){1&e&&pt(0,"router-outlet")},dependencies:[ff]})}let oe=(()=>{class t{static addClass(e,s){e&&s&&(e.classList?e.classList.add(s):e.className+=" "+s)}static addMultipleClasses(e,s){if(e&&s)if(e.classList){let o=s.trim().split(" ");for(let d=0;d<o.length;d++)e.classList.add(o[d])}else{let o=s.split(" ");for(let d=0;d<o.length;d++)e.className+=" "+o[d]}}static removeClass(e,s){e&&s&&(e.classList?e.classList.remove(s):e.className=e.className.replace(new RegExp("(^|\\b)"+s.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(e,s){return!(!e||!s)&&(e.classList?e.classList.contains(s):new RegExp("(^| )"+s+"( |$)","gi").test(e.className))}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(s){return s!==e})}static find(e,s){return Array.from(e.querySelectorAll(s))}static findSingle(e,s){return e?e.querySelector(s):null}static index(e){let s=e.parentNode.childNodes,o=0;for(var d=0;d<s.length;d++){if(s[d]==e)return o;1==s[d].nodeType&&o++}return-1}static indexWithinGroup(e,s){let o=e.parentNode?e.parentNode.childNodes:[],d=0;for(var C=0;C<o.length;C++){if(o[C]==e)return d;o[C].attributes&&o[C].attributes[s]&&1==o[C].nodeType&&d++}return-1}static appendOverlay(e,s,o="self"){"self"!==o&&e&&s&&this.appendChild(e,s)}static alignOverlay(e,s,o="self",d=!0){e&&s&&(d&&(e.style.minWidth||(e.style.minWidth=t.getOuterWidth(s)+"px")),"self"===o?this.relativePosition(e,s):this.absolutePosition(e,s))}static relativePosition(e,s){const o=ne=>{if(ne)return"relative"===getComputedStyle(ne).getPropertyValue("position")?ne:o(ne.parentElement)},d=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),C=s.offsetHeight,P=s.getBoundingClientRect(),R=this.getWindowScrollTop(),k=this.getWindowScrollLeft(),F=this.getViewport(),Y=o(e)?.getBoundingClientRect()||{top:-1*R,left:-1*k};let G,K;P.top+C+d.height>F.height?(G=P.top-Y.top-d.height,e.style.transformOrigin="bottom",P.top+G<0&&(G=-1*P.top)):(G=C+P.top-Y.top,e.style.transformOrigin="top"),K=d.width>F.width?-1*(P.left-Y.left):P.left-Y.left+d.width>F.width?-1*(P.left-Y.left+d.width-F.width):P.left-Y.left,e.style.top=G+"px",e.style.left=K+"px"}static absolutePosition(e,s){const o=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),d=o.height,C=o.width,P=s.offsetHeight,R=s.offsetWidth,k=s.getBoundingClientRect(),F=this.getWindowScrollTop(),H=this.getWindowScrollLeft(),Y=this.getViewport();let G,K;k.top+P+d>Y.height?(G=k.top+F-d,e.style.transformOrigin="bottom",G<0&&(G=F)):(G=P+k.top+F,e.style.transformOrigin="top"),K=k.left+C>Y.width?Math.max(0,k.left+H+R-C):k.left+H,e.style.top=G+"px",e.style.left=K+"px"}static getParents(e,s=[]){return null===e.parentNode?s:this.getParents(e.parentNode,s.concat([e.parentNode]))}static getScrollableParents(e){let s=[];if(e){let o=this.getParents(e);const d=/(auto|scroll)/,C=P=>{let R=window.getComputedStyle(P,null);return d.test(R.getPropertyValue("overflow"))||d.test(R.getPropertyValue("overflowX"))||d.test(R.getPropertyValue("overflowY"))};for(let P of o){let R=1===P.nodeType&&P.dataset.scrollselectors;if(R){let k=R.split(",");for(let F of k){let H=this.findSingle(P,F);H&&C(H)&&s.push(H)}}9!==P.nodeType&&C(P)&&s.push(P)}}return s}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let s=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",s}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let s=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",s}static getHiddenElementDimensions(e){let s={};return e.style.visibility="hidden",e.style.display="block",s.width=e.offsetWidth,s.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",s}static scrollInView(e,s){let o=getComputedStyle(e).getPropertyValue("borderTopWidth"),d=o?parseFloat(o):0,C=getComputedStyle(e).getPropertyValue("paddingTop"),P=C?parseFloat(C):0,R=e.getBoundingClientRect(),F=s.getBoundingClientRect().top+document.body.scrollTop-(R.top+document.body.scrollTop)-d-P,H=e.scrollTop,Y=e.clientHeight,G=this.getOuterHeight(s);F<0?e.scrollTop=H+F:F+G>Y&&(e.scrollTop=H+F-Y+G)}static fadeIn(e,s){e.style.opacity=0;let o=+new Date,d=0,C=function(){d=+e.style.opacity.replace(",",".")+((new Date).getTime()-o)/s,e.style.opacity=d,o=+new Date,+d<1&&(window.requestAnimationFrame&&requestAnimationFrame(C)||setTimeout(C,16))};C()}static fadeOut(e,s){var o=1,P=50/s;let R=setInterval(()=>{(o-=P)<=0&&(o=0,clearInterval(R)),e.style.opacity=o},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,s){var o=Element.prototype;return(o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||function(C){return-1!==[].indexOf.call(document.querySelectorAll(C),this)}).call(e,s)}static getOuterWidth(e,s){let o=e.offsetWidth;if(s){let d=getComputedStyle(e);o+=parseFloat(d.marginLeft)+parseFloat(d.marginRight)}return o}static getHorizontalPadding(e){let s=getComputedStyle(e);return parseFloat(s.paddingLeft)+parseFloat(s.paddingRight)}static getHorizontalMargin(e){let s=getComputedStyle(e);return parseFloat(s.marginLeft)+parseFloat(s.marginRight)}static innerWidth(e){let s=e.offsetWidth,o=getComputedStyle(e);return s+=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),s}static width(e){let s=e.offsetWidth,o=getComputedStyle(e);return s-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight),s}static getInnerHeight(e){let s=e.offsetHeight,o=getComputedStyle(e);return s+=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),s}static getOuterHeight(e,s){let o=e.offsetHeight;if(s){let d=getComputedStyle(e);o+=parseFloat(d.marginTop)+parseFloat(d.marginBottom)}return o}static getHeight(e){let s=e.offsetHeight,o=getComputedStyle(e);return s-=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom)+parseFloat(o.borderTopWidth)+parseFloat(o.borderBottomWidth),s}static getWidth(e){let s=e.offsetWidth,o=getComputedStyle(e);return s-=parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderLeftWidth)+parseFloat(o.borderRightWidth),s}static getViewport(){let e=window,s=document,o=s.documentElement,d=s.getElementsByTagName("body")[0];return{width:e.innerWidth||o.clientWidth||d.clientWidth,height:e.innerHeight||o.clientHeight||d.clientHeight}}static getOffset(e){var s=e.getBoundingClientRect();return{top:s.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:s.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,s){let o=e.parentNode;if(!o)throw"Can't replace element";return o.replaceChild(s,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,s){if(this.isElement(s))s.appendChild(e);else{if(!s.el||!s.el.nativeElement)throw"Cannot append "+s+" to "+e;s.el.nativeElement.appendChild(e)}}static removeChild(e,s){if(this.isElement(s))s.removeChild(e);else{if(!s.el||!s.el.nativeElement)throw"Cannot remove "+e+" from "+s;s.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let s=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let s=document.createElement("div");s.className="p-scrollbar-measure",document.body.appendChild(s);let o=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),this.calculatedScrollbarWidth=o,o}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let s=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=s,s}static invokeElementMethod(e,s,o){e[s].apply(e,o)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),s=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:s[1]||"",version:s[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return!e||null===e.offsetParent}static isVisible(e){return e&&null!=e.offsetParent}static isExist(e){return null!==e&&typeof e<"u"&&e.nodeName&&e.parentNode}static focus(e,s){e&&document.activeElement!==e&&e.focus(s)}static getFocusableElements(e){let s=t.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),o=[];for(let d of s)"none"!=getComputedStyle(d).display&&"hidden"!=getComputedStyle(d).visibility&&o.push(d);return o}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(e,s){if(!e)return null;switch(e){case"document":return document;case"window":return window;case"@next":return s?.nextElementSibling;case"@prev":return s?.previousElementSibling;case"@parent":return s?.parentElement;case"@grandparent":return s?.parentElement.parentElement;default:const o=typeof e;if("string"===o)return document.querySelector(e);if("object"===o&&e.hasOwnProperty("nativeElement"))return this.isExist(e.nativeElement)?e.nativeElement:void 0;const C=(P=e)&&P.constructor&&P.call&&P.apply?e():e;return C&&9===C.nodeType||this.isExist(C)?C:null}var P}}return t.zindex=1e3,t.calculatedScrollbarWidth=null,t.calculatedScrollbarHeight=null,t})();class Df{constructor(n,e=(()=>{})){this.element=n,this.listener=e}bindScrollListener(){this.scrollableParents=oe.getScrollableParents(this.element);for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}class Le{static equals(n,e,s){return s?this.resolveFieldData(n,s)===this.resolveFieldData(e,s):this.equalsByValue(n,e)}static equalsByValue(n,e){if(n===e)return!0;if(n&&e&&"object"==typeof n&&"object"==typeof e){var d,C,P,s=Array.isArray(n),o=Array.isArray(e);if(s&&o){if((C=n.length)!=e.length)return!1;for(d=C;0!=d--;)if(!this.equalsByValue(n[d],e[d]))return!1;return!0}if(s!=o)return!1;var R=n instanceof Date,k=e instanceof Date;if(R!=k)return!1;if(R&&k)return n.getTime()==e.getTime();var F=n instanceof RegExp,H=e instanceof RegExp;if(F!=H)return!1;if(F&&H)return n.toString()==e.toString();var Y=Object.keys(n);if((C=Y.length)!==Object.keys(e).length)return!1;for(d=C;0!=d--;)if(!Object.prototype.hasOwnProperty.call(e,Y[d]))return!1;for(d=C;0!=d--;)if(!this.equalsByValue(n[P=Y[d]],e[P]))return!1;return!0}return n!=n&&e!=e}static resolveFieldData(n,e){if(n&&e){if(this.isFunction(e))return e(n);if(-1==e.indexOf("."))return n[e];{let s=e.split("."),o=n;for(let d=0,C=s.length;d<C;++d){if(null==o)return null;o=o[s[d]]}return o}}return null}static isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)}static reorderArray(n,e,s){n&&e!==s&&(s>=n.length&&(s%=n.length,e%=n.length),n.splice(s,0,n.splice(e,1)[0]))}static insertIntoOrderedArray(n,e,s,o){if(s.length>0){let d=!1;for(let C=0;C<s.length;C++)if(this.findIndexInList(s[C],o)>e){s.splice(C,0,n),d=!0;break}d||s.push(n)}else s.push(n)}static findIndexInList(n,e){let s=-1;if(e)for(let o=0;o<e.length;o++)if(e[o]==n){s=o;break}return s}static contains(n,e){if(null!=n&&e&&e.length)for(let s of e)if(this.equals(n,s))return!0;return!1}static removeAccents(n){return n&&n.search(/[\xC0-\xFF]/g)>-1&&(n=n.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),n}static isEmpty(n){return null==n||""===n||Array.isArray(n)&&0===n.length||!(n instanceof Date)&&"object"==typeof n&&0===Object.keys(n).length}static isNotEmpty(n){return!this.isEmpty(n)}static compare(n,e,s,o=1){let d=-1;const C=this.isEmpty(n),P=this.isEmpty(e);return d=C&&P?0:C?o:P?-o:"string"==typeof n&&"string"==typeof e?n.localeCompare(e,s,{numeric:!0}):n<e?-1:n>e?1:0,d}static sort(n,e,s=1,o,d=1){return(1===d?s:d)*Le.compare(n,e,o,s)}static merge(n,e){return null!=n&&"object"!=typeof n||null!=e&&"object"!=typeof e?null!=n&&"string"!=typeof n||null!=e&&"string"!=typeof e?e||n:[n||"",e||""].join(" "):{...n||{},...e||{}}}}var yC=0;function Pf(){return"pr_id_"+ ++yC}var nr=function X3(){let t=[];const o=d=>d&&parseInt(d.style.zIndex,10)||0;return{get:o,set:(d,C,P)=>{C&&(C.style.zIndex=String(((d,C)=>{let P=t.length>0?t[t.length-1]:{key:d,value:C},R=P.value+(P.key===d?0:C)+1;return t.push({key:d,value:R}),R})(d,P)))},clear:d=>{d&&((d=>{t=t.filter(C=>C.value!==d)})(o(d)),d.style.zIndex="")},getCurrent:()=>t.length>0?t[t.length-1].value:0}}();let xn=(()=>{class t{}return t.STARTS_WITH="startsWith",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.ENDS_WITH="endsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.IN="in",t.LESS_THAN="lt",t.LESS_THAN_OR_EQUAL_TO="lte",t.GREATER_THAN="gt",t.GREATER_THAN_OR_EQUAL_TO="gte",t.BETWEEN="between",t.IS="is",t.IS_NOT="isNot",t.BEFORE="before",t.AFTER="after",t.DATE_IS="dateIs",t.DATE_IS_NOT="dateIsNot",t.DATE_BEFORE="dateBefore",t.DATE_AFTER="dateAfter",t})(),bC=(()=>{class t{}return t.AND="and",t.OR="or",t})(),CC=(()=>{class t{constructor(){this.filters={startsWith:(e,s,o)=>{if(null==s||""===s.trim())return!0;if(null==e)return!1;let d=Le.removeAccents(s.toString()).toLocaleLowerCase(o);return Le.removeAccents(e.toString()).toLocaleLowerCase(o).slice(0,d.length)===d},contains:(e,s,o)=>{if(null==s||"string"==typeof s&&""===s.trim())return!0;if(null==e)return!1;let d=Le.removeAccents(s.toString()).toLocaleLowerCase(o);return-1!==Le.removeAccents(e.toString()).toLocaleLowerCase(o).indexOf(d)},notContains:(e,s,o)=>{if(null==s||"string"==typeof s&&""===s.trim())return!0;if(null==e)return!1;let d=Le.removeAccents(s.toString()).toLocaleLowerCase(o);return-1===Le.removeAccents(e.toString()).toLocaleLowerCase(o).indexOf(d)},endsWith:(e,s,o)=>{if(null==s||""===s.trim())return!0;if(null==e)return!1;let d=Le.removeAccents(s.toString()).toLocaleLowerCase(o),C=Le.removeAccents(e.toString()).toLocaleLowerCase(o);return-1!==C.indexOf(d,C.length-d.length)},equals:(e,s,o)=>null==s||"string"==typeof s&&""===s.trim()||null!=e&&(e.getTime&&s.getTime?e.getTime()===s.getTime():Le.removeAccents(e.toString()).toLocaleLowerCase(o)==Le.removeAccents(s.toString()).toLocaleLowerCase(o)),notEquals:(e,s,o)=>!(null==s||"string"==typeof s&&""===s.trim()||null!=e&&(e.getTime&&s.getTime?e.getTime()===s.getTime():Le.removeAccents(e.toString()).toLocaleLowerCase(o)==Le.removeAccents(s.toString()).toLocaleLowerCase(o))),in:(e,s)=>{if(null==s||0===s.length)return!0;for(let o=0;o<s.length;o++)if(Le.equals(e,s[o]))return!0;return!1},between:(e,s)=>null==s||null==s[0]||null==s[1]||null!=e&&(e.getTime?s[0].getTime()<=e.getTime()&&e.getTime()<=s[1].getTime():s[0]<=e&&e<=s[1]),lt:(e,s,o)=>null==s||null!=e&&(e.getTime&&s.getTime?e.getTime()<s.getTime():e<s),lte:(e,s,o)=>null==s||null!=e&&(e.getTime&&s.getTime?e.getTime()<=s.getTime():e<=s),gt:(e,s,o)=>null==s||null!=e&&(e.getTime&&s.getTime?e.getTime()>s.getTime():e>s),gte:(e,s,o)=>null==s||null!=e&&(e.getTime&&s.getTime?e.getTime()>=s.getTime():e>=s),is:(e,s,o)=>this.filters.equals(e,s,o),isNot:(e,s,o)=>this.filters.notEquals(e,s,o),before:(e,s,o)=>this.filters.lt(e,s,o),after:(e,s,o)=>this.filters.gt(e,s,o),dateIs:(e,s)=>null==s||null!=e&&e.toDateString()===s.toDateString(),dateIsNot:(e,s)=>null==s||null!=e&&e.toDateString()!==s.toDateString(),dateBefore:(e,s)=>null==s||null!=e&&e.getTime()<s.getTime(),dateAfter:(e,s)=>null==s||null!=e&&e.getTime()>s.getTime()}}filter(e,s,o,d,C){let P=[];if(e)for(let R of e)for(let k of s){let F=Le.resolveFieldData(R,k);if(this.filters[d](F,o,C)){P.push(R);break}}return P}register(e,s){this.filters[e]=s}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Mf=(()=>{class t{constructor(){this.clickSource=new Se,this.clickObservable=this.clickSource.asObservable()}add(e){e&&this.clickSource.next(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ga=(()=>{class t{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[xn.STARTS_WITH,xn.CONTAINS,xn.NOT_CONTAINS,xn.ENDS_WITH,xn.EQUALS,xn.NOT_EQUALS],numeric:[xn.EQUALS,xn.NOT_EQUALS,xn.LESS_THAN,xn.LESS_THAN_OR_EQUAL_TO,xn.GREATER_THAN,xn.GREATER_THAN_OR_EQUAL_TO],date:[xn.DATE_IS,xn.DATE_IS_NOT,xn.DATE_BEFORE,xn.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new Se,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation={...this.translation,...e},this.translationSource.next(this.translation)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sr=(()=>{class t{constructor(e){this.template=e}getType(){return this.name}}return t.\u0275fac=function(e){return new(e||t)(ae(ki))},t.\u0275dir=Ge({type:t,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),t})(),xr=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})(),Ei=(()=>{class t{}return t.STARTS_WITH="startsWith",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.ENDS_WITH="endsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.NO_FILTER="noFilter",t.LT="lt",t.LTE="lte",t.GT="gt",t.GTE="gte",t.IS="is",t.IS_NOT="isNot",t.BEFORE="before",t.AFTER="after",t.CLEAR="clear",t.APPLY="apply",t.MATCH_ALL="matchAll",t.MATCH_ANY="matchAny",t.ADD_RULE="addRule",t.REMOVE_RULE="removeRule",t.ACCEPT="accept",t.REJECT="reject",t.CHOOSE="choose",t.UPLOAD="upload",t.CANCEL="cancel",t.DAY_NAMES="dayNames",t.DAY_NAMES_SHORT="dayNamesShort",t.DAY_NAMES_MIN="dayNamesMin",t.MONTH_NAMES="monthNames",t.MONTH_NAMES_SHORT="monthNamesShort",t.FIRST_DAY_OF_WEEK="firstDayOfWeek",t.TODAY="today",t.WEEK_HEADER="weekHeader",t.WEAK="weak",t.MEDIUM="medium",t.STRONG="strong",t.PASSWORD_PROMPT="passwordPrompt",t.EMPTY_MESSAGE="emptyMessage",t.EMPTY_FILTER_MESSAGE="emptyFilterMessage",t})(),cu=(()=>{class t{constructor(e,s,o){this.el=e,this.zone=s,this.config=o}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let s=this.getInk();if(!s||"none"===getComputedStyle(s,null).display)return;if(oe.removeClass(s,"p-ink-active"),!oe.getHeight(s)&&!oe.getWidth(s)){let P=Math.max(oe.getOuterWidth(this.el.nativeElement),oe.getOuterHeight(this.el.nativeElement));s.style.height=P+"px",s.style.width=P+"px"}let o=oe.getOffset(this.el.nativeElement),d=e.pageX-o.left+document.body.scrollTop-oe.getWidth(s)/2,C=e.pageY-o.top+document.body.scrollLeft-oe.getHeight(s)/2;s.style.top=C+"px",s.style.left=d+"px",oe.addClass(s,"p-ink-active"),this.timeout=setTimeout(()=>{let P=this.getInk();P&&oe.removeClass(P,"p-ink-active")},401)}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&oe.removeClass(e,"p-ink-active")}onAnimationEnd(e){this.timeout&&clearTimeout(this.timeout),oe.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),oe.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(Gt),ae(Ga,8))},t.\u0275dir=Ge({type:t,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),t})(),$a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})(),uu=(()=>{class t{constructor(e){this.el=e,this.iconPos="left",this.loadingIcon="pi pi-spinner pi-spin",this._loading=!1}get label(){return this._label}set label(e){this._label=e,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(e){this._icon=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(e){this._loading=e,this.initialized&&(this.updateIcon(),this.setStyleClass())}ngAfterViewInit(){this._initialStyleClass=this.el.nativeElement.className,oe.addMultipleClasses(this.el.nativeElement,this.getStyleClass()),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){let e="p-button p-component";return this.icon&&!this.label&&Le.isEmpty(this.el.nativeElement.textContent)&&(e+=" p-button-icon-only"),this.loading&&(e+=" p-disabled p-button-loading",!this.icon&&this.label&&(e+=" p-button-loading-label-only")),e}setStyleClass(){let e=this.getStyleClass();this.el.nativeElement.className=e+" "+this._initialStyleClass}createLabel(){if(this.label){let e=document.createElement("span");this.icon&&!this.label&&e.setAttribute("aria-hidden","true"),e.className="p-button-label",e.appendChild(document.createTextNode(this.label)),this.el.nativeElement.appendChild(e)}}createIcon(){if(this.icon||this.loading){let e=document.createElement("span");e.className="p-button-icon",e.setAttribute("aria-hidden","true");let s=this.label?"p-button-icon-"+this.iconPos:null;s&&oe.addClass(e,s);let o=this.getIconClass();o&&oe.addMultipleClasses(e,o),this.el.nativeElement.insertBefore(e,this.el.nativeElement.firstChild)}}updateLabel(){let e=oe.findSingle(this.el.nativeElement,".p-button-label");this.label?e?e.textContent=this.label:this.createLabel():e&&this.el.nativeElement.removeChild(e)}updateIcon(){let e=oe.findSingle(this.el.nativeElement,".p-button-icon");this.icon||this.loading?e?e.className=this.iconPos?"p-button-icon p-button-icon-"+this.iconPos+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon():e&&this.el.nativeElement.removeChild(e)}getIconClass(){return this.loading?"p-button-loading-icon "+this.loadingIcon:this._icon}ngOnDestroy(){this.initialized=!1}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt))},t.\u0275dir=Ge({type:t,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}}),t})(),Xa=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,$a]}),t})(),wC=(()=>{class t{constructor(e,s){this._renderer=e,this._elementRef=s,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(e,s){this._renderer.setProperty(this._elementRef.nativeElement,e,s)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return t.\u0275fac=function(e){return new(e||t)(ae(mi),ae(Wt))},t.\u0275dir=Ge({type:t}),t})(),ys=(()=>{class t extends wC{}return t.\u0275fac=function(){let n;return function(s){return(n||(n=On(t)))(s||t)}}(),t.\u0275dir=Ge({type:t,features:[kt]}),t})();const Fn=new Ve("NgValueAccessor"),K3={provide:Fn,useExisting:Tt(()=>Ja),multi:!0},Q3=new Ve("CompositionEventMode");let Ja=(()=>{class t extends wC{constructor(e,s,o){super(e,s),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Z3(){const t=Zi()?Zi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return t.\u0275fac=function(e){return new(e||t)(ae(mi),ae(Wt),ae(Q3,8))},t.\u0275dir=Ge({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,s){1&e&&Ae("input",function(d){return s._handleInput(d.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(d){return s._compositionEnd(d.target.value)})},features:[Mt([K3]),kt]}),t})();function Yr(t){return null==t||("string"==typeof t||Array.isArray(t))&&0===t.length}function SC(t){return null!=t&&"number"==typeof t.length}const Bn=new Ve("NgValidators"),Gr=new Ve("NgAsyncValidators"),tk=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zi{static min(n){return function xC(t){return n=>{if(Yr(n.value)||Yr(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e<t?{min:{min:t,actual:n.value}}:null}}(n)}static max(n){return function TC(t){return n=>{if(Yr(n.value)||Yr(t))return null;const e=parseFloat(n.value);return!isNaN(e)&&e>t?{max:{max:t,actual:n.value}}:null}}(n)}static required(n){return function DC(t){return Yr(t.value)?{required:!0}:null}(n)}static requiredTrue(n){return function PC(t){return!0===t.value?null:{required:!0}}(n)}static email(n){return function MC(t){return Yr(t.value)||tk.test(t.value)?null:{email:!0}}(n)}static minLength(n){return function OC(t){return n=>Yr(n.value)||!SC(n.value)?null:n.value.length<t?{minlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static maxLength(n){return function IC(t){return n=>SC(n.value)&&n.value.length>t?{maxlength:{requiredLength:t,actualLength:n.value.length}}:null}(n)}static pattern(n){return function AC(t){if(!t)return du;let n,e;return"string"==typeof t?(e="","^"!==t.charAt(0)&&(e+="^"),e+=t,"$"!==t.charAt(t.length-1)&&(e+="$"),n=new RegExp(e)):(e=t.toString(),n=t),s=>{if(Yr(s.value))return null;const o=s.value;return n.test(o)?null:{pattern:{requiredPattern:e,actualValue:o}}}}(n)}static nullValidator(n){return null}static compose(n){return BC(n)}static composeAsync(n){return VC(n)}}function du(t){return null}function RC(t){return null!=t}function NC(t){return ua(t)?un(t):t}function kC(t){let n={};return t.forEach(e=>{n=null!=e?{...n,...e}:n}),0===Object.keys(n).length?null:n}function LC(t,n){return n.map(e=>e(t))}function FC(t){return t.map(n=>function nk(t){return!t.validate}(n)?n:e=>n.validate(e))}function BC(t){if(!t)return null;const n=t.filter(RC);return 0==n.length?null:function(e){return kC(LC(e,n))}}function Of(t){return null!=t?BC(FC(t)):null}function VC(t){if(!t)return null;const n=t.filter(RC);return 0==n.length?null:function(e){return function W3(...t){const n=yg(t),{args:e,keys:s}=nb(t),o=new ie(d=>{const{length:C}=e;if(!C)return void d.complete();const P=new Array(C);let R=C,k=C;for(let F=0;F<C;F++){let H=!1;Ht(e[F]).subscribe(le(d,Y=>{H||(H=!0,k--),P[F]=Y},()=>R--,void 0,()=>{(!R||!H)&&(k||d.next(s?rb(s,P):P),d.complete())}))}});return n?o.pipe(ib(n)):o}(LC(e,n).map(NC)).pipe(Ce(kC))}}function If(t){return null!=t?VC(FC(t)):null}function jC(t,n){return null===t?[n]:Array.isArray(t)?[...t,n]:[t,n]}function HC(t){return t._rawValidators}function UC(t){return t._rawAsyncValidators}function Af(t){return t?Array.isArray(t)?t:[t]:[]}function hu(t,n){return Array.isArray(t)?t.includes(n):t===n}function zC(t,n){const e=Af(n);return Af(t).forEach(o=>{hu(e,o)||e.push(o)}),e}function YC(t,n){return Af(n).filter(e=>!hu(t,e))}class GC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Of(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=If(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,e){return!!this.control&&this.control.hasError(n,e)}getError(n,e){return this.control?this.control.getError(n,e):null}}class Xn extends GC{get formDirective(){return null}get path(){return null}}class $r extends GC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $C{constructor(n){this._cd=n}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pu=(()=>{class t extends $C{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(ae($r,2))},t.\u0275dir=Ge({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,s){2&e&&kr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[kt]}),t})(),Rf=(()=>{class t extends $C{constructor(e){super(e)}}return t.\u0275fac=function(e){return new(e||t)(ae(Xn,10))},t.\u0275dir=Ge({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,s){2&e&&kr("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[kt]}),t})();const Wa="VALID",gu="INVALID",Co="PENDING",qa="DISABLED";function Ff(t){return(mu(t)?t.validators:t)||null}function JC(t){return Array.isArray(t)?Of(t):t||null}function Bf(t,n){return(mu(n)?n.asyncValidators:t)||null}function WC(t){return Array.isArray(t)?If(t):t||null}function mu(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class ZC{constructor(n,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=e,this._composedValidatorFn=JC(this._rawValidators),this._composedAsyncValidatorFn=WC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===Wa}get invalid(){return this.status===gu}get pending(){return this.status==Co}get disabled(){return this.status===qa}get enabled(){return this.status!==qa}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=JC(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=WC(n)}addValidators(n){this.setValidators(zC(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(zC(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(YC(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(YC(n,this._rawAsyncValidators))}hasValidator(n){return hu(this._rawValidators,n)}hasAsyncValidator(n){return hu(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=Co,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=qa,this.errors=null,this._forEachChild(s=>{s.disable({...n,onlySelf:!0})}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!0))}enable(n={}){const e=this._parentMarkedDirty(n.onlySelf);this.status=Wa,this._forEachChild(s=>{s.enable({...n,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors({...n,skipPristineCheck:e}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}getRawValue(){return this.value}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wa||this.status===Co)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qa:Wa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=Co,this._hasOwnPendingAsyncValidator=!0;const e=NC(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,e={}){this.errors=n,this._updateControlsErrors(!1!==e.emitEvent)}get(n){let e=n;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((s,o)=>s&&s._find(o),this)}getError(n,e){const s=e?this.get(e):this;return s&&s.errors?s.errors[n]:null}hasError(n,e){return!!this.getError(n,e)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?qa:this.errors?gu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Co)?Co:this._anyControlsHaveStatus(gu)?gu:Wa}_anyControlsHaveStatus(n){return this._anyControls(e=>e.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){mu(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(n){return null}}class Ka extends ZC{constructor(n,e,s){super(Ff(e),Bf(s,e)),this.controls=n,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,e){return this.controls[n]?this.controls[n]:(this.controls[n]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(n,e,s={}){this.registerControl(n,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}removeControl(n,e={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(n,e,s={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],e&&this.registerControl(n,e),this.updateValueAndValidity({emitEvent:s.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,e={}){(function KC(t,n,e){t._forEachChild((s,o)=>{if(void 0===e[o])throw new xe(1002,"")})})(this,0,n),Object.keys(n).forEach(s=>{(function qC(t,n,e){const s=t.controls;if(!(n?Object.keys(s):s).length)throw new xe(1e3,"");if(!s[e])throw new xe(1001,"")})(this,!0,s),this.controls[s].setValue(n[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(n,e={}){null!=n&&(Object.keys(n).forEach(s=>{const o=this.controls[s];o&&o.patchValue(n[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(n={},e={}){this._forEachChild((s,o)=>{s.reset(n[o],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(n,e,s)=>(n[s]=e.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(e,s)=>!!s._syncPendingControls()||e);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_forEachChild(n){Object.keys(this.controls).forEach(e=>{const s=this.controls[e];s&&n(s,e)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const[e,s]of Object.entries(this.controls))if(this.contains(e)&&n(s))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,s,o)=>((s.enabled||this.disabled)&&(e[o]=s.value),e))}_reduceChildren(n,e){let s=n;return this._forEachChild((o,d)=>{s=e(s,o,d)}),s}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(n){return this.controls.hasOwnProperty(n)?this.controls[n]:null}}const wo=new Ve("CallSetDisabledState",{providedIn:"root",factory:()=>_u}),_u="always";function vu(t,n){return[...n.path,t]}function Za(t,n,e=_u){Vf(t,n),n.valueAccessor.writeValue(t.value),(t.disabled||"always"===e)&&n.valueAccessor.setDisabledState?.(t.disabled),function dk(t,n){n.valueAccessor.registerOnChange(e=>{t._pendingValue=e,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&QC(t,n)})}(t,n),function pk(t,n){const e=(s,o)=>{n.valueAccessor.writeValue(s),o&&n.viewToModelUpdate(s)};t.registerOnChange(e),n._registerOnDestroy(()=>{t._unregisterOnChange(e)})}(t,n),function hk(t,n){n.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&QC(t,n),"submit"!==t.updateOn&&t.markAsTouched()})}(t,n),function uk(t,n){if(n.valueAccessor.setDisabledState){const e=s=>{n.valueAccessor.setDisabledState(s)};t.registerOnDisabledChange(e),n._registerOnDestroy(()=>{t._unregisterOnDisabledChange(e)})}}(t,n)}function yu(t,n,e=!0){const s=()=>{};n.valueAccessor&&(n.valueAccessor.registerOnChange(s),n.valueAccessor.registerOnTouched(s)),Cu(t,n),t&&(n._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function bu(t,n){t.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(n)})}function Vf(t,n){const e=HC(t);null!==n.validator?t.setValidators(jC(e,n.validator)):"function"==typeof e&&t.setValidators([e]);const s=UC(t);null!==n.asyncValidator?t.setAsyncValidators(jC(s,n.asyncValidator)):"function"==typeof s&&t.setAsyncValidators([s]);const o=()=>t.updateValueAndValidity();bu(n._rawValidators,o),bu(n._rawAsyncValidators,o)}function Cu(t,n){let e=!1;if(null!==t){if(null!==n.validator){const o=HC(t);if(Array.isArray(o)&&o.length>0){const d=o.filter(C=>C!==n.validator);d.length!==o.length&&(e=!0,t.setValidators(d))}}if(null!==n.asyncValidator){const o=UC(t);if(Array.isArray(o)&&o.length>0){const d=o.filter(C=>C!==n.asyncValidator);d.length!==o.length&&(e=!0,t.setAsyncValidators(d))}}}const s=()=>{};return bu(n._rawValidators,s),bu(n._rawAsyncValidators,s),e}function QC(t,n){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Hf(t,n){if(!t.hasOwnProperty("model"))return!1;const e=t.model;return!!e.isFirstChange()||!Object.is(n,e.currentValue)}function Uf(t,n){if(!n)return null;let e,s,o;return Array.isArray(n),n.forEach(d=>{d.constructor===Ja?e=d:function mk(t){return Object.getPrototypeOf(t.constructor)===ys}(d)?s=d:o=d}),o||s||e||null}function nw(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}function iw(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const bs=class extends ZC{constructor(n=null,e,s){super(Ff(e),Bf(s,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(n),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mu(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=iw(n)?n.value:n)}setValue(n,e={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(n,e={}){this.setValue(n,e)}reset(n=this.defaultValue,e={}){this._applyFormState(n),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){nw(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){nw(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){iw(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}},Ck={provide:$r,useExisting:Tt(()=>wu)},ow=(()=>Promise.resolve())();let wu=(()=>{class t extends $r{constructor(e,s,o,d,C,P){super(),this._changeDetectorRef=C,this.callSetDisabledState=P,this.control=new bs,this._registered=!1,this.update=new Te,this._parent=e,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=Uf(0,d)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const s=e.name.previousValue;this.formDirective.removeControl({name:s,path:this._getPath(s)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),Hf(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Za(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){ow.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const s=e.isDisabled.currentValue,o=0!==s&&function co(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}(s);ow.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?vu(e,this._parent):[e]}}return t.\u0275fac=function(e){return new(e||t)(ae(Xn,9),ae(Bn,10),ae(Gr,10),ae(Fn,10),ae($n,8),ae(wo,8))},t.\u0275dir=Ge({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Mt([Ck]),kt,Cn]}),t})(),Yf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Ge({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const wk={provide:Fn,useExisting:Tt(()=>Gf),multi:!0};let Gf=(()=>{class t extends ys{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=s=>{e(""==s?null:parseFloat(s))}}}return t.\u0275fac=function(){let n;return function(s){return(n||(n=On(t)))(s||t)}}(),t.\u0275dir=Ge({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,s){1&e&&Ae("input",function(d){return s.onChange(d.target.value)})("blur",function(){return s.onTouched()})},features:[Mt([wk]),kt]}),t})(),aw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({}),t})();const $f=new Ve("NgModelWithFormControlWarning"),Dk={provide:Xn,useExisting:Tt(()=>el)};let el=(()=>{class t extends Xn{constructor(e,s,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Te,this._setValidators(e),this._setAsyncValidators(s)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Cu(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const s=this.form.get(e.path);return Za(s,e,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),s}getControl(e){return this.form.get(e.path)}removeControl(e){yu(e.control||null,e,!1),function _k(t,n){const e=t.indexOf(n);e>-1&&t.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,s){this.form.get(e.path).setValue(s)}onSubmit(e){return this.submitted=!0,function tw(t,n){t._syncPendingControls(),n.forEach(e=>{const s=e.control;"submit"===s.updateOn&&s._pendingChange&&(e.viewToModelUpdate(s._pendingValue),s._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const s=e.control,o=this.form.get(e.path);s!==o&&(yu(s||null,e),(t=>t instanceof bs)(o)&&(Za(o,e,this.callSetDisabledState),e.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const s=this.form.get(e.path);(function ew(t,n){Vf(t,n)})(s,e),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const s=this.form.get(e.path);s&&function fk(t,n){return Cu(t,n)}(s,e)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Vf(this.form,this),this._oldForm&&Cu(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(ae(Bn,10),ae(Gr,10),ae(wo,8))},t.\u0275dir=Ge({type:t,selectors:[["","formGroup",""]],hostBindings:function(e,s){1&e&&Ae("submit",function(d){return s.onSubmit(d)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mt([Dk]),kt,Cn]}),t})();const Ok={provide:$r,useExisting:Tt(()=>Eu)};let Eu=(()=>{class t extends $r{constructor(e,s,o,d,C){super(),this._ngModelWarningConfig=C,this._added=!1,this.update=new Te,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(s),this._setAsyncValidators(o),this.valueAccessor=Uf(0,d)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),Hf(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return vu(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return t._ngModelWarningSentOnce=!1,t.\u0275fac=function(e){return new(e||t)(ae(Xn,13),ae(Bn,10),ae(Gr,10),ae(Fn,10),ae($f,8))},t.\u0275dir=Ge({type:t,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Mt([Ok]),kt,Cn]}),t})(),Ew=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[aw]}),t})(),Zf=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:wo,useValue:e.callSetDisabledState??_u}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[Ew]}),t})(),Gk=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:$f,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:wo,useValue:e.callSetDisabledState??_u}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[Ew]}),t})(),Qf=(()=>{class t{constructor(e,s,o){this.el=e,this.ngModel=s,this.cd=o}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(e){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(wu,8),ae($n))},t.\u0275dir=Ge({type:t,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(e,s){1&e&&Ae("input",function(d){return s.onInput(d)}),2&e&&kr("p-filled",s.filled)}}),t})(),eg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})();var Su=T(899);class xu{}class tg{}class Tr{constructor(n){this.normalizedNames=new Map,this.lazyUpdate=null,n?this.lazyInit="string"==typeof n?()=>{this.headers=new Map,n.split("\n").forEach(e=>{const s=e.indexOf(":");if(s>0){const o=e.slice(0,s),d=o.toLowerCase(),C=e.slice(s+1).trim();this.maybeSetNormalizedName(o,d),this.headers.has(d)?this.headers.get(d).push(C):this.headers.set(d,[C])}})}:()=>{this.headers=new Map,Object.keys(n).forEach(e=>{let s=n[e];const o=e.toLowerCase();"string"==typeof s&&(s=[s]),s.length>0&&(this.headers.set(o,s),this.maybeSetNormalizedName(e,o))})}:this.headers=new Map}has(n){return this.init(),this.headers.has(n.toLowerCase())}get(n){this.init();const e=this.headers.get(n.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(n){return this.init(),this.headers.get(n.toLowerCase())||null}append(n,e){return this.clone({name:n,value:e,op:"a"})}set(n,e){return this.clone({name:n,value:e,op:"s"})}delete(n,e){return this.clone({name:n,value:e,op:"d"})}maybeSetNormalizedName(n,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,n)}init(){this.lazyInit&&(this.lazyInit instanceof Tr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(n=>this.applyUpdate(n)),this.lazyUpdate=null))}copyFrom(n){n.init(),Array.from(n.headers.keys()).forEach(e=>{this.headers.set(e,n.headers.get(e)),this.normalizedNames.set(e,n.normalizedNames.get(e))})}clone(n){const e=new Tr;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Tr?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([n]),e}applyUpdate(n){const e=n.name.toLowerCase();switch(n.op){case"a":case"s":let s=n.value;if("string"==typeof s&&(s=[s]),0===s.length)return;this.maybeSetNormalizedName(n.name,e);const o=("a"===n.op?this.headers.get(e):void 0)||[];o.push(...s),this.headers.set(e,o);break;case"d":const d=n.value;if(d){let C=this.headers.get(e);if(!C)return;C=C.filter(P=>-1===d.indexOf(P)),0===C.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,C)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(n){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>n(this.normalizedNames.get(e),this.headers.get(e)))}}class Xk{encodeKey(n){return Sw(n)}encodeValue(n){return Sw(n)}decodeKey(n){return decodeURIComponent(n)}decodeValue(n){return decodeURIComponent(n)}}const Wk=/%(\d[a-f0-9])/gi,qk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Sw(t){return encodeURIComponent(t).replace(Wk,(n,e)=>qk[e]??n)}function Tu(t){return`${t}`}class Xr{constructor(n={}){if(this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new Xk,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Jk(t,n){const e=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const d=o.indexOf("="),[C,P]=-1==d?[n.decodeKey(o),""]:[n.decodeKey(o.slice(0,d)),n.decodeValue(o.slice(d+1))],R=e.get(C)||[];R.push(P),e.set(C,R)}),e}(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(e=>{const s=n.fromObject[e],o=Array.isArray(s)?s.map(Tu):[Tu(s)];this.map.set(e,o)})):this.map=null}has(n){return this.init(),this.map.has(n)}get(n){this.init();const e=this.map.get(n);return e?e[0]:null}getAll(n){return this.init(),this.map.get(n)||null}keys(){return this.init(),Array.from(this.map.keys())}append(n,e){return this.clone({param:n,value:e,op:"a"})}appendAll(n){const e=[];return Object.keys(n).forEach(s=>{const o=n[s];Array.isArray(o)?o.forEach(d=>{e.push({param:s,value:d,op:"a"})}):e.push({param:s,value:o,op:"a"})}),this.clone(e)}set(n,e){return this.clone({param:n,value:e,op:"s"})}delete(n,e){return this.clone({param:n,value:e,op:"d"})}toString(){return this.init(),this.keys().map(n=>{const e=this.encoder.encodeKey(n);return this.map.get(n).map(s=>e+"="+this.encoder.encodeValue(s)).join("&")}).filter(n=>""!==n).join("&")}clone(n){const e=new Xr({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(n),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(n=>this.map.set(n,this.cloneFrom.map.get(n))),this.updates.forEach(n=>{switch(n.op){case"a":case"s":const e=("a"===n.op?this.map.get(n.param):void 0)||[];e.push(Tu(n.value)),this.map.set(n.param,e);break;case"d":if(void 0===n.value){this.map.delete(n.param);break}{let s=this.map.get(n.param)||[];const o=s.indexOf(Tu(n.value));-1!==o&&s.splice(o,1),s.length>0?this.map.set(n.param,s):this.map.delete(n.param)}}}),this.cloneFrom=this.updates=null)}}class Kk{constructor(){this.map=new Map}set(n,e){return this.map.set(n,e),this}get(n){return this.map.has(n)||this.map.set(n,n.defaultValue()),this.map.get(n)}delete(n){return this.map.delete(n),this}has(n){return this.map.has(n)}keys(){return this.map.keys()}}function xw(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Tw(t){return typeof Blob<"u"&&t instanceof Blob}function Dw(t){return typeof FormData<"u"&&t instanceof FormData}class tl{constructor(n,e,s,o){let d;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=n.toUpperCase(),function Zk(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==s?s:null,d=o):d=s,d&&(this.reportProgress=!!d.reportProgress,this.withCredentials=!!d.withCredentials,d.responseType&&(this.responseType=d.responseType),d.headers&&(this.headers=d.headers),d.context&&(this.context=d.context),d.params&&(this.params=d.params)),this.headers||(this.headers=new Tr),this.context||(this.context=new Kk),this.params){const C=this.params.toString();if(0===C.length)this.urlWithParams=e;else{const P=e.indexOf("?");this.urlWithParams=e+(-1===P?"?":P<e.length-1?"&":"")+C}}else this.params=new Xr,this.urlWithParams=e}serializeBody(){return null===this.body?null:xw(this.body)||Tw(this.body)||Dw(this.body)||function Qk(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Xr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Dw(this.body)?null:Tw(this.body)?this.body.type||null:xw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Xr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(n={}){const e=n.method||this.method,s=n.url||this.url,o=n.responseType||this.responseType,d=void 0!==n.body?n.body:this.body,C=void 0!==n.withCredentials?n.withCredentials:this.withCredentials,P=void 0!==n.reportProgress?n.reportProgress:this.reportProgress;let R=n.headers||this.headers,k=n.params||this.params;const F=n.context??this.context;return void 0!==n.setHeaders&&(R=Object.keys(n.setHeaders).reduce((H,Y)=>H.set(Y,n.setHeaders[Y]),R)),n.setParams&&(k=Object.keys(n.setParams).reduce((H,Y)=>H.set(Y,n.setParams[Y]),k)),new tl(e,s,d,{params:k,headers:R,context:F,reportProgress:P,responseType:o,withCredentials:C})}}var gn=(()=>((gn=gn||{})[gn.Sent=0]="Sent",gn[gn.UploadProgress=1]="UploadProgress",gn[gn.ResponseHeader=2]="ResponseHeader",gn[gn.DownloadProgress=3]="DownloadProgress",gn[gn.Response=4]="Response",gn[gn.User=5]="User",gn))();class ng{constructor(n,e=200,s="OK"){this.headers=n.headers||new Tr,this.status=void 0!==n.status?n.status:e,this.statusText=n.statusText||s,this.url=n.url||null,this.ok=this.status>=200&&this.status<300}}class ig extends ng{constructor(n={}){super(n),this.type=gn.ResponseHeader}clone(n={}){return new ig({headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Du extends ng{constructor(n={}){super(n),this.type=gn.Response,this.body=void 0!==n.body?n.body:null}clone(n={}){return new Du({body:void 0!==n.body?n.body:this.body,headers:n.headers||this.headers,status:void 0!==n.status?n.status:this.status,statusText:n.statusText||this.statusText,url:n.url||this.url||void 0})}}class Pw extends ng{constructor(n){super(n,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${n.url||"(unknown url)"}`:`Http failure response for ${n.url||"(unknown url)"}: ${n.status} ${n.statusText}`,this.error=n.error||null}}function rg(t,n){return{body:n,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Pu=(()=>{class t{constructor(e){this.handler=e}request(e,s,o={}){let d;if(e instanceof tl)d=e;else{let R,k;R=o.headers instanceof Tr?o.headers:new Tr(o.headers),o.params&&(k=o.params instanceof Xr?o.params:new Xr({fromObject:o.params})),d=new tl(e,s,void 0!==o.body?o.body:null,{headers:R,context:o.context,params:k,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const C=Ye(d).pipe(Hr(R=>this.handler.handle(R)));if(e instanceof tl||"events"===o.observe)return C;const P=C.pipe(Cr(R=>R instanceof Du));switch(o.observe||"body"){case"body":switch(d.responseType){case"arraybuffer":return P.pipe(Ce(R=>{if(null!==R.body&&!(R.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return R.body}));case"blob":return P.pipe(Ce(R=>{if(null!==R.body&&!(R.body instanceof Blob))throw new Error("Response is not a Blob.");return R.body}));case"text":return P.pipe(Ce(R=>{if(null!==R.body&&"string"!=typeof R.body)throw new Error("Response is not a string.");return R.body}));default:return P.pipe(Ce(R=>R.body))}case"response":return P;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(e,s={}){return this.request("DELETE",e,s)}get(e,s={}){return this.request("GET",e,s)}head(e,s={}){return this.request("HEAD",e,s)}jsonp(e,s){return this.request("JSONP",e,{params:(new Xr).append(s,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,s={}){return this.request("OPTIONS",e,s)}patch(e,s,o={}){return this.request("PATCH",e,rg(o,s))}post(e,s,o={}){return this.request("POST",e,rg(o,s))}put(e,s,o={}){return this.request("PUT",e,rg(o,s))}}return t.\u0275fac=function(e){return new(e||t)(je(xu))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();function Mw(t,n){return n(t)}function eL(t,n){return(e,s)=>n.intercept(e,{handle:o=>t(o,s)})}const nL=new Ve("HTTP_INTERCEPTORS"),nl=new Ve("HTTP_INTERCEPTOR_FNS");function iL(){let t=null;return(n,e)=>(null===t&&(t=(Dt(nL,{optional:!0})??[]).reduceRight(eL,Mw)),t(n,e))}let Ow=(()=>{class t extends xu{constructor(e,s){super(),this.backend=e,this.injector=s,this.chain=null}handle(e){if(null===this.chain){const s=Array.from(new Set(this.injector.get(nl)));this.chain=s.reduceRight((o,d)=>function tL(t,n,e){return(s,o)=>e.runInContext(()=>n(s,d=>t(d,o)))}(o,d,this.injector),Mw)}return this.chain(e,s=>this.backend.handle(s))}}return t.\u0275fac=function(e){return new(e||t)(je(tg),je(hr))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();const aL=/^\)\]\}',?\n/;let Aw=(()=>{class t{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ie(s=>{const o=this.xhrFactory.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((G,K)=>o.setRequestHeader(G,K.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const G=e.detectContentTypeHeader();null!==G&&o.setRequestHeader("Content-Type",G)}if(e.responseType){const G=e.responseType.toLowerCase();o.responseType="json"!==G?G:"text"}const d=e.serializeBody();let C=null;const P=()=>{if(null!==C)return C;const G=o.statusText||"OK",K=new Tr(o.getAllResponseHeaders()),ne=function lL(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||e.url;return C=new ig({headers:K,status:o.status,statusText:G,url:ne}),C},R=()=>{let{headers:G,status:K,statusText:ne,url:se}=P(),he=null;204!==K&&(he=typeof o.response>"u"?o.responseText:o.response),0===K&&(K=he?200:0);let Ee=K>=200&&K<300;if("json"===e.responseType&&"string"==typeof he){const ge=he;he=he.replace(aL,"");try{he=""!==he?JSON.parse(he):null}catch(ke){he=ge,Ee&&(Ee=!1,he={error:ke,text:he})}}Ee?(s.next(new Du({body:he,headers:G,status:K,statusText:ne,url:se||void 0})),s.complete()):s.error(new Pw({error:he,headers:G,status:K,statusText:ne,url:se||void 0}))},k=G=>{const{url:K}=P(),ne=new Pw({error:G,status:o.status||0,statusText:o.statusText||"Unknown Error",url:K||void 0});s.error(ne)};let F=!1;const H=G=>{F||(s.next(P()),F=!0);let K={type:gn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(K.total=G.total),"text"===e.responseType&&!!o.responseText&&(K.partialText=o.responseText),s.next(K)},Y=G=>{let K={type:gn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(K.total=G.total),s.next(K)};return o.addEventListener("load",R),o.addEventListener("error",k),o.addEventListener("timeout",k),o.addEventListener("abort",k),e.reportProgress&&(o.addEventListener("progress",H),null!==d&&o.upload&&o.upload.addEventListener("progress",Y)),o.send(d),s.next({type:gn.Sent}),()=>{o.removeEventListener("error",k),o.removeEventListener("abort",k),o.removeEventListener("load",R),o.removeEventListener("timeout",k),e.reportProgress&&(o.removeEventListener("progress",H),null!==d&&o.upload&&o.upload.removeEventListener("progress",Y)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(je(Ay))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();const sg=new Ve("XSRF_ENABLED"),Rw="XSRF-TOKEN",Nw=new Ve("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Rw}),kw="X-XSRF-TOKEN",Lw=new Ve("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>kw});class Fw{}let cL=(()=>{class t{constructor(e,s,o){this.doc=e,this.platform=s,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ey(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(je(Nn),je(up),je(Nw))},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})();function uL(t,n){const e=t.url.toLowerCase();if(!Dt(sg)||"GET"===t.method||"HEAD"===t.method||e.startsWith("http://")||e.startsWith("https://"))return n(t);const s=Dt(Fw).getToken(),o=Dt(Lw);return null!=s&&!t.headers.has(o)&&(t=t.clone({headers:t.headers.set(o,s)})),n(t)}var ln=(()=>((ln=ln||{})[ln.Interceptors=0]="Interceptors",ln[ln.LegacyInterceptors=1]="LegacyInterceptors",ln[ln.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ln[ln.NoXsrfProtection=3]="NoXsrfProtection",ln[ln.JsonpSupport=4]="JsonpSupport",ln[ln.RequestsMadeViaParent=5]="RequestsMadeViaParent",ln))();function Eo(t,n){return{\u0275kind:t,\u0275providers:n}}function dL(...t){const n=[Pu,Aw,Ow,{provide:xu,useExisting:Ow},{provide:tg,useExisting:Aw},{provide:nl,useValue:uL,multi:!0},{provide:sg,useValue:!0},{provide:Fw,useClass:cL}];for(const e of t)n.push(...e.\u0275providers);return function ax(t){return{\u0275providers:t}}(n)}const Bw=new Ve("LEGACY_INTERCEPTOR_FN");function pL({cookieName:t,headerName:n}){const e=[];return void 0!==t&&e.push({provide:Nw,useValue:t}),void 0!==n&&e.push({provide:Lw,useValue:n}),Eo(ln.CustomXsrfConfiguration,e)}let fL=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({providers:[dL(Eo(ln.LegacyInterceptors,[{provide:Bw,useFactory:iL},{provide:nl,useExisting:Bw,multi:!0}]),pL({cookieName:Rw,headerName:kw}))]}),t})();class Jr{constructor(n){this.http=n,this.port=18423,this.jsonOptions={headers:{"Content-Type":"application/json"}}}bearerAndJsonOptions(){return{headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("auth-token")}}}bearerOptions(){return{headers:{Authorization:"Bearer "+localStorage.getItem("auth-token")}}}login(n){return this.http.post(`http://localhost:${this.port}/login`,JSON.stringify(n),this.jsonOptions)}register(n){return this.http.post(`http://localhost:${this.port}/register`,JSON.stringify(n),this.jsonOptions)}checkHit(n){return this.http.post(`http://localhost:${this.port}/hit`,JSON.stringify(n),this.bearerAndJsonOptions())}getAllHits(){return this.http.get(`http://localhost:${this.port}/hits`,this.bearerOptions())}deleteAllHits(){return this.http.delete(`http://localhost:${this.port}/hits`,this.bearerOptions())}static#e=this.\u0275fac=function(e){return new(e||Jr)(je(Pu))};static#t=this.\u0275prov=We({token:Jr,factory:Jr.\u0275fac,providedIn:"root"})}class il{constructor(n,e,s){this.http=n,this.router=e,this.httpService=s,this.actualPoints=[]}ngOnChanges(n){let e=n.rFromInputField.currentValue;0<parseFloat(e)&&parseFloat(e)<=5&&(this.changeGraph(e),this.rFromGraph=e)}ngOnInit(){this.board=Su.JSXGraph.initBoard("jxgbox",{boundingbox:[-3,3,3,-3],axis:!0})}setVerticesInvisible(n){for(let e=0;e<n.vertices.length-1;e++)n.vertices[e].setAttribute({visible:!1})}createTriangle(n){let e=this.board.create("point",[0,0],{name:"",size:2,fixed:!0}),s=this.board.create("point",[-n/2,0],{name:"",size:2,fixed:!0}),o=this.board.create("point",[0,n],{name:"",size:2,fixed:!0}),d=this.board.create("polygon",[e,s,o],{borders:{strokeColor:"black"},fixed:!0});return this.setVerticesInvisible(d),d}clickGraph(n){if(2===n.button||"JXG_navigation_button"===n.target.className)return;let e=this.getMouseCoords(n,0),s={x:Math.round(100*e.usrCoords[1])/100,y:Math.round(100*e.usrCoords[2])/100,r:this.rFromGraph??0};this.httpService.checkHit(s).subscribe({next:o=>{let d={x:o.x,y:o.y,r:o.r,hit:o.hit};this.hits.push(d),this.drawPoint(d)},error:o=>{401==o.status&&(localStorage.removeItem("auth-token"),this.router.navigate(["/login"]))}})}createRectangle(n){let e=this.board.create("point",[0,0],{name:"",size:2,fixed:!0}),s=this.board.create("point",[0,n/2],{name:"",size:2,fixed:!0}),o=this.board.create("point",[n,n/2],{name:"",size:2,fixed:!0}),d=this.board.create("point",[n,0],{name:"",size:2,fixed:!0}),C=this.board.create("polygon",[e,s,o,d],{borders:{strokeColor:"black"},fixed:!0});return this.setVerticesInvisible(C),C}createCircle(n){let e=this.board.create("point",[0,0],{name:"",size:2,fixed:!0,visible:!1}),s=this.board.create("point",[0,-n/2],{name:"",size:2,fixed:!0,visible:!1}),o=this.board.create("point",[-n/2,0],{name:"",size:2,fixed:!0,visible:!1});return this.board.create("sector",[e,o,s],{strokeColor:"black"})}getMouseCoords(n,e){let s=this.board.getCoordsTopLeftCorner(),o=Su.getPosition(n,e);return new Su.Coords(Su.COORDS_BY_SCREEN,[o[0]-s[0],o[1]-s[1]],this.board)}changeGraph(n){if(this.previousObjects&&this.board.removeObject(this.previousObjects),n<=0)return;let e=this.createTriangle(n),s=this.createRectangle(n),o=this.createCircle(n);this.previousObjects=[e,s,o]}drawPoints(){let n=null;for(let e of this.hits)n=this.board.create("point",[e.x,e.y],e.hit?{name:"",size:2,fixed:!0,color:"blue"}:{name:"",size:2,fixed:!0,color:"red"}),this.actualPoints.push(n)}drawPoint(n){let e=null;e=this.board.create("point",[n.x,n.y],n.hit?{name:"",size:2,fixed:!0,color:"blue"}:{name:"",size:2,fixed:!0,color:"red"}),this.actualPoints.push(e)}removePoints(){this.board.removeObject(this.actualPoints),this.hits.splice(0)}static#e=this.\u0275fac=function(e){return new(e||il)(ae(Pu),ae(an),ae(Jr))};static#t=this.\u0275cmp=en({type:il,selectors:[["app-graph"]],inputs:{rFromInputField:"rFromInputField",hits:"hits"},features:[Cn],decls:1,vars:0,consts:[["id","jxgbox",1,"m-auto","border-2",2,"height","300px","width","300px",3,"click"]],template:function(e,s){1&e&&(de(0,"div",0),Ae("click",function(d){return s.clickGraph(d)}),ue())}})}class rl{static#e=this.\u0275fac=function(e){return new(e||rl)};static#t=this.\u0275cmp=en({type:rl,selectors:[["app-header"]],decls:4,vars:0,consts:[[2,"text-align","center","font-family","-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol","font-size","24px"]],template:function(e,s){1&e&&(de(0,"p",0),qe(1," \u041c\u044b\u0446 \u0421\u0442\u0435\u043f\u0430\u043d \u0415\u0432\u0433\u0435\u043d\u044c\u0435\u0432\u0438\u0447 "),pt(2,"br"),qe(3," P3241, \u0432\u0430\u0440\u0438\u0430\u043d\u0442 1125\n"),ue())}})}class Mu{constructor(n,e,s){this.http=n,this.router=e,this.httpService=s,this.rChange=new Te,this.hitEvent=new Te,this.deleteEvent=new Te}ngOnInit(){this.form=new Ka({x:new bs(null,[zi.required,zi.min(-5),zi.max(5)]),y:new bs(null,[zi.required,zi.min(-5),zi.max(3)]),r:new bs(null,[zi.required,zi.min(1e-9),zi.max(5)])})}requestHit(){!this.validate()||this.httpService.checkHit(this.form.value).subscribe({next:n=>{let e={x:n.x,y:n.y,r:n.r,hit:n.hit};this.hits.push(e),this.hitEvent.emit(e)},error:n=>{401==n.status&&(localStorage.removeItem("auth-token"),this.router.navigate(["/login"]))}})}deleteHits(){this.httpService.deleteAllHits().subscribe({next:()=>{this.deleteEvent.emit()},error:n=>{401==n.status&&(localStorage.removeItem("auth-token"),this.router.navigate(["/login"]))}})}validate(){return null!=this.form.value.x&&null!=this.form.value.y&&null!=this.form.value.r||(alert("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),!1)}onChangeR(n){this.rChange.emit(""==n.target.value?0:n.target.value)}onlyDigits(n,e,s){let o=n.target.getAttribute("formControlName"),C=new RegExp("[^\\d\\.\\-]","g"),P=new RegExp("\\.","g");n.target.value=n.target.value.replace(C,"");let R=parseFloat(n.target.value);e<=s&&("-"===n.target.value[0]?n.target.value.length>8&&(n.target.value=n.target.value.substr(0,8)):n.target.value.length>7&&(n.target.value=n.target.value.substr(0,7)),"."===n.target.value[0]&&(n.target.value="0"+n.target.value),e<0&&s<0?"-"!==n.target.value[0]&&(n.target.value="-"+n.target.value[0]):e>=0&&s>=0&&"-"===n.target.value[0]&&(n.target.value=n.target.value.substr(0,0)),(R<e||R>s)&&(n.target.value=n.target.value.substr(0,0)),n.target.value.match(P)&&n.target.value.match(P).length>1&&(n.target.value=n.target.value.substr(0,0)),n.target.value.match(/\-/g)&&n.target.value.match(/\-/g).length>1&&(n.target.value=n.target.value.substr(0,0)),isNaN(n.target.value)&&n.target.value.length>1&&(n.target.value=n.target.value.substr(0,0))),this.form.value[o]=n.target.value}static#e=this.\u0275fac=function(e){return new(e||Mu)(ae(Pu),ae(an),ae(Jr))};static#t=this.\u0275cmp=en({type:Mu,selectors:[["app-hit-form"]],inputs:{r:"r",hits:"hits"},outputs:{rChange:"rChange",hitEvent:"hitEvent",deleteEvent:"deleteEvent"},decls:26,vars:2,consts:[[1,"text-center","surface-card","p-4","shadow-2","border-round","lg:w-27rem","inline-block","mb-7"],[2,"text-align","center","margin-top","50px","font-family","-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol","font-size","14px"],[3,"formGroup"],[1,"text-900","text-3xl","font-medium","mb-5"],[1,"field"],["for","username1",1,"block","text-1xl"],["formControlName","x","id","username1","type","number","aria-describedby","username1-help","pInputText",""],["id","username1-help",1,"block","text-1xl"],[1,"field","mt-5"],["for","username2",1,"block"],["formControlName","y","id","username2","type","number","aria-describedby","username2-help","pInputText",""],["id","username2-help",1,"block","text-1"],["for","username3",1,"block"],["formControlName","r","id","username3","type","number","aria-describedby","username3-help","pInputText","",3,"input"],["id","username3-help",1,"block"],["type","submit","pButton","","pRipple","","label","\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c","icon","pi pi-user",1,"mt-5","w-13rem",3,"disabled","click"],["type","submit","pButton","","pRipple","","label","\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u0441\u0435 \u0442\u043e\u0447\u043a\u0438","icon","pi pi-user",1,"mt-5","w-13rem",3,"click"]],template:function(e,s){1&e&&(de(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3),qe(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u044b"),ue(),de(5,"div",4)(6,"label",5),qe(7," \u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0425"),ue(),pt(8,"input",6),de(9,"small",7),qe(10,"(\u043e\u0442 -5 \u0434\u043e 5)"),ue()(),de(11,"div",8)(12,"label",9),qe(13,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Y"),ue(),pt(14,"input",10),de(15,"small",11),qe(16,"(\u043e\u0442 -5 \u0434\u043e 3)"),ue()(),de(17,"div",8)(18,"label",12),qe(19,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 R"),ue(),de(20,"input",13),Ae("input",function(d){return s.onChangeR(d)}),ue(),de(21,"small",14),qe(22,"(\u043e\u0442 0 \u0434\u043e 5)"),ue()(),de(23,"div")(24,"button",15),Ae("click",function(){return s.requestHit()}),ue()(),de(25,"button",16),Ae("click",function(){return s.deleteHits()}),ue()()()()),2&e&&(Q(2),q("formGroup",s.form),Q(22),q("disabled",s.form.invalid))},dependencies:[uu,Qf,Yf,Ja,Gf,pu,Rf,el,Eu]})}function Vw(t,n){return{type:7,name:t,definitions:n,options:{}}}function So(t,n=null){return{type:4,styles:n,timings:t}}function Wr(t){return{type:6,styles:t,offset:null}}function gL(t,n,e){return{type:0,name:t,styles:n,options:e}}function xo(t,n,e=null){return{type:1,expr:t,animation:n,options:e}}function jw(t,n=null){return{type:8,animation:t,options:n}}function Hw(t,n=null){return{type:10,animation:t,options:n}}const mL=["container"],_L=["inputfield"],vL=["contentWrapper"];function yL(t,n){if(1&t){const e=ct();de(0,"i",8),Ae("click",function(){return pe(e),fe(J(2).clear())}),ue()}}function bL(t,n){if(1&t){const e=ct();de(0,"button",9),Ae("click",function(o){pe(e),J();const d=wn(1);return fe(J().onButtonClick(o,d))}),ue()}if(2&t){const e=J(2);q("icon",e.icon)("disabled",e.disabled),jt("aria-label",e.iconAriaLabel)}}function CL(t,n){if(1&t){const e=ct();de(0,"input",4,5),Ae("focus",function(o){return pe(e),fe(J().onInputFocus(o))})("keydown",function(o){return pe(e),fe(J().onInputKeydown(o))})("click",function(){return pe(e),fe(J().onInputClick())})("blur",function(o){return pe(e),fe(J().onInputBlur(o))})("input",function(o){return pe(e),fe(J().onUserInput(o))}),ue(),te(2,yL,1,0,"i",6),te(3,bL,1,3,"button",7)}if(2&t){const e=J();Kt(e.inputStyleClass),q("value",e.inputFieldValue)("readonly",e.readonlyInput)("ngStyle",e.inputStyle)("placeholder",e.placeholder||"")("disabled",e.disabled)("ngClass","p-inputtext p-component"),jt("id",e.inputId)("name",e.name)("required",e.required)("aria-required",e.required)("tabindex",e.tabindex)("inputmode",e.touchUI?"off":null)("aria-labelledby",e.ariaLabelledBy),Q(2),q("ngIf",e.showClear&&!e.disabled&&null!=e.value),Q(1),q("ngIf",e.showIcon)}}function wL(t,n){1&t&&nt(0)}function EL(t,n){if(1&t){const e=ct();de(0,"button",30),Ae("keydown",function(o){return pe(e),fe(J(4).onContainerButtonKeydown(o))})("click",function(o){return pe(e),fe(J(4).onPrevButtonClick(o))}),pt(1,"span",31),ue()}}function SL(t,n){if(1&t){const e=ct();de(0,"button",32),Ae("click",function(o){return pe(e),fe(J(4).switchToMonthView(o))})("keydown",function(o){return pe(e),fe(J(4).onContainerButtonKeydown(o))}),qe(1),ue()}if(2&t){const e=J().$implicit,s=J(3);q("disabled",s.switchViewButtonDisabled()),Q(1),Ni(" ",s.getMonthName(e.month)," ")}}function xL(t,n){if(1&t){const e=ct();de(0,"button",33),Ae("click",function(o){return pe(e),fe(J(4).switchToYearView(o))})("keydown",function(o){return pe(e),fe(J(4).onContainerButtonKeydown(o))}),qe(1),ue()}if(2&t){const e=J().$implicit,s=J(3);q("disabled",s.switchViewButtonDisabled()),Q(1),Ni(" ",s.getYear(e)," ")}}function TL(t,n){if(1&t&&(at(0),qe(1),lt()),2&t){const e=J(5);Q(1),Uh("",e.yearPickerValues()[0]," - ",e.yearPickerValues()[e.yearPickerValues().length-1],"")}}function DL(t,n){1&t&&nt(0)}const zw=function(t){return{$implicit:t}};function PL(t,n){if(1&t&&(de(0,"span",34),te(1,TL,2,2,"ng-container",13),te(2,DL,1,0,"ng-container",35),ue()),2&t){const e=J(4);Q(1),q("ngIf",!e.decadeTemplate),Q(1),q("ngTemplateOutlet",e.decadeTemplate)("ngTemplateOutletContext",ut(3,zw,e.yearPickerValues))}}function ML(t,n){if(1&t&&(de(0,"th",41)(1,"span"),qe(2),ue()()),2&t){const e=J(5);Q(2),Zt(e.getTranslation("weekHeader"))}}function OL(t,n){if(1&t&&(de(0,"th",42)(1,"span"),qe(2),ue()()),2&t){const e=n.$implicit;Q(2),Zt(e)}}function IL(t,n){if(1&t&&(de(0,"td",45)(1,"span",46),qe(2),ue()()),2&t){const e=J().index,s=J(2).$implicit;Q(2),Ni(" ",s.weekNumbers[e]," ")}}function AL(t,n){if(1&t&&(at(0),qe(1),lt()),2&t){const e=J(2).$implicit;Q(1),Zt(e.day)}}function RL(t,n){1&t&&nt(0)}const Yw=function(t,n){return{"p-highlight":t,"p-disabled":n}};function NL(t,n){if(1&t){const e=ct();at(0),de(1,"span",48),Ae("click",function(o){pe(e);const d=J().$implicit;return fe(J(6).onDateSelect(o,d))})("keydown",function(o){pe(e);const d=J().$implicit,C=J(3).index;return fe(J(3).onDateCellKeydown(o,d,C))}),te(2,AL,2,1,"ng-container",13),te(3,RL,1,0,"ng-container",35),ue(),lt()}if(2&t){const e=J().$implicit,s=J(6);Q(1),q("ngClass",sn(4,Yw,s.isSelected(e),!e.selectable)),Q(1),q("ngIf",!s.dateTemplate),Q(1),q("ngTemplateOutlet",s.dateTemplate)("ngTemplateOutletContext",ut(7,zw,e))}}const kL=function(t,n){return{"p-datepicker-other-month":t,"p-datepicker-today":n}};function LL(t,n){if(1&t&&(de(0,"td",47),te(1,NL,4,9,"ng-container",13),ue()),2&t){const e=n.$implicit,s=J(6);q("ngClass",sn(2,kL,e.otherMonth,e.today)),Q(1),q("ngIf",!e.otherMonth||s.showOtherMonths)}}function FL(t,n){if(1&t&&(de(0,"tr"),te(1,IL,3,1,"td",43),te(2,LL,2,5,"td",44),ue()),2&t){const e=n.$implicit,s=J(5);Q(1),q("ngIf",s.showWeek),Q(1),q("ngForOf",e)}}function BL(t,n){if(1&t&&(de(0,"div",36)(1,"table",37)(2,"thead")(3,"tr"),te(4,ML,3,1,"th",38),te(5,OL,3,1,"th",39),ue()(),de(6,"tbody"),te(7,FL,3,2,"tr",40),ue()()()),2&t){const e=J().$implicit,s=J(3);Q(4),q("ngIf",s.showWeek),Q(1),q("ngForOf",s.weekDays),Q(2),q("ngForOf",e.dates)}}function VL(t,n){if(1&t){const e=ct();de(0,"div",20)(1,"div",21),te(2,EL,2,0,"button",22),de(3,"div",23),te(4,SL,2,2,"button",24),te(5,xL,2,2,"button",25),te(6,PL,3,5,"span",26),ue(),de(7,"button",27),Ae("keydown",function(o){return pe(e),fe(J(3).onContainerButtonKeydown(o))})("click",function(o){return pe(e),fe(J(3).onNextButtonClick(o))}),pt(8,"span",28),ue()(),te(9,BL,8,3,"div",29),ue()}if(2&t){const e=n.index,s=J(3);Q(2),q("ngIf",0===e),Q(2),q("ngIf","date"===s.currentView),Q(1),q("ngIf","year"!==s.currentView),Q(1),q("ngIf","year"===s.currentView),Q(1),lc("display",1===s.numberOfMonths||e===s.numberOfMonths-1?"inline-flex":"none"),Q(2),q("ngIf","date"===s.currentView)}}function jL(t,n){if(1&t){const e=ct();de(0,"span",51),Ae("click",function(o){const C=pe(e).index;return fe(J(4).onMonthSelect(o,C))})("keydown",function(o){const C=pe(e).index;return fe(J(4).onMonthCellKeydown(o,C))}),qe(1),ue()}if(2&t){const e=n.$implicit,s=n.index,o=J(4);q("ngClass",sn(2,Yw,o.isMonthSelected(s),o.isMonthDisabled(s))),Q(1),Ni(" ",e," ")}}function HL(t,n){if(1&t&&(de(0,"div",49),te(1,jL,2,5,"span",50),ue()),2&t){const e=J(3);Q(1),q("ngForOf",e.monthPickerValues())}}const UL=function(t){return{"p-highlight":t}};function zL(t,n){if(1&t){const e=ct();de(0,"span",54),Ae("click",function(o){const C=pe(e).$implicit;return fe(J(4).onYearSelect(o,C))})("keydown",function(o){const C=pe(e).$implicit;return fe(J(4).onYearCellKeydown(o,C))}),qe(1),ue()}if(2&t){const e=n.$implicit,s=J(4);q("ngClass",ut(2,UL,s.isYearSelected(e))),Q(1),Ni(" ",e," ")}}function YL(t,n){if(1&t&&(de(0,"div",52),te(1,zL,2,4,"span",53),ue()),2&t){const e=J(3);Q(1),q("ngForOf",e.yearPickerValues())}}function GL(t,n){if(1&t&&(at(0),de(1,"div",16),te(2,VL,10,7,"div",17),ue(),te(3,HL,2,1,"div",18),te(4,YL,2,1,"div",19),lt()),2&t){const e=J(2);Q(2),q("ngForOf",e.months),Q(1),q("ngIf","month"===e.currentView),Q(1),q("ngIf","year"===e.currentView)}}function $L(t,n){1&t&&(at(0),qe(1,"0"),lt())}function XL(t,n){1&t&&(at(0),qe(1,"0"),lt())}function JL(t,n){if(1&t&&(de(0,"div",60)(1,"span"),qe(2),ue()()),2&t){const e=J(3);Q(2),Zt(e.timeSeparator)}}function WL(t,n){1&t&&(at(0),qe(1,"0"),lt())}function qL(t,n){if(1&t){const e=ct();de(0,"div",65)(1,"button",57),Ae("keydown",function(o){return pe(e),fe(J(3).onContainerButtonKeydown(o))})("keydown.enter",function(o){return pe(e),fe(J(3).incrementSecond(o))})("keydown.space",function(o){return pe(e),fe(J(3).incrementSecond(o))})("mousedown",function(o){return pe(e),fe(J(3).onTimePickerElementMouseDown(o,2,1))})("mouseup",function(o){return pe(e),fe(J(3).onTimePickerElementMouseUp(o))})("keyup.enter",function(o){return pe(e),fe(J(3).onTimePickerElementMouseUp(o))})("keyup.space",function(o){return pe(e),fe(J(3).onTimePickerElementMouseUp(o))})("mouseleave",function(){return pe(e),fe(J(3).onTimePickerElementMouseLeave())}),pt(2,"span",58),ue(),de(3,"span"),te(4,WL,2,0,"ng-container",13),qe(5),ue(),de(6,"button",57),Ae("keydown",function(o){return pe(e),fe(J(3).onContainerButtonKeydown(o))})("keydown.enter",function(o){return pe(e),fe(J(3).decrementSecond(o))})("keydown.space",function(o){return pe(e),fe(J(3).decrementSecond(o))})("mousedown",function(o){return pe(e),fe(J(3).onTimePickerElementMouseDown(o,2,-1))})("mouseup",function(o){return pe(e),fe(J(3).onTimePickerElementMouseUp(o))})("keyup.enter",function(o){return pe(e),fe(J(3).onTimePickerElementMouseUp(o))})("keyup.space",function(o){return pe(e),fe(J(3).onTimePickerElementMouseUp(o))})("mouseleave",function(){return pe(e),fe(J(3).onTimePickerElementMouseLeave())}),pt(7,"span",59),ue()()}if(2&t){const e=J(3);Q(4),q("ngIf",e.currentSecond<10),Q(1),Zt(e.currentSecond)}}function KL(t,n){if(1&t){const e=ct();de(0,"div",66)(1,"button",67),Ae("keydown",function(o){return pe(e),fe(J(3).onContainerButtonKeydown(o))})("click",function(o){return pe(e),fe(J(3).toggleAMPM(o))})("keydown.enter",function(o){return pe(e),fe(J(3).toggleAMPM(o))}),pt(2,"span",58),ue(),de(3,"span"),qe(4),ue(),de(5,"button",67),Ae("keydown",function(o){return pe(e),fe(J(3).onContainerButtonKeydown(o))})("click",function(o){return pe(e),fe(J(3).toggleAMPM(o))})("keydown.enter",function(o){return pe(e),fe(J(3).toggleAMPM(o))}),pt(6,"span",59),ue()()}if(2&t){const e=J(3);Q(4),Zt(e.pm?"PM":"AM")}}function ZL(t,n){if(1&t){const e=ct();de(0,"div",55)(1,"div",56)(2,"button",57),Ae("keydown",function(o){return pe(e),fe(J(2).onContainerButtonKeydown(o))})("keydown.enter",function(o){return pe(e),fe(J(2).incrementHour(o))})("keydown.space",function(o){return pe(e),fe(J(2).incrementHour(o))})("mousedown",function(o){return pe(e),fe(J(2).onTimePickerElementMouseDown(o,0,1))})("mouseup",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.enter",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.space",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("mouseleave",function(){return pe(e),fe(J(2).onTimePickerElementMouseLeave())}),pt(3,"span",58),ue(),de(4,"span"),te(5,$L,2,0,"ng-container",13),qe(6),ue(),de(7,"button",57),Ae("keydown",function(o){return pe(e),fe(J(2).onContainerButtonKeydown(o))})("keydown.enter",function(o){return pe(e),fe(J(2).decrementHour(o))})("keydown.space",function(o){return pe(e),fe(J(2).decrementHour(o))})("mousedown",function(o){return pe(e),fe(J(2).onTimePickerElementMouseDown(o,0,-1))})("mouseup",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.enter",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.space",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("mouseleave",function(){return pe(e),fe(J(2).onTimePickerElementMouseLeave())}),pt(8,"span",59),ue()(),de(9,"div",60)(10,"span"),qe(11),ue()(),de(12,"div",61)(13,"button",57),Ae("keydown",function(o){return pe(e),fe(J(2).onContainerButtonKeydown(o))})("keydown.enter",function(o){return pe(e),fe(J(2).incrementMinute(o))})("keydown.space",function(o){return pe(e),fe(J(2).incrementMinute(o))})("mousedown",function(o){return pe(e),fe(J(2).onTimePickerElementMouseDown(o,1,1))})("mouseup",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.enter",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.space",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("mouseleave",function(){return pe(e),fe(J(2).onTimePickerElementMouseLeave())}),pt(14,"span",58),ue(),de(15,"span"),te(16,XL,2,0,"ng-container",13),qe(17),ue(),de(18,"button",57),Ae("keydown",function(o){return pe(e),fe(J(2).onContainerButtonKeydown(o))})("keydown.enter",function(o){return pe(e),fe(J(2).decrementMinute(o))})("keydown.space",function(o){return pe(e),fe(J(2).decrementMinute(o))})("mousedown",function(o){return pe(e),fe(J(2).onTimePickerElementMouseDown(o,1,-1))})("mouseup",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.enter",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("keyup.space",function(o){return pe(e),fe(J(2).onTimePickerElementMouseUp(o))})("mouseleave",function(){return pe(e),fe(J(2).onTimePickerElementMouseLeave())}),pt(19,"span",59),ue()(),te(20,JL,3,1,"div",62),te(21,qL,8,2,"div",63),te(22,KL,7,1,"div",64),ue()}if(2&t){const e=J(2);Q(5),q("ngIf",e.currentHour<10),Q(1),Zt(e.currentHour),Q(5),Zt(e.timeSeparator),Q(5),q("ngIf",e.currentMinute<10),Q(1),Zt(e.currentMinute),Q(3),q("ngIf",e.showSeconds),Q(1),q("ngIf",e.showSeconds),Q(1),q("ngIf","12"==e.hourFormat)}}const Gw=function(t){return[t]};function QL(t,n){if(1&t){const e=ct();de(0,"div",68)(1,"button",69),Ae("keydown",function(o){return pe(e),fe(J(2).onContainerButtonKeydown(o))})("click",function(o){return pe(e),fe(J(2).onTodayButtonClick(o))}),ue(),de(2,"button",69),Ae("keydown",function(o){return pe(e),fe(J(2).onContainerButtonKeydown(o))})("click",function(o){return pe(e),fe(J(2).onClearButtonClick(o))}),ue()()}if(2&t){const e=J(2);Q(1),q("label",e.getTranslation("today"))("ngClass",ut(4,Gw,e.todayButtonStyleClass)),Q(1),q("label",e.getTranslation("clear"))("ngClass",ut(6,Gw,e.clearButtonStyleClass))}}function eF(t,n){1&t&&nt(0)}const tF=function(t,n,e,s,o,d){return{"p-datepicker p-component":!0,"p-datepicker-inline":t,"p-disabled":n,"p-datepicker-timeonly":e,"p-datepicker-multiple-month":s,"p-datepicker-monthpicker":o,"p-datepicker-touch-ui":d}},$w=function(t,n){return{showTransitionParams:t,hideTransitionParams:n}},nF=function(t){return{value:"visibleTouchUI",params:t}},iF=function(t){return{value:"visible",params:t}};function rF(t,n){if(1&t){const e=ct();de(0,"div",10,11),Ae("@overlayAnimation.start",function(o){return pe(e),fe(J().onOverlayAnimationStart(o))})("@overlayAnimation.done",function(o){return pe(e),fe(J().onOverlayAnimationDone(o))})("click",function(o){return pe(e),fe(J().onOverlayClick(o))}),da(2),te(3,wL,1,0,"ng-container",12),te(4,GL,5,3,"ng-container",13),te(5,ZL,23,8,"div",14),te(6,QL,3,8,"div",15),da(7,1),te(8,eF,1,0,"ng-container",12),ue()}if(2&t){const e=J();Kt(e.panelStyleClass),q("ngStyle",e.panelStyle)("ngClass",oo(11,tF,e.inline,e.disabled,e.timeOnly,e.numberOfMonths>1,"month"===e.view,e.touchUI))("@overlayAnimation",e.touchUI?ut(21,nF,sn(18,$w,e.showTransitionOptions,e.hideTransitionOptions)):ut(26,iF,sn(23,$w,e.showTransitionOptions,e.hideTransitionOptions)))("@.disabled",!0===e.inline),Q(3),q("ngTemplateOutlet",e.headerTemplate),Q(1),q("ngIf",!e.timeOnly),Q(1),q("ngIf",(e.showTime||e.timeOnly)&&"date"===e.currentView),Q(1),q("ngIf",e.showButtonBar),Q(2),q("ngTemplateOutlet",e.footerTemplate)}}const sF=[[["p-header"]],[["p-footer"]]],oF=function(t,n,e,s){return{"p-calendar":!0,"p-calendar-w-btn":t,"p-calendar-timeonly":n,"p-calendar-disabled":e,"p-focus":s}},aF=["p-header","p-footer"],lF={provide:Fn,useExisting:Tt(()=>cF),multi:!0};let cF=(()=>{class t{constructor(e,s,o,d,C,P){this.el=e,this.renderer=s,this.cd=o,this.zone=d,this.config=C,this.overlayService=P,this.multipleSeparator=",",this.rangeSeparator="-",this.inline=!1,this.showOtherMonths=!0,this.icon="pi pi-calendar",this.shortYearCutoff="+10",this.hourFormat="24",this.stepHour=1,this.stepMinute=1,this.stepSecond=1,this.showSeconds=!1,this.showOnFocus=!0,this.showWeek=!1,this.showClear=!1,this.dataType="date",this.selectionMode="single",this.todayButtonStyleClass="p-button-text",this.clearButtonStyleClass="p-button-text",this.autoZIndex=!0,this.baseZIndex=0,this.keepInvalid=!1,this.hideOnDateTimeSelect=!0,this.timeSeparator=":",this.focusTrap=!0,this.showTransitionOptions=".12s cubic-bezier(0, 0, 0.2, 1)",this.hideTransitionOptions=".1s linear",this.onFocus=new Te,this.onBlur=new Te,this.onClose=new Te,this.onSelect=new Te,this.onClear=new Te,this.onInput=new Te,this.onTodayClick=new Te,this.onClearClick=new Te,this.onMonthChange=new Te,this.onYearChange=new Te,this.onClickOutside=new Te,this.onShow=new Te,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.inputFieldValue=null,this.navigationState=null,this._numberOfMonths=1,this._view="date",this.convertTo24Hour=function(R,k){return"12"==this.hourFormat?12===R?k?12:0:k?R+12:R:R}}set content(e){this.contentViewChild=e,this.contentViewChild&&(this.isMonthNavigate?(Promise.resolve(null).then(()=>this.updateFocus()),this.isMonthNavigate=!1):this.focus||this.initFocusableCell())}get view(){return this._view}set view(e){this._view=e,this.currentView=this._view}get defaultDate(){return this._defaultDate}set defaultDate(e){if(this._defaultDate=e,this.initialized){const s=e||new Date;this.currentMonth=s.getMonth(),this.currentYear=s.getFullYear(),this.initTime(s),this.createMonths(this.currentMonth,this.currentYear)}}get minDate(){return this._minDate}set minDate(e){this._minDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDates(){return this._disabledDates}set disabledDates(e){this._disabledDates=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get disabledDays(){return this._disabledDays}set disabledDays(e){this._disabledDays=e,null!=this.currentMonth&&null!=this.currentMonth&&this.currentYear&&this.createMonths(this.currentMonth,this.currentYear)}get yearRange(){return this._yearRange}set yearRange(e){if(this._yearRange=e,e){const s=e.split(":"),o=parseInt(s[0]),d=parseInt(s[1]);this.populateYearOptions(o,d)}}get showTime(){return this._showTime}set showTime(e){this._showTime=e,void 0===this.currentHour&&this.initTime(this.value||new Date),this.updateInputfield()}get locale(){return this._locale}get responsiveOptions(){return this._responsiveOptions}set responsiveOptions(e){this._responsiveOptions=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get numberOfMonths(){return this._numberOfMonths}set numberOfMonths(e){this._numberOfMonths=e,this.destroyResponsiveStyleElement(),this.createResponsiveStyle()}get firstDayOfWeek(){return this._firstDayOfWeek}set firstDayOfWeek(e){this._firstDayOfWeek=e,this.createWeekDays()}set locale(e){console.warn("Locale property has no effect, use new i18n API instead.")}ngOnInit(){this.attributeSelector=Pf();const e=this.defaultDate||new Date;this.createResponsiveStyle(),this.currentMonth=e.getMonth(),this.currentYear=e.getFullYear(),this.currentView=this.view,"date"===this.view&&(this.createWeekDays(),this.initTime(e),this.createMonths(this.currentMonth,this.currentYear),this.ticksTo1970=24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7),this.translationSubscription=this.config.translationObserver.subscribe(()=>{this.createWeekDays(),this.cd.markForCheck()}),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"date":default:this.dateTemplate=e.template;break;case"decade":this.decadeTemplate=e.template;break;case"disabledDate":this.disabledDateTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterViewInit(){this.inline&&(this.contentViewChild&&this.contentViewChild.nativeElement.setAttribute(this.attributeSelector,""),this.disabled||(this.initFocusableCell(),1===this.numberOfMonths&&(this.contentViewChild.nativeElement.style.width=oe.getOuterWidth(this.containerViewChild.nativeElement)+"px")))}getTranslation(e){return this.config.getTranslation(e)}populateYearOptions(e,s){this.yearOptions=[];for(let o=e;o<=s;o++)this.yearOptions.push(o)}createWeekDays(){this.weekDays=[];let e=this.getFirstDateOfWeek(),s=this.getTranslation(Ei.DAY_NAMES_MIN);for(let o=0;o<7;o++)this.weekDays.push(s[e]),e=6==e?0:++e}monthPickerValues(){let e=[];for(let s=0;s<=11;s++)e.push(this.config.getTranslation("monthNamesShort")[s]);return e}yearPickerValues(){let e=[],s=this.currentYear-this.currentYear%10;for(let o=0;o<10;o++)e.push(s+o);return e}createMonths(e,s){this.months=this.months=[];for(let o=0;o<this.numberOfMonths;o++){let d=e+o,C=s;d>11&&(d=d%11-1,C=s+1),this.months.push(this.createMonth(d,C))}}getWeekNumber(e){let s=new Date(e.getTime());s.setDate(s.getDate()+4-(s.getDay()||7));let o=s.getTime();return s.setMonth(0),s.setDate(1),Math.floor(Math.round((o-s.getTime())/864e5)/7)+1}createMonth(e,s){let o=[],d=this.getFirstDayOfMonthIndex(e,s),C=this.getDaysCountInMonth(e,s),P=this.getDaysCountInPrevMonth(e,s),R=1,k=new Date,F=[],H=Math.ceil((C+d)/7);for(let Y=0;Y<H;Y++){let G=[];if(0==Y){for(let ne=P-d+1;ne<=P;ne++){let se=this.getPreviousMonthAndYear(e,s);G.push({day:ne,month:se.month,year:se.year,otherMonth:!0,today:this.isToday(k,ne,se.month,se.year),selectable:this.isSelectable(ne,se.month,se.year,!0)})}let K=7-G.length;for(let ne=0;ne<K;ne++)G.push({day:R,month:e,year:s,today:this.isToday(k,R,e,s),selectable:this.isSelectable(R,e,s,!1)}),R++}else for(let K=0;K<7;K++){if(R>C){let ne=this.getNextMonthAndYear(e,s);G.push({day:R-C,month:ne.month,year:ne.year,otherMonth:!0,today:this.isToday(k,R-C,ne.month,ne.year),selectable:this.isSelectable(R-C,ne.month,ne.year,!0)})}else G.push({day:R,month:e,year:s,today:this.isToday(k,R,e,s),selectable:this.isSelectable(R,e,s,!1)});R++}this.showWeek&&F.push(this.getWeekNumber(new Date(G[0].year,G[0].month,G[0].day))),o.push(G)}return{month:e,year:s,dates:o,weekNumbers:F}}initTime(e){this.pm=e.getHours()>11,this.showTime?(this.currentMinute=e.getMinutes(),this.currentSecond=e.getSeconds(),this.setCurrentHourPM(e.getHours())):this.timeOnly&&(this.currentMinute=0,this.currentHour=0,this.currentSecond=0)}navBackward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.decrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.decrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(0===this.currentMonth?(this.currentMonth=11,this.decrementYear()):this.currentMonth--,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}navForward(e){this.disabled?e.preventDefault():(this.isMonthNavigate=!0,"month"===this.currentView?(this.incrementYear(),setTimeout(()=>{this.updateFocus()},1)):"year"===this.currentView?(this.incrementDecade(),setTimeout(()=>{this.updateFocus()},1)):(11===this.currentMonth?(this.currentMonth=0,this.incrementYear()):this.currentMonth++,this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)))}decrementYear(){if(this.currentYear--,this.yearNavigator&&this.currentYear<this.yearOptions[0]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]-e,this.yearOptions[this.yearOptions.length-1]-e)}}decrementDecade(){this.currentYear=this.currentYear-10}incrementDecade(){this.currentYear=this.currentYear+10}incrementYear(){if(this.currentYear++,this.yearNavigator&&this.currentYear>this.yearOptions[this.yearOptions.length-1]){let e=this.yearOptions[this.yearOptions.length-1]-this.yearOptions[0];this.populateYearOptions(this.yearOptions[0]+e,this.yearOptions[this.yearOptions.length-1]+e)}}switchToMonthView(e){this.setCurrentView("month"),e.preventDefault()}switchToYearView(e){this.setCurrentView("year"),e.preventDefault()}onDateSelect(e,s){!this.disabled&&s.selectable?(this.isMultipleSelection()&&this.isSelected(s)?(this.value=this.value.filter((o,d)=>!this.isDateEquals(o,s)),0===this.value.length&&(this.value=null),this.updateModel(this.value)):this.shouldSelectDate(s)&&this.selectDate(s),this.isSingleSelection()&&this.hideOnDateTimeSelect&&setTimeout(()=>{e.preventDefault(),this.hideOverlay(),this.mask&&this.disableModality(),this.cd.markForCheck()},150),this.updateInputfield(),e.preventDefault()):e.preventDefault()}shouldSelectDate(e){return!this.isMultipleSelection()||null==this.maxDateCount||this.maxDateCount>(this.value?this.value.length:0)}onMonthSelect(e,s){"month"===this.view?this.onDateSelect(e,{year:this.currentYear,month:s,day:1,selectable:!0}):(this.currentMonth=s,this.createMonths(this.currentMonth,this.currentYear),this.setCurrentView("date"),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}))}onYearSelect(e,s){"year"===this.view?this.onDateSelect(e,{year:s,month:0,day:1,selectable:!0}):(this.currentYear=s,this.setCurrentView("month"),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}))}updateInputfield(){let e="";if(this.value)if(this.isSingleSelection())e=this.formatDateTime(this.value);else if(this.isMultipleSelection())for(let s=0;s<this.value.length;s++)e+=this.formatDateTime(this.value[s]),s!==this.value.length-1&&(e+=this.multipleSeparator+" ");else if(this.isRangeSelection()&&this.value&&this.value.length){let o=this.value[1];e=this.formatDateTime(this.value[0]),o&&(e+=" "+this.rangeSeparator+" "+this.formatDateTime(o))}this.inputFieldValue=e,this.updateFilledState(),this.inputfieldViewChild&&this.inputfieldViewChild.nativeElement&&(this.inputfieldViewChild.nativeElement.value=this.inputFieldValue)}formatDateTime(e){let s=this.keepInvalid?e:null;return this.isValidDate(e)&&(this.timeOnly?s=this.formatTime(e):(s=this.formatDate(e,this.getDateFormat()),this.showTime&&(s+=" "+this.formatTime(e)))),s}setCurrentHourPM(e){"12"==this.hourFormat?(this.pm=e>11,this.currentHour=e>=12?12==e?12:e-12:0==e?12:e):this.currentHour=e}setCurrentView(e){this.currentView=e,this.cd.detectChanges(),this.alignOverlay()}selectDate(e){let s=new Date(e.year,e.month,e.day);if(this.showTime&&(s.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),s.setMinutes(this.currentMinute),s.setSeconds(this.currentSecond)),this.minDate&&this.minDate>s&&(s=this.minDate,this.setCurrentHourPM(s.getHours()),this.currentMinute=s.getMinutes(),this.currentSecond=s.getSeconds()),this.maxDate&&this.maxDate<s&&(s=this.maxDate,this.setCurrentHourPM(s.getHours()),this.currentMinute=s.getMinutes(),this.currentSecond=s.getSeconds()),this.isSingleSelection())this.updateModel(s);else if(this.isMultipleSelection())this.updateModel(this.value?[...this.value,s]:[s]);else if(this.isRangeSelection())if(this.value&&this.value.length){let o=this.value[0],d=this.value[1];!d&&s.getTime()>=o.getTime()?d=s:(o=s,d=null),this.updateModel([o,d])}else this.updateModel([s,null]);this.onSelect.emit(s)}updateModel(e){if(this.value=e,"date"==this.dataType)this.onModelChange(this.value);else if("string"==this.dataType)if(this.isSingleSelection())this.onModelChange(this.formatDateTime(this.value));else{let s=null;this.value&&(s=this.value.map(o=>this.formatDateTime(o))),this.onModelChange(s)}}getFirstDayOfMonthIndex(e,s){let o=new Date;o.setDate(1),o.setMonth(e),o.setFullYear(s);let d=o.getDay()+this.getSundayIndex();return d>=7?d-7:d}getDaysCountInMonth(e,s){return 32-this.daylightSavingAdjust(new Date(s,e,32)).getDate()}getDaysCountInPrevMonth(e,s){let o=this.getPreviousMonthAndYear(e,s);return this.getDaysCountInMonth(o.month,o.year)}getPreviousMonthAndYear(e,s){let o,d;return 0===e?(o=11,d=s-1):(o=e-1,d=s),{month:o,year:d}}getNextMonthAndYear(e,s){let o,d;return 11===e?(o=0,d=s+1):(o=e+1,d=s),{month:o,year:d}}getSundayIndex(){let e=this.getFirstDateOfWeek();return e>0?7-e:0}isSelected(e){if(!this.value)return!1;if(this.isSingleSelection())return this.isDateEquals(this.value,e);if(this.isMultipleSelection()){let s=!1;for(let o of this.value)if(s=this.isDateEquals(o,e),s)break;return s}return this.isRangeSelection()?this.value[1]?this.isDateEquals(this.value[0],e)||this.isDateEquals(this.value[1],e)||this.isDateBetween(this.value[0],this.value[1],e):this.isDateEquals(this.value[0],e):void 0}isComparable(){return null!=this.value&&"string"!=typeof this.value}isMonthSelected(e){if(this.isComparable()&&!this.isMultipleSelection()){const[s,o]=this.isRangeSelection()?this.value:[this.value,this.value],d=new Date(this.currentYear,e,1);return d>=s&&d<=(o??s)}return!1}isMonthDisabled(e){return!this.isSelectable(1,e,this.currentYear,!1)}isYearSelected(e){if(this.isComparable()){let s=this.isRangeSelection()?this.value[0]:this.value;return!this.isMultipleSelection()&&s.getFullYear()===e}return!1}isDateEquals(e,s){return!!(e&&e instanceof Date)&&e.getDate()===s.day&&e.getMonth()===s.month&&e.getFullYear()===s.year}isDateBetween(e,s,o){if(e&&s){let C=new Date(o.year,o.month,o.day);return e.getTime()<=C.getTime()&&s.getTime()>=C.getTime()}return!1}isSingleSelection(){return"single"===this.selectionMode}isRangeSelection(){return"range"===this.selectionMode}isMultipleSelection(){return"multiple"===this.selectionMode}isToday(e,s,o,d){return e.getDate()===s&&e.getMonth()===o&&e.getFullYear()===d}isSelectable(e,s,o,d){let C=!0,P=!0,R=!0,k=!0;return!(d&&!this.selectOtherMonths)&&(this.minDate&&(this.minDate.getFullYear()>o||this.minDate.getFullYear()===o&&(this.minDate.getMonth()>s||this.minDate.getMonth()===s&&this.minDate.getDate()>e))&&(C=!1),this.maxDate&&(this.maxDate.getFullYear()<o||this.maxDate.getFullYear()===o&&(this.maxDate.getMonth()<s||this.maxDate.getMonth()===s&&this.maxDate.getDate()<e))&&(P=!1),this.disabledDates&&(R=!this.isDateDisabled(e,s,o)),this.disabledDays&&(k=!this.isDayDisabled(e,s,o)),C&&P&&R&&k)}isDateDisabled(e,s,o){if(this.disabledDates)for(let d of this.disabledDates)if(d.getFullYear()===o&&d.getMonth()===s&&d.getDate()===e)return!0;return!1}isDayDisabled(e,s,o){if(this.disabledDays){let C=new Date(o,s,e).getDay();return-1!==this.disabledDays.indexOf(C)}return!1}onInputFocus(e){this.focus=!0,this.showOnFocus&&this.showOverlay(),this.onFocus.emit(e)}onInputClick(){this.showOnFocus&&!this.overlayVisible&&this.showOverlay()}onInputBlur(e){this.focus=!1,this.onBlur.emit(e),this.keepInvalid||this.updateInputfield(),this.onModelTouched()}onButtonClick(e,s){this.overlayVisible?this.hideOverlay():(s.focus(),this.showOverlay())}clear(){this.inputFieldValue=null,this.value=null,this.onModelChange(this.value),this.onClear.emit()}onOverlayClick(e){this.overlayService.add({originalEvent:e,target:this.el.nativeElement})}getMonthName(e){return this.config.getTranslation("monthNames")[e]}getYear(e){return"month"===this.currentView?this.currentYear:e.year}switchViewButtonDisabled(){return this.numberOfMonths>1||this.disabled}onPrevButtonClick(e){this.navigationState={backward:!0,button:!0},this.navBackward(e)}onNextButtonClick(e){this.navigationState={backward:!1,button:!0},this.navForward(e)}onContainerButtonKeydown(e){switch(e.which){case 9:this.inline||this.trapFocus(e);break;case 27:this.overlayVisible=!1,e.preventDefault()}}onInputKeydown(e){this.isKeydown=!0,40===e.keyCode&&this.contentViewChild?this.trapFocus(e):27===e.keyCode||13===e.keyCode?this.overlayVisible&&(this.overlayVisible=!1,e.preventDefault()):9===e.keyCode&&this.contentViewChild&&(oe.getFocusableElements(this.contentViewChild.nativeElement).forEach(s=>s.tabIndex="-1"),this.overlayVisible&&(this.overlayVisible=!1))}onDateCellKeydown(e,s,o){const d=e.currentTarget,C=d.parentElement;switch(e.which){case 40:{d.tabIndex="-1";let P=oe.index(C),R=C.parentElement.nextElementSibling;R?oe.hasClass(R.children[P].children[0],"p-disabled")?(this.navigationState={backward:!1},this.navForward(e)):(R.children[P].children[0].tabIndex="0",R.children[P].children[0].focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 38:{d.tabIndex="-1";let P=oe.index(C),R=C.parentElement.previousElementSibling;if(R){let k=R.children[P].children[0];oe.hasClass(k,"p-disabled")?(this.navigationState={backward:!0},this.navBackward(e)):(k.tabIndex="0",k.focus())}else this.navigationState={backward:!0},this.navBackward(e);e.preventDefault();break}case 37:{d.tabIndex="-1";let P=C.previousElementSibling;if(P){let R=P.children[0];oe.hasClass(R,"p-disabled")||oe.hasClass(R.parentElement,"p-datepicker-weeknumber")?this.navigateToMonth(!0,o):(R.tabIndex="0",R.focus())}else this.navigateToMonth(!0,o);e.preventDefault();break}case 39:{d.tabIndex="-1";let P=C.nextElementSibling;if(P){let R=P.children[0];oe.hasClass(R,"p-disabled")?this.navigateToMonth(!1,o):(R.tabIndex="0",R.focus())}else this.navigateToMonth(!1,o);e.preventDefault();break}case 13:case 32:this.onDateSelect(e,s),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onMonthCellKeydown(e,s){const o=e.currentTarget;switch(e.which){case 38:case 40:{o.tabIndex="-1";var d=o.parentElement.children,C=oe.index(o);let P=d[40===e.which?C+3:C-3];P&&(P.tabIndex="0",P.focus()),e.preventDefault();break}case 37:{o.tabIndex="-1";let P=o.previousElementSibling;P?(P.tabIndex="0",P.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{o.tabIndex="-1";let P=o.nextElementSibling;P?(P.tabIndex="0",P.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:this.onMonthSelect(e,s),e.preventDefault();break;case 13:case 32:case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.inline||this.trapFocus(e)}}onYearCellKeydown(e,s){const o=e.currentTarget;switch(e.which){case 38:case 40:{o.tabIndex="-1";var d=o.parentElement.children,C=oe.index(o);let P=d[40===e.which?C+2:C-2];P&&(P.tabIndex="0",P.focus()),e.preventDefault();break}case 37:{o.tabIndex="-1";let P=o.previousElementSibling;P?(P.tabIndex="0",P.focus()):(this.navigationState={backward:!0},this.navBackward(e)),e.preventDefault();break}case 39:{o.tabIndex="-1";let P=o.nextElementSibling;P?(P.tabIndex="0",P.focus()):(this.navigationState={backward:!1},this.navForward(e)),e.preventDefault();break}case 13:case 32:this.onYearSelect(e,s),e.preventDefault();break;case 27:this.overlayVisible=!1,e.preventDefault();break;case 9:this.trapFocus(e)}}navigateToMonth(e,s){if(e)if(1===this.numberOfMonths||0===s)this.navigationState={backward:!0},this.navBackward(event);else{let d=oe.find(this.contentViewChild.nativeElement.children[s-1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),C=d[d.length-1];C.tabIndex="0",C.focus()}else if(1===this.numberOfMonths||s===this.numberOfMonths-1)this.navigationState={backward:!1},this.navForward(event);else{let d=oe.findSingle(this.contentViewChild.nativeElement.children[s+1],".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");d.tabIndex="0",d.focus()}}updateFocus(){let e;if(this.navigationState){if(this.navigationState.button)this.initFocusableCell(),this.navigationState.backward?oe.findSingle(this.contentViewChild.nativeElement,".p-datepicker-prev").focus():oe.findSingle(this.contentViewChild.nativeElement,".p-datepicker-next").focus();else{if(this.navigationState.backward){let s;s=oe.find(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)"),s&&s.length>0&&(e=s[s.length-1])}else e=oe.findSingle(this.contentViewChild.nativeElement,"month"===this.currentView?".p-monthpicker .p-monthpicker-month:not(.p-disabled)":"year"===this.currentView?".p-yearpicker .p-yearpicker-year:not(.p-disabled)":".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)");e&&(e.tabIndex="0",e.focus())}this.navigationState=null}else this.initFocusableCell()}initFocusableCell(){const e=this.contentViewChild?.nativeElement;let s;if("month"===this.currentView){let o=oe.find(e,".p-monthpicker .p-monthpicker-month:not(.p-disabled)"),d=oe.findSingle(e,".p-monthpicker .p-monthpicker-month.p-highlight");o.forEach(C=>C.tabIndex=-1),s=d||o[0],0===o.length&&oe.find(e,'.p-monthpicker .p-monthpicker-month.p-disabled[tabindex = "0"]').forEach(P=>P.tabIndex=-1)}else if("year"===this.currentView){let o=oe.find(e,".p-yearpicker .p-yearpicker-year:not(.p-disabled)"),d=oe.findSingle(e,".p-yearpicker .p-yearpicker-year.p-highlight");o.forEach(C=>C.tabIndex=-1),s=d||o[0],0===o.length&&oe.find(e,'.p-yearpicker .p-yearpicker-year.p-disabled[tabindex = "0"]').forEach(P=>P.tabIndex=-1)}else if(s=oe.findSingle(e,"span.p-highlight"),!s){let o=oe.findSingle(e,"td.p-datepicker-today span:not(.p-disabled):not(.p-ink)");s=o||oe.findSingle(e,".p-datepicker-calendar td span:not(.p-disabled):not(.p-ink)")}s&&(s.tabIndex="0",!this.preventFocus&&(!this.navigationState||!this.navigationState.button)&&setTimeout(()=>{s.focus()},1),this.preventFocus=!1)}trapFocus(e){let s=oe.getFocusableElements(this.contentViewChild.nativeElement);if(s&&s.length>0)if(s[0].ownerDocument.activeElement){let o=s.indexOf(s[0].ownerDocument.activeElement);if(e.shiftKey)if(-1==o||0===o)if(this.focusTrap)s[s.length-1].focus();else{if(-1===o)return this.hideOverlay();if(0===o)return}else s[o-1].focus();else if(-1==o||o===s.length-1){if(!this.focusTrap&&-1!=o)return this.hideOverlay();s[0].focus()}else s[o+1].focus()}else s[0].focus();e.preventDefault()}onMonthDropdownChange(e){this.currentMonth=parseInt(e),this.onMonthChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}onYearDropdownChange(e){this.currentYear=parseInt(e),this.onYearChange.emit({month:this.currentMonth+1,year:this.currentYear}),this.createMonths(this.currentMonth,this.currentYear)}validateTime(e,s,o,d){let C=this.value;const P=this.convertTo24Hour(e,d);this.isRangeSelection()&&(C=this.value[1]||this.value[0]),this.isMultipleSelection()&&(C=this.value[this.value.length-1]);const R=C?C.toDateString():null;return!(this.minDate&&R&&this.minDate.toDateString()===R&&(this.minDate.getHours()>P||this.minDate.getHours()===P&&(this.minDate.getMinutes()>s||this.minDate.getMinutes()===s&&this.minDate.getSeconds()>o))||this.maxDate&&R&&this.maxDate.toDateString()===R&&(this.maxDate.getHours()<P||this.maxDate.getHours()===P&&(this.maxDate.getMinutes()<s||this.maxDate.getMinutes()===s&&this.maxDate.getSeconds()<o)))}incrementHour(e){let o=this.currentHour+this.stepHour,d=this.pm;"24"==this.hourFormat?o=o>=24?o-24:o:"12"==this.hourFormat&&(this.currentHour<12&&o>11&&(d=!this.pm),o=o>=13?o-12:o),this.validateTime(o,this.currentMinute,this.currentSecond,d)&&(this.currentHour=o,this.pm=d),e.preventDefault()}onTimePickerElementMouseDown(e,s,o){this.disabled||(this.repeat(e,null,s,o),e.preventDefault())}onTimePickerElementMouseUp(e){this.disabled||(this.clearTimePickerTimer(),this.updateTime())}onTimePickerElementMouseLeave(){!this.disabled&&this.timePickerTimer&&(this.clearTimePickerTimer(),this.updateTime())}repeat(e,s,o,d){let C=s||500;switch(this.clearTimePickerTimer(),this.timePickerTimer=setTimeout(()=>{this.repeat(e,100,o,d),this.cd.markForCheck()},C),o){case 0:1===d?this.incrementHour(e):this.decrementHour(e);break;case 1:1===d?this.incrementMinute(e):this.decrementMinute(e);break;case 2:1===d?this.incrementSecond(e):this.decrementSecond(e)}this.updateInputfield()}clearTimePickerTimer(){this.timePickerTimer&&(clearTimeout(this.timePickerTimer),this.timePickerTimer=null)}decrementHour(e){let s=this.currentHour-this.stepHour,o=this.pm;"24"==this.hourFormat?s=s<0?24+s:s:"12"==this.hourFormat&&(12===this.currentHour&&(o=!this.pm),s=s<=0?12+s:s),this.validateTime(s,this.currentMinute,this.currentSecond,o)&&(this.currentHour=s,this.pm=o),e.preventDefault()}incrementMinute(e){let s=this.currentMinute+this.stepMinute;s=s>59?s-60:s,this.validateTime(this.currentHour,s,this.currentSecond,this.pm)&&(this.currentMinute=s),e.preventDefault()}decrementMinute(e){let s=this.currentMinute-this.stepMinute;s=s<0?60+s:s,this.validateTime(this.currentHour,s,this.currentSecond,this.pm)&&(this.currentMinute=s),e.preventDefault()}incrementSecond(e){let s=this.currentSecond+this.stepSecond;s=s>59?s-60:s,this.validateTime(this.currentHour,this.currentMinute,s,this.pm)&&(this.currentSecond=s),e.preventDefault()}decrementSecond(e){let s=this.currentSecond-this.stepSecond;s=s<0?60+s:s,this.validateTime(this.currentHour,this.currentMinute,s,this.pm)&&(this.currentSecond=s),e.preventDefault()}updateTime(){let e=this.value;this.isRangeSelection()&&(e=this.value[1]||this.value[0]),this.isMultipleSelection()&&(e=this.value[this.value.length-1]),e=e?new Date(e.getTime()):new Date,e.setHours("12"==this.hourFormat?12===this.currentHour?this.pm?12:0:this.pm?this.currentHour+12:this.currentHour:this.currentHour),e.setMinutes(this.currentMinute),e.setSeconds(this.currentSecond),this.isRangeSelection()&&(e=this.value[1]?[this.value[0],e]:[e,null]),this.isMultipleSelection()&&(e=[...this.value.slice(0,-1),e]),this.updateModel(e),this.onSelect.emit(e),this.updateInputfield()}toggleAMPM(e){const s=!this.pm;this.validateTime(this.currentHour,this.currentMinute,this.currentSecond,s)&&(this.pm=s,this.updateTime()),e.preventDefault()}onUserInput(e){if(!this.isKeydown)return;this.isKeydown=!1;let s=e.target.value;try{let o=this.parseValueFromString(s);this.isValidSelection(o)&&(this.updateModel(o),this.updateUI())}catch{this.updateModel(this.keepInvalid?s:null)}this.filled=null!=s&&s.length,this.onInput.emit(e)}isValidSelection(e){let s=!0;return this.isSingleSelection()?this.isSelectable(e.getDate(),e.getMonth(),e.getFullYear(),!1)||(s=!1):e.every(o=>this.isSelectable(o.getDate(),o.getMonth(),o.getFullYear(),!1))&&this.isRangeSelection()&&(s=e.length>1&&e[1]>e[0]),s}parseValueFromString(e){if(!e||0===e.trim().length)return null;let s;if(this.isSingleSelection())s=this.parseDateTime(e);else if(this.isMultipleSelection()){let o=e.split(this.multipleSeparator);s=[];for(let d of o)s.push(this.parseDateTime(d.trim()))}else if(this.isRangeSelection()){let o=e.split(" "+this.rangeSeparator+" ");s=[];for(let d=0;d<o.length;d++)s[d]=this.parseDateTime(o[d].trim())}return s}parseDateTime(e){let s,o=e.split(" ");if(this.timeOnly)s=new Date,this.populateTime(s,o[0],o[1]);else{const d=this.getDateFormat();if(this.showTime){let C="12"==this.hourFormat?o.pop():null,P=o.pop();s=this.parseDate(o.join(" "),d),this.populateTime(s,P,C)}else s=this.parseDate(e,d)}return s}populateTime(e,s,o){if("12"==this.hourFormat&&!o)throw"Invalid Time";this.pm="PM"===o||"pm"===o;let d=this.parseTime(s);e.setHours(d.hour),e.setMinutes(d.minute),e.setSeconds(d.second)}isValidDate(e){return e instanceof Date&&Le.isNotEmpty(e)}updateUI(){let e=this.value;Array.isArray(e)&&(e=e[0]);let s=this.defaultDate&&this.isValidDate(this.defaultDate)&&!this.value?this.defaultDate:e&&this.isValidDate(e)?e:new Date;this.currentMonth=s.getMonth(),this.currentYear=s.getFullYear(),this.createMonths(this.currentMonth,this.currentYear),(this.showTime||this.timeOnly)&&(this.setCurrentHourPM(s.getHours()),this.currentMinute=s.getMinutes(),this.currentSecond=s.getSeconds())}showOverlay(){this.overlayVisible||(this.updateUI(),this.touchUI||(this.preventFocus=!0),this.overlayVisible=!0)}hideOverlay(){this.overlayVisible=!1,this.clearTimePickerTimer(),this.touchUI&&this.disableModality(),this.cd.markForCheck()}toggle(){this.inline||(this.overlayVisible?this.hideOverlay():(this.showOverlay(),this.inputfieldViewChild.nativeElement.focus()))}onOverlayAnimationStart(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.overlay=e.element,this.overlay.setAttribute(this.attributeSelector,""),this.appendOverlay(),this.updateFocus(),this.autoZIndex&&(this.touchUI?nr.set("modal",this.overlay,this.baseZIndex||this.config.zIndex.modal):nr.set("overlay",this.overlay,this.baseZIndex||this.config.zIndex.overlay)),this.alignOverlay(),this.onShow.emit(e));break;case"void":this.onOverlayHide(),this.onClose.emit(e)}}onOverlayAnimationDone(e){switch(e.toState){case"visible":case"visibleTouchUI":this.inline||(this.bindDocumentClickListener(),this.bindDocumentResizeListener(),this.bindScrollListener());break;case"void":this.autoZIndex&&nr.clear(e.element)}}appendOverlay(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.overlay):oe.appendChild(this.overlay,this.appendTo))}restoreOverlayAppend(){this.overlay&&this.appendTo&&this.el.nativeElement.appendChild(this.overlay)}alignOverlay(){this.touchUI?this.enableModality(this.overlay):this.overlay&&(this.appendTo?("date"===this.view?(this.overlay.style.width=oe.getOuterWidth(this.overlay)+"px",this.overlay.style.minWidth=oe.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px"):this.overlay.style.width=oe.getOuterWidth(this.inputfieldViewChild.nativeElement)+"px",oe.absolutePosition(this.overlay,this.inputfieldViewChild.nativeElement)):oe.relativePosition(this.overlay,this.inputfieldViewChild.nativeElement))}enableModality(e){this.mask||this.touchUI||(this.mask=document.createElement("div"),this.mask.style.zIndex=String(parseInt(e.style.zIndex)-1),oe.addMultipleClasses(this.mask,"p-component-overlay p-datepicker-mask p-datepicker-mask-scrollblocker p-component-overlay p-component-overlay-enter"),this.maskClickListener=this.renderer.listen(this.mask,"click",o=>{this.disableModality()}),document.body.appendChild(this.mask),oe.addClass(document.body,"p-overflow-hidden"))}disableModality(){this.mask&&(oe.addClass(this.mask,"p-component-overlay-leave"),this.animationEndListener=this.destroyMask.bind(this),this.mask.addEventListener("animationend",this.animationEndListener))}destroyMask(){if(!this.mask)return;document.body.removeChild(this.mask);let s,e=document.body.children;for(let o=0;o<e.length;o++)if(oe.hasClass(e[o],"p-datepicker-mask-scrollblocker")){s=!0;break}s||oe.removeClass(document.body,"p-overflow-hidden"),this.unbindAnimationEndListener(),this.unbindMaskClickListener(),this.mask=null}unbindMaskClickListener(){this.maskClickListener&&(this.maskClickListener(),this.maskClickListener=null)}unbindAnimationEndListener(){this.animationEndListener&&this.mask&&(this.mask.removeEventListener("animationend",this.animationEndListener),this.animationEndListener=null)}writeValue(e){if(this.value=e,this.value&&"string"==typeof this.value)try{this.value=this.parseValueFromString(this.value)}catch{this.keepInvalid&&(this.value=e)}this.updateInputfield(),this.updateUI(),this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}getDateFormat(){return this.dateFormat||this.getTranslation("dateFormat")}getFirstDateOfWeek(){return this._firstDayOfWeek||this.getTranslation(Ei.FIRST_DAY_OF_WEEK)}formatDate(e,s){if(!e)return"";let o;const d=F=>{const H=o+1<s.length&&s.charAt(o+1)===F;return H&&o++,H},C=(F,H,Y)=>{let G=""+H;if(d(F))for(;G.length<Y;)G="0"+G;return G},P=(F,H,Y,G)=>d(F)?G[H]:Y[H];let R="",k=!1;if(e)for(o=0;o<s.length;o++)if(k)"'"!==s.charAt(o)||d("'")?R+=s.charAt(o):k=!1;else switch(s.charAt(o)){case"d":R+=C("d",e.getDate(),2);break;case"D":R+=P("D",e.getDay(),this.getTranslation(Ei.DAY_NAMES_SHORT),this.getTranslation(Ei.DAY_NAMES));break;case"o":R+=C("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":R+=C("m",e.getMonth()+1,2);break;case"M":R+=P("M",e.getMonth(),this.getTranslation(Ei.MONTH_NAMES_SHORT),this.getTranslation(Ei.MONTH_NAMES));break;case"y":R+=d("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":R+=e.getTime();break;case"!":R+=1e4*e.getTime()+this.ticksTo1970;break;case"'":d("'")?R+="'":k=!0;break;default:R+=s.charAt(o)}return R}formatTime(e){if(!e)return"";let s="",o=e.getHours(),d=e.getMinutes(),C=e.getSeconds();return"12"==this.hourFormat&&o>11&&12!=o&&(o-=12),s+="12"==this.hourFormat&&0===o?12:o<10?"0"+o:o,s+=":",s+=d<10?"0"+d:d,this.showSeconds&&(s+=":",s+=C<10?"0"+C:C),"12"==this.hourFormat&&(s+=e.getHours()>11?" PM":" AM"),s}parseTime(e){let s=e.split(":");if(s.length!==(this.showSeconds?3:2))throw"Invalid time";let d=parseInt(s[0]),C=parseInt(s[1]),P=this.showSeconds?parseInt(s[2]):null;if(isNaN(d)||isNaN(C)||d>23||C>59||"12"==this.hourFormat&&d>12||this.showSeconds&&(isNaN(P)||P>59))throw"Invalid time";return"12"==this.hourFormat&&(12!==d&&this.pm?d+=12:!this.pm&&12===d&&(d-=12)),{hour:d,minute:C,second:P}}parseDate(e,s){if(null==s||null==e)throw"Invalid arguments";if(""===(e="object"==typeof e?e.toString():e+""))return null;let o,d,C,K,P=0,R="string"!=typeof this.shortYearCutoff?this.shortYearCutoff:(new Date).getFullYear()%100+parseInt(this.shortYearCutoff,10),k=-1,F=-1,H=-1,Y=-1,G=!1,ne=ge=>{let ke=o+1<s.length&&s.charAt(o+1)===ge;return ke&&o++,ke},se=ge=>{let ke=ne(ge),tt="@"===ge?14:"!"===ge?20:"y"===ge&&ke?4:"o"===ge?3:2,Si=new RegExp("^\\d{"+("y"===ge?tt:1)+","+tt+"}"),di=e.substring(P).match(Si);if(!di)throw"Missing number at position "+P;return P+=di[0].length,parseInt(di[0],10)},he=(ge,ke,tt)=>{let Ct=-1,Si=ne(ge)?tt:ke,di=[];for(let Jn=0;Jn<Si.length;Jn++)di.push([Jn,Si[Jn]]);di.sort((Jn,Dr)=>-(Jn[1].length-Dr[1].length));for(let Jn=0;Jn<di.length;Jn++){let Dr=di[Jn][1];if(e.substr(P,Dr.length).toLowerCase()===Dr.toLowerCase()){Ct=di[Jn][0],P+=Dr.length;break}}if(-1!==Ct)return Ct+1;throw"Unknown name at position "+P},Ee=()=>{if(e.charAt(P)!==s.charAt(o))throw"Unexpected literal at position "+P;P++};for("month"===this.view&&(H=1),o=0;o<s.length;o++)if(G)"'"!==s.charAt(o)||ne("'")?Ee():G=!1;else switch(s.charAt(o)){case"d":H=se("d");break;case"D":he("D",this.getTranslation(Ei.DAY_NAMES_SHORT),this.getTranslation(Ei.DAY_NAMES));break;case"o":Y=se("o");break;case"m":F=se("m");break;case"M":F=he("M",this.getTranslation(Ei.MONTH_NAMES_SHORT),this.getTranslation(Ei.MONTH_NAMES));break;case"y":k=se("y");break;case"@":K=new Date(se("@")),k=K.getFullYear(),F=K.getMonth()+1,H=K.getDate();break;case"!":K=new Date((se("!")-this.ticksTo1970)/1e4),k=K.getFullYear(),F=K.getMonth()+1,H=K.getDate();break;case"'":ne("'")?Ee():G=!0;break;default:Ee()}if(P<e.length&&(C=e.substr(P),!/^\s+/.test(C)))throw"Extra/unparsed characters found in date: "+C;if(-1===k?k=(new Date).getFullYear():k<100&&(k+=(new Date).getFullYear()-(new Date).getFullYear()%100+(k<=R?0:-100)),Y>-1)for(F=1,H=Y;d=this.getDaysCountInMonth(k,F-1),!(H<=d);)F++,H-=d;if("year"===this.view&&(F=-1===F?1:F,H=-1===H?1:H),K=this.daylightSavingAdjust(new Date(k,F-1,H)),K.getFullYear()!==k||K.getMonth()+1!==F||K.getDate()!==H)throw"Invalid date";return K}daylightSavingAdjust(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null}updateFilledState(){this.filled=this.inputFieldValue&&""!=this.inputFieldValue}onTodayButtonClick(e){let s=new Date,o={day:s.getDate(),month:s.getMonth(),year:s.getFullYear(),otherMonth:s.getMonth()!==this.currentMonth||s.getFullYear()!==this.currentYear,today:!0,selectable:!0};this.onDateSelect(e,o),this.onTodayClick.emit(e)}onClearButtonClick(e){this.updateModel(null),this.updateInputfield(),this.hideOverlay(),this.onClearClick.emit(e)}createResponsiveStyle(){if(this.numberOfMonths>1&&this.responsiveOptions){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.body.appendChild(this.responsiveStyleElement));let e="";if(this.responsiveOptions){let s=[...this.responsiveOptions].filter(o=>!(!o.breakpoint||!o.numMonths)).sort((o,d)=>-1*o.breakpoint.localeCompare(d.breakpoint,void 0,{numeric:!0}));for(let o=0;o<s.length;o++){let{breakpoint:d,numMonths:C}=s[o],P=`\n                        .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${C}) .p-datepicker-next {\n                            display: inline-flex !important;\n                        }\n                    `;for(let R=C;R<this.numberOfMonths;R++)P+=`\n                            .p-datepicker[${this.attributeSelector}] .p-datepicker-group:nth-child(${R+1}) {\n                                display: none !important;\n                            }\n                        `;e+=`\n                        @media screen and (max-width: ${d}) {\n                            ${P}\n                        }\n                    `}}this.responsiveStyleElement.innerHTML=e}}destroyResponsiveStyleElement(){this.responsiveStyleElement&&(this.responsiveStyleElement.remove(),this.responsiveStyleElement=null)}bindDocumentClickListener(){this.documentClickListener||this.zone.runOutsideAngular(()=>{this.documentClickListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","mousedown",s=>{this.isOutsideClicked(s)&&this.overlayVisible&&this.zone.run(()=>{this.hideOverlay(),this.onClickOutside.emit(s),this.cd.markForCheck()})})})}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){!this.documentResizeListener&&!this.touchUI&&(this.documentResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.documentResizeListener))}unbindDocumentResizeListener(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Df(this.containerViewChild.nativeElement,()=>{this.overlayVisible&&this.hideOverlay()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}isOutsideClicked(e){return!(this.el.nativeElement.isSameNode(e.target)||this.isNavIconClicked(e)||this.el.nativeElement.contains(e.target)||this.overlay&&this.overlay.contains(e.target))}isNavIconClicked(e){return oe.hasClass(e.target,"p-datepicker-prev")||oe.hasClass(e.target,"p-datepicker-prev-icon")||oe.hasClass(e.target,"p-datepicker-next")||oe.hasClass(e.target,"p-datepicker-next-icon")}onWindowResize(){this.overlayVisible&&!oe.isTouchDevice()&&this.hideOverlay()}onOverlayHide(){this.currentView=this.view,this.mask&&this.destroyMask(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.overlay=null}ngOnDestroy(){this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.translationSubscription&&this.translationSubscription.unsubscribe(),this.overlay&&this.autoZIndex&&nr.clear(this.overlay),this.destroyResponsiveStyleElement(),this.clearTimePickerTimer(),this.restoreOverlayAppend(),this.onOverlayHide()}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(mi),ae($n),ae(Gt),ae(Ga),ae(Mf))},t.\u0275cmp=en({type:t,selectors:[["p-calendar"]],contentQueries:function(e,s,o){if(1&e&&Fr(o,Sr,4),2&e){let d;St(d=xt())&&(s.templates=d)}},viewQuery:function(e,s){if(1&e&&(Yt(mL,5),Yt(_L,5),Yt(vL,5)),2&e){let o;St(o=xt())&&(s.containerViewChild=o.first),St(o=xt())&&(s.inputfieldViewChild=o.first),St(o=xt())&&(s.content=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,s){2&e&&kr("p-inputwrapper-filled",s.filled)("p-inputwrapper-focus",s.focus)("p-calendar-clearable",s.showClear&&!s.disabled)},inputs:{style:"style",styleClass:"styleClass",inputStyle:"inputStyle",inputId:"inputId",name:"name",inputStyleClass:"inputStyleClass",placeholder:"placeholder",ariaLabelledBy:"ariaLabelledBy",iconAriaLabel:"iconAriaLabel",disabled:"disabled",dateFormat:"dateFormat",multipleSeparator:"multipleSeparator",rangeSeparator:"rangeSeparator",inline:"inline",showOtherMonths:"showOtherMonths",selectOtherMonths:"selectOtherMonths",showIcon:"showIcon",icon:"icon",appendTo:"appendTo",readonlyInput:"readonlyInput",shortYearCutoff:"shortYearCutoff",monthNavigator:"monthNavigator",yearNavigator:"yearNavigator",hourFormat:"hourFormat",timeOnly:"timeOnly",stepHour:"stepHour",stepMinute:"stepMinute",stepSecond:"stepSecond",showSeconds:"showSeconds",required:"required",showOnFocus:"showOnFocus",showWeek:"showWeek",showClear:"showClear",dataType:"dataType",selectionMode:"selectionMode",maxDateCount:"maxDateCount",showButtonBar:"showButtonBar",todayButtonStyleClass:"todayButtonStyleClass",clearButtonStyleClass:"clearButtonStyleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",panelStyleClass:"panelStyleClass",panelStyle:"panelStyle",keepInvalid:"keepInvalid",hideOnDateTimeSelect:"hideOnDateTimeSelect",touchUI:"touchUI",timeSeparator:"timeSeparator",focusTrap:"focusTrap",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",tabindex:"tabindex",view:"view",defaultDate:"defaultDate",minDate:"minDate",maxDate:"maxDate",disabledDates:"disabledDates",disabledDays:"disabledDays",yearRange:"yearRange",showTime:"showTime",responsiveOptions:"responsiveOptions",numberOfMonths:"numberOfMonths",firstDayOfWeek:"firstDayOfWeek",locale:"locale"},outputs:{onFocus:"onFocus",onBlur:"onBlur",onClose:"onClose",onSelect:"onSelect",onClear:"onClear",onInput:"onInput",onTodayClick:"onTodayClick",onClearClick:"onClearClick",onMonthChange:"onMonthChange",onYearChange:"onYearChange",onClickOutside:"onClickOutside",onShow:"onShow"},features:[Mt([lF])],ngContentSelectors:aF,decls:4,vars:11,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"ngIf"],[3,"class","ngStyle","ngClass","click",4,"ngIf"],["type","text","autocomplete","off",3,"value","readonly","ngStyle","placeholder","disabled","ngClass","focus","keydown","click","blur","input"],["inputfield",""],["class","p-calendar-clear-icon pi pi-times",3,"click",4,"ngIf"],["type","button","pButton","","pRipple","","class","p-datepicker-trigger","tabindex","0",3,"icon","disabled","click",4,"ngIf"],[1,"p-calendar-clear-icon","pi","pi-times",3,"click"],["type","button","pButton","","pRipple","","tabindex","0",1,"p-datepicker-trigger",3,"icon","disabled","click"],[3,"ngStyle","ngClass","click"],["contentWrapper",""],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-timepicker",4,"ngIf"],["class","p-datepicker-buttonbar",4,"ngIf"],[1,"p-datepicker-group-container"],["class","p-datepicker-group",4,"ngFor","ngForOf"],["class","p-monthpicker",4,"ngIf"],["class","p-yearpicker",4,"ngIf"],[1,"p-datepicker-group"],[1,"p-datepicker-header"],["class","p-datepicker-prev p-link","type","button","pRipple","",3,"keydown","click",4,"ngIf"],[1,"p-datepicker-title"],["type","button","class","p-datepicker-month p-link",3,"disabled","click","keydown",4,"ngIf"],["type","button","class","p-datepicker-year p-link",3,"disabled","click","keydown",4,"ngIf"],["class","p-datepicker-decade",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-next","p-link",3,"keydown","click"],[1,"p-datepicker-next-icon","pi","pi-chevron-right"],["class","p-datepicker-calendar-container",4,"ngIf"],["type","button","pRipple","",1,"p-datepicker-prev","p-link",3,"keydown","click"],[1,"p-datepicker-prev-icon","pi","pi-chevron-left"],["type","button",1,"p-datepicker-month","p-link",3,"disabled","click","keydown"],["type","button",1,"p-datepicker-year","p-link",3,"disabled","click","keydown"],[1,"p-datepicker-decade"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-datepicker-calendar-container"],[1,"p-datepicker-calendar"],["class","p-datepicker-weekheader p-disabled",4,"ngIf"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-datepicker-weekheader","p-disabled"],["scope","col"],["class","p-datepicker-weeknumber",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"p-datepicker-weeknumber"],[1,"p-disabled"],[3,"ngClass"],["draggable","false","pRipple","",3,"ngClass","click","keydown"],[1,"p-monthpicker"],["class","p-monthpicker-month","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-monthpicker-month",3,"ngClass","click","keydown"],[1,"p-yearpicker"],["class","p-yearpicker-year","pRipple","",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],["pRipple","",1,"p-yearpicker-year",3,"ngClass","click","keydown"],[1,"p-timepicker"],[1,"p-hour-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","keydown.enter","keydown.space","mousedown","mouseup","keyup.enter","keyup.space","mouseleave"],[1,"pi","pi-chevron-up"],[1,"pi","pi-chevron-down"],[1,"p-separator"],[1,"p-minute-picker"],["class","p-separator",4,"ngIf"],["class","p-second-picker",4,"ngIf"],["class","p-ampm-picker",4,"ngIf"],[1,"p-second-picker"],[1,"p-ampm-picker"],["type","button","pRipple","",1,"p-link",3,"keydown","click","keydown.enter"],[1,"p-datepicker-buttonbar"],["type","button","pButton","","pRipple","",3,"label","ngClass","keydown","click"]],template:function(e,s){1&e&&(ac(sF),de(0,"span",0,1),te(2,CL,4,17,"ng-template",2),te(3,rF,9,28,"div",3),ue()),2&e&&(Kt(s.styleClass),q("ngClass",va(6,oF,s.showIcon,s.timeOnly,s.disabled,s.focus))("ngStyle",s.style),Q(2),q("ngIf",!s.inline),Q(1),q("ngIf",s.inline||s.overlayVisible))},dependencies:[Vi,fs,Ci,Qi,ji,uu,cu],styles:[".p-calendar{position:relative;display:inline-flex;max-width:100%}.p-calendar .p-inputtext{flex:1 1 auto;width:1%}.p-calendar-w-btn .p-inputtext{border-top-right-radius:0;border-bottom-right-radius:0}.p-calendar-w-btn .p-datepicker-trigger{border-top-left-radius:0;border-bottom-left-radius:0}.p-fluid .p-calendar{display:flex}.p-fluid .p-calendar .p-inputtext{width:1%}.p-calendar .p-datepicker{min-width:100%}.p-datepicker{width:auto;position:absolute;top:0;left:0}.p-datepicker-inline{display:inline-block;position:static;overflow-x:auto}.p-datepicker-header{display:flex;align-items:center;justify-content:space-between}.p-datepicker-header .p-datepicker-title{margin:0 auto}.p-datepicker-prev,.p-datepicker-next{cursor:pointer;display:inline-flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-datepicker-multiple-month .p-datepicker-group-container .p-datepicker-group{flex:1 1 auto}.p-datepicker-multiple-month .p-datepicker-group-container{display:flex}.p-datepicker table{width:100%;border-collapse:collapse}.p-datepicker td>span{display:flex;justify-content:center;align-items:center;cursor:pointer;margin:0 auto;overflow:hidden;position:relative}.p-monthpicker-month{width:33.3%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-datepicker-buttonbar{display:flex;justify-content:space-between;align-items:center}.p-timepicker{display:flex;justify-content:center;align-items:center}.p-timepicker button{display:flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-timepicker>div{display:flex;align-items:center;flex-direction:column}.p-datepicker-touch-ui,.p-calendar .p-datepicker-touch-ui{position:fixed;top:50%;left:50%;min-width:80vw;transform:translate(-50%,-50%)}.p-yearpicker-year{width:50%;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;overflow:hidden;position:relative}.p-calendar-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-calendar-clearable{position:relative}\n"],encapsulation:2,data:{animation:[Vw("overlayAnimation",[gL("visibleTouchUI",Wr({transform:"translate(-50%,-50%)",opacity:1})),xo("void => visible",[Wr({opacity:0,transform:"scaleY(0.8)"}),So("{{showTransitionParams}}",Wr({opacity:1,transform:"*"}))]),xo("visible => void",[So("{{hideTransitionParams}}",Wr({opacity:0}))]),xo("void => visibleTouchUI",[Wr({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}),So("{{showTransitionParams}}")]),xo("visibleTouchUI => void",[So("{{hideTransitionParams}}",Wr({opacity:0,transform:"translate3d(-50%, -40%, 0) scale(0.9)"}))])])]},changeDetection:0}),t})(),uF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,Xa,xr,$a,Xa,xr]}),t})(),dF=(()=>{class t{constructor(e){this.host=e,this.focused=!1}ngAfterViewChecked(){if(!this.focused&&this.autofocus){const e=oe.getFocusableElements(this.host.nativeElement);0===e.length&&this.host.nativeElement.focus(),e.length>0&&e[0].focus(),this.focused=!0}}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt))},t.\u0275dir=Ge({type:t,selectors:[["","pAutoFocus",""]],hostAttrs:[1,"p-element"],inputs:{autofocus:"autofocus"}}),t})(),hF=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})();const pF=["overlay"],fF=["content"];function gF(t,n){1&t&&nt(0)}const mF=function(t,n,e){return{showTransitionParams:t,hideTransitionParams:n,transform:e}},_F=function(t){return{value:"visible",params:t}},vF=function(t){return{mode:t}},yF=function(t){return{$implicit:t}};function bF(t,n){if(1&t){const e=ct();de(0,"div",1,3),Ae("click",function(o){return pe(e),fe(J(2).onOverlayContentClick(o))})("@overlayContentAnimation.start",function(o){return pe(e),fe(J(2).onOverlayContentAnimationStart(o))})("@overlayContentAnimation.done",function(o){return pe(e),fe(J(2).onOverlayContentAnimationDone(o))}),da(2),te(3,gF,1,0,"ng-container",4),ue()}if(2&t){const e=J(2);Kt(e.contentStyleClass),q("ngStyle",e.contentStyle)("ngClass","p-overlay-content")("@overlayContentAnimation",ut(11,_F,mr(7,mF,e.showTransitionOptions,e.hideTransitionOptions,e.transformOptions[e.modal?e.overlayResponsiveDirection:"default"]))),Q(3),q("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",ut(15,yF,ut(13,vF,e.overlayMode)))}}const CF=function(t,n,e,s,o,d,C,P,R,k,F,H,Y,G){return{"p-overlay p-component":!0,"p-overlay-modal p-component-overlay p-component-overlay-enter":t,"p-overlay-center":n,"p-overlay-top":e,"p-overlay-top-start":s,"p-overlay-top-end":o,"p-overlay-bottom":d,"p-overlay-bottom-start":C,"p-overlay-bottom-end":P,"p-overlay-left":R,"p-overlay-left-start":k,"p-overlay-left-end":F,"p-overlay-right":H,"p-overlay-right-start":Y,"p-overlay-right-end":G}};function wF(t,n){if(1&t){const e=ct();de(0,"div",1,2),Ae("click",function(o){return pe(e),fe(J().onOverlayClick(o))}),te(2,bF,4,17,"div",0),ue()}if(2&t){const e=J();Kt(e.styleClass),q("ngStyle",e.style)("ngClass",n1(5,CF,[e.modal,e.modal&&"center"===e.overlayResponsiveDirection,e.modal&&"top"===e.overlayResponsiveDirection,e.modal&&"top-start"===e.overlayResponsiveDirection,e.modal&&"top-end"===e.overlayResponsiveDirection,e.modal&&"bottom"===e.overlayResponsiveDirection,e.modal&&"bottom-start"===e.overlayResponsiveDirection,e.modal&&"bottom-end"===e.overlayResponsiveDirection,e.modal&&"left"===e.overlayResponsiveDirection,e.modal&&"left-start"===e.overlayResponsiveDirection,e.modal&&"left-end"===e.overlayResponsiveDirection,e.modal&&"right"===e.overlayResponsiveDirection,e.modal&&"right-start"===e.overlayResponsiveDirection,e.modal&&"right-end"===e.overlayResponsiveDirection])),Q(2),q("ngIf",e.visible)}}const EF=["*"],SF={provide:Fn,useExisting:Tt(()=>Xw),multi:!0},xF=jw([Wr({transform:"{{transform}}",opacity:0}),So("{{showTransitionParams}}")]),TF=jw([So("{{hideTransitionParams}}",Wr({transform:"{{transform}}",opacity:0}))]);let Xw=(()=>{class t{constructor(e,s,o,d,C,P){this.document=e,this.el=s,this.renderer=o,this.config=d,this.overlayService=C,this.cd=P,this.visibleChange=new Te,this.onBeforeShow=new Te,this.onShow=new Te,this.onBeforeHide=new Te,this.onHide=new Te,this.onAnimationStart=new Te,this.onAnimationDone=new Te,this._visible=!1,this.modalVisible=!1,this.isOverlayClicked=!1,this.isOverlayContentClicked=!1,this.transformOptions={default:"scaleY(0.8)",center:"scale(0.7)",top:"translate3d(0px, -100%, 0px)","top-start":"translate3d(0px, -100%, 0px)","top-end":"translate3d(0px, -100%, 0px)",bottom:"translate3d(0px, 100%, 0px)","bottom-start":"translate3d(0px, 100%, 0px)","bottom-end":"translate3d(0px, 100%, 0px)",left:"translate3d(-100%, 0px, 0px)","left-start":"translate3d(-100%, 0px, 0px)","left-end":"translate3d(-100%, 0px, 0px)",right:"translate3d(100%, 0px, 0px)","right-start":"translate3d(100%, 0px, 0px)","right-end":"translate3d(100%, 0px, 0px)"},this.window=this.document.defaultView}get visible(){return this._visible}set visible(e){this._visible=e,this._visible&&!this.modalVisible&&(this.modalVisible=!0)}get mode(){return this._mode||this.overlayOptions?.mode}set mode(e){this._mode=e}get style(){return Le.merge(this._style,this.modal?this.overlayResponsiveOptions?.style:this.overlayOptions?.style)}set style(e){this._style=e}get styleClass(){return Le.merge(this._styleClass,this.modal?this.overlayResponsiveOptions?.styleClass:this.overlayOptions?.styleClass)}set styleClass(e){this._styleClass=e}get contentStyle(){return Le.merge(this._contentStyle,this.modal?this.overlayResponsiveOptions?.contentStyle:this.overlayOptions?.contentStyle)}set contentStyle(e){this._contentStyle=e}get contentStyleClass(){return Le.merge(this._contentStyleClass,this.modal?this.overlayResponsiveOptions?.contentStyleClass:this.overlayOptions?.contentStyleClass)}set contentStyleClass(e){this._contentStyleClass=e}get target(){const e=this._target||this.overlayOptions?.target;return void 0===e?"@prev":e}set target(e){this._target=e}get appendTo(){return this._appendTo||this.overlayOptions?.appendTo}set appendTo(e){this._appendTo=e}get autoZIndex(){const e=this._autoZIndex||this.overlayOptions?.autoZIndex;return void 0===e||e}set autoZIndex(e){this._autoZIndex=e}get baseZIndex(){const e=this._baseZIndex||this.overlayOptions?.baseZIndex;return void 0===e?0:e}set baseZIndex(e){this._baseZIndex=e}get showTransitionOptions(){const e=this._showTransitionOptions||this.overlayOptions?.showTransitionOptions;return void 0===e?".12s cubic-bezier(0, 0, 0.2, 1)":e}set showTransitionOptions(e){this._showTransitionOptions=e}get hideTransitionOptions(){const e=this._hideTransitionOptions||this.overlayOptions?.hideTransitionOptions;return void 0===e?".1s linear":e}set hideTransitionOptions(e){this._hideTransitionOptions=e}get listener(){return this._listener||this.overlayOptions?.listener}set listener(e){this._listener=e}get responsive(){return this._responsive||this.overlayOptions?.responsive}set responsive(e){this._responsive=e}get options(){return this._options}set options(e){this._options=e}get modal(){return"modal"===this.mode||this.overlayResponsiveOptions&&this.window?.matchMedia(this.overlayResponsiveOptions.media?.replace("@media","")||`(max-width: ${this.overlayResponsiveOptions.breakpoint})`).matches}get overlayMode(){return this.mode||(this.modal?"modal":"overlay")}get overlayOptions(){return{...this.config?.overlayOptions,...this.options}}get overlayResponsiveOptions(){return{...this.overlayOptions?.responsive,...this.responsive}}get overlayResponsiveDirection(){return this.overlayResponsiveOptions?.direction||"center"}get overlayEl(){return this.overlayViewChild?.nativeElement}get contentEl(){return this.contentViewChild?.nativeElement}get targetEl(){return oe.getTargetElement(this.target,this.el?.nativeElement)}ngAfterContentInit(){this.templates?.forEach(e=>{e.getType(),this.contentTemplate=e.template})}show(e,s=!1){this.onVisibleChange(!0),this.handleEvents("onShow",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),s&&oe.focus(this.targetEl),this.modal&&oe.addClass(this.document?.body,"p-overflow-hidden")}hide(e,s=!1){this.onVisibleChange(!1),this.handleEvents("onHide",{overlay:e||this.overlayEl,target:this.targetEl,mode:this.overlayMode}),s&&oe.focus(this.targetEl),this.modal&&oe.removeClass(this.document?.body,"p-overflow-hidden")}alignOverlay(){!this.modal&&oe.alignOverlay(this.overlayEl,this.targetEl,this.appendTo)}onVisibleChange(e){this._visible=e,this.visibleChange.emit(e)}onOverlayClick(){this.isOverlayClicked=!0}onOverlayContentClick(e){this.overlayService.add({originalEvent:e,target:this.targetEl}),this.isOverlayContentClicked=!0}onOverlayContentAnimationStart(e){switch(e.toState){case"visible":this.handleEvents("onBeforeShow",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.autoZIndex&&nr.set(this.overlayMode,this.overlayEl,this.baseZIndex+this.config?.zIndex[this.overlayMode]),oe.appendOverlay(this.overlayEl,"body"===this.appendTo?this.document.body:this.appendTo,this.appendTo),this.alignOverlay();break;case"void":this.handleEvents("onBeforeHide",{overlay:this.overlayEl,target:this.targetEl,mode:this.overlayMode}),this.modal&&oe.addClass(this.overlayEl,"p-component-overlay-leave")}this.handleEvents("onAnimationStart",e)}onOverlayContentAnimationDone(e){const s=this.overlayEl||e.element.parentElement;switch(e.toState){case"visible":this.show(s,!0),this.bindListeners();break;case"void":this.hide(s,!0),this.unbindListeners(),oe.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),nr.clear(s),this.modalVisible=!1}this.handleEvents("onAnimationDone",e)}handleEvents(e,s){this[e].emit(s),this.options&&this.options[e]&&this.options[e](s),this.config?.overlayOptions&&this.config?.overlayOptions[e]&&this.config?.overlayOptions[e](s)}bindListeners(){this.bindScrollListener(),this.bindDocumentClickListener(),this.bindDocumentResizeListener()}unbindListeners(){this.unbindScrollListener(),this.unbindDocumentClickListener(),this.unbindDocumentResizeListener()}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Df(this.targetEl,e=>{(!this.listener||this.listener(e,{type:"scroll",mode:this.overlayMode,valid:!0}))&&this.hide(e,!0)})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=this.renderer.listen(this.document,"click",e=>{const o=!(this.targetEl&&(this.targetEl.isSameNode(e.target)||!this.isOverlayClicked&&this.targetEl.contains(e.target))||this.isOverlayContentClicked);(this.listener?this.listener(e,{type:"outside",mode:this.overlayMode,valid:3!==e.which&&o}):o)&&this.hide(e),this.isOverlayClicked=this.isOverlayContentClicked=!1}))}unbindDocumentClickListener(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null)}bindDocumentResizeListener(){this.documentResizeListener||(this.documentResizeListener=this.renderer.listen("window","resize",e=>{(this.listener?this.listener(e,{type:"resize",mode:this.overlayMode,valid:!oe.isTouchDevice()}):!oe.isTouchDevice())&&this.hide(e,!0)}))}unbindDocumentResizeListener(){this.documentResizeListener&&(this.documentResizeListener(),this.documentResizeListener=null)}ngOnDestroy(){this.hide(this.overlayEl,!0),this.overlayEl&&(oe.appendOverlay(this.overlayEl,this.targetEl,this.appendTo),nr.clear(this.overlayEl)),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindListeners()}}return t.\u0275fac=function(e){return new(e||t)(ae(Nn),ae(Wt),ae(mi),ae(Ga),ae(Mf),ae($n))},t.\u0275cmp=en({type:t,selectors:[["p-overlay"]],contentQueries:function(e,s,o){if(1&e&&Fr(o,Sr,4),2&e){let d;St(d=xt())&&(s.templates=d)}},viewQuery:function(e,s){if(1&e&&(Yt(pF,5),Yt(fF,5)),2&e){let o;St(o=xt())&&(s.overlayViewChild=o.first),St(o=xt())&&(s.contentViewChild=o.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",mode:"mode",style:"style",styleClass:"styleClass",contentStyle:"contentStyle",contentStyleClass:"contentStyleClass",target:"target",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",listener:"listener",responsive:"responsive",options:"options"},outputs:{visibleChange:"visibleChange",onBeforeShow:"onBeforeShow",onShow:"onShow",onBeforeHide:"onBeforeHide",onHide:"onHide",onAnimationStart:"onAnimationStart",onAnimationDone:"onAnimationDone"},features:[Mt([SF])],ngContentSelectors:EF,decls:1,vars:1,consts:[[3,"ngStyle","class","ngClass","click",4,"ngIf"],[3,"ngStyle","ngClass","click"],["overlay",""],["content",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,s){1&e&&(ac(),te(0,wF,3,20,"div",0)),2&e&&q("ngIf",s.modalVisible)},dependencies:[Vi,Ci,Qi,ji],styles:[".p-overlay{position:absolute;top:0;left:0}.p-overlay-modal{display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;width:100%;height:100%}.p-overlay-content{transform-origin:inherit}.p-overlay-modal>.p-overlay-content{z-index:1;width:90%}.p-overlay-top{align-items:flex-start}.p-overlay-top-start{align-items:flex-start;justify-content:flex-start}.p-overlay-top-end{align-items:flex-start;justify-content:flex-end}.p-overlay-bottom{align-items:flex-end}.p-overlay-bottom-start{align-items:flex-end;justify-content:flex-start}.p-overlay-bottom-end{align-items:flex-end;justify-content:flex-end}.p-overlay-left{justify-content:flex-start}.p-overlay-left-start{justify-content:flex-start;align-items:flex-start}.p-overlay-left-end{justify-content:flex-start;align-items:flex-end}.p-overlay-right{justify-content:flex-end}.p-overlay-right-start{justify-content:flex-end;align-items:flex-start}.p-overlay-right-end{justify-content:flex-end;align-items:flex-end}\n"],encapsulation:2,data:{animation:[Vw("overlayContentAnimation",[xo(":enter",[Hw(xF)]),xo(":leave",[Hw(TF)])])]},changeDetection:0}),t})(),Jw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,xr,xr]}),t})();const DF=["element"],PF=["content"];function MF(t,n){1&t&&nt(0)}const og=function(t,n){return{$implicit:t,options:n}};function OF(t,n){if(1&t&&(at(0),te(1,MF,1,0,"ng-container",7),lt()),2&t){const e=J(2);Q(1),q("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",sn(2,og,e.loadedItems,e.getContentOptions()))}}function IF(t,n){1&t&&nt(0)}function AF(t,n){if(1&t&&(at(0),te(1,IF,1,0,"ng-container",7),lt()),2&t){const e=n.$implicit,s=n.index,o=J(3);Q(1),q("ngTemplateOutlet",o.itemTemplate)("ngTemplateOutletContext",sn(2,og,e,o.getOptions(s)))}}const RF=function(t){return{"p-scroller-loading":t}};function NF(t,n){if(1&t&&(de(0,"div",8,9),te(2,AF,2,5,"ng-container",10),ue()),2&t){const e=J(2);q("ngClass",ut(4,RF,e.d_loading))("ngStyle",e.contentStyle),Q(2),q("ngForOf",e.loadedItems)("ngForTrackBy",e._trackBy||e.index)}}function kF(t,n){1&t&&pt(0,"div",11),2&t&&q("ngStyle",J(2).spacerStyle)}function LF(t,n){1&t&&nt(0)}const FF=function(t){return{numCols:t}},Ww=function(t){return{options:t}};function BF(t,n){if(1&t&&(at(0),te(1,LF,1,0,"ng-container",7),lt()),2&t){const e=n.index,s=J(4);Q(1),q("ngTemplateOutlet",s.loaderTemplate)("ngTemplateOutletContext",ut(4,Ww,s.getLoaderOptions(e,s.both&&ut(2,FF,s._numItemsInViewport.cols))))}}function VF(t,n){if(1&t&&(at(0),te(1,BF,2,6,"ng-container",14),lt()),2&t){const e=J(3);Q(1),q("ngForOf",e.loaderArr)}}function jF(t,n){1&t&&nt(0)}const HF=function(){return{styleClass:"p-scroller-loading-icon"}};function UF(t,n){if(1&t&&(at(0),te(1,jF,1,0,"ng-container",7),lt()),2&t){const e=J(4);Q(1),q("ngTemplateOutlet",e.loaderIconTemplate)("ngTemplateOutletContext",ut(3,Ww,Lr(2,HF)))}}function zF(t,n){1&t&&pt(0,"i",16)}function YF(t,n){if(1&t&&(te(0,UF,2,5,"ng-container",0),te(1,zF,1,0,"ng-template",null,15,Ki)),2&t){const e=wn(2);q("ngIf",J(3).loaderIconTemplate)("ngIfElse",e)}}const GF=function(t){return{"p-component-overlay":t}};function $F(t,n){if(1&t&&(de(0,"div",12),te(1,VF,2,1,"ng-container",0),te(2,YF,3,2,"ng-template",null,13,Ki),ue()),2&t){const e=wn(3),s=J(2);q("ngClass",ut(3,GF,!s.loaderTemplate)),Q(1),q("ngIf",s.loaderTemplate)("ngIfElse",e)}}const XF=function(t,n,e){return{"p-scroller":!0,"p-scroller-inline":t,"p-both-scroll":n,"p-horizontal-scroll":e}};function JF(t,n){if(1&t){const e=ct();at(0),de(1,"div",2,3),Ae("scroll",function(o){return pe(e),fe(J().onContainerScroll(o))}),te(3,OF,2,5,"ng-container",0),te(4,NF,3,6,"ng-template",null,4,Ki),te(6,kF,1,1,"div",5),te(7,$F,4,5,"div",6),ue(),lt()}if(2&t){const e=wn(5),s=J();Q(1),Kt(s._styleClass),q("ngStyle",s._style)("ngClass",mr(10,XF,s.inline,s.both,s.horizontal)),jt("id",s._id)("tabindex",s.tabindex),Q(2),q("ngIf",s.contentTemplate)("ngIfElse",e),Q(3),q("ngIf",s._showSpacer),Q(1),q("ngIf",!s.loaderDisabled&&s._showLoader&&s.d_loading)}}function WF(t,n){1&t&&nt(0)}const qF=function(t,n){return{rows:t,columns:n}};function KF(t,n){if(1&t&&(at(0),te(1,WF,1,0,"ng-container",7),lt()),2&t){const e=J(2);Q(1),q("ngTemplateOutlet",e.contentTemplate)("ngTemplateOutletContext",sn(5,og,e.items,sn(2,qF,e._items,e.loadedColumns)))}}function ZF(t,n){if(1&t&&(da(0),te(1,KF,2,8,"ng-container",17)),2&t){const e=J();Q(1),q("ngIf",e.contentTemplate)}}const QF=["*"];let qw=(()=>{class t{constructor(e,s){this.cd=e,this.zone=s,this.onLazyLoad=new Te,this.onScroll=new Te,this.onScrollIndexChange=new Te,this._tabindex=0,this._itemSize=0,this._orientation="vertical",this._step=0,this._delay=0,this._resizeDelay=10,this._appendOnly=!1,this._inline=!1,this._lazy=!1,this._disabled=!1,this._loaderDisabled=!1,this._showSpacer=!0,this._showLoader=!1,this._autoSize=!1,this.d_loading=!1,this.first=0,this.last=0,this.page=0,this.numItemsInViewport=0,this.lastScrollPos=0,this.lazyLoadState={},this.loaderArr=[],this.spacerStyle={},this.contentStyle={},this.initialized=!1}get id(){return this._id}set id(e){this._id=e}get style(){return this._style}set style(e){this._style=e}get styleClass(){return this._styleClass}set styleClass(e){this._styleClass=e}get tabindex(){return this._tabindex}set tabindex(e){this._tabindex=e}get items(){return this._items}set items(e){this._items=e}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e}get scrollHeight(){return this._scrollHeight}set scrollHeight(e){this._scrollHeight=e}get scrollWidth(){return this._scrollWidth}set scrollWidth(e){this._scrollWidth=e}get orientation(){return this._orientation}set orientation(e){this._orientation=e}get step(){return this._step}set step(e){this._step=e}get delay(){return this._delay}set delay(e){this._delay=e}get resizeDelay(){return this._resizeDelay}set resizeDelay(e){this._resizeDelay=e}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=e}get inline(){return this._inline}set inline(e){this._inline=e}get lazy(){return this._lazy}set lazy(e){this._lazy=e}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get loaderDisabled(){return this._loaderDisabled}set loaderDisabled(e){this._loaderDisabled=e}get columns(){return this._columns}set columns(e){this._columns=e}get showSpacer(){return this._showSpacer}set showSpacer(e){this._showSpacer=e}get showLoader(){return this._showLoader}set showLoader(e){this._showLoader=e}get numToleratedItems(){return this._numToleratedItems}set numToleratedItems(e){this._numToleratedItems=e}get loading(){return this._loading}set loading(e){this._loading=e}get autoSize(){return this._autoSize}set autoSize(e){this._autoSize=e}get trackBy(){return this._trackBy}set trackBy(e){this._trackBy=e}get options(){return this._options}set options(e){this._options=e,e&&"object"==typeof e&&Object.entries(e).forEach(([s,o])=>this[`_${s}`]!==o&&(this[`_${s}`]=o))}get vertical(){return"vertical"===this._orientation}get horizontal(){return"horizontal"===this._orientation}get both(){return"both"===this._orientation}get loadedItems(){return this._items&&!this.d_loading?this.both?this._items.slice(this._appendOnly?0:this.first.rows,this.last.rows).map(e=>this._columns?e:e.slice(this._appendOnly?0:this.first.cols,this.last.cols)):this.horizontal&&this._columns?this._items:this._items.slice(this._appendOnly?0:this.first,this.last):[]}get loadedRows(){return this.d_loading?this._loaderDisabled?this.loaderArr:[]:this.loadedItems}get loadedColumns(){return this._columns&&(this.both||this.horizontal)?this.d_loading&&this._loaderDisabled?this.both?this.loaderArr[0]:this.loaderArr:this._columns.slice(this.both?this.first.cols:this.first,this.both?this.last.cols:this.last):this._columns}get isPageChanged(){return!this._step||this.page!==this.getPageByFirst()}ngOnInit(){this.setInitialState()}ngOnChanges(e){let s=!1;if(e.loading){const{previousValue:o,currentValue:d}=e.loading;this.lazy&&o!==d&&d!==this.d_loading&&(this.d_loading=d,s=!0)}if(e.orientation&&(this.lastScrollPos=this.both?{top:0,left:0}:0),e.numToleratedItems){const{previousValue:o,currentValue:d}=e.numToleratedItems;o!==d&&d!==this.d_numToleratedItems&&(this.d_numToleratedItems=d)}if(e.options){const{previousValue:o,currentValue:d}=e.options;this.lazy&&o?.loading!==d?.loading&&d?.loading!==this.d_loading&&(this.d_loading=d.loading,s=!0),o?.numToleratedItems!==d?.numToleratedItems&&d?.numToleratedItems!==this.d_numToleratedItems&&(this.d_numToleratedItems=d.numToleratedItems)}this.initialized&&!s&&(e.items?.previousValue?.length!==e.items?.currentValue?.length||e.itemSize||e.scrollHeight||e.scrollWidth)&&this.init()}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"content":this.contentTemplate=e.template;break;case"item":default:this.itemTemplate=e.template;break;case"loader":this.loaderTemplate=e.template;break;case"loadericon":this.loaderIconTemplate=e.template}})}ngAfterViewInit(){this.viewInit()}ngAfterViewChecked(){this.initialized||this.viewInit(),this.calculateAutoSize()}ngOnDestroy(){this.unbindResizeListener(),this.contentEl=null,this.initialized=!1}viewInit(){oe.isVisible(this.elementViewChild?.nativeElement)&&(this.setInitialState(),this.setContentEl(this.contentEl),this.init(),this.defaultWidth=oe.getWidth(this.elementViewChild.nativeElement),this.defaultHeight=oe.getHeight(this.elementViewChild.nativeElement),this.initialized=!0)}init(){this._disabled||(this.setSize(),this.calculateOptions(),this.setSpacerSize(),this.bindResizeListener(),this.cd.detectChanges())}setContentEl(e){this.contentEl=e||this.contentViewChild?.nativeElement||oe.findSingle(this.elementViewChild?.nativeElement,".p-scroller-content")}setInitialState(){this.first=this.both?{rows:0,cols:0}:0,this.last=this.both?{rows:0,cols:0}:0,this.numItemsInViewport=this.both?{rows:0,cols:0}:0,this.lastScrollPos=this.both?{top:0,left:0}:0,this.d_loading=this._loading||!1,this.d_numToleratedItems=this._numToleratedItems,this.loaderArr=[],this.spacerStyle={},this.contentStyle={}}getElementRef(){return this.elementViewChild}getPageByFirst(){return Math.floor((this.first+4*this.d_numToleratedItems)/(this._step||1))}scrollTo(e){this.lastScrollPos=this.both?{top:0,left:0}:0,this.elementViewChild?.nativeElement?.scrollTo(e)}scrollToIndex(e,s="auto"){const{numToleratedItems:o}=this.calculateNumItems(),d=this.getContentPosition(),C=(k=0,F)=>k<=F?0:k,P=(k,F,H)=>k*F+H,R=(k=0,F=0)=>this.scrollTo({left:k,top:F,behavior:s});this.both?(this.first={rows:C(e[0],o[0]),cols:C(e[1],o[1])},R(P(this.first.cols,this._itemSize[1],d.left),P(this.first.rows,this._itemSize[0],d.top))):(this.first=C(e,o),this.horizontal?R(P(this.first,this._itemSize,d.left),0):R(0,P(this.first,this._itemSize,d.top)))}scrollInView(e,s,o="auto"){if(s){const{first:d,viewport:C}=this.getRenderedRange(),P=(F=0,H=0)=>this.scrollTo({left:F,top:H,behavior:o}),k="to-end"===s;if("to-start"===s){if(this.both)C.first.rows-d.rows>e[0]?P(C.first.cols*this._itemSize[1],(C.first.rows-1)*this._itemSize[0]):C.first.cols-d.cols>e[1]&&P((C.first.cols-1)*this._itemSize[1],C.first.rows*this._itemSize[0]);else if(C.first-d>e){const F=(C.first-1)*this._itemSize;this.horizontal?P(F,0):P(0,F)}}else if(k)if(this.both)C.last.rows-d.rows<=e[0]+1?P(C.first.cols*this._itemSize[1],(C.first.rows+1)*this._itemSize[0]):C.last.cols-d.cols<=e[1]+1&&P((C.first.cols+1)*this._itemSize[1],C.first.rows*this._itemSize[0]);else if(C.last-d<=e+1){const F=(C.first+1)*this._itemSize;this.horizontal?P(F,0):P(0,F)}}else this.scrollToIndex(e,o)}getRenderedRange(){const e=(d,C)=>Math.floor(d/(C||d));let s=this.first,o=0;if(this.elementViewChild?.nativeElement){const{scrollTop:d,scrollLeft:C}=this.elementViewChild.nativeElement;this.both?(s={rows:e(d,this._itemSize[0]),cols:e(C,this._itemSize[1])},o={rows:s.rows+this.numItemsInViewport.rows,cols:s.cols+this.numItemsInViewport.cols}):(s=e(this.horizontal?C:d,this._itemSize),o=s+this.numItemsInViewport)}return{first:this.first,last:this.last,viewport:{first:s,last:o}}}calculateNumItems(){const e=this.getContentPosition(),s=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetWidth-e.left:0,o=this.elementViewChild?.nativeElement?this.elementViewChild.nativeElement.offsetHeight-e.top:0,d=(k,F)=>Math.ceil(k/(F||k)),C=k=>Math.ceil(k/2),P=this.both?{rows:d(o,this._itemSize[0]),cols:d(s,this._itemSize[1])}:d(this.horizontal?s:o,this._itemSize);return{numItemsInViewport:P,numToleratedItems:this.d_numToleratedItems||(this.both?[C(P.rows),C(P.cols)]:C(P))}}calculateOptions(){const{numItemsInViewport:e,numToleratedItems:s}=this.calculateNumItems(),o=(P,R,k,F=!1)=>this.getLast(P+R+(P<k?2:3)*k,F),d=this.first,C=this.both?{rows:o(this.first.rows,e.rows,s[0]),cols:o(this.first.cols,e.cols,s[1],!0)}:o(this.first,e,s);this.last=C,this.numItemsInViewport=e,this.d_numToleratedItems=s,this.showLoader&&(this.loaderArr=this.both?Array.from({length:e.rows}).map(()=>Array.from({length:e.cols})):Array.from({length:e})),this._lazy&&Promise.resolve().then(()=>{this.lazyLoadState={first:this._step?this.both?{rows:0,cols:d.cols}:0:d,last:Math.min(this._step?this._step:this.last,this.items.length)},this.handleEvents("onLazyLoad",this.lazyLoadState)})}calculateAutoSize(){this._autoSize&&!this.d_loading&&Promise.resolve().then(()=>{if(this.contentEl){this.contentEl.style.minHeight=this.contentEl.style.minWidth="auto";const{offsetWidth:e,offsetHeight:s}=this.contentEl;(this.both||this.horizontal)&&(this.elementViewChild.nativeElement.style.width=(e<this.defaultWidth?e:this.defaultWidth)+"px"),(this.both||this.vertical)&&(this.elementViewChild.nativeElement.style.height=(s<this.defaultHeight?s:this.defaultHeight)+"px"),this.contentEl.style.minHeight=this.contentEl.style.minWidth=""}})}getLast(e=0,s=!1){return this._items?Math.min(s?(this._columns||this._items[0]).length:this._items.length,e):0}getContentPosition(){if(this.contentEl){const e=getComputedStyle(this.contentEl),s=parseFloat(e.paddingLeft)+Math.max(parseFloat(e.left)||0,0),o=parseFloat(e.paddingRight)+Math.max(parseFloat(e.right)||0,0),d=parseFloat(e.paddingTop)+Math.max(parseFloat(e.top)||0,0),C=parseFloat(e.paddingBottom)+Math.max(parseFloat(e.bottom)||0,0);return{left:s,right:o,top:d,bottom:C,x:s+o,y:d+C}}return{left:0,right:0,top:0,bottom:0,x:0,y:0}}setSize(){if(this.elementViewChild?.nativeElement){const e=this.elementViewChild.nativeElement.parentElement.parentElement,s=this._scrollWidth||`${this.elementViewChild.nativeElement.offsetWidth||e.offsetWidth}px`,o=this._scrollHeight||`${this.elementViewChild.nativeElement.offsetHeight||e.offsetHeight}px`,d=(C,P)=>this.elementViewChild.nativeElement.style[C]=P;this.both||this.horizontal?(d("height",o),d("width",s)):d("height",o)}}setSpacerSize(){if(this._items){const e=this.getContentPosition(),s=(o,d,C,P=0)=>this.spacerStyle={...this.spacerStyle,[`${o}`]:(d||[]).length*C+P+"px"};this.both?(s("height",this._items,this._itemSize[0],e.y),s("width",this._columns||this._items[1],this._itemSize[1],e.x)):this.horizontal?s("width",this._columns||this._items,this._itemSize,e.x):s("height",this._items,this._itemSize,e.y)}}setContentPosition(e){if(this.contentEl&&!this._appendOnly){const s=e?e.first:this.first,o=(C,P)=>C*P,d=(C=0,P=0)=>this.contentStyle={...this.contentStyle,transform:`translate3d(${C}px, ${P}px, 0)`};if(this.both)d(o(s.cols,this._itemSize[1]),o(s.rows,this._itemSize[0]));else{const C=o(s,this._itemSize);this.horizontal?d(C,0):d(0,C)}}}onScrollPositionChange(e){const s=e.target,o=this.getContentPosition(),d=(se,he)=>se?se>he?se-he:se:0,C=(se,he)=>Math.floor(se/(he||se)),P=(se,he,Ee,ge,ke,tt)=>se<=ke?ke:tt?Ee-ge-ke:he+ke-1,R=(se,he,Ee,ge,ke,tt,Ct)=>se<=tt?0:Math.max(0,Ct?se<he?Ee:se-tt:se>he?Ee:se-2*tt),k=(se,he,Ee,ge,ke,tt=!1)=>{let Ct=he+ge+2*ke;return se>=ke&&(Ct+=ke+1),this.getLast(Ct,tt)},F=d(s.scrollTop,o.top),H=d(s.scrollLeft,o.left);let Y=this.both?{rows:0,cols:0}:0,G=this.last,K=!1,ne=this.lastScrollPos;if(this.both){const se=this.lastScrollPos.top<=F,he=this.lastScrollPos.left<=H;if(!this._appendOnly||this._appendOnly&&(se||he)){const Ee={rows:C(F,this._itemSize[0]),cols:C(H,this._itemSize[1])},ge={rows:P(Ee.rows,this.first.rows,this.last.rows,this.numItemsInViewport.rows,this.d_numToleratedItems[0],se),cols:P(Ee.cols,this.first.cols,this.last.cols,this.numItemsInViewport.cols,this.d_numToleratedItems[1],he)};Y={rows:R(Ee.rows,ge.rows,this.first.rows,0,0,this.d_numToleratedItems[0],se),cols:R(Ee.cols,ge.cols,this.first.cols,0,0,this.d_numToleratedItems[1],he)},G={rows:k(Ee.rows,Y.rows,0,this.numItemsInViewport.rows,this.d_numToleratedItems[0]),cols:k(Ee.cols,Y.cols,0,this.numItemsInViewport.cols,this.d_numToleratedItems[1],!0)},K=Y.rows!==this.first.rows||G.rows!==this.last.rows||Y.cols!==this.first.cols||G.cols!==this.last.cols,ne={top:F,left:H}}}else{const se=this.horizontal?H:F,he=this.lastScrollPos<=se;if(!this._appendOnly||this._appendOnly&&he){const Ee=C(se,this._itemSize);Y=R(Ee,P(Ee,this.first,this.last,this.numItemsInViewport,this.d_numToleratedItems,he),this.first,0,0,this.d_numToleratedItems,he),G=k(Ee,Y,0,this.numItemsInViewport,this.d_numToleratedItems),K=Y!==this.first||G!==this.last,ne=se}}return{first:Y,last:G,isRangeChanged:K,scrollPos:ne}}onScrollChange(e){const{first:s,last:o,isRangeChanged:d,scrollPos:C}=this.onScrollPositionChange(e);if(d){const P={first:s,last:o};if(this.setContentPosition(P),this.first=s,this.last=o,this.lastScrollPos=C,this.handleEvents("onScrollIndexChange",P),this._lazy&&this.isPageChanged){const R={first:this._step?Math.min(this.getPageByFirst()*this._step,this.items.length-this._step):s,last:Math.min(this._step?(this.getPageByFirst()+1)*this._step:o,this.items.length)};(this.lazyLoadState.first!==R.first||this.lazyLoadState.last!==R.last)&&this.handleEvents("onLazyLoad",R),this.lazyLoadState=R}}}onContainerScroll(e){if(this.handleEvents("onScroll",{originalEvent:e}),this._delay&&this.isPageChanged){if(this.scrollTimeout&&clearTimeout(this.scrollTimeout),!this.d_loading&&this.showLoader){const{isRangeChanged:s}=this.onScrollPositionChange(e);(s||this._step&&this.isPageChanged)&&(this.d_loading=!0,this.cd.detectChanges())}this.scrollTimeout=setTimeout(()=>{this.onScrollChange(e),this.d_loading&&this.showLoader&&(!this._lazy||void 0===this._loading)&&(this.d_loading=!1,this.page=this.getPageByFirst(),this.cd.detectChanges())},this._delay)}else!this.d_loading&&this.onScrollChange(e)}bindResizeListener(){this.windowResizeListener||this.zone.runOutsideAngular(()=>{this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener),window.addEventListener("orientationchange",this.windowResizeListener)})}unbindResizeListener(){this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),window.removeEventListener("orientationchange",this.windowResizeListener),this.windowResizeListener=null)}onWindowResize(){this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{if(oe.isVisible(this.elementViewChild?.nativeElement)){const[e,s]=[oe.getWidth(this.elementViewChild.nativeElement),oe.getHeight(this.elementViewChild.nativeElement)],[o,d]=[e!==this.defaultWidth,s!==this.defaultHeight];(this.both?o||d:this.horizontal?o:this.vertical&&d)&&this.zone.run(()=>{this.d_numToleratedItems=this._numToleratedItems,this.defaultWidth=e,this.defaultHeight=s,this.init()})}},this._resizeDelay)}handleEvents(e,s){return this.options&&this.options[e]?this.options[e](s):this[e].emit(s)}getContentOptions(){return{contentStyleClass:"p-scroller-content "+(this.d_loading?"p-scroller-loading":""),items:this.loadedItems,getItemOptions:e=>this.getOptions(e),loading:this.d_loading,getLoaderOptions:(e,s)=>this.getLoaderOptions(e,s),itemSize:this._itemSize,rows:this.loadedRows,columns:this.loadedColumns,spacerStyle:this.spacerStyle,contentStyle:this.contentStyle,vertical:this.vertical,horizontal:this.horizontal,both:this.both}}getOptions(e){const s=(this._items||[]).length,o=this.both?this.first.rows+e:this.first+e;return{index:o,count:s,first:0===o,last:o===s-1,even:o%2==0,odd:o%2!=0}}getLoaderOptions(e,s){const o=this.loaderArr.length;return{index:e,count:o,first:0===e,last:e===o-1,even:e%2==0,odd:e%2!=0,...s}}}return t.\u0275fac=function(e){return new(e||t)(ae($n),ae(Gt))},t.\u0275cmp=en({type:t,selectors:[["p-scroller"]],contentQueries:function(e,s,o){if(1&e&&Fr(o,Sr,4),2&e){let d;St(d=xt())&&(s.templates=d)}},viewQuery:function(e,s){if(1&e&&(Yt(DF,5),Yt(PF,5)),2&e){let o;St(o=xt())&&(s.elementViewChild=o.first),St(o=xt())&&(s.contentViewChild=o.first)}},hostAttrs:[1,"p-scroller-viewport","p-element"],inputs:{id:"id",style:"style",styleClass:"styleClass",tabindex:"tabindex",items:"items",itemSize:"itemSize",scrollHeight:"scrollHeight",scrollWidth:"scrollWidth",orientation:"orientation",step:"step",delay:"delay",resizeDelay:"resizeDelay",appendOnly:"appendOnly",inline:"inline",lazy:"lazy",disabled:"disabled",loaderDisabled:"loaderDisabled",columns:"columns",showSpacer:"showSpacer",showLoader:"showLoader",numToleratedItems:"numToleratedItems",loading:"loading",autoSize:"autoSize",trackBy:"trackBy",options:"options"},outputs:{onLazyLoad:"onLazyLoad",onScroll:"onScroll",onScrollIndexChange:"onScrollIndexChange"},features:[Cn],ngContentSelectors:QF,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["disabledContainer",""],[3,"ngStyle","ngClass","scroll"],["element",""],["buildInContent",""],["class","p-scroller-spacer",3,"ngStyle",4,"ngIf"],["class","p-scroller-loader",3,"ngClass",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-scroller-content",3,"ngClass","ngStyle"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"p-scroller-spacer",3,"ngStyle"],[1,"p-scroller-loader",3,"ngClass"],["buildInLoader",""],[4,"ngFor","ngForOf"],["buildInLoaderIcon",""],[1,"p-scroller-loading-icon","pi","pi-spinner","pi-spin"],[4,"ngIf"]],template:function(e,s){if(1&e&&(ac(),te(0,JF,8,14,"ng-container",0),te(1,ZF,2,1,"ng-template",null,1,Ki)),2&e){const o=wn(2);q("ngIf",!s._disabled)("ngIfElse",o)}},dependencies:[Vi,fs,Ci,Qi,ji],styles:["p-scroller{flex:1;outline:0 none}.p-scroller{position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;outline:0 none}.p-scroller-content{position:absolute;top:0;left:0;min-height:100%;min-width:100%;will-change:transform}.p-scroller-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0;pointer-events:none}.p-scroller-loader{position:sticky;top:0;left:0;width:100%;height:100%}.p-scroller-loader.p-component-overlay{display:flex;align-items:center;justify-content:center}.p-scroller-loading-icon{font-size:2rem}.p-scroller-inline .p-scroller-content{position:static}\n"],encapsulation:2}),t})(),Ou=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})(),e5=(()=>{class t{constructor(e,s,o){this.el=e,this.zone=s,this.config=o,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let e=this.getTarget(this.el.nativeElement);e.addEventListener("focus",this.focusListener),e.addEventListener("blur",this.blurListener)}})}ngOnChanges(e){e.tooltipPosition&&this.setOption({tooltipPosition:e.tooltipPosition.currentValue}),e.tooltipEvent&&this.setOption({tooltipEvent:e.tooltipEvent.currentValue}),e.appendTo&&this.setOption({appendTo:e.appendTo.currentValue}),e.positionStyle&&this.setOption({positionStyle:e.positionStyle.currentValue}),e.tooltipStyleClass&&this.setOption({tooltipStyleClass:e.tooltipStyleClass.currentValue}),e.tooltipZIndex&&this.setOption({tooltipZIndex:e.tooltipZIndex.currentValue}),e.escape&&this.setOption({escape:e.escape.currentValue}),e.showDelay&&this.setOption({showDelay:e.showDelay.currentValue}),e.hideDelay&&this.setOption({hideDelay:e.hideDelay.currentValue}),e.life&&this.setOption({life:e.life.currentValue}),e.positionTop&&this.setOption({positionTop:e.positionTop.currentValue}),e.positionLeft&&this.setOption({positionLeft:e.positionLeft.currentValue}),e.disabled&&this.setOption({disabled:e.disabled.currentValue}),e.text&&(this.setOption({tooltipLabel:e.text.currentValue}),this.active&&(e.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),e.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...e.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(e){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(e){this.deactivate()}onFocus(e){this.activate()}onBlur(e){this.deactivate()}onClick(e){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let e=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},e)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let e=document.createElement("div");e.className="p-tooltip-arrow",this.container.appendChild(e),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?oe.appendChild(this.container,this.el.nativeElement):oe.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),oe.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?nr.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&nr.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let e=this.el.nativeElement.getBoundingClientRect();return{left:e.left+oe.getWindowScrollLeft(),top:e.top+oe.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let e=this.getHostOffset(),s=e.left+oe.getOuterWidth(this.el.nativeElement),o=e.top+(oe.getOuterHeight(this.el.nativeElement)-oe.getOuterHeight(this.container))/2;this.container.style.left=s+this.getOption("positionLeft")+"px",this.container.style.top=o+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let e=this.getHostOffset(),s=e.left-oe.getOuterWidth(this.container),o=e.top+(oe.getOuterHeight(this.el.nativeElement)-oe.getOuterHeight(this.container))/2;this.container.style.left=s+this.getOption("positionLeft")+"px",this.container.style.top=o+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let e=this.getHostOffset(),s=e.left+(oe.getOuterWidth(this.el.nativeElement)-oe.getOuterWidth(this.container))/2,o=e.top-oe.getOuterHeight(this.container);this.container.style.left=s+this.getOption("positionLeft")+"px",this.container.style.top=o+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let e=this.getHostOffset(),s=e.left+(oe.getOuterWidth(this.el.nativeElement)-oe.getOuterWidth(this.container))/2,o=e.top+oe.getOuterHeight(this.el.nativeElement);this.container.style.left=s+this.getOption("positionLeft")+"px",this.container.style.top=o+this.getOption("positionTop")+"px"}setOption(e){this._tooltipOptions={...this._tooltipOptions,...e}}getOption(e){return this._tooltipOptions[e]}getTarget(e){return oe.hasClass(e,"p-inputwrapper")?oe.findSingle(e,"input"):e}preAlign(e){this.container.style.left="-999px",this.container.style.top="-999px";let s="p-tooltip p-component p-tooltip-"+e;this.container.className=this.getOption("tooltipStyleClass")?s+" "+this.getOption("tooltipStyleClass"):s}isOutOfBounds(){let e=this.container.getBoundingClientRect(),s=e.top,o=e.left,d=oe.getOuterWidth(this.container),C=oe.getOuterHeight(this.container),P=oe.getViewport();return o+d>P.width||o<0||s<0||s+C>P.height}onWindowResize(e){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new Df(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let e=this.getTarget(this.el.nativeElement);e.removeEventListener("focus",this.focusListener),e.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):oe.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&nr.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(Gt),ae(Ga))},t.\u0275dir=Ge({type:t,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Cn]}),t})(),t5=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})();function n5(t,n){if(1&t&&(de(0,"span"),qe(1),ue()),2&t){const e=J();Q(1),Zt(e.label||"empty")}}function r5(t,n){1&t&&nt(0)}const sl=function(t){return{height:t}},s5=function(t,n){return{"p-dropdown-item":!0,"p-highlight":t,"p-disabled":n}},ag=function(t){return{$implicit:t}},o5=["container"],a5=["filter"],l5=["in"],c5=["editableInput"],u5=["items"],d5=["scroller"],h5=["overlay"];function p5(t,n){if(1&t&&(at(0),qe(1),lt()),2&t){const e=J(2);Q(1),Zt(e.label||"empty")}}function f5(t,n){1&t&&nt(0)}const g5=function(t){return{"p-dropdown-label p-inputtext":!0,"p-dropdown-label-empty":t}};function m5(t,n){if(1&t&&(de(0,"span",14),te(1,p5,2,1,"ng-container",15),te(2,f5,1,0,"ng-container",16),ue()),2&t){const e=J();q("ngClass",ut(9,g5,null==e.label||0===e.label.length))("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),jt("id",e.labelId),Q(1),q("ngIf",!e.selectedItemTemplate),Q(1),q("ngTemplateOutlet",e.selectedItemTemplate)("ngTemplateOutletContext",ut(11,ag,e.selectedOption))}}const _5=function(t){return{"p-dropdown-label p-inputtext p-placeholder":!0,"p-dropdown-label-empty":t}};function v5(t,n){if(1&t&&(de(0,"span",17),qe(1),ue()),2&t){const e=J();q("ngClass",ut(2,_5,null==e.placeholder||0===e.placeholder.length)),Q(1),Zt(e.placeholder||"empty")}}function y5(t,n){if(1&t){const e=ct();de(0,"input",18,19),Ae("input",function(o){return pe(e),fe(J().onEditableInputChange(o))})("focus",function(o){return pe(e),fe(J().onEditableInputFocus(o))})("blur",function(o){return pe(e),fe(J().onInputBlur(o))}),ue()}if(2&t){const e=J();q("disabled",e.disabled),jt("maxlength",e.maxlength)("placeholder",e.placeholder)("aria-expanded",e.overlayVisible)}}function b5(t,n){if(1&t){const e=ct();de(0,"i",20),Ae("click",function(o){return pe(e),fe(J().clear(o))}),ue()}}function C5(t,n){1&t&&nt(0)}function w5(t,n){1&t&&nt(0)}const Kw=function(t){return{options:t}};function E5(t,n){if(1&t&&(at(0),te(1,w5,1,0,"ng-container",16),lt()),2&t){const e=J(3);Q(1),q("ngTemplateOutlet",e.filterTemplate)("ngTemplateOutletContext",ut(2,Kw,e.filterOptions))}}function S5(t,n){if(1&t){const e=ct();de(0,"div",30)(1,"input",31,32),Ae("keydown.enter",function(o){return o.preventDefault()})("keydown",function(o){return pe(e),fe(J(3).onKeydown(o,!1))})("input",function(o){return pe(e),fe(J(3).onFilterInputChange(o))}),ue(),pt(3,"span",33),ue()}if(2&t){const e=J(3);Q(1),q("value",e.filterValue||""),jt("placeholder",e.filterPlaceholder)("aria-label",e.ariaFilterLabel)("aria-activedescendant",e.overlayVisible?"p-highlighted-option":e.labelId)}}function x5(t,n){if(1&t&&(de(0,"div",27),Ae("click",function(s){return s.stopPropagation()}),te(1,E5,2,4,"ng-container",28),te(2,S5,4,4,"ng-template",null,29,Ki),ue()),2&t){const e=wn(3),s=J(2);Q(1),q("ngIf",s.filterTemplate)("ngIfElse",e)}}function T5(t,n){1&t&&nt(0)}const Zw=function(t,n){return{$implicit:t,options:n}};function D5(t,n){if(1&t&&te(0,T5,1,0,"ng-container",16),2&t){const e=n.$implicit,s=n.options;J(2),q("ngTemplateOutlet",wn(7))("ngTemplateOutletContext",sn(2,Zw,e,s))}}function P5(t,n){1&t&&nt(0)}function M5(t,n){if(1&t&&te(0,P5,1,0,"ng-container",16),2&t){const e=n.options;q("ngTemplateOutlet",J(4).loaderTemplate)("ngTemplateOutletContext",ut(2,Kw,e))}}function O5(t,n){1&t&&(at(0),te(1,M5,1,4,"ng-template",36),lt())}function I5(t,n){if(1&t){const e=ct();de(0,"p-scroller",34,35),Ae("onLazyLoad",function(o){return pe(e),fe(J(2).onLazyLoad.emit(o))}),te(2,D5,1,5,"ng-template",13),te(3,O5,2,0,"ng-container",15),ue()}if(2&t){const e=J(2);Rn(ut(8,sl,e.scrollHeight)),q("items",e.optionsToDisplay)("itemSize",e.virtualScrollItemSize||e._itemSize)("autoSize",!0)("lazy",e.lazy)("options",e.virtualScrollOptions),Q(3),q("ngIf",e.loaderTemplate)}}function A5(t,n){1&t&&nt(0)}const R5=function(){return{}};function N5(t,n){if(1&t&&(at(0),te(1,A5,1,0,"ng-container",16),lt()),2&t){J();const e=wn(7),s=J();Q(1),q("ngTemplateOutlet",e)("ngTemplateOutletContext",sn(3,Zw,s.optionsToDisplay,Lr(2,R5)))}}function k5(t,n){if(1&t&&(de(0,"span"),qe(1),ue()),2&t){const e=J().$implicit,s=J(4);Q(1),Zt(s.getOptionGroupLabel(e)||"empty")}}function L5(t,n){1&t&&nt(0)}function F5(t,n){1&t&&nt(0)}const Qw=function(t,n){return{$implicit:t,selectedOption:n}};function B5(t,n){if(1&t&&(de(0,"li",42),te(1,k5,2,1,"span",15),te(2,L5,1,0,"ng-container",16),ue(),te(3,F5,1,0,"ng-container",16)),2&t){const e=n.$implicit,s=J(2).options,o=wn(5),d=J(2);q("ngStyle",ut(6,sl,s.itemSize+"px")),Q(1),q("ngIf",!d.groupTemplate),Q(1),q("ngTemplateOutlet",d.groupTemplate)("ngTemplateOutletContext",ut(8,ag,e)),Q(1),q("ngTemplateOutlet",o)("ngTemplateOutletContext",sn(10,Qw,d.getOptionGroupChildren(e),d.selectedOption))}}function V5(t,n){if(1&t&&(at(0),te(1,B5,4,13,"ng-template",41),lt()),2&t){const e=J().$implicit;Q(1),q("ngForOf",e)}}function j5(t,n){1&t&&nt(0)}function H5(t,n){if(1&t&&(at(0),te(1,j5,1,0,"ng-container",16),lt()),2&t){const e=J().$implicit,s=wn(5),o=J(2);Q(1),q("ngTemplateOutlet",s)("ngTemplateOutletContext",sn(2,Qw,e,o.selectedOption))}}function U5(t,n){if(1&t){const e=ct();de(0,"p-dropdownItem",43),Ae("onClick",function(o){return pe(e),fe(J(4).onItemClick(o))}),ue()}if(2&t){const e=n.$implicit,s=J().selectedOption,o=J(3);q("option",e)("selected",s==e)("label",o.getOptionLabel(e))("disabled",o.isOptionDisabled(e))("template",o.itemTemplate)}}function z5(t,n){1&t&&te(0,U5,1,5,"ng-template",41),2&t&&q("ngForOf",n.$implicit)}function Y5(t,n){if(1&t&&(at(0),qe(1),lt()),2&t){const e=J(4);Q(1),Ni(" ",e.emptyFilterMessageLabel," ")}}function G5(t,n){1&t&&nt(0,null,45)}function $5(t,n){if(1&t&&(de(0,"li",44),te(1,Y5,2,1,"ng-container",28),te(2,G5,2,0,"ng-container",22),ue()),2&t){const e=J().options,s=J(2);q("ngStyle",ut(4,sl,e.itemSize+"px")),Q(1),q("ngIf",!s.emptyFilterTemplate&&!s.emptyTemplate)("ngIfElse",s.emptyFilter),Q(1),q("ngTemplateOutlet",s.emptyFilterTemplate||s.emptyTemplate)}}function X5(t,n){if(1&t&&(at(0),qe(1),lt()),2&t){const e=J(4);Q(1),Ni(" ",e.emptyMessageLabel," ")}}function J5(t,n){1&t&&nt(0,null,46)}function W5(t,n){if(1&t&&(de(0,"li",44),te(1,X5,2,1,"ng-container",28),te(2,J5,2,0,"ng-container",22),ue()),2&t){const e=J().options,s=J(2);q("ngStyle",ut(4,sl,e.itemSize+"px")),Q(1),q("ngIf",!s.emptyTemplate)("ngIfElse",s.empty),Q(1),q("ngTemplateOutlet",s.emptyTemplate)}}function q5(t,n){if(1&t&&(de(0,"ul",37,38),te(2,V5,2,1,"ng-container",15),te(3,H5,2,5,"ng-container",15),te(4,z5,1,1,"ng-template",null,39,Ki),te(6,$5,3,6,"li",40),te(7,W5,3,6,"li",40),ue()),2&t){const e=n.options,s=J(2);Rn(e.contentStyle),q("ngClass",e.contentStyleClass),jt("id",s.listId),Q(2),q("ngIf",s.group),Q(1),q("ngIf",!s.group),Q(3),q("ngIf",s.filterValue&&s.isEmpty()),Q(1),q("ngIf",!s.filterValue&&s.isEmpty())}}function K5(t,n){1&t&&nt(0)}function Z5(t,n){if(1&t&&(de(0,"div",21),te(1,C5,1,0,"ng-container",22),te(2,x5,4,2,"div",23),de(3,"div",24),te(4,I5,4,10,"p-scroller",25),te(5,N5,2,6,"ng-container",15),te(6,q5,8,8,"ng-template",null,26,Ki),ue(),te(8,K5,1,0,"ng-container",22),ue()),2&t){const e=J();Kt(e.panelStyleClass),q("ngClass","p-dropdown-panel p-component")("ngStyle",e.panelStyle),Q(1),q("ngTemplateOutlet",e.headerTemplate),Q(1),q("ngIf",e.filter),Q(1),lc("max-height",e.virtualScroll?"auto":e.scrollHeight||"auto"),Q(1),q("ngIf",e.virtualScroll),Q(1),q("ngIf",!e.virtualScroll),Q(3),q("ngTemplateOutlet",e.footerTemplate)}}const Q5=function(t,n,e,s){return{"p-dropdown p-component":!0,"p-disabled":t,"p-dropdown-open":n,"p-focus":e,"p-dropdown-clearable":s}},e4={provide:Fn,useExisting:Tt(()=>eE),multi:!0};let t4=(()=>{class t{constructor(){this.onClick=new Te}onOptionClick(e){this.onClick.emit({originalEvent:e,option:this.option})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=en({type:t,selectors:[["p-dropdownItem"]],hostAttrs:[1,"p-element"],inputs:{option:"option",selected:"selected",label:"label",disabled:"disabled",visible:"visible",itemSize:"itemSize",template:"template"},outputs:{onClick:"onClick"},decls:3,vars:15,consts:[["role","option","pRipple","",3,"ngStyle","id","ngClass","click"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,s){1&e&&(de(0,"li",0),Ae("click",function(d){return s.onOptionClick(d)}),te(1,n5,2,1,"span",1),te(2,r5,1,0,"ng-container",2),ue()),2&e&&(q("ngStyle",ut(8,sl,s.itemSize+"px"))("id",s.selected?"p-highlighted-option":"")("ngClass",sn(10,s5,s.selected,s.disabled)),jt("aria-label",s.label)("aria-selected",s.selected),Q(1),q("ngIf",!s.template),Q(1),q("ngTemplateOutlet",s.template)("ngTemplateOutletContext",ut(13,ag,s.option)))},dependencies:[Vi,Ci,Qi,ji,cu],encapsulation:2}),t})(),eE=(()=>{class t{constructor(e,s,o,d,C,P){this.el=e,this.renderer=s,this.cd=o,this.zone=d,this.filterService=C,this.config=P,this.scrollHeight="200px",this.resetFilterOnHide=!1,this.dropdownIcon="pi pi-chevron-down",this.optionGroupChildren="items",this.autoDisplayFirst=!0,this.emptyFilterMessage="",this.emptyMessage="",this.lazy=!1,this.filterMatchMode="contains",this.tooltip="",this.tooltipPosition="right",this.tooltipPositionStyle="absolute",this.autofocusFilter=!0,this.overlayDirection="end",this.onChange=new Te,this.onFilter=new Te,this.onFocus=new Te,this.onBlur=new Te,this.onClick=new Te,this.onShow=new Te,this.onHide=new Te,this.onClear=new Te,this.onLazyLoad=new Te,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.id=Pf()}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1,this.overlayVisible&&this.hide()),this._disabled=e,this.cd.destroyed||this.cd.detectChanges()}get itemSize(){return this._itemSize}set itemSize(e){this._itemSize=e,console.warn("The itemSize property is deprecated, use virtualScrollItemSize property instead.")}get autoZIndex(){return this._autoZIndex}set autoZIndex(e){this._autoZIndex=e,console.warn("The autoZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get baseZIndex(){return this._baseZIndex}set baseZIndex(e){this._baseZIndex=e,console.warn("The baseZIndex property is deprecated since v14.2.0, use overlayOptions property instead.")}get showTransitionOptions(){return this._showTransitionOptions}set showTransitionOptions(e){this._showTransitionOptions=e,console.warn("The showTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}get hideTransitionOptions(){return this._hideTransitionOptions}set hideTransitionOptions(e){this._hideTransitionOptions=e,console.warn("The hideTransitionOptions property is deprecated since v14.2.0, use overlayOptions property instead.")}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"selectedItem":this.selectedItemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"filter":this.filterTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"emptyfilter":this.emptyFilterTemplate=e.template;break;case"empty":this.emptyTemplate=e.template;break;case"group":this.groupTemplate=e.template;break;case"loader":this.loaderTemplate=e.template}})}ngOnInit(){this.optionsToDisplay=this.options,this.updateSelectedOption(null),this.labelId=this.id+"_label",this.listId=this.id+"_list",this.filterBy&&(this.filterOptions={filter:e=>this.onFilterInputChange(e),reset:()=>this.resetFilter()})}get options(){return this._options}set options(e){this._options=e,this.optionsToDisplay=this._options,this.updateSelectedOption(this.value),this.selectedOption=this.findOption(this.value,this.optionsToDisplay),!this.selectedOption&&Le.isNotEmpty(this.value)&&!this.editable&&(this.value=null,this.onModelChange(this.value)),this.optionsChanged=!0,this._filterValue&&this._filterValue.length&&this.activateFilter()}get filterValue(){return this._filterValue}set filterValue(e){this._filterValue=e,this.activateFilter()}ngAfterViewInit(){this.editable&&this.updateEditableLabel()}get label(){return this.selectedOption?this.getOptionLabel(this.selectedOption):null}get emptyMessageLabel(){return this.emptyMessage||this.config.getTranslation(Ei.EMPTY_MESSAGE)}get emptyFilterMessageLabel(){return this.emptyFilterMessage||this.config.getTranslation(Ei.EMPTY_FILTER_MESSAGE)}get filled(){return"string"==typeof this.value?!!this.value:this.value||null!=this.value||null!=this.value}get isVisibleClearIcon(){return null!=this.value&&""!==this.value&&this.showClear&&!this.disabled}updateEditableLabel(){this.editableInputViewChild&&this.editableInputViewChild.nativeElement&&(this.editableInputViewChild.nativeElement.value=this.selectedOption?this.getOptionLabel(this.selectedOption):this.value||"")}getOptionLabel(e){return this.optionLabel?Le.resolveFieldData(e,this.optionLabel):e&&void 0!==e.label?e.label:e}getOptionValue(e){return this.optionValue?Le.resolveFieldData(e,this.optionValue):!this.optionLabel&&e&&void 0!==e.value?e.value:e}isOptionDisabled(e){return this.optionDisabled?Le.resolveFieldData(e,this.optionDisabled):!(!e||void 0===e.disabled)&&e.disabled}getOptionGroupLabel(e){return this.optionGroupLabel?Le.resolveFieldData(e,this.optionGroupLabel):e&&void 0!==e.label?e.label:e}getOptionGroupChildren(e){return this.optionGroupChildren?Le.resolveFieldData(e,this.optionGroupChildren):e.items}onItemClick(e){const s=e.option;this.isOptionDisabled(s)||(this.selectItem(e.originalEvent,s),this.accessibleViewChild.nativeElement.focus({preventScroll:!0})),setTimeout(()=>{this.hide()},1)}selectItem(e,s){this.selectedOption!=s&&(this.selectedOption=s,this.value=this.getOptionValue(s),this.onModelChange(this.value),this.updateEditableLabel(),this.onChange.emit({originalEvent:e,value:this.value}))}ngAfterViewChecked(){this.optionsChanged&&this.overlayVisible&&(this.optionsChanged=!1,this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.overlayViewChild&&this.overlayViewChild.alignOverlay()},1)})),this.selectedOptionUpdated&&this.itemsWrapper&&(oe.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")&&oe.scrollInView(this.itemsWrapper,oe.findSingle(this.overlayViewChild.el.nativeElement,"li.p-highlight")),this.selectedOptionUpdated=!1)}writeValue(e){this.filter&&this.resetFilter(),this.value=e,this.updateSelectedOption(e),this.updateEditableLabel(),this.cd.markForCheck()}resetFilter(){this._filterValue=null,this.filterViewChild&&this.filterViewChild.nativeElement&&(this.filterViewChild.nativeElement.value=""),this.optionsToDisplay=this.options}updateSelectedOption(e){this.selectedOption=this.findOption(e,this.optionsToDisplay),this.autoDisplayFirst&&!this.placeholder&&!this.selectedOption&&this.optionsToDisplay&&this.optionsToDisplay.length&&!this.editable&&(this.selectedOption=this.group?this.optionsToDisplay[0].items[0]:this.optionsToDisplay[0],this.value=this.getOptionValue(this.selectedOption),this.onModelChange(this.value)),this.selectedOptionUpdated=!0}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onMouseclick(e){this.disabled||this.readonly||this.isInputClick(e)||(this.onClick.emit(e),this.accessibleViewChild.nativeElement.focus({preventScroll:!0}),this.overlayVisible?this.hide():this.show(),this.cd.detectChanges())}isInputClick(e){return oe.hasClass(e.target,"p-dropdown-clear-icon")||e.target.isSameNode(this.accessibleViewChild.nativeElement)||this.editableInputViewChild&&e.target.isSameNode(this.editableInputViewChild.nativeElement)}isEmpty(){return!this.optionsToDisplay||this.optionsToDisplay&&0===this.optionsToDisplay.length}onEditableInputFocus(e){this.focused=!0,this.hide(),this.onFocus.emit(e)}onEditableInputChange(e){this.value=e.target.value,this.updateSelectedOption(this.value),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}show(){this.overlayVisible=!0,this.cd.markForCheck()}onOverlayAnimationStart(e){if("visible"===e.toState){if(this.itemsWrapper=oe.findSingle(this.overlayViewChild.el.nativeElement,this.virtualScroll?".p-scroller":".p-dropdown-items-wrapper"),this.virtualScroll&&this.scroller.setContentEl(this.itemsViewChild.nativeElement),this.options&&this.options.length)if(this.virtualScroll){const s=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;-1!==s&&this.scroller.scrollToIndex(s)}else{let s=oe.findSingle(this.itemsWrapper,".p-dropdown-item.p-highlight");s&&s.scrollIntoView({block:"nearest",inline:"center"})}this.filterViewChild&&this.filterViewChild.nativeElement&&(this.preventModelTouched=!0,this.autofocusFilter&&this.filterViewChild.nativeElement.focus()),this.onShow.emit(e)}"void"===e.toState&&(this.itemsWrapper=null,this.onModelTouched(),this.onHide.emit(e))}hide(){this.overlayVisible=!1,this.filter&&this.resetFilterOnHide&&this.resetFilter(),this.cd.markForCheck()}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1,this.onBlur.emit(e),this.preventModelTouched||this.onModelTouched(),this.preventModelTouched=!1}findPrevEnabledOption(e){let s;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let o=e-1;0<=o;o--){let d=this.optionsToDisplay[o];if(!this.isOptionDisabled(d)){s=d;break}}if(!s)for(let o=this.optionsToDisplay.length-1;o>=e;o--){let d=this.optionsToDisplay[o];if(!this.isOptionDisabled(d)){s=d;break}}}return s}findNextEnabledOption(e){let s;if(this.optionsToDisplay&&this.optionsToDisplay.length){for(let o=e+1;o<this.optionsToDisplay.length;o++){let d=this.optionsToDisplay[o];if(!this.isOptionDisabled(d)){s=d;break}}if(!s)for(let o=0;o<e;o++){let d=this.optionsToDisplay[o];if(!this.isOptionDisabled(d)){s=d;break}}}return s}onKeydown(e,s){if(!this.readonly&&this.optionsToDisplay&&null!==this.optionsToDisplay.length)switch(e.which){case 40:if(!this.overlayVisible&&e.altKey)this.show();else if(this.group){let o=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==o){let d=o.itemIndex+1;d<this.getOptionGroupChildren(this.optionsToDisplay[o.groupIndex]).length?(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[o.groupIndex])[d]),this.selectedOptionUpdated=!0):this.optionsToDisplay[o.groupIndex+1]&&(this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[o.groupIndex+1])[0]),this.selectedOptionUpdated=!0)}else this.optionsToDisplay&&this.optionsToDisplay.length>0&&this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[0])[0])}else{let o=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,d=this.findNextEnabledOption(o);d&&(this.selectItem(e,d),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 38:if(this.group){let o=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;if(-1!==o){let d=o.itemIndex-1;if(d>=0)this.selectItem(e,this.getOptionGroupChildren(this.optionsToDisplay[o.groupIndex])[d]),this.selectedOptionUpdated=!0;else if(d<0){let C=this.optionsToDisplay[o.groupIndex-1];C&&(this.selectItem(e,this.getOptionGroupChildren(C)[this.getOptionGroupChildren(C).length-1]),this.selectedOptionUpdated=!0)}}}else{let o=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1,d=this.findPrevEnabledOption(o);d&&(this.selectItem(e,d),this.selectedOptionUpdated=!0)}e.preventDefault();break;case 32:s&&(this.overlayVisible?this.hide():this.show(),e.preventDefault());break;case 13:this.overlayVisible&&(!this.filter||this.optionsToDisplay&&this.optionsToDisplay.length>0)?this.hide():this.overlayVisible||this.show(),e.preventDefault();break;case 27:case 9:this.hide();break;default:s&&!e.metaKey&&17!==e.which&&this.search(e)}}search(e){this.searchTimeout&&clearTimeout(this.searchTimeout);const s=e.key;let o;if(this.previousSearchChar=this.currentSearchChar,this.currentSearchChar=s,this.searchValue=this.previousSearchChar===this.currentSearchChar?this.currentSearchChar:this.searchValue?this.searchValue+s:s,this.group){let d=this.selectedOption?this.findOptionGroupIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):{groupIndex:0,itemIndex:0};o=this.searchOptionWithinGroup(d)}else{let d=this.selectedOption?this.findOptionIndex(this.getOptionValue(this.selectedOption),this.optionsToDisplay):-1;o=this.searchOption(++d)}o&&!this.isOptionDisabled(o)&&(this.selectItem(e,o),this.selectedOptionUpdated=!0),this.searchTimeout=setTimeout(()=>{this.searchValue=null},250)}searchOption(e){let s;return this.searchValue&&(s=this.searchOptionInRange(e,this.optionsToDisplay.length),s||(s=this.searchOptionInRange(0,e))),s}searchOptionInRange(e,s){for(let o=e;o<s;o++){let d=this.optionsToDisplay[o];if(this.getOptionLabel(d).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(d))return d}return null}searchOptionWithinGroup(e){if(this.searchValue){for(let o=e.groupIndex;o<this.optionsToDisplay.length;o++)for(let d=e.groupIndex===o?e.itemIndex+1:0;d<this.getOptionGroupChildren(this.optionsToDisplay[o]).length;d++){let C=this.getOptionGroupChildren(this.optionsToDisplay[o])[d];if(this.getOptionLabel(C).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(C))return C}for(let o=0;o<=e.groupIndex;o++)for(let d=0;d<(e.groupIndex===o?e.itemIndex:this.getOptionGroupChildren(this.optionsToDisplay[o]).length);d++){let C=this.getOptionGroupChildren(this.optionsToDisplay[o])[d];if(this.getOptionLabel(C).toLocaleLowerCase(this.filterLocale).startsWith(this.searchValue.toLocaleLowerCase(this.filterLocale))&&!this.isOptionDisabled(C))return C}}return null}findOptionIndex(e,s){let o=-1;if(s)for(let d=0;d<s.length;d++)if(null==e&&null==this.getOptionValue(s[d])||Le.equals(e,this.getOptionValue(s[d]),this.dataKey)){o=d;break}return o}findOptionGroupIndex(e,s){let o,d;if(s)for(let C=0;C<s.length&&(o=C,d=this.findOptionIndex(e,this.getOptionGroupChildren(s[C])),-1===d);C++);return-1!==d?{groupIndex:o,itemIndex:d}:-1}findOption(e,s,o){if(this.group&&!o){let d;if(s&&s.length)for(let C of s)if(d=this.findOption(e,this.getOptionGroupChildren(C),!0),d)break;return d}{let d=this.findOptionIndex(e,s);return-1!=d?s[d]:null}}onFilterInputChange(e){let s=e.target.value;s&&s.length?(this._filterValue=s,this.activateFilter()):(this._filterValue=null,this.optionsToDisplay=this.options),this.virtualScroll&&this.scroller.scrollToIndex(0),this.optionsChanged=!0,this.onFilter.emit({originalEvent:e,filter:this._filterValue})}activateFilter(){let e=(this.filterBy||this.optionLabel||"label").split(",");if(this.options&&this.options.length){if(this.group){let s=[];for(let o of this.options){let d=this.filterService.filter(this.getOptionGroupChildren(o),e,this.filterValue,this.filterMatchMode,this.filterLocale);d&&d.length&&s.push({...o,[this.optionGroupChildren]:d})}this.optionsToDisplay=s}else this.optionsToDisplay=this.filterService.filter(this.options,e,this.filterValue,this.filterMatchMode,this.filterLocale);this.optionsChanged=!0}}applyFocus(){this.editable?oe.findSingle(this.el.nativeElement,".p-dropdown-label.p-inputtext").focus():oe.findSingle(this.el.nativeElement,"input[readonly]").focus()}focus(){this.applyFocus()}clear(e){this.value=null,this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}),this.updateSelectedOption(this.value),this.updateEditableLabel(),this.onClear.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(mi),ae($n),ae(Gt),ae(CC),ae(Ga))},t.\u0275cmp=en({type:t,selectors:[["p-dropdown"]],contentQueries:function(e,s,o){if(1&e&&Fr(o,Sr,4),2&e){let d;St(d=xt())&&(s.templates=d)}},viewQuery:function(e,s){if(1&e&&(Yt(o5,5),Yt(a5,5),Yt(l5,5),Yt(c5,5),Yt(u5,5),Yt(d5,5),Yt(h5,5)),2&e){let o;St(o=xt())&&(s.containerViewChild=o.first),St(o=xt())&&(s.filterViewChild=o.first),St(o=xt())&&(s.accessibleViewChild=o.first),St(o=xt())&&(s.editableInputViewChild=o.first),St(o=xt())&&(s.itemsViewChild=o.first),St(o=xt())&&(s.scroller=o.first),St(o=xt())&&(s.overlayViewChild=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:4,hostBindings:function(e,s){2&e&&kr("p-inputwrapper-filled",s.filled)("p-inputwrapper-focus",s.focused||s.overlayVisible)},inputs:{scrollHeight:"scrollHeight",filter:"filter",name:"name",style:"style",panelStyle:"panelStyle",styleClass:"styleClass",panelStyleClass:"panelStyleClass",readonly:"readonly",required:"required",editable:"editable",appendTo:"appendTo",tabindex:"tabindex",placeholder:"placeholder",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",inputId:"inputId",selectId:"selectId",dataKey:"dataKey",filterBy:"filterBy",autofocus:"autofocus",resetFilterOnHide:"resetFilterOnHide",dropdownIcon:"dropdownIcon",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",optionGroupLabel:"optionGroupLabel",optionGroupChildren:"optionGroupChildren",autoDisplayFirst:"autoDisplayFirst",group:"group",showClear:"showClear",emptyFilterMessage:"emptyFilterMessage",emptyMessage:"emptyMessage",lazy:"lazy",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",overlayOptions:"overlayOptions",ariaFilterLabel:"ariaFilterLabel",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",filterMatchMode:"filterMatchMode",maxlength:"maxlength",tooltip:"tooltip",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",tooltipStyleClass:"tooltipStyleClass",autofocusFilter:"autofocusFilter",overlayDirection:"overlayDirection",disabled:"disabled",itemSize:"itemSize",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",showTransitionOptions:"showTransitionOptions",hideTransitionOptions:"hideTransitionOptions",options:"options",filterValue:"filterValue"},outputs:{onChange:"onChange",onFilter:"onFilter",onFocus:"onFocus",onBlur:"onBlur",onClick:"onClick",onShow:"onShow",onHide:"onHide",onClear:"onClear",onLazyLoad:"onLazyLoad"},features:[Mt([e4])],decls:14,vars:32,consts:[[3,"ngClass","ngStyle","click"],["container",""],[1,"p-hidden-accessible"],["type","text","readonly","","aria-haspopup","listbox","aria-haspopup","listbox","pAutoFocus","","role","combobox",3,"disabled","autofocus","focus","blur","keydown"],["in",""],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass",4,"ngIf"],[3,"ngClass",4,"ngIf"],["type","text","class","p-dropdown-label p-inputtext","aria-haspopup","listbox",3,"disabled","input","focus","blur",4,"ngIf"],["class","p-dropdown-clear-icon pi pi-times",3,"click",4,"ngIf"],["role","button","aria-label","dropdown trigger","aria-haspopup","listbox",1,"p-dropdown-trigger"],[1,"p-dropdown-trigger-icon",3,"ngClass"],[3,"visible","options","target","appendTo","autoZIndex","baseZIndex","showTransitionOptions","hideTransitionOptions","visibleChange","onAnimationStart","onHide"],["overlay",""],["pTemplate","content"],[3,"ngClass","pTooltip","tooltipPosition","positionStyle","tooltipStyleClass"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass"],["type","text","aria-haspopup","listbox",1,"p-dropdown-label","p-inputtext",3,"disabled","input","focus","blur"],["editableInput",""],[1,"p-dropdown-clear-icon","pi","pi-times",3,"click"],[3,"ngClass","ngStyle"],[4,"ngTemplateOutlet"],["class","p-dropdown-header",3,"click",4,"ngIf"],[1,"p-dropdown-items-wrapper"],[3,"items","style","itemSize","autoSize","lazy","options","onLazyLoad",4,"ngIf"],["buildInItems",""],[1,"p-dropdown-header",3,"click"],[4,"ngIf","ngIfElse"],["builtInFilterElement",""],[1,"p-dropdown-filter-container"],["type","text","autocomplete","off",1,"p-dropdown-filter","p-inputtext","p-component",3,"value","keydown.enter","keydown","input"],["filter",""],[1,"p-dropdown-filter-icon","pi","pi-search"],[3,"items","itemSize","autoSize","lazy","options","onLazyLoad"],["scroller",""],["pTemplate","loader"],["role","listbox",1,"p-dropdown-items",3,"ngClass"],["items",""],["itemslist",""],["class","p-dropdown-empty-message",3,"ngStyle",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"p-dropdown-item-group",3,"ngStyle"],[3,"option","selected","label","disabled","template","onClick"],[1,"p-dropdown-empty-message",3,"ngStyle"],["emptyFilter",""],["empty",""]],template:function(e,s){1&e&&(de(0,"div",0,1),Ae("click",function(d){return s.onMouseclick(d)}),de(2,"div",2)(3,"input",3,4),Ae("focus",function(d){return s.onInputFocus(d)})("blur",function(d){return s.onInputBlur(d)})("keydown",function(d){return s.onKeydown(d,!0)}),ue()(),te(5,m5,3,13,"span",5),te(6,v5,2,4,"span",6),te(7,y5,2,4,"input",7),te(8,b5,1,0,"i",8),de(9,"div",9),pt(10,"span",10),ue(),de(11,"p-overlay",11,12),Ae("visibleChange",function(d){return s.overlayVisible=d})("onAnimationStart",function(d){return s.onOverlayAnimationStart(d)})("onHide",function(){return s.hide()}),te(13,Z5,9,11,"ng-template",13),ue()()),2&e&&(Kt(s.styleClass),q("ngClass",va(27,Q5,s.disabled,s.overlayVisible,s.focused,s.showClear&&!s.disabled))("ngStyle",s.style),Q(3),q("disabled",s.disabled)("autofocus",s.autofocus),jt("id",s.inputId)("placeholder",s.placeholder)("aria-label",s.ariaLabel)("aria-expanded",!1)("aria-labelledby",s.ariaLabelledBy)("tabindex",s.tabindex)("aria-activedescendant",s.overlayVisible?s.labelId:null),Q(2),q("ngIf",!s.editable&&null!=s.label),Q(1),q("ngIf",!s.editable&&null==s.label),Q(1),q("ngIf",s.editable),Q(1),q("ngIf",s.isVisibleClearIcon),Q(1),jt("aria-expanded",s.overlayVisible),Q(1),q("ngClass",s.dropdownIcon),Q(1),q("visible",s.overlayVisible)("options",s.overlayOptions)("target","@parent")("appendTo",s.appendTo)("autoZIndex",s.autoZIndex)("baseZIndex",s.baseZIndex)("showTransitionOptions",s.showTransitionOptions)("hideTransitionOptions",s.hideTransitionOptions))},dependencies:[Vi,fs,Ci,Qi,ji,Xw,Sr,e5,qw,dF,t4],styles:[".p-dropdown{display:inline-flex;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none}.p-dropdown-clear-icon{position:absolute;top:50%;margin-top:-.5rem}.p-dropdown-trigger{display:flex;align-items:center;justify-content:center;flex-shrink:0}.p-dropdown-label{display:block;white-space:nowrap;overflow:hidden;flex:1 1 auto;width:1%;text-overflow:ellipsis;cursor:pointer}.p-dropdown-label-empty{overflow:hidden;visibility:hidden}input.p-dropdown-label{cursor:default}.p-dropdown-items-wrapper{overflow:auto}.p-dropdown-item{cursor:pointer;font-weight:400;white-space:nowrap;position:relative;overflow:hidden}.p-dropdown-items{margin:0;padding:0;list-style-type:none}.p-dropdown-filter{width:100%}.p-dropdown-filter-container{position:relative}.p-dropdown-filter-icon{position:absolute;top:50%;margin-top:-.5rem}.p-fluid .p-dropdown{display:flex}.p-fluid .p-dropdown .p-dropdown-label{width:1%}\n"],encapsulation:2,changeDetection:0}),t})(),lg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,Jw,xr,t5,$a,Ou,hF,Jw,xr,Ou]}),t})();const n4=["input"];function i4(t,n){if(1&t){const e=ct();de(0,"i",6),Ae("click",function(){return pe(e),fe(J().clear())}),ue()}}const tE=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},nE=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function r4(t,n){if(1&t){const e=ct();de(0,"span",7)(1,"button",8),Ae("mousedown",function(o){return pe(e),fe(J().onUpButtonMouseDown(o))})("mouseup",function(){return pe(e),fe(J().onUpButtonMouseUp())})("mouseleave",function(){return pe(e),fe(J().onUpButtonMouseLeave())})("keydown",function(o){return pe(e),fe(J().onUpButtonKeyDown(o))})("keyup",function(){return pe(e),fe(J().onUpButtonKeyUp())}),ue(),de(2,"button",8),Ae("mousedown",function(o){return pe(e),fe(J().onDownButtonMouseDown(o))})("mouseup",function(){return pe(e),fe(J().onDownButtonMouseUp())})("mouseleave",function(){return pe(e),fe(J().onDownButtonMouseLeave())})("keydown",function(o){return pe(e),fe(J().onDownButtonKeyDown(o))})("keyup",function(){return pe(e),fe(J().onDownButtonKeyUp())}),ue()()}if(2&t){const e=J();Q(1),Kt(e.incrementButtonClass),q("ngClass",Lr(10,tE))("icon",e.incrementButtonIcon)("disabled",e.disabled),Q(1),Kt(e.decrementButtonClass),q("ngClass",Lr(11,nE))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}function s4(t,n){if(1&t){const e=ct();de(0,"button",8),Ae("mousedown",function(o){return pe(e),fe(J().onUpButtonMouseDown(o))})("mouseup",function(){return pe(e),fe(J().onUpButtonMouseUp())})("mouseleave",function(){return pe(e),fe(J().onUpButtonMouseLeave())})("keydown",function(o){return pe(e),fe(J().onUpButtonKeyDown(o))})("keyup",function(){return pe(e),fe(J().onUpButtonKeyUp())}),ue()}if(2&t){const e=J();Kt(e.incrementButtonClass),q("ngClass",Lr(5,tE))("icon",e.incrementButtonIcon)("disabled",e.disabled)}}function o4(t,n){if(1&t){const e=ct();de(0,"button",8),Ae("mousedown",function(o){return pe(e),fe(J().onDownButtonMouseDown(o))})("mouseup",function(){return pe(e),fe(J().onDownButtonMouseUp())})("mouseleave",function(){return pe(e),fe(J().onDownButtonMouseLeave())})("keydown",function(o){return pe(e),fe(J().onDownButtonKeyDown(o))})("keyup",function(){return pe(e),fe(J().onDownButtonKeyUp())}),ue()}if(2&t){const e=J();Kt(e.decrementButtonClass),q("ngClass",Lr(5,nE))("icon",e.decrementButtonIcon)("disabled",e.disabled)}}const a4=function(t,n,e){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":t,"p-inputnumber-buttons-horizontal":n,"p-inputnumber-buttons-vertical":e}},l4={provide:Fn,useExisting:Tt(()=>iE),multi:!0};let iE=(()=>{class t{constructor(e,s){this.el=e,this.cd=s,this.showButtons=!1,this.format=!0,this.buttonLayout="stacked",this.incrementButtonIcon="pi pi-angle-up",this.decrementButtonIcon="pi pi-angle-down",this.readonly=!1,this.step=1,this.allowEmpty=!0,this.mode="decimal",this.useGrouping=!0,this.showClear=!1,this.onInput=new Te,this.onFocus=new Te,this.onBlur=new Te,this.onKeyDown=new Te,this.onClear=new Te,this.onModelChange=()=>{},this.onModelTouched=()=>{},this.groupChar="",this.prefixChar="",this.suffixChar=""}get disabled(){return this._disabled}set disabled(e){e&&(this.focused=!1),this._disabled=e,this.timer&&this.clearTimer()}ngOnChanges(e){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(o=>!!e[o])&&this.updateConstructParser()}ngOnInit(){this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const e=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),s=new Map(e.map((o,d)=>[o,d]));this._numeral=new RegExp(`[${e.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=o=>s.get(o)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const e=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${e.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=e.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const e=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${e.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const e=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${e.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=e.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const e=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=e.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(e){if(null!=e){if("-"===e)return e;if(this.format){let o=new Intl.NumberFormat(this.locale,this.getOptions()).format(e);return this.prefix&&(o=this.prefix+o),this.suffix&&(o+=this.suffix),o}return e.toString()}return""}parseValue(e){let s=e.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(s){if("-"===s)return s;let o=+s;return isNaN(o)?null:o}return null}repeat(e,s,o){if(this.readonly)return;let d=s||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(e,40,o)},d),this.spin(e,o)}spin(e,s){let o=this.step*s,d=this.parseValue(this.input.nativeElement.value)||0,C=this.validateValue(d+o);this.maxlength&&this.maxlength<this.formatValue(C).length||(this.updateInput(C,null,"spin",null),this.updateModel(e,C),this.handleOnInput(e,d,C))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,1),e.preventDefault()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(e){this.input.nativeElement.focus(),this.repeat(e,null,-1),e.preventDefault()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(e){(32===e.keyCode||13===e.keyCode)&&this.repeat(e,null,-1)}onUserInput(e){this.readonly||(this.isSpecialChar&&(e.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(e){if(this.readonly)return;if(this.lastValue=e.target.value,e.shiftKey||e.altKey)return void(this.isSpecialChar=!0);let s=e.target.selectionStart,o=e.target.selectionEnd,d=e.target.value,C=null;switch(e.altKey&&e.preventDefault(),e.which){case 38:this.spin(e,1),e.preventDefault();break;case 40:this.spin(e,-1),e.preventDefault();break;case 37:this.isNumeralChar(d.charAt(s-1))||e.preventDefault();break;case 39:this.isNumeralChar(d.charAt(s))||e.preventDefault();break;case 13:C=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(C),this.input.nativeElement.setAttribute("aria-valuenow",C),this.updateModel(e,C);break;case 8:if(e.preventDefault(),s===o){const P=d.charAt(s-1),{decimalCharIndex:R,decimalCharIndexWithoutPrefix:k}=this.getDecimalCharIndexes(d);if(this.isNumeralChar(P)){const F=this.getDecimalLength(d);if(this._group.test(P))this._group.lastIndex=0,C=d.slice(0,s-2)+d.slice(s-1);else if(this._decimal.test(P))this._decimal.lastIndex=0,F?this.input.nativeElement.setSelectionRange(s-1,s-1):C=d.slice(0,s-1)+d.slice(s);else if(R>0&&s>R){const H=this.isDecimalMode()&&(this.minFractionDigits||0)<F?"":"0";C=d.slice(0,s-1)+H+d.slice(s)}else 1===k?(C=d.slice(0,s-1)+"0"+d.slice(s),C=this.parseValue(C)>0?C:""):C=d.slice(0,s-1)+d.slice(s)}this.updateValue(e,C,null,"delete-single")}else C=this.deleteRange(d,s,o),this.updateValue(e,C,null,"delete-range");break;case 46:if(e.preventDefault(),s===o){const P=d.charAt(s),{decimalCharIndex:R,decimalCharIndexWithoutPrefix:k}=this.getDecimalCharIndexes(d);if(this.isNumeralChar(P)){const F=this.getDecimalLength(d);if(this._group.test(P))this._group.lastIndex=0,C=d.slice(0,s)+d.slice(s+2);else if(this._decimal.test(P))this._decimal.lastIndex=0,F?this.input.nativeElement.setSelectionRange(s+1,s+1):C=d.slice(0,s)+d.slice(s+1);else if(R>0&&s>R){const H=this.isDecimalMode()&&(this.minFractionDigits||0)<F?"":"0";C=d.slice(0,s)+H+d.slice(s+1)}else 1===k?(C=d.slice(0,s)+"0"+d.slice(s+1),C=this.parseValue(C)>0?C:""):C=d.slice(0,s)+d.slice(s+1)}this.updateValue(e,C,null,"delete-back-single")}else C=this.deleteRange(d,s,o),this.updateValue(e,C,null,"delete-range")}this.onKeyDown.emit(e)}onInputKeyPress(e){if(this.readonly)return;let s=e.which||e.keyCode,o=String.fromCharCode(s);const d=this.isDecimalSign(o),C=this.isMinusSign(o);13!=s&&e.preventDefault(),(48<=s&&s<=57||C||d)&&this.insert(e,o,{isDecimalSign:d,isMinusSign:C})}onPaste(e){if(!this.disabled&&!this.readonly){e.preventDefault();let s=(e.clipboardData||window.clipboardData).getData("Text");if(s){let o=this.parseValue(s);null!=o&&this.insert(e,o.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(e){return!(!this._minusSign.test(e)&&"-"!==e||(this._minusSign.lastIndex=0,0))}isDecimalSign(e){return!!this._decimal.test(e)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(e){let s=e.search(this._decimal);this._decimal.lastIndex=0;const d=e.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:s,decimalCharIndexWithoutPrefix:d}}getCharIndexes(e){const s=e.search(this._decimal);this._decimal.lastIndex=0;const o=e.search(this._minusSign);this._minusSign.lastIndex=0;const d=e.search(this._suffix);this._suffix.lastIndex=0;const C=e.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:s,minusCharIndex:o,suffixCharIndex:d,currencyCharIndex:C}}insert(e,s,o={isDecimalSign:!1,isMinusSign:!1}){const d=s.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==d)return;let C=this.input.nativeElement.selectionStart,P=this.input.nativeElement.selectionEnd,R=this.input.nativeElement.value.trim();const{decimalCharIndex:k,minusCharIndex:F,suffixCharIndex:H,currencyCharIndex:Y}=this.getCharIndexes(R);let G;if(o.isMinusSign)0===C&&(G=R,(-1===F||0!==P)&&(G=this.insertText(R,s,0,P)),this.updateValue(e,G,s,"insert"));else if(o.isDecimalSign)k>0&&C===k?this.updateValue(e,R,s,"insert"):(k>C&&k<P||-1===k&&this.maxFractionDigits)&&(G=this.insertText(R,s,C,P),this.updateValue(e,G,s,"insert"));else{const K=this.numberFormat.resolvedOptions().maximumFractionDigits,ne=C!==P?"range-insert":"insert";if(k>0&&C>k){if(C+s.length-(k+1)<=K){const se=Y>=C?Y-1:H>=C?H:R.length;G=R.slice(0,C)+s+R.slice(C+s.length,se)+R.slice(se),this.updateValue(e,G,s,ne)}}else G=this.insertText(R,s,C,P),this.updateValue(e,G,s,ne)}}insertText(e,s,o,d){if(2===("."===s?s:s.split(".")).length){const P=e.slice(o,d).search(this._decimal);return this._decimal.lastIndex=0,P>0?e.slice(0,o)+this.formatValue(s)+e.slice(d):e||this.formatValue(s)}return d-o===e.length?this.formatValue(s):0===o?s+e.slice(d):d===e.length?e.slice(0,o)+s:e.slice(0,o)+s+e.slice(d)}deleteRange(e,s,o){let d;return d=o-s===e.length?"":0===s?e.slice(o):o===e.length?e.slice(0,s):e.slice(0,s)+e.slice(o),d}initCursor(){let e=this.input.nativeElement.selectionStart,s=this.input.nativeElement.value,o=s.length,d=null,C=(this.prefixChar||"").length;s=s.replace(this._prefix,""),e-=C;let P=s.charAt(e);if(this.isNumeralChar(P))return e+C;let R=e-1;for(;R>=0;){if(P=s.charAt(R),this.isNumeralChar(P)){d=R+C;break}R--}if(null!==d)this.input.nativeElement.setSelectionRange(d+1,d+1);else{for(R=e;R<o;){if(P=s.charAt(R),this.isNumeralChar(P)){d=R+C;break}R++}null!==d&&this.input.nativeElement.setSelectionRange(d,d)}return d||0}onInputClick(){!this.readonly&&this.input.nativeElement.value!==oe.getSelection()&&this.initCursor()}isNumeralChar(e){return!(1!==e.length||!(this._numeral.test(e)||this._decimal.test(e)||this._group.test(e)||this._minusSign.test(e))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(e,s,o,d){let C=this.input.nativeElement.value,P=null;null!=s&&(P=this.parseValue(s),P=P||this.allowEmpty?P:0,this.updateInput(P,o,d,s),this.handleOnInput(e,C,P))}handleOnInput(e,s,o){this.isValueChanged(s,o)&&this.onInput.emit({originalEvent:e,value:o,formattedValue:s})}isValueChanged(e,s){return null===s&&null!==e||null!=s&&s!==("string"==typeof e?this.parseValue(e):e)}validateValue(e){return"-"===e||null==e?null:null!=this.min&&e<this.min?this.min:null!=this.max&&e>this.max?this.max:e}updateInput(e,s,o,d){s=s||"";let C=this.input.nativeElement.value,P=this.formatValue(e),R=C.length;if(P!==d&&(P=this.concatValues(P,d)),0===R){this.input.nativeElement.value=P,this.input.nativeElement.setSelectionRange(0,0);const F=this.initCursor()+s.length;this.input.nativeElement.setSelectionRange(F,F)}else{let k=this.input.nativeElement.selectionStart,F=this.input.nativeElement.selectionEnd;if(this.maxlength&&this.maxlength<P.length)return;this.input.nativeElement.value=P;let H=P.length;if("range-insert"===o){const Y=this.parseValue((C||"").slice(0,k)),K=(null!==Y?Y.toString():"").split("").join(`(${this.groupChar})?`),ne=new RegExp(K,"g");ne.test(P);const se=s.split("").join(`(${this.groupChar})?`),he=new RegExp(se,"g");he.test(P.slice(ne.lastIndex)),F=ne.lastIndex+he.lastIndex,this.input.nativeElement.setSelectionRange(F,F)}else if(H===R)"insert"===o||"delete-back-single"===o?this.input.nativeElement.setSelectionRange(F+1,F+1):"delete-single"===o?this.input.nativeElement.setSelectionRange(F-1,F-1):("delete-range"===o||"spin"===o)&&this.input.nativeElement.setSelectionRange(F,F);else if("delete-back-single"===o){let Y=C.charAt(F-1),G=C.charAt(F),K=R-H,ne=this._group.test(G);ne&&1===K?F+=1:!ne&&this.isNumeralChar(Y)&&(F+=-1*K+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(F,F)}else if("-"===C&&"insert"===o){this.input.nativeElement.setSelectionRange(0,0);const G=this.initCursor()+s.length+1;this.input.nativeElement.setSelectionRange(G,G)}else F+=H-R,this.input.nativeElement.setSelectionRange(F,F)}this.input.nativeElement.setAttribute("aria-valuenow",e)}concatValues(e,s){if(e&&s){let o=s.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?e.replace(this.suffixChar,"").split(this._decimal)[0]+s.replace(this.suffixChar,"").slice(o)+this.suffixChar:-1!==o?e.split(this._decimal)[0]+s.slice(o):e}return e}getDecimalLength(e){if(e){const s=e.split(this._decimal);if(2===s.length)return s[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(e){this.focused=!0,this.onFocus.emit(e)}onInputBlur(e){this.focused=!1;let s=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(s),this.input.nativeElement.setAttribute("aria-valuenow",s),this.updateModel(e,s),this.onBlur.emit(e)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(e,s){this.value!==s&&(this.value=s,this.onModelChange(s)),this.onModelTouched()}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae($n))},t.\u0275cmp=en({type:t,selectors:[["p-inputNumber"]],viewQuery:function(e,s){if(1&e&&Yt(n4,5),2&e){let o;St(o=xt())&&(s.input=o.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(e,s){2&e&&kr("p-inputwrapper-filled",s.filled)("p-inputwrapper-focus",s.focused)("p-inputnumber-clearable",s.showClear&&"vertical"!=s.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Mt([l4]),Cn],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],["class","p-inputnumber-clear-icon pi pi-times",3,"click",4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","",3,"ngClass","class","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[1,"p-inputnumber-clear-icon","pi","pi-times",3,"click"],[1,"p-inputnumber-button-group"],["type","button","pButton","",3,"ngClass","icon","disabled","mousedown","mouseup","mouseleave","keydown","keyup"]],template:function(e,s){1&e&&(de(0,"span",0)(1,"input",1,2),Ae("input",function(d){return s.onUserInput(d)})("keydown",function(d){return s.onInputKeyDown(d)})("keypress",function(d){return s.onInputKeyPress(d)})("paste",function(d){return s.onPaste(d)})("click",function(){return s.onInputClick()})("focus",function(d){return s.onInputFocus(d)})("blur",function(d){return s.onInputBlur(d)}),ue(),te(3,i4,1,0,"i",3),te(4,r4,3,12,"span",4),te(5,s4,1,6,"button",5),te(6,o4,1,6,"button",5),ue()),2&e&&(Kt(s.styleClass),q("ngClass",mr(28,a4,s.showButtons&&"stacked"===s.buttonLayout,s.showButtons&&"horizontal"===s.buttonLayout,s.showButtons&&"vertical"===s.buttonLayout))("ngStyle",s.style),Q(1),Kt(s.inputStyleClass),q("ngClass","p-inputnumber-input")("ngStyle",s.inputStyle)("value",s.formattedValue())("disabled",s.disabled)("readonly",s.readonly),jt("placeholder",s.placeholder)("title",s.title)("id",s.inputId)("size",s.size)("name",s.name)("autocomplete",s.autocomplete)("maxlength",s.maxlength)("tabindex",s.tabindex)("aria-label",s.ariaLabel)("aria-required",s.ariaRequired)("required",s.required)("min",s.min)("max",s.max),Q(2),q("ngIf","vertical"!=s.buttonLayout&&s.showClear&&s.value),Q(1),q("ngIf",s.showButtons&&"stacked"===s.buttonLayout),Q(1),q("ngIf",s.showButtons&&"stacked"!==s.buttonLayout),Q(1),q("ngIf",s.showButtons&&"stacked"!==s.buttonLayout))},dependencies:[Vi,Ci,ji,Qf,uu],styles:["p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}\n"],encapsulation:2,changeDetection:0}),t})(),cg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,eg,Xa]}),t})();function c4(t,n){1&t&&nt(0)}const ug=function(t){return{$implicit:t}};function u4(t,n){if(1&t&&(de(0,"div",15),te(1,c4,1,0,"ng-container",16),ue()),2&t){const e=J(2);Q(1),q("ngTemplateOutlet",e.templateLeft)("ngTemplateOutletContext",ut(2,ug,e.paginatorState))}}function d4(t,n){if(1&t&&(de(0,"span",17),qe(1),ue()),2&t){const e=J(2);Q(1),Zt(e.currentPageReport)}}const Iu=function(t){return{"p-disabled":t}};function h4(t,n){if(1&t){const e=ct();de(0,"button",18),Ae("click",function(o){return pe(e),fe(J(2).changePageToFirst(o))}),pt(1,"span",19),ue()}if(2&t){const e=J(2);q("disabled",e.isFirstPage()||e.empty())("ngClass",ut(2,Iu,e.isFirstPage()||e.empty()))}}const p4=function(t){return{"p-highlight":t}};function f4(t,n){if(1&t){const e=ct();de(0,"button",22),Ae("click",function(o){const C=pe(e).$implicit;return fe(J(3).onPageLinkClick(o,C-1))}),qe(1),ue()}if(2&t){const e=n.$implicit,s=J(3);q("ngClass",ut(2,p4,e-1==s.getPage())),Q(1),Ni(" ",e," ")}}function g4(t,n){if(1&t&&(de(0,"span",20),te(1,f4,2,4,"button",21),ue()),2&t){const e=J(2);Q(1),q("ngForOf",e.pageLinks)}}function m4(t,n){1&t&&qe(0),2&t&&Zt(J(3).currentPageReport)}function _4(t,n){if(1&t){const e=ct();de(0,"p-dropdown",23),Ae("onChange",function(o){return pe(e),fe(J(2).onPageDropdownChange(o))}),te(1,m4,1,1,"ng-template",24),ue()}if(2&t){const e=J(2);q("options",e.pageItems)("ngModel",e.getPage())("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight)}}function v4(t,n){if(1&t){const e=ct();de(0,"button",25),Ae("click",function(o){return pe(e),fe(J(2).changePageToLast(o))}),pt(1,"span",26),ue()}if(2&t){const e=J(2);q("disabled",e.isLastPage()||e.empty())("ngClass",ut(2,Iu,e.isLastPage()||e.empty()))}}function y4(t,n){if(1&t){const e=ct();de(0,"p-inputNumber",27),Ae("ngModelChange",function(o){return pe(e),fe(J(2).changePage(o-1))}),ue()}if(2&t){const e=J(2);q("ngModel",e.currentPage())("disabled",e.empty())}}function b4(t,n){1&t&&nt(0)}function C4(t,n){if(1&t&&te(0,b4,1,0,"ng-container",16),2&t){const e=n.$implicit;q("ngTemplateOutlet",J(4).dropdownItemTemplate)("ngTemplateOutletContext",ut(2,ug,e))}}function w4(t,n){1&t&&(at(0),te(1,C4,1,4,"ng-template",30),lt())}function E4(t,n){if(1&t){const e=ct();de(0,"p-dropdown",28),Ae("ngModelChange",function(o){return pe(e),fe(J(2).rows=o)})("onChange",function(o){return pe(e),fe(J(2).onRppChange(o))}),te(1,w4,2,0,"ng-container",29),ue()}if(2&t){const e=J(2);q("options",e.rowsPerPageItems)("ngModel",e.rows)("disabled",e.empty())("appendTo",e.dropdownAppendTo)("scrollHeight",e.dropdownScrollHeight),Q(1),q("ngIf",e.dropdownItemTemplate)}}function S4(t,n){1&t&&nt(0)}function x4(t,n){if(1&t&&(de(0,"div",31),te(1,S4,1,0,"ng-container",16),ue()),2&t){const e=J(2);Q(1),q("ngTemplateOutlet",e.templateRight)("ngTemplateOutletContext",ut(2,ug,e.paginatorState))}}function T4(t,n){if(1&t){const e=ct();de(0,"div",1),te(1,u4,2,4,"div",2),te(2,d4,2,1,"span",3),te(3,h4,2,4,"button",4),de(4,"button",5),Ae("click",function(o){return pe(e),fe(J().changePageToPrev(o))}),pt(5,"span",6),ue(),te(6,g4,2,1,"span",7),te(7,_4,2,5,"p-dropdown",8),de(8,"button",9),Ae("click",function(o){return pe(e),fe(J().changePageToNext(o))}),pt(9,"span",10),ue(),te(10,v4,2,4,"button",11),te(11,y4,1,2,"p-inputNumber",12),te(12,E4,2,6,"p-dropdown",13),te(13,x4,2,4,"div",14),ue()}if(2&t){const e=J();Kt(e.styleClass),q("ngStyle",e.style)("ngClass","p-paginator p-component"),Q(1),q("ngIf",e.templateLeft),Q(1),q("ngIf",e.showCurrentPageReport),Q(1),q("ngIf",e.showFirstLastIcon),Q(1),q("disabled",e.isFirstPage()||e.empty())("ngClass",ut(17,Iu,e.isFirstPage()||e.empty())),Q(2),q("ngIf",e.showPageLinks),Q(1),q("ngIf",e.showJumpToPageDropdown),Q(1),q("disabled",e.isLastPage()||e.empty())("ngClass",ut(19,Iu,e.isLastPage()||e.empty())),Q(2),q("ngIf",e.showFirstLastIcon),Q(1),q("ngIf",e.showJumpToPageInput),Q(1),q("ngIf",e.rowsPerPageOptions),Q(1),q("ngIf",e.templateRight)}}let D4=(()=>{class t{constructor(e){this.cd=e,this.pageLinkSize=5,this.onPageChange=new Te,this.alwaysShow=!0,this.dropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.totalRecords=0,this.rows=0,this.showPageLinks=!0,this._first=0,this._page=0}ngOnInit(){this.updatePaginatorState()}ngOnChanges(e){e.totalRecords&&(this.updatePageLinks(),this.updatePaginatorState(),this.updateFirst(),this.updateRowsPerPageOptions()),e.first&&(this._first=e.first.currentValue,this.updatePageLinks(),this.updatePaginatorState()),e.rows&&(this.updatePageLinks(),this.updatePaginatorState()),e.rowsPerPageOptions&&this.updateRowsPerPageOptions()}get first(){return this._first}set first(e){this._first=e}updateRowsPerPageOptions(){if(this.rowsPerPageOptions){this.rowsPerPageItems=[];for(let e of this.rowsPerPageOptions)"object"==typeof e&&e.showAll?this.rowsPerPageItems.unshift({label:e.showAll,value:this.totalRecords}):this.rowsPerPageItems.push({label:String(e),value:e})}}isFirstPage(){return 0===this.getPage()}isLastPage(){return this.getPage()===this.getPageCount()-1}getPageCount(){return Math.ceil(this.totalRecords/this.rows)}calculatePageLinkBoundaries(){let e=this.getPageCount(),s=Math.min(this.pageLinkSize,e),o=Math.max(0,Math.ceil(this.getPage()-s/2)),d=Math.min(e-1,o+s-1);return o=Math.max(0,o-(this.pageLinkSize-(d-o+1))),[o,d]}updatePageLinks(){this.pageLinks=[];let e=this.calculatePageLinkBoundaries(),o=e[1];for(let d=e[0];d<=o;d++)this.pageLinks.push(d+1);if(this.showJumpToPageDropdown){this.pageItems=[];for(let d=0;d<this.getPageCount();d++)this.pageItems.push({label:String(d+1),value:d})}}changePage(e){var s=this.getPageCount();if(e>=0&&e<s){this._first=this.rows*e;var o={page:e,first:this.first,rows:this.rows,pageCount:s};this.updatePageLinks(),this.onPageChange.emit(o),this.updatePaginatorState()}}updateFirst(){const e=this.getPage();e>0&&this.totalRecords&&this.first>=this.totalRecords&&Promise.resolve(null).then(()=>this.changePage(e-1))}getPage(){return Math.floor(this.first/this.rows)}changePageToFirst(e){this.isFirstPage()||this.changePage(0),e.preventDefault()}changePageToPrev(e){this.changePage(this.getPage()-1),e.preventDefault()}changePageToNext(e){this.changePage(this.getPage()+1),e.preventDefault()}changePageToLast(e){this.isLastPage()||this.changePage(this.getPageCount()-1),e.preventDefault()}onPageLinkClick(e,s){this.changePage(s),e.preventDefault()}onRppChange(e){this.changePage(this.getPage())}onPageDropdownChange(e){this.changePage(e.value)}updatePaginatorState(){this.paginatorState={page:this.getPage(),pageCount:this.getPageCount(),rows:this.rows,first:this.first,totalRecords:this.totalRecords}}empty(){return 0===this.getPageCount()}currentPage(){return this.getPageCount()>0?this.getPage()+1:0}get currentPageReport(){return this.currentPageReportTemplate.replace("{currentPage}",String(this.currentPage())).replace("{totalPages}",String(this.getPageCount())).replace("{first}",String(this.totalRecords>0?this._first+1:0)).replace("{last}",String(Math.min(this._first+this.rows,this.totalRecords))).replace("{rows}",String(this.rows)).replace("{totalRecords}",String(this.totalRecords))}}return t.\u0275fac=function(e){return new(e||t)(ae($n))},t.\u0275cmp=en({type:t,selectors:[["p-paginator"]],hostAttrs:[1,"p-element"],inputs:{pageLinkSize:"pageLinkSize",style:"style",styleClass:"styleClass",alwaysShow:"alwaysShow",templateLeft:"templateLeft",templateRight:"templateRight",dropdownAppendTo:"dropdownAppendTo",dropdownScrollHeight:"dropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showFirstLastIcon:"showFirstLastIcon",totalRecords:"totalRecords",rows:"rows",rowsPerPageOptions:"rowsPerPageOptions",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showPageLinks:"showPageLinks",dropdownItemTemplate:"dropdownItemTemplate",first:"first"},outputs:{onPageChange:"onPageChange"},features:[Cn],decls:1,vars:1,consts:[[3,"class","ngStyle","ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],["class","p-paginator-left-content",4,"ngIf"],["class","p-paginator-current",4,"ngIf"],["type","button","pRipple","","class","p-paginator-first p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-prev","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-left"],["class","p-paginator-pages",4,"ngIf"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange",4,"ngIf"],["type","button","pRipple","",1,"p-paginator-next","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-right"],["type","button","pRipple","","class","p-paginator-last p-paginator-element p-link",3,"disabled","ngClass","click",4,"ngIf"],["class","p-paginator-page-input",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange",4,"ngIf"],["class","p-paginator-right-content",4,"ngIf"],[1,"p-paginator-left-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"p-paginator-current"],["type","button","pRipple","",1,"p-paginator-first","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-left"],[1,"p-paginator-pages"],["type","button","class","p-paginator-page p-paginator-element p-link","pRipple","",3,"ngClass","click",4,"ngFor","ngForOf"],["type","button","pRipple","",1,"p-paginator-page","p-paginator-element","p-link",3,"ngClass","click"],["styleClass","p-paginator-page-options",3,"options","ngModel","disabled","appendTo","scrollHeight","onChange"],["pTemplate","selectedItem"],["type","button","pRipple","",1,"p-paginator-last","p-paginator-element","p-link",3,"disabled","ngClass","click"],[1,"p-paginator-icon","pi","pi-angle-double-right"],[1,"p-paginator-page-input",3,"ngModel","disabled","ngModelChange"],["styleClass","p-paginator-rpp-options",3,"options","ngModel","disabled","appendTo","scrollHeight","ngModelChange","onChange"],[4,"ngIf"],["pTemplate","item"],[1,"p-paginator-right-content"]],template:function(e,s){1&e&&te(0,T4,14,21,"div",0),2&e&&q("ngIf",!!s.alwaysShow||s.pageLinks&&s.pageLinks.length>1)},dependencies:[Vi,fs,Ci,Qi,ji,eE,Sr,iE,pu,wu,cu],styles:[".p-paginator{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}.p-paginator-left-content{margin-right:auto}.p-paginator-right-content{margin-left:auto}.p-paginator-page,.p-paginator-next,.p-paginator-last,.p-paginator-first,.p-paginator-prev,.p-paginator-current{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;line-height:1;-webkit-user-select:none;user-select:none;overflow:hidden;position:relative}.p-paginator-element:focus{z-index:1;position:relative}\n"],encapsulation:2,changeDetection:0}),t})(),P4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,lg,cg,Zf,xr,$a,lg,cg,Zf,xr]}),t})();function M4(t,n){1&t&&pt(0,"span",8),2&t&&(Kt(J(2).$implicit.icon),q("ngClass","p-button-icon p-button-icon-left"))}function O4(t,n){if(1&t&&(at(0),te(1,M4,1,3,"span",6),de(2,"span",7),qe(3),ue(),lt()),2&t){const e=J().$implicit,s=J();Q(1),q("ngIf",e.icon),Q(2),Zt(s.getOptionLabel(e))}}function I4(t,n){1&t&&nt(0)}const A4=function(t,n){return{$implicit:t,index:n}};function R4(t,n){if(1&t&&te(0,I4,1,0,"ng-container",9),2&t){const e=J(),s=e.$implicit,o=e.index;q("ngTemplateOutlet",J().itemTemplate)("ngTemplateOutletContext",sn(2,A4,s,o))}}const N4=function(t,n,e){return{"p-highlight":t,"p-disabled":n,"p-button-icon-only":e}};function k4(t,n){if(1&t){const e=ct();de(0,"div",2,3),Ae("click",function(o){const d=pe(e),C=d.$implicit,P=d.index;return fe(J().onItemClick(o,C,P))})("keydown.enter",function(o){const d=pe(e),C=d.$implicit,P=d.index;return fe(J().onItemClick(o,C,P))})("blur",function(){return pe(e),fe(J().onBlur())}),te(2,O4,4,2,"ng-container",4),te(3,R4,1,5,"ng-template",null,5,Ki),ue()}if(2&t){const e=n.$implicit,s=wn(4),o=J();Kt(e.styleClass),q("ngClass",mr(10,N4,o.isSelected(e),o.disabled||o.isOptionDisabled(e),e.icon&&!o.getOptionLabel(e))),jt("aria-pressed",o.isSelected(e))("title",e.title)("aria-label",e.label)("tabindex",o.disabled?null:o.tabindex)("aria-labelledby",o.getOptionLabel(e)),Q(2),q("ngIf",!o.itemTemplate)("ngIfElse",s)}}const L4={provide:Fn,useExisting:Tt(()=>F4),multi:!0};let F4=(()=>{class t{constructor(e){this.cd=e,this.tabindex=0,this.onOptionClick=new Te,this.onChange=new Te,this.onModelChange=()=>{},this.onModelTouched=()=>{}}getOptionLabel(e){return this.optionLabel?Le.resolveFieldData(e,this.optionLabel):null!=e.label?e.label:e}getOptionValue(e){return this.optionValue?Le.resolveFieldData(e,this.optionValue):this.optionLabel||void 0===e.value?e:e.value}isOptionDisabled(e){return this.optionDisabled?Le.resolveFieldData(e,this.optionDisabled):void 0!==e.disabled&&e.disabled}writeValue(e){this.value=e,this.cd.markForCheck()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}onItemClick(e,s,o){if(!this.disabled&&!this.isOptionDisabled(s)){if(this.multiple)this.isSelected(s)?this.removeOption(s):this.value=[...this.value||[],this.getOptionValue(s)],this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value});else{let d=this.getOptionValue(s);this.value!==d&&(this.value=this.getOptionValue(s),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value}))}this.onOptionClick.emit({originalEvent:e,option:s,index:o})}}onBlur(){this.onModelTouched()}removeOption(e){this.value=this.value.filter(s=>!Le.equals(s,this.getOptionValue(e),this.dataKey))}isSelected(e){let s=!1,o=this.getOptionValue(e);if(this.multiple){if(this.value&&this.value instanceof Array)for(let d of this.value)if(Le.equals(d,o,this.dataKey)){s=!0;break}}else s=Le.equals(this.getOptionValue(e),this.value,this.dataKey);return s}}return t.\u0275fac=function(e){return new(e||t)(ae($n))},t.\u0275cmp=en({type:t,selectors:[["p-selectButton"]],contentQueries:function(e,s,o){if(1&e&&Fr(o,ki,5),2&e){let d;St(d=xt())&&(s.itemTemplate=d.first)}},hostAttrs:[1,"p-element"],inputs:{options:"options",optionLabel:"optionLabel",optionValue:"optionValue",optionDisabled:"optionDisabled",tabindex:"tabindex",multiple:"multiple",style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy",disabled:"disabled",dataKey:"dataKey"},outputs:{onOptionClick:"onOptionClick",onChange:"onChange"},features:[Mt([L4])],decls:2,vars:5,consts:[["role","group",3,"ngClass","ngStyle"],["class","p-button p-component","role","button","pRipple","",3,"class","ngClass","click","keydown.enter","blur",4,"ngFor","ngForOf"],["role","button","pRipple","",1,"p-button","p-component",3,"ngClass","click","keydown.enter","blur"],["btn",""],[4,"ngIf","ngIfElse"],["customcontent",""],[3,"ngClass","class",4,"ngIf"],[1,"p-button-label"],[3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,s){1&e&&(de(0,"div",0),te(1,k4,5,14,"div",1),ue()),2&e&&(Kt(s.styleClass),q("ngClass","p-selectbutton p-buttonset p-component")("ngStyle",s.style),Q(1),q("ngForOf",s.options))},dependencies:[Vi,fs,Ci,Qi,ji,cu],styles:['.p-button{margin:0;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center;vertical-align:bottom;text-align:center;overflow:hidden;position:relative}.p-button-label{flex:1 1 auto}.p-button-icon-right{order:1}.p-button:disabled{cursor:default}.p-button-icon-only{justify-content:center}.p-button-icon-only:after{content:"p";visibility:hidden;clip:rect(0 0 0 0);width:0}.p-button-vertical{flex-direction:column}.p-button-icon-bottom{order:2}.p-buttonset .p-button{margin:0}.p-buttonset .p-button:not(:last-child){border-right:0 none}.p-buttonset .p-button:not(:first-of-type):not(:last-of-type){border-radius:0}.p-buttonset .p-button:first-of-type{border-top-right-radius:0;border-bottom-right-radius:0}.p-buttonset .p-button:last-of-type{border-top-left-radius:0;border-bottom-left-radius:0}.p-buttonset .p-button:focus{position:relative;z-index:1}\n'],encapsulation:2,changeDetection:0}),t})(),B4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,$a]}),t})();const V4=function(t,n,e){return{"p-checkbox-label-active":t,"p-disabled":n,"p-checkbox-label-focus":e}};function j4(t,n){if(1&t){const e=ct();de(0,"label",7),Ae("click",function(o){pe(e);const d=J(),C=wn(3);return fe(d.onClick(o,C))}),qe(1),ue()}if(2&t){const e=J();q("ngClass",mr(3,V4,null!=e.value,e.disabled,e.focused)),jt("for",e.inputId),Q(1),Zt(e.label)}}const H4=function(t,n){return{"p-checkbox p-component":!0,"p-checkbox-disabled":t,"p-checkbox-focused":n}},U4=function(t,n,e){return{"p-highlight":t,"p-disabled":n,"p-focus":e}},z4={provide:Fn,useExisting:Tt(()=>Y4),multi:!0};let Y4=(()=>{class t{constructor(e){this.cd=e,this.checkboxTrueIcon="pi pi-check",this.checkboxFalseIcon="pi pi-times",this.onChange=new Te,this.onModelChange=()=>{},this.onModelTouched=()=>{}}onClick(e,s){!this.disabled&&!this.readonly&&(this.toggle(e),this.focused=!0,s.focus())}onKeydown(e){32==e.keyCode&&e.preventDefault()}onKeyup(e){32==e.keyCode&&!this.readonly&&(this.toggle(e),e.preventDefault())}toggle(e){null==this.value||null==this.value?this.value=!0:1==this.value?this.value=!1:0==this.value&&(this.value=null),this.onModelChange(this.value),this.onChange.emit({originalEvent:e,value:this.value})}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}writeValue(e){this.value=e,this.cd.markForCheck()}setDisabledState(e){this.disabled=e,this.cd.markForCheck()}}return t.\u0275fac=function(e){return new(e||t)(ae($n))},t.\u0275cmp=en({type:t,selectors:[["p-triStateCheckbox"]],hostAttrs:[1,"p-element"],inputs:{disabled:"disabled",name:"name",ariaLabelledBy:"ariaLabelledBy",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",label:"label",readonly:"readonly",checkboxTrueIcon:"checkboxTrueIcon",checkboxFalseIcon:"checkboxFalseIcon"},outputs:{onChange:"onChange"},features:[Mt([z4])],decls:7,vars:21,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","text","inputmode","none",3,"name","readonly","disabled","keyup","keydown","focus","blur"],["input",""],["role","checkbox",1,"p-checkbox-box",3,"ngClass","click"],[1,"p-checkbox-icon",3,"ngClass"],["class","p-checkbox-label",3,"ngClass","click",4,"ngIf"],[1,"p-checkbox-label",3,"ngClass","click"]],template:function(e,s){if(1&e){const o=ct();de(0,"div",0)(1,"div",1)(2,"input",2,3),Ae("keyup",function(C){return s.onKeyup(C)})("keydown",function(C){return s.onKeydown(C)})("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()}),ue()(),de(4,"div",4),Ae("click",function(C){pe(o);const P=wn(3);return fe(s.onClick(C,P))}),pt(5,"span",5),ue()(),te(6,j4,2,7,"label",6)}2&e&&(Kt(s.styleClass),q("ngStyle",s.style)("ngClass",sn(14,H4,s.disabled,s.focused)),Q(2),q("name",s.name)("readonly",s.readonly)("disabled",s.disabled),jt("id",s.inputId)("tabindex",s.tabindex)("aria-labelledby",s.ariaLabelledBy),Q(2),q("ngClass",mr(17,U4,null!=s.value,s.disabled,s.focused)),jt("aria-checked",!0===s.value),Q(1),q("ngClass",!0===s.value?s.checkboxTrueIcon:!1===s.value?s.checkboxFalseIcon:""),Q(1),q("ngIf",s.label))},dependencies:[Vi,Ci,ji],encapsulation:2,changeDetection:0}),t})(),G4=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn]}),t})();const $4=["container"],X4=["resizeHelper"],J4=["reorderIndicatorUp"],W4=["reorderIndicatorDown"],q4=["wrapper"],K4=["table"],Z4=["thead"],Q4=["tfoot"],eB=["scroller"];function tB(t,n){if(1&t&&(de(0,"div",15),pt(1,"i"),ue()),2&t){const e=J();Q(1),Kt("p-datatable-loading-icon pi-spin "+e.loadingIcon)}}function nB(t,n){1&t&&nt(0)}function iB(t,n){if(1&t&&(de(0,"div",16),te(1,nB,1,0,"ng-container",17),ue()),2&t){const e=J();Q(1),q("ngTemplateOutlet",e.captionTemplate)}}function rB(t,n){if(1&t){const e=ct();de(0,"p-paginator",18),Ae("onPageChange",function(o){return pe(e),fe(J().onPageChange(o))}),ue()}if(2&t){const e=J();q("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function sB(t,n){1&t&&nt(0)}const rE=function(t,n){return{$implicit:t,options:n}};function oB(t,n){if(1&t&&te(0,sB,1,0,"ng-container",22),2&t){const e=n.$implicit,s=n.options;J(2),q("ngTemplateOutlet",wn(10))("ngTemplateOutletContext",sn(2,rE,e,s))}}const aB=function(t){return{height:t}};function lB(t,n){if(1&t){const e=ct();de(0,"p-scroller",19,20),Ae("onLazyLoad",function(o){return pe(e),fe(J().onLazyItemLoad(o))}),te(2,oB,1,5,"ng-template",21),ue()}if(2&t){const e=J();Rn(ut(14,aB,"flex"!==e.scrollHeight?e.scrollHeight:void 0)),q("items",e.processedData)("columns",e.columns)("scrollHeight","flex"!==e.scrollHeight?void 0:"100%")("itemSize",e.virtualScrollItemSize||e._virtualRowHeight)("step",e.rows)("delay",e.lazy?e.virtualScrollDelay:0)("inline",!0)("lazy",e.lazy)("loaderDisabled",!0)("showSpacer",!1)("showLoader",e.loadingBodyTemplate)("options",e.virtualScrollOptions)}}function cB(t,n){1&t&&nt(0)}const uB=function(t){return{columns:t}};function dB(t,n){if(1&t&&(at(0),te(1,cB,1,0,"ng-container",22),lt()),2&t){const e=J(),s=wn(10);Q(1),q("ngTemplateOutlet",s)("ngTemplateOutletContext",sn(4,rE,e.processedData,ut(2,uB,e.columns)))}}function hB(t,n){1&t&&nt(0)}function pB(t,n){1&t&&nt(0)}function fB(t,n){if(1&t&&pt(0,"tbody",31),2&t){const e=J().options,s=J();q("value",s.frozenValue)("frozenRows",!0)("pTableBody",e.columns)("pTableBodyTemplate",s.frozenBodyTemplate)("frozen",!0)}}function gB(t,n){if(1&t&&pt(0,"tbody",32),2&t){const e=J().options;Rn("height: calc("+e.spacerStyle.height+" - "+e.rows.length*e.itemSize+"px);")}}function mB(t,n){1&t&&nt(0)}const ol=function(t){return{$implicit:t}};function _B(t,n){if(1&t&&(de(0,"tfoot",33,34),te(2,mB,1,0,"ng-container",22),ue()),2&t){const e=J().options,s=J();Q(2),q("ngTemplateOutlet",s.footerGroupedTemplate||s.footerTemplate)("ngTemplateOutletContext",ut(2,ol,e.columns))}}const vB=function(t,n,e){return{"p-datatable-table":!0,"p-datatable-scrollable-table":t,"p-datatable-resizable-table":n,"p-datatable-resizable-table-fit":e}};function yB(t,n){if(1&t&&(de(0,"table",23,24),te(2,hB,1,0,"ng-container",22),de(3,"thead",25,26),te(5,pB,1,0,"ng-container",22),ue(),te(6,fB,1,5,"tbody",27),pt(7,"tbody",28),te(8,gB,1,2,"tbody",29),te(9,_B,3,4,"tfoot",30),ue()),2&t){const e=n.options,s=J();Rn(s.tableStyle),Kt(s.tableStyleClass),q("ngClass",mr(20,vB,s.scrollable,s.resizableColumns,s.resizableColumns&&"fit"===s.columnResizeMode)),jt("id",s.id+"-table"),Q(2),q("ngTemplateOutlet",s.colGroupTemplate)("ngTemplateOutletContext",ut(24,ol,e.columns)),Q(3),q("ngTemplateOutlet",s.headerGroupedTemplate||s.headerTemplate)("ngTemplateOutletContext",ut(26,ol,e.columns)),Q(1),q("ngIf",s.frozenValue||s.frozenBodyTemplate),Q(1),Rn(e.contentStyle),q("ngClass",e.contentStyleClass)("value",s.dataToRender(e.rows))("pTableBody",e.columns)("pTableBodyTemplate",s.bodyTemplate)("scrollerOptions",e),Q(1),q("ngIf",e.spacerStyle),Q(1),q("ngIf",s.footerGroupedTemplate||s.footerTemplate)}}function bB(t,n){if(1&t){const e=ct();de(0,"p-paginator",35),Ae("onPageChange",function(o){return pe(e),fe(J().onPageChange(o))}),ue()}if(2&t){const e=J();q("rows",e.rows)("first",e.first)("totalRecords",e.totalRecords)("pageLinkSize",e.pageLinks)("alwaysShow",e.alwaysShowPaginator)("rowsPerPageOptions",e.rowsPerPageOptions)("templateLeft",e.paginatorLeftTemplate)("templateRight",e.paginatorRightTemplate)("dropdownAppendTo",e.paginatorDropdownAppendTo)("dropdownScrollHeight",e.paginatorDropdownScrollHeight)("currentPageReportTemplate",e.currentPageReportTemplate)("showFirstLastIcon",e.showFirstLastIcon)("dropdownItemTemplate",e.paginatorDropdownItemTemplate)("showCurrentPageReport",e.showCurrentPageReport)("showJumpToPageDropdown",e.showJumpToPageDropdown)("showJumpToPageInput",e.showJumpToPageInput)("showPageLinks",e.showPageLinks)}}function CB(t,n){1&t&&nt(0)}function wB(t,n){if(1&t&&(de(0,"div",36),te(1,CB,1,0,"ng-container",17),ue()),2&t){const e=J();Q(1),q("ngTemplateOutlet",e.summaryTemplate)}}function EB(t,n){1&t&&pt(0,"div",37,38)}function SB(t,n){1&t&&pt(0,"span",39,40)}function xB(t,n){1&t&&pt(0,"span",41,42)}const TB=function(t,n,e){return{"p-datatable p-component":!0,"p-datatable-hoverable-rows":t,"p-datatable-scrollable":n,"p-datatable-flex-scrollable":e}},DB=function(t){return{maxHeight:t}},PB=["pTableBody",""];function MB(t,n){1&t&&nt(0)}const dg=function(t,n,e,s,o){return{$implicit:t,rowIndex:n,columns:e,editing:s,frozen:o}};function OB(t,n){if(1&t&&(at(0,3),te(1,MB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.dt.groupHeaderTemplate)("ngTemplateOutletContext",gc(2,dg,s,d.getRowIndex(o),d.columns,"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen))}}function IB(t,n){1&t&&nt(0)}function AB(t,n){if(1&t&&(at(0),te(1,IB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",s?d.template:d.dt.loadingBodyTemplate)("ngTemplateOutletContext",gc(2,dg,s,d.getRowIndex(o),d.columns,"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen))}}function RB(t,n){1&t&&nt(0)}const NB=function(t,n,e,s,o,d,C){return{$implicit:t,rowIndex:n,columns:e,editing:s,frozen:o,rowgroup:d,rowspan:C}};function kB(t,n){if(1&t&&(at(0),te(1,RB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",s?d.template:d.dt.loadingBodyTemplate)("ngTemplateOutletContext",function t1(t,n,e,s,o,d,C,P,R,k){const F=Hn()+t,H=we();let Y=vi(H,F,e,s,o,d);return oc(H,F+4,C,P,R)||Y?Wi(H,F+7,k?n.call(k,e,s,o,d,C,P,R):n(e,s,o,d,C,P,R)):ca(H,F+7)}(2,NB,s,d.getRowIndex(o),d.columns,"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen,d.shouldRenderRowspan(d.value,s,o),d.calculateRowGroupSize(d.value,s,o)))}}function LB(t,n){1&t&&nt(0)}function FB(t,n){if(1&t&&(at(0,3),te(1,LB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.dt.groupFooterTemplate)("ngTemplateOutletContext",gc(2,dg,s,d.getRowIndex(o),d.columns,"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen))}}function BB(t,n){if(1&t&&(te(0,OB,2,8,"ng-container",2),te(1,AB,2,8,"ng-container",0),te(2,kB,2,10,"ng-container",0),te(3,FB,2,8,"ng-container",2)),2&t){const e=n.$implicit,s=n.index,o=J(2);q("ngIf",o.dt.groupHeaderTemplate&&!o.dt.virtualScroll&&"subheader"===o.dt.rowGroupMode&&o.shouldRenderRowGroupHeader(o.value,e,s)),Q(1),q("ngIf","rowspan"!==o.dt.rowGroupMode),Q(1),q("ngIf","rowspan"===o.dt.rowGroupMode),Q(1),q("ngIf",o.dt.groupFooterTemplate&&!o.dt.virtualScroll&&"subheader"===o.dt.rowGroupMode&&o.shouldRenderRowGroupFooter(o.value,e,s))}}function VB(t,n){if(1&t&&(at(0),te(1,BB,4,4,"ng-template",1),lt()),2&t){const e=J();Q(1),q("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function jB(t,n){1&t&&nt(0)}const Au=function(t,n,e,s,o,d){return{$implicit:t,rowIndex:n,columns:e,expanded:s,editing:o,frozen:d}};function HB(t,n){if(1&t&&(at(0),te(1,jB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.template)("ngTemplateOutletContext",oo(2,Au,s,d.getRowIndex(o),d.columns,d.dt.isRowExpanded(s),"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen))}}function UB(t,n){1&t&&nt(0)}function zB(t,n){if(1&t&&(at(0,3),te(1,UB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.dt.groupHeaderTemplate)("ngTemplateOutletContext",oo(2,Au,s,d.getRowIndex(o),d.columns,d.dt.isRowExpanded(s),"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen))}}function YB(t,n){1&t&&nt(0)}function GB(t,n){1&t&&nt(0)}function $B(t,n){if(1&t&&(at(0,3),te(1,GB,1,0,"ng-container",4),lt()),2&t){const e=J(2),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.dt.groupFooterTemplate)("ngTemplateOutletContext",oo(2,Au,s,d.getRowIndex(o),d.columns,d.dt.isRowExpanded(s),"row"===d.dt.editMode&&d.dt.isRowEditing(s),d.frozen))}}const sE=function(t,n,e,s){return{$implicit:t,rowIndex:n,columns:e,frozen:s}};function XB(t,n){if(1&t&&(at(0),te(1,YB,1,0,"ng-container",4),te(2,$B,2,9,"ng-container",2),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.dt.expandedRowTemplate)("ngTemplateOutletContext",va(3,sE,s,d.getRowIndex(o),d.columns,d.frozen)),Q(1),q("ngIf",d.dt.groupFooterTemplate&&"subheader"===d.dt.rowGroupMode&&d.shouldRenderRowGroupFooter(d.value,s,d.getRowIndex(o)))}}function JB(t,n){if(1&t&&(te(0,HB,2,9,"ng-container",0),te(1,zB,2,9,"ng-container",2),te(2,XB,3,8,"ng-container",0)),2&t){const e=n.$implicit,s=n.index,o=J(2);q("ngIf",!o.dt.groupHeaderTemplate),Q(1),q("ngIf",o.dt.groupHeaderTemplate&&"subheader"===o.dt.rowGroupMode&&o.shouldRenderRowGroupHeader(o.value,e,o.getRowIndex(s))),Q(1),q("ngIf",o.dt.isRowExpanded(e))}}function WB(t,n){if(1&t&&(at(0),te(1,JB,3,3,"ng-template",1),lt()),2&t){const e=J();Q(1),q("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function qB(t,n){1&t&&nt(0)}function KB(t,n){1&t&&nt(0)}function ZB(t,n){if(1&t&&(at(0),te(1,KB,1,0,"ng-container",4),lt()),2&t){const e=J(),s=e.$implicit,o=e.index,d=J(2);Q(1),q("ngTemplateOutlet",d.dt.frozenExpandedRowTemplate)("ngTemplateOutletContext",va(2,sE,s,d.getRowIndex(o),d.columns,d.frozen))}}function QB(t,n){if(1&t&&(te(0,qB,1,0,"ng-container",4),te(1,ZB,2,7,"ng-container",0)),2&t){const e=n.$implicit,s=n.index,o=J(2);q("ngTemplateOutlet",o.template)("ngTemplateOutletContext",oo(3,Au,e,o.getRowIndex(s),o.columns,o.dt.isRowExpanded(e),"row"===o.dt.editMode&&o.dt.isRowEditing(e),o.frozen)),Q(1),q("ngIf",o.dt.isRowExpanded(e))}}function e6(t,n){if(1&t&&(at(0),te(1,QB,2,10,"ng-template",1),lt()),2&t){const e=J();Q(1),q("ngForOf",e.value)("ngForTrackBy",e.dt.rowTrackBy)}}function t6(t,n){1&t&&nt(0)}const oE=function(t,n){return{$implicit:t,frozen:n}};function n6(t,n){if(1&t&&(at(0),te(1,t6,1,0,"ng-container",4),lt()),2&t){const e=J();Q(1),q("ngTemplateOutlet",e.dt.loadingBodyTemplate)("ngTemplateOutletContext",sn(2,oE,e.columns,e.frozen))}}function r6(t,n){1&t&&nt(0)}function s6(t,n){if(1&t&&(at(0),te(1,r6,1,0,"ng-container",4),lt()),2&t){const e=J();Q(1),q("ngTemplateOutlet",e.dt.emptyMessageTemplate)("ngTemplateOutletContext",sn(2,oE,e.columns,e.frozen))}}let hg=(()=>{class t{constructor(){this.sortSource=new Se,this.selectionSource=new Se,this.contextMenuSource=new Se,this.valueSource=new Se,this.totalRecordsSource=new Se,this.columnsSource=new Se,this.resetSource=new Se,this.sortSource$=this.sortSource.asObservable(),this.selectionSource$=this.selectionSource.asObservable(),this.contextMenuSource$=this.contextMenuSource.asObservable(),this.valueSource$=this.valueSource.asObservable(),this.totalRecordsSource$=this.totalRecordsSource.asObservable(),this.columnsSource$=this.columnsSource.asObservable(),this.resetSource$=this.resetSource.asObservable()}onSort(e){this.sortSource.next(e)}onSelectionChange(){this.selectionSource.next(null)}onResetChange(){this.resetSource.next(null)}onContextMenu(e){this.contextMenuSource.next(e)}onValueChange(e){this.valueSource.next(e)}onTotalRecordsChange(e){this.totalRecordsSource.next(e)}onColumnsChange(e){this.columnsSource.next(e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=We({token:t,factory:t.\u0275fac}),t})(),aE=(()=>{class t{constructor(e,s,o,d,C,P){this.el=e,this.zone=s,this.tableService=o,this.cd=d,this.filterService=C,this.overlayService=P,this.pageLinks=5,this.alwaysShowPaginator=!0,this.paginatorPosition="bottom",this.paginatorDropdownScrollHeight="200px",this.currentPageReportTemplate="{currentPage} of {totalPages}",this.showFirstLastIcon=!0,this.showPageLinks=!0,this.defaultSortOrder=1,this.sortMode="single",this.resetPageOnSort=!0,this.selectAllChange=new Te,this.selectionChange=new Te,this.contextMenuSelectionChange=new Te,this.contextMenuSelectionMode="separate",this.rowTrackBy=(R,k)=>k,this.lazy=!1,this.lazyLoadOnInit=!0,this.compareSelectionBy="deepEquals",this.csvSeparator=",",this.exportFilename="download",this.filters={},this.filterDelay=300,this.expandedRowKeys={},this.editingRowKeys={},this.rowExpandMode="multiple",this.scrollDirection="vertical",this.virtualScrollDelay=250,this.columnResizeMode="fit",this.loadingIcon="pi pi-spinner",this.showLoader=!0,this.showInitialSortBadge=!0,this.stateStorage="session",this.editMode="cell",this.groupRowsByOrder=1,this.responsiveLayout="scroll",this.breakpoint="960px",this.onRowSelect=new Te,this.onRowUnselect=new Te,this.onPage=new Te,this.onSort=new Te,this.onFilter=new Te,this.onLazyLoad=new Te,this.onRowExpand=new Te,this.onRowCollapse=new Te,this.onContextMenuSelect=new Te,this.onColResize=new Te,this.onColReorder=new Te,this.onRowReorder=new Te,this.onEditInit=new Te,this.onEditComplete=new Te,this.onEditCancel=new Te,this.onHeaderCheckboxToggle=new Te,this.sortFunction=new Te,this.firstChange=new Te,this.rowsChange=new Te,this.onStateSave=new Te,this.onStateRestore=new Te,this._virtualRowHeight=28,this._value=[],this._totalRecords=0,this._first=0,this.selectionKeys={},this._sortOrder=1,this._selectAll=null,this.columnResizing=!1,this.rowGroupHeaderStyleObject={},this.id=Pf()}get responsive(){return this._responsive}set responsive(e){this._responsive=e,console.warn("responsive propery is deprecated as table is always responsive with scrollable behavior.")}get virtualRowHeight(){return this._virtualRowHeight}set virtualRowHeight(e){this._virtualRowHeight=e,console.warn("The virtualRowHeight property is deprecated, use virtualScrollItemSize property instead.")}ngOnInit(){this.lazy&&this.lazyLoadOnInit&&(this.virtualScroll||this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.restoringFilter&&(this.restoringFilter=!1)),"stack"===this.responsiveLayout&&!this.scrollable&&this.createResponsiveStyle(),this.initialized=!0}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"caption":this.captionTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"headergrouped":this.headerGroupedTemplate=e.template;break;case"body":this.bodyTemplate=e.template;break;case"loadingbody":this.loadingBodyTemplate=e.template;break;case"footer":this.footerTemplate=e.template;break;case"footergrouped":this.footerGroupedTemplate=e.template;break;case"summary":this.summaryTemplate=e.template;break;case"colgroup":this.colGroupTemplate=e.template;break;case"rowexpansion":this.expandedRowTemplate=e.template;break;case"groupheader":this.groupHeaderTemplate=e.template;break;case"rowspan":this.rowspanTemplate=e.template;break;case"groupfooter":this.groupFooterTemplate=e.template;break;case"frozenrows":this.frozenRowsTemplate=e.template;break;case"frozenheader":this.frozenHeaderTemplate=e.template;break;case"frozenbody":this.frozenBodyTemplate=e.template;break;case"frozenfooter":this.frozenFooterTemplate=e.template;break;case"frozencolgroup":this.frozenColGroupTemplate=e.template;break;case"frozenrowexpansion":this.frozenExpandedRowTemplate=e.template;break;case"emptymessage":this.emptyMessageTemplate=e.template;break;case"paginatorleft":this.paginatorLeftTemplate=e.template;break;case"paginatorright":this.paginatorRightTemplate=e.template;break;case"paginatordropdownitem":this.paginatorDropdownItemTemplate=e.template}})}ngAfterViewInit(){this.isStateful()&&this.resizableColumns&&this.restoreColumnWidths()}ngOnChanges(e){e.value&&(this.isStateful()&&!this.stateRestored&&this.restoreState(),this._value=e.value.currentValue,this.lazy||(this.totalRecords=this._value?this._value.length:0,"single"==this.sortMode&&(this.sortField||this.groupRowsBy)?this.sortSingle():"multiple"==this.sortMode&&(this.multiSortMeta||this.groupRowsBy)?this.sortMultiple():this.hasFilter()&&this._filter()),this.tableService.onValueChange(e.value.currentValue)),e.columns&&(this._columns=e.columns.currentValue,this.tableService.onColumnsChange(e.columns.currentValue),this._columns&&this.isStateful()&&this.reorderableColumns&&!this.columnOrderStateRestored&&this.restoreColumnOrder()),e.sortField&&(this._sortField=e.sortField.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsBy&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.sortOrder&&(this._sortOrder=e.sortOrder.currentValue,(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle()),e.groupRowsByOrder&&(!this.lazy||this.initialized)&&"single"===this.sortMode&&this.sortSingle(),e.multiSortMeta&&(this._multiSortMeta=e.multiSortMeta.currentValue,"multiple"===this.sortMode&&(this.initialized||!this.lazy&&!this.virtualScroll)&&this.sortMultiple()),e.selection&&(this._selection=e.selection.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange()),this.preventSelectionSetterPropagation=!1),e.selectAll&&(this._selectAll=e.selectAll.currentValue,this.preventSelectionSetterPropagation||(this.updateSelectionKeys(),this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()),this.preventSelectionSetterPropagation=!1)}get value(){return this._value}set value(e){this._value=e}get columns(){return this._columns}set columns(e){this._columns=e}get first(){return this._first}set first(e){this._first=e}get rows(){return this._rows}set rows(e){this._rows=e}get totalRecords(){return this._totalRecords}set totalRecords(e){this._totalRecords=e,this.tableService.onTotalRecordsChange(this._totalRecords)}get sortField(){return this._sortField}set sortField(e){this._sortField=e}get sortOrder(){return this._sortOrder}set sortOrder(e){this._sortOrder=e}get multiSortMeta(){return this._multiSortMeta}set multiSortMeta(e){this._multiSortMeta=e}get selection(){return this._selection}set selection(e){this._selection=e}get selectAll(){return this._selection}set selectAll(e){this._selection=e}get processedData(){return this.filteredValue||this.value||[]}dataToRender(e){const s=e||this.processedData;if(s&&this.paginator){const o=this.lazy?0:this.first;return s.slice(o,o+this.rows)}return s}updateSelectionKeys(){if(this.dataKey&&this._selection)if(this.selectionKeys={},Array.isArray(this._selection))for(let e of this._selection)this.selectionKeys[String(Le.resolveFieldData(e,this.dataKey))]=1;else this.selectionKeys[String(Le.resolveFieldData(this._selection,this.dataKey))]=1}onPageChange(e){this.first=e.first,this.rows=e.rows,this.onPage.emit({first:this.first,rows:this.rows}),this.lazy&&this.onLazyLoad.emit(this.createLazyLoadMetadata()),this.firstChange.emit(this.first),this.rowsChange.emit(this.rows),this.tableService.onValueChange(this.value),this.isStateful()&&this.saveState(),this.anchorRowIndex=null,this.scrollable&&this.resetScrollTop()}sort(e){let s=e.originalEvent;if("single"===this.sortMode&&(this._sortOrder=this.sortField===e.field?-1*this.sortOrder:this.defaultSortOrder,this._sortField=e.field,this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop()),this.sortSingle()),"multiple"===this.sortMode){let o=s.metaKey||s.ctrlKey,d=this.getSortMeta(e.field);d?o?d.order=-1*d.order:(this._multiSortMeta=[{field:e.field,order:-1*d.order}],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first),this.scrollable&&this.resetScrollTop())):((!o||!this.multiSortMeta)&&(this._multiSortMeta=[],this.resetPageOnSort&&(this._first=0,this.firstChange.emit(this._first))),this._multiSortMeta.push({field:e.field,order:this.defaultSortOrder})),this.sortMultiple()}this.isStateful()&&this.saveState(),this.anchorRowIndex=null}sortSingle(){let e=this.sortField||this.groupRowsBy,s=this.sortField?this.sortOrder:this.groupRowsByOrder;if(this.groupRowsBy&&this.sortField&&this.groupRowsBy!==this.sortField)return this._multiSortMeta=[this.getGroupRowsMeta(),{field:this.sortField,order:this.sortOrder}],void this.sortMultiple();if(e&&s){this.restoringSort&&(this.restoringSort=!1),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,field:e,order:s}):(this.value.sort((d,C)=>{let P=Le.resolveFieldData(d,e),R=Le.resolveFieldData(C,e),k=null;return k=null==P&&null!=R?-1:null!=P&&null==R?1:null==P&&null==R?0:"string"==typeof P&&"string"==typeof R?P.localeCompare(R):P<R?-1:P>R?1:0,s*k}),this._value=[...this.value]),this.hasFilter()&&this._filter());let o={field:e,order:s};this.onSort.emit(o),this.tableService.onSort(o)}}sortMultiple(){this.groupRowsBy&&(this._multiSortMeta?this.multiSortMeta[0].field!==this.groupRowsBy&&(this._multiSortMeta=[this.getGroupRowsMeta(),...this._multiSortMeta]):this._multiSortMeta=[this.getGroupRowsMeta()]),this.multiSortMeta&&(this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.value&&(this.customSort?this.sortFunction.emit({data:this.value,mode:this.sortMode,multiSortMeta:this.multiSortMeta}):(this.value.sort((e,s)=>this.multisortField(e,s,this.multiSortMeta,0)),this._value=[...this.value]),this.hasFilter()&&this._filter()),this.onSort.emit({multisortmeta:this.multiSortMeta}),this.tableService.onSort(this.multiSortMeta))}multisortField(e,s,o,d){const C=Le.resolveFieldData(e,o[d].field),P=Le.resolveFieldData(s,o[d].field);return 0===Le.compare(C,P,this.filterLocale)?o.length-1>d?this.multisortField(e,s,o,d+1):0:this.compareValuesOnSort(C,P,o[d].order)}compareValuesOnSort(e,s,o){return Le.sort(e,s,o,this.filterLocale,this.sortOrder)}getSortMeta(e){if(this.multiSortMeta&&this.multiSortMeta.length)for(let s=0;s<this.multiSortMeta.length;s++)if(this.multiSortMeta[s].field===e)return this.multiSortMeta[s];return null}isSorted(e){if("single"===this.sortMode)return this.sortField&&this.sortField===e;if("multiple"===this.sortMode){let s=!1;if(this.multiSortMeta)for(let o=0;o<this.multiSortMeta.length;o++)if(this.multiSortMeta[o].field==e){s=!0;break}return s}}handleRowClick(e){let s=e.originalEvent.target,o=s.nodeName,d=s.parentElement&&s.parentElement.nodeName;if("INPUT"!=o&&"BUTTON"!=o&&"A"!=o&&"INPUT"!=d&&"BUTTON"!=d&&"A"!=d&&!oe.hasClass(e.originalEvent.target,"p-clickable")){if(this.selectionMode){let C=e.rowData,P=e.rowIndex;if(this.preventSelectionSetterPropagation=!0,this.isMultipleSelectionMode()&&e.originalEvent.shiftKey&&null!=this.anchorRowIndex)oe.clearSelection(),null!=this.rangeRowIndex&&this.clearSelectionRange(e.originalEvent),this.rangeRowIndex=P,this.selectRange(e.originalEvent,P);else{let R=this.isSelected(C);if(!R&&!this.isRowSelectable(C,P))return;let k=!this.rowTouched&&this.metaKeySelection,F=this.dataKey?String(Le.resolveFieldData(C,this.dataKey)):null;if(this.anchorRowIndex=P,this.rangeRowIndex=P,k){let H=e.originalEvent.metaKey||e.originalEvent.ctrlKey;if(R&&H){if(this.isSingleSelectionMode())this._selection=null,this.selectionKeys={},this.selectionChange.emit(null);else{let Y=this.findIndexInSelection(C);this._selection=this.selection.filter((G,K)=>K!=Y),this.selectionChange.emit(this.selection),F&&delete this.selectionKeys[F]}this.onRowUnselect.emit({originalEvent:e.originalEvent,data:C,type:"row"})}else this.isSingleSelectionMode()?(this._selection=C,this.selectionChange.emit(C),F&&(this.selectionKeys={},this.selectionKeys[F]=1)):this.isMultipleSelectionMode()&&(H?this._selection=this.selection||[]:(this._selection=[],this.selectionKeys={}),this._selection=[...this.selection,C],this.selectionChange.emit(this.selection),F&&(this.selectionKeys[F]=1)),this.onRowSelect.emit({originalEvent:e.originalEvent,data:C,type:"row",index:P})}else if("single"===this.selectionMode)R?(this._selection=null,this.selectionKeys={},this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:C,type:"row",index:P})):(this._selection=C,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:C,type:"row",index:P}),F&&(this.selectionKeys={},this.selectionKeys[F]=1));else if("multiple"===this.selectionMode)if(R){let H=this.findIndexInSelection(C);this._selection=this.selection.filter((Y,G)=>G!=H),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,data:C,type:"row",index:P}),F&&delete this.selectionKeys[F]}else this._selection=this.selection?[...this.selection,C]:[C],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,data:C,type:"row",index:P}),F&&(this.selectionKeys[F]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}this.rowTouched=!1}}handleRowTouchEnd(e){this.rowTouched=!0}handleRowRightClick(e){if(this.contextMenu){const s=e.rowData,o=e.rowIndex;if("separate"===this.contextMenuSelectionMode)this.contextMenuSelection=s,this.contextMenuSelectionChange.emit(s),this.onContextMenuSelect.emit({originalEvent:e.originalEvent,data:s,index:e.rowIndex}),this.contextMenu.show(e.originalEvent),this.tableService.onContextMenu(s);else if("joint"===this.contextMenuSelectionMode){this.preventSelectionSetterPropagation=!0;let d=this.isSelected(s),C=this.dataKey?String(Le.resolveFieldData(s,this.dataKey)):null;if(!d){if(!this.isRowSelectable(s,o))return;this.isSingleSelectionMode()?(this.selection=s,this.selectionChange.emit(s),C&&(this.selectionKeys={},this.selectionKeys[C]=1)):this.isMultipleSelectionMode()&&(this._selection=this.selection?[...this.selection,s]:[s],this.selectionChange.emit(this.selection),C&&(this.selectionKeys[C]=1))}this.tableService.onSelectionChange(),this.contextMenu.show(e.originalEvent),this.onContextMenuSelect.emit({originalEvent:e,data:s,index:e.rowIndex})}}}selectRange(e,s){let o,d;this.anchorRowIndex>s?(o=s,d=this.anchorRowIndex):this.anchorRowIndex<s?(o=this.anchorRowIndex,d=s):(o=s,d=s),this.lazy&&this.paginator&&(o-=this.first,d-=this.first);let C=[];for(let P=o;P<=d;P++){let R=this.filteredValue?this.filteredValue[P]:this.value[P];if(!this.isSelected(R)){if(!this.isRowSelectable(R,s))continue;C.push(R),this._selection=[...this.selection,R];let k=this.dataKey?String(Le.resolveFieldData(R,this.dataKey)):null;k&&(this.selectionKeys[k]=1)}}this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e,data:C,type:"row"})}clearSelectionRange(e){let s,o;this.rangeRowIndex>this.anchorRowIndex?(s=this.anchorRowIndex,o=this.rangeRowIndex):this.rangeRowIndex<this.anchorRowIndex?(s=this.rangeRowIndex,o=this.anchorRowIndex):(s=this.rangeRowIndex,o=this.rangeRowIndex);for(let d=s;d<=o;d++){let C=this.value[d],P=this.findIndexInSelection(C);this._selection=this.selection.filter((k,F)=>F!=P);let R=this.dataKey?String(Le.resolveFieldData(C,this.dataKey)):null;R&&delete this.selectionKeys[R],this.onRowUnselect.emit({originalEvent:e,data:C,type:"row"})}}isSelected(e){return!(!e||!this.selection)&&(this.dataKey?void 0!==this.selectionKeys[Le.resolveFieldData(e,this.dataKey)]:this.selection instanceof Array?this.findIndexInSelection(e)>-1:this.equals(e,this.selection))}findIndexInSelection(e){let s=-1;if(this.selection&&this.selection.length)for(let o=0;o<this.selection.length;o++)if(this.equals(e,this.selection[o])){s=o;break}return s}isRowSelectable(e,s){return!(this.rowSelectable&&!this.rowSelectable({data:e,index:s}))}toggleRowWithRadio(e,s){if(this.preventSelectionSetterPropagation=!0,this.selection!=s){if(!this.isRowSelectable(s,e.rowIndex))return;this._selection=s,this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:s,type:"radiobutton"}),this.dataKey&&(this.selectionKeys={},this.selectionKeys[String(Le.resolveFieldData(s,this.dataKey))]=1)}else this._selection=null,this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:s,type:"radiobutton"});this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowWithCheckbox(e,s){this.selection=this.selection||[];let o=this.isSelected(s),d=this.dataKey?String(Le.resolveFieldData(s,this.dataKey)):null;if(this.preventSelectionSetterPropagation=!0,o){let C=this.findIndexInSelection(s);this._selection=this.selection.filter((P,R)=>R!=C),this.selectionChange.emit(this.selection),this.onRowUnselect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:s,type:"checkbox"}),d&&delete this.selectionKeys[d]}else{if(!this.isRowSelectable(s,e.rowIndex))return;this._selection=this.selection?[...this.selection,s]:[s],this.selectionChange.emit(this.selection),this.onRowSelect.emit({originalEvent:e.originalEvent,index:e.rowIndex,data:s,type:"checkbox"}),d&&(this.selectionKeys[d]=1)}this.tableService.onSelectionChange(),this.isStateful()&&this.saveState()}toggleRowsWithCheckbox(e,s){if(null!==this._selectAll)this.selectAllChange.emit({originalEvent:e,checked:s});else{const o=this.selectionPageOnly?this.dataToRender(this.processedData):this.processedData;let d=this.selectionPageOnly&&this._selection?this._selection.filter(C=>!o.some(P=>this.equals(C,P))):[];s&&(d=this.frozenValue?[...d,...this.frozenValue,...o]:[...d,...o],d=this.rowSelectable?d.filter((C,P)=>this.rowSelectable({data:C,index:P})):d),this._selection=d,this.preventSelectionSetterPropagation=!0,this.updateSelectionKeys(),this.selectionChange.emit(this._selection),this.tableService.onSelectionChange(),this.onHeaderCheckboxToggle.emit({originalEvent:e,checked:s}),this.isStateful()&&this.saveState()}}equals(e,s){return"equals"===this.compareSelectionBy?e===s:Le.equals(e,s,this.dataKey)}filter(e,s,o){this.filterTimeout&&clearTimeout(this.filterTimeout),this.isFilterBlank(e)?this.filters[s]&&delete this.filters[s]:this.filters[s]={value:e,matchMode:o},this.filterTimeout=setTimeout(()=>{this._filter(),this.filterTimeout=null},this.filterDelay),this.anchorRowIndex=null}filterGlobal(e,s){this.filter(e,"global",s)}isFilterBlank(e){return null==e||"string"==typeof e&&0==e.trim().length||e instanceof Array&&0==e.length}_filter(){if(this.restoringFilter||(this.first=0,this.firstChange.emit(this.first)),this.lazy)this.onLazyLoad.emit(this.createLazyLoadMetadata());else{if(!this.value)return;if(this.hasFilter()){let e;if(this.filters.global){if(!this.columns&&!this.globalFilterFields)throw new Error("Global filtering requires dynamic columns or globalFilterFields to be defined.");e=this.globalFilterFields||this.columns}this.filteredValue=[];for(let s=0;s<this.value.length;s++){let P,o=!0,d=!1,C=!1;for(let R in this.filters)if(this.filters.hasOwnProperty(R)&&"global"!==R){C=!0;let k=R,F=this.filters[k];if(Array.isArray(F)){for(let H of F)if(o=this.executeLocalFilter(k,this.value[s],H),H.operator===bC.OR&&o||H.operator===bC.AND&&!o)break}else o=this.executeLocalFilter(k,this.value[s],F);if(!o)break}if(this.filters.global&&!d&&e)for(let R=0;R<e.length&&(d=this.filterService.filters[this.filters.global.matchMode](Le.resolveFieldData(this.value[s],e[R].field||e[R]),this.filters.global.value,this.filterLocale),!d);R++);P=this.filters.global?C?C&&o&&d:d:C&&o,P&&this.filteredValue.push(this.value[s])}this.filteredValue.length===this.value.length&&(this.filteredValue=null),this.paginator&&(this.totalRecords=this.filteredValue?this.filteredValue.length:this.value?this.value.length:0)}else this.filteredValue=null,this.paginator&&(this.totalRecords=this.value?this.value.length:0)}this.onFilter.emit({filters:this.filters,filteredValue:this.filteredValue||this.value}),this.tableService.onValueChange(this.value),this.isStateful()&&!this.restoringFilter&&this.saveState(),this.restoringFilter&&(this.restoringFilter=!1),this.cd.markForCheck(),this.scrollable&&this.resetScrollTop()}executeLocalFilter(e,s,o){let d=o.value,C=o.matchMode||xn.STARTS_WITH,P=Le.resolveFieldData(s,e);return(0,this.filterService.filters[C])(P,d,this.filterLocale)}hasFilter(){let e=!0;for(let s in this.filters)if(this.filters.hasOwnProperty(s)){e=!1;break}return!e}createLazyLoadMetadata(){return{first:this.first,rows:this.rows,sortField:this.sortField,sortOrder:this.sortOrder,filters:this.filters,globalFilter:this.filters&&this.filters.global?this.filters.global.value:null,multiSortMeta:this.multiSortMeta,forceUpdate:()=>this.cd.detectChanges()}}clear(){this._sortField=null,this._sortOrder=this.defaultSortOrder,this._multiSortMeta=null,this.tableService.onSort(null),this.filters.global&&(this.filters.global.value=null),this.filteredValue=null,this.tableService.onResetChange(),this.first=0,this.firstChange.emit(this.first),this.lazy?this.onLazyLoad.emit(this.createLazyLoadMetadata()):this.totalRecords=this._value?this._value.length:0}reset(){this.clear()}getExportHeader(e){return e[this.exportHeader]||e.header||e.field}exportCSV(e){let s,o="",d=this.columns;e&&e.selectionOnly?s=this.selection||[]:(s=this.filteredValue||this.value,this.frozenValue&&(s=s?[...this.frozenValue,...s]:this.frozenValue));for(let R=0;R<d.length;R++){let k=d[R];!1!==k.exportable&&k.field&&(o+='"'+this.getExportHeader(k)+'"',R<d.length-1&&(o+=this.csvSeparator))}s.forEach((R,k)=>{o+="\n";for(let F=0;F<d.length;F++){let H=d[F];if(!1!==H.exportable&&H.field){let Y=Le.resolveFieldData(R,H.field);Y=null!=Y?this.exportFunction?this.exportFunction({data:Y,field:H.field}):String(Y).replace(/"/g,'""'):"",o+='"'+Y+'"',F<d.length-1&&(o+=this.csvSeparator)}}});let C=new Blob([o],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a");P.style.display="none",document.body.appendChild(P),void 0!==P.download?(P.setAttribute("href",URL.createObjectURL(C)),P.setAttribute("download",this.exportFilename+".csv"),P.click()):(o="data:text/csv;charset=utf-8,"+o,window.open(encodeURI(o))),document.body.removeChild(P)}onLazyItemLoad(e){this.onLazyLoad.emit({...this.createLazyLoadMetadata(),...e,rows:e.last-e.first})}resetScrollTop(){this.virtualScroll?this.scrollToVirtualIndex(0):this.scrollTo({top:0})}scrollToVirtualIndex(e){this.virtualScroll&&this.scroller.scrollToIndex(e)}scrollTo(e){this.virtualScroll?this.scroller.scrollTo(e):this.wrapperViewChild&&this.wrapperViewChild.nativeElement&&(this.wrapperViewChild.nativeElement.scrollTo?this.wrapperViewChild.nativeElement.scrollTo(e):(this.wrapperViewChild.nativeElement.scrollLeft=e.left,this.wrapperViewChild.nativeElement.scrollTop=e.top))}updateEditingCell(e,s,o,d){this.editingCell=e,this.editingCellData=s,this.editingCellField=o,this.editingCellRowIndex=d,this.bindDocumentEditListener()}isEditingCellValid(){return this.editingCell&&0===oe.find(this.editingCell,".ng-invalid.ng-dirty").length}bindDocumentEditListener(){this.documentEditListener||(this.documentEditListener=e=>{this.editingCell&&!this.selfClick&&this.isEditingCellValid()&&(oe.removeClass(this.editingCell,"p-cell-editing"),this.editingCell=null,this.onEditComplete.emit({field:this.editingCellField,data:this.editingCellData,originalEvent:e,index:this.editingCellRowIndex}),this.editingCellField=null,this.editingCellData=null,this.editingCellRowIndex=null,this.unbindDocumentEditListener(),this.cd.markForCheck(),this.overlaySubscription&&this.overlaySubscription.unsubscribe()),this.selfClick=!1},document.addEventListener("click",this.documentEditListener))}unbindDocumentEditListener(){this.documentEditListener&&(document.removeEventListener("click",this.documentEditListener),this.documentEditListener=null)}initRowEdit(e){let s=String(Le.resolveFieldData(e,this.dataKey));this.editingRowKeys[s]=!0}saveRowEdit(e,s){if(0===oe.find(s,".ng-invalid.ng-dirty").length){let o=String(Le.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[o]}}cancelRowEdit(e){let s=String(Le.resolveFieldData(e,this.dataKey));delete this.editingRowKeys[s]}toggleRow(e,s){if(!this.dataKey)throw new Error("dataKey must be defined to use row expansion");let o=String(Le.resolveFieldData(e,this.dataKey));null!=this.expandedRowKeys[o]?(delete this.expandedRowKeys[o],this.onRowCollapse.emit({originalEvent:s,data:e})):("single"===this.rowExpandMode&&(this.expandedRowKeys={}),this.expandedRowKeys[o]=!0,this.onRowExpand.emit({originalEvent:s,data:e})),s&&s.preventDefault(),this.isStateful()&&this.saveState()}isRowExpanded(e){return!0===this.expandedRowKeys[String(Le.resolveFieldData(e,this.dataKey))]}isRowEditing(e){return!0===this.editingRowKeys[String(Le.resolveFieldData(e,this.dataKey))]}isSingleSelectionMode(){return"single"===this.selectionMode}isMultipleSelectionMode(){return"multiple"===this.selectionMode}onColumnResizeBegin(e){let s=oe.getOffset(this.containerViewChild.nativeElement).left;this.resizeColumnElement=e.target.parentElement,this.columnResizing=!0,this.lastResizerHelperX=e.pageX-s+this.containerViewChild.nativeElement.scrollLeft,this.onColumnResize(e),e.preventDefault()}onColumnResize(e){let s=oe.getOffset(this.containerViewChild.nativeElement).left;oe.addClass(this.containerViewChild.nativeElement,"p-unselectable-text"),this.resizeHelperViewChild.nativeElement.style.height=this.containerViewChild.nativeElement.offsetHeight+"px",this.resizeHelperViewChild.nativeElement.style.top="0px",this.resizeHelperViewChild.nativeElement.style.left=e.pageX-s+this.containerViewChild.nativeElement.scrollLeft+"px",this.resizeHelperViewChild.nativeElement.style.display="block"}onColumnResizeEnd(){let e=this.resizeHelperViewChild.nativeElement.offsetLeft-this.lastResizerHelperX,o=this.resizeColumnElement.offsetWidth+e;if(o>=(this.resizeColumnElement.style.minWidth.replace(/[^\d.]/g,"")||15)){if("fit"===this.columnResizeMode){let P=this.resizeColumnElement.nextElementSibling.offsetWidth-e;o>15&&P>15&&this.resizeTableCells(o,P)}else"expand"===this.columnResizeMode&&(this.setResizeTableWidth(this.tableViewChild.nativeElement.offsetWidth+e+"px"),this.resizeTableCells(o,null));this.onColResize.emit({element:this.resizeColumnElement,delta:e}),this.isStateful()&&this.saveState()}this.resizeHelperViewChild.nativeElement.style.display="none",oe.removeClass(this.containerViewChild.nativeElement,"p-unselectable-text")}resizeTableCells(e,s){let o=oe.index(this.resizeColumnElement),d=[];const C=oe.findSingle(this.containerViewChild.nativeElement,".p-datatable-thead");oe.find(C,"tr > th").forEach(k=>d.push(oe.getOuterWidth(k))),this.destroyStyleElement(),this.createStyleElement();let R="";d.forEach((k,F)=>{let H=F===o?e:s&&F===o+1?s:k;R+=`\n                #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${F+1}),\n                #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${F+1}),\n                #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${F+1}) {\n                    width: ${H}px !important; max-width: ${H}px !important;\n                }\n            `}),this.styleElement.innerHTML=R}onColumnDragStart(e,s){this.reorderIconWidth=oe.getHiddenElementOuterWidth(this.reorderIndicatorUpViewChild.nativeElement),this.reorderIconHeight=oe.getHiddenElementOuterHeight(this.reorderIndicatorDownViewChild.nativeElement),this.draggedColumn=s,e.dataTransfer.setData("text","b")}onColumnDragEnter(e,s){if(this.reorderableColumns&&this.draggedColumn&&s){e.preventDefault();let o=oe.getOffset(this.containerViewChild.nativeElement),d=oe.getOffset(s);if(this.draggedColumn!=s){let C=oe.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),P=oe.indexWithinGroup(s,"preorderablecolumn"),R=d.left-o.left,F=d.left+s.offsetWidth/2;this.reorderIndicatorUpViewChild.nativeElement.style.top=d.top-o.top-(this.reorderIconHeight-1)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.top=d.top-o.top+s.offsetHeight+"px",e.pageX>F?(this.reorderIndicatorUpViewChild.nativeElement.style.left=R+s.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=R+s.offsetWidth-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=1):(this.reorderIndicatorUpViewChild.nativeElement.style.left=R-Math.ceil(this.reorderIconWidth/2)+"px",this.reorderIndicatorDownViewChild.nativeElement.style.left=R-Math.ceil(this.reorderIconWidth/2)+"px",this.dropPosition=-1),P-C==1&&-1===this.dropPosition||P-C==-1&&1===this.dropPosition?(this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none"):(this.reorderIndicatorUpViewChild.nativeElement.style.display="block",this.reorderIndicatorDownViewChild.nativeElement.style.display="block")}else e.dataTransfer.dropEffect="none"}}onColumnDragLeave(e){this.reorderableColumns&&this.draggedColumn&&(e.preventDefault(),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none")}onColumnDrop(e,s){if(e.preventDefault(),this.draggedColumn){let o=oe.indexWithinGroup(this.draggedColumn,"preorderablecolumn"),d=oe.indexWithinGroup(s,"preorderablecolumn"),C=o!=d;C&&(d-o==1&&-1===this.dropPosition||o-d==1&&1===this.dropPosition)&&(C=!1),C&&d<o&&1===this.dropPosition&&(d+=1),C&&d>o&&-1===this.dropPosition&&(d-=1),C&&(Le.reorderArray(this.columns,o,d),this.onColReorder.emit({dragIndex:o,dropIndex:d,columns:this.columns}),this.isStateful()&&this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.saveState()})})),this.reorderIndicatorUpViewChild.nativeElement.style.display="none",this.reorderIndicatorDownViewChild.nativeElement.style.display="none",this.draggedColumn.draggable=!1,this.draggedColumn=null,this.dropPosition=null}}onRowDragStart(e,s){this.rowDragging=!0,this.draggedRowIndex=s,e.dataTransfer.setData("text","b")}onRowDragOver(e,s,o){if(this.rowDragging&&this.draggedRowIndex!==s){let d=oe.getOffset(o).top+oe.getWindowScrollTop(),C=e.pageY,P=d+oe.getOuterHeight(o)/2,R=o.previousElementSibling;C<P?(oe.removeClass(o,"p-datatable-dragpoint-bottom"),this.droppedRowIndex=s,R?oe.addClass(R,"p-datatable-dragpoint-bottom"):oe.addClass(o,"p-datatable-dragpoint-top")):(R?oe.removeClass(R,"p-datatable-dragpoint-bottom"):oe.addClass(o,"p-datatable-dragpoint-top"),this.droppedRowIndex=s+1,oe.addClass(o,"p-datatable-dragpoint-bottom"))}}onRowDragLeave(e,s){let o=s.previousElementSibling;o&&oe.removeClass(o,"p-datatable-dragpoint-bottom"),oe.removeClass(s,"p-datatable-dragpoint-bottom"),oe.removeClass(s,"p-datatable-dragpoint-top")}onRowDragEnd(e){this.rowDragging=!1,this.draggedRowIndex=null,this.droppedRowIndex=null}onRowDrop(e,s){if(null!=this.droppedRowIndex){let o=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:0===this.droppedRowIndex?0:this.droppedRowIndex-1;Le.reorderArray(this.value,this.draggedRowIndex,o),this.virtualScroll&&(this._value=[...this._value]),this.onRowReorder.emit({dragIndex:this.draggedRowIndex,dropIndex:o})}this.onRowDragLeave(e,s),this.onRowDragEnd(e)}isEmpty(){let e=this.filteredValue||this.value;return null==e||0==e.length}getBlockableElement(){return this.el.nativeElement.children[0]}getStorage(){switch(this.stateStorage){case"local":return window.localStorage;case"session":return window.sessionStorage;default:throw new Error(this.stateStorage+' is not a valid value for the state storage, supported values are "local" and "session".')}}isStateful(){return null!=this.stateKey}saveState(){const e=this.getStorage();let s={};this.paginator&&(s.first=this.first,s.rows=this.rows),this.sortField&&(s.sortField=this.sortField,s.sortOrder=this.sortOrder),this.multiSortMeta&&(s.multiSortMeta=this.multiSortMeta),this.hasFilter()&&(s.filters=this.filters),this.resizableColumns&&this.saveColumnWidths(s),this.reorderableColumns&&this.saveColumnOrder(s),this.selection&&(s.selection=this.selection),Object.keys(this.expandedRowKeys).length&&(s.expandedRowKeys=this.expandedRowKeys),e.setItem(this.stateKey,JSON.stringify(s)),this.onStateSave.emit(s)}clearState(){const e=this.getStorage();this.stateKey&&e.removeItem(this.stateKey)}restoreState(){const s=this.getStorage().getItem(this.stateKey),o=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/;if(s){let C=JSON.parse(s,function(C,P){return"string"==typeof P&&o.test(P)?new Date(P):P});this.paginator&&(void 0!==this.first&&(this.first=C.first,this.firstChange.emit(this.first)),void 0!==this.rows&&(this.rows=C.rows,this.rowsChange.emit(this.rows))),C.sortField&&(this.restoringSort=!0,this._sortField=C.sortField,this._sortOrder=C.sortOrder),C.multiSortMeta&&(this.restoringSort=!0,this._multiSortMeta=C.multiSortMeta),C.filters&&(this.restoringFilter=!0,this.filters=C.filters),this.resizableColumns&&(this.columnWidthsState=C.columnWidths,this.tableWidthState=C.tableWidth),C.expandedRowKeys&&(this.expandedRowKeys=C.expandedRowKeys),C.selection&&Promise.resolve(null).then(()=>this.selectionChange.emit(C.selection)),this.stateRestored=!0,this.onStateRestore.emit(C)}}saveColumnWidths(e){let s=[];oe.find(this.containerViewChild.nativeElement,".p-datatable-thead > tr > th").forEach(d=>s.push(oe.getOuterWidth(d))),e.columnWidths=s.join(","),"expand"===this.columnResizeMode&&(e.tableWidth=oe.getOuterWidth(this.tableViewChild.nativeElement)+"px")}setResizeTableWidth(e){this.tableViewChild.nativeElement.style.width=e,this.tableViewChild.nativeElement.style.minWidth=e}restoreColumnWidths(){if(this.columnWidthsState){let e=this.columnWidthsState.split(",");if("expand"===this.columnResizeMode&&this.tableWidthState&&this.setResizeTableWidth(this.tableWidthState+"px"),Le.isNotEmpty(e)){this.createStyleElement();let s="";e.forEach((o,d)=>{s+=`\n                        #${this.id}-table > .p-datatable-thead > tr > th:nth-child(${d+1}),\n                        #${this.id}-table > .p-datatable-tbody > tr > td:nth-child(${d+1}),\n                        #${this.id}-table > .p-datatable-tfoot > tr > td:nth-child(${d+1}) {\n                            width: ${o}px !important; max-width: ${o}px !important\n                        }\n                    `}),this.styleElement.innerHTML=s}}}saveColumnOrder(e){if(this.columns){let s=[];this.columns.map(o=>{s.push(o.field||o.key)}),e.columnOrder=s}}restoreColumnOrder(){const s=this.getStorage().getItem(this.stateKey);if(s){let d=JSON.parse(s).columnOrder;if(d){let C=[];d.map(P=>{let R=this.findColumnByKey(P);R&&C.push(R)}),this.columnOrderStateRestored=!0,this.columns=C}}}findColumnByKey(e){if(!this.columns)return null;for(let s of this.columns)if(s.key===e||s.field===e)return s}createStyleElement(){this.styleElement=document.createElement("style"),this.styleElement.type="text/css",document.head.appendChild(this.styleElement)}getGroupRowsMeta(){return{field:this.groupRowsBy,order:this.groupRowsByOrder}}createResponsiveStyle(){this.responsiveStyleElement||(this.responsiveStyleElement=document.createElement("style"),this.responsiveStyleElement.type="text/css",document.head.appendChild(this.responsiveStyleElement),this.responsiveStyleElement.innerHTML=`\n@media screen and (max-width: ${this.breakpoint}) {\n    #${this.id}-table > .p-datatable-thead > tr > th,\n    #${this.id}-table > .p-datatable-tfoot > tr > td {\n        display: none !important;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td {\n        display: flex;\n        width: 100% !important;\n        align-items: center;\n        justify-content: space-between;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td:not(:last-child) {\n        border: 0 none;\n    }\n\n    #${this.id}.p-datatable-gridlines > .p-datatable-wrapper > .p-datatable-table > .p-datatable-tbody > tr > td:last-child {\n        border-top: 0;\n        border-right: 0;\n        border-left: 0;\n    }\n\n    #${this.id}-table > .p-datatable-tbody > tr > td > .p-column-title {\n        display: block;\n    }\n}\n`)}destroyResponsiveStyle(){this.responsiveStyleElement&&(document.head.removeChild(this.responsiveStyleElement),this.responsiveStyleElement=null)}destroyStyleElement(){this.styleElement&&(document.head.removeChild(this.styleElement),this.styleElement=null)}ngOnDestroy(){this.unbindDocumentEditListener(),this.editingCell=null,this.initialized=null,this.destroyStyleElement(),this.destroyResponsiveStyle()}}return t.\u0275fac=function(e){return new(e||t)(ae(Wt),ae(Gt),ae(hg),ae($n),ae(CC),ae(Mf))},t.\u0275cmp=en({type:t,selectors:[["p-table"]],contentQueries:function(e,s,o){if(1&e&&Fr(o,Sr,4),2&e){let d;St(d=xt())&&(s.templates=d)}},viewQuery:function(e,s){if(1&e&&(Yt($4,5),Yt(X4,5),Yt(J4,5),Yt(W4,5),Yt(q4,5),Yt(K4,5),Yt(Z4,5),Yt(Q4,5),Yt(eB,5)),2&e){let o;St(o=xt())&&(s.containerViewChild=o.first),St(o=xt())&&(s.resizeHelperViewChild=o.first),St(o=xt())&&(s.reorderIndicatorUpViewChild=o.first),St(o=xt())&&(s.reorderIndicatorDownViewChild=o.first),St(o=xt())&&(s.wrapperViewChild=o.first),St(o=xt())&&(s.tableViewChild=o.first),St(o=xt())&&(s.tableHeaderViewChild=o.first),St(o=xt())&&(s.tableFooterViewChild=o.first),St(o=xt())&&(s.scroller=o.first)}},hostAttrs:[1,"p-element"],inputs:{frozenColumns:"frozenColumns",frozenValue:"frozenValue",style:"style",styleClass:"styleClass",tableStyle:"tableStyle",tableStyleClass:"tableStyleClass",paginator:"paginator",pageLinks:"pageLinks",rowsPerPageOptions:"rowsPerPageOptions",alwaysShowPaginator:"alwaysShowPaginator",paginatorPosition:"paginatorPosition",paginatorDropdownAppendTo:"paginatorDropdownAppendTo",paginatorDropdownScrollHeight:"paginatorDropdownScrollHeight",currentPageReportTemplate:"currentPageReportTemplate",showCurrentPageReport:"showCurrentPageReport",showJumpToPageDropdown:"showJumpToPageDropdown",showJumpToPageInput:"showJumpToPageInput",showFirstLastIcon:"showFirstLastIcon",showPageLinks:"showPageLinks",defaultSortOrder:"defaultSortOrder",sortMode:"sortMode",resetPageOnSort:"resetPageOnSort",selectionMode:"selectionMode",selectionPageOnly:"selectionPageOnly",contextMenuSelection:"contextMenuSelection",contextMenuSelectionMode:"contextMenuSelectionMode",dataKey:"dataKey",metaKeySelection:"metaKeySelection",rowSelectable:"rowSelectable",rowTrackBy:"rowTrackBy",lazy:"lazy",lazyLoadOnInit:"lazyLoadOnInit",compareSelectionBy:"compareSelectionBy",csvSeparator:"csvSeparator",exportFilename:"exportFilename",filters:"filters",globalFilterFields:"globalFilterFields",filterDelay:"filterDelay",filterLocale:"filterLocale",expandedRowKeys:"expandedRowKeys",editingRowKeys:"editingRowKeys",rowExpandMode:"rowExpandMode",scrollable:"scrollable",scrollDirection:"scrollDirection",rowGroupMode:"rowGroupMode",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualScrollItemSize:"virtualScrollItemSize",virtualScrollOptions:"virtualScrollOptions",virtualScrollDelay:"virtualScrollDelay",frozenWidth:"frozenWidth",responsive:"responsive",contextMenu:"contextMenu",resizableColumns:"resizableColumns",columnResizeMode:"columnResizeMode",reorderableColumns:"reorderableColumns",loading:"loading",loadingIcon:"loadingIcon",showLoader:"showLoader",rowHover:"rowHover",customSort:"customSort",showInitialSortBadge:"showInitialSortBadge",autoLayout:"autoLayout",exportFunction:"exportFunction",exportHeader:"exportHeader",stateKey:"stateKey",stateStorage:"stateStorage",editMode:"editMode",groupRowsBy:"groupRowsBy",groupRowsByOrder:"groupRowsByOrder",responsiveLayout:"responsiveLayout",breakpoint:"breakpoint",virtualRowHeight:"virtualRowHeight",value:"value",columns:"columns",first:"first",rows:"rows",totalRecords:"totalRecords",sortField:"sortField",sortOrder:"sortOrder",multiSortMeta:"multiSortMeta",selection:"selection",selectAll:"selectAll"},outputs:{selectAllChange:"selectAllChange",selectionChange:"selectionChange",contextMenuSelectionChange:"contextMenuSelectionChange",onRowSelect:"onRowSelect",onRowUnselect:"onRowUnselect",onPage:"onPage",onSort:"onSort",onFilter:"onFilter",onLazyLoad:"onLazyLoad",onRowExpand:"onRowExpand",onRowCollapse:"onRowCollapse",onContextMenuSelect:"onContextMenuSelect",onColResize:"onColResize",onColReorder:"onColReorder",onRowReorder:"onRowReorder",onEditInit:"onEditInit",onEditComplete:"onEditComplete",onEditCancel:"onEditCancel",onHeaderCheckboxToggle:"onHeaderCheckboxToggle",sortFunction:"sortFunction",firstChange:"firstChange",rowsChange:"rowsChange",onStateSave:"onStateSave",onStateRestore:"onStateRestore"},features:[Mt([hg]),Cn],decls:16,vars:22,consts:[[3,"ngStyle","ngClass"],["container",""],["class","p-datatable-loading-overlay p-component-overlay",4,"ngIf"],["class","p-datatable-header",4,"ngIf"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],[1,"p-datatable-wrapper",3,"ngStyle"],["wrapper",""],[3,"items","columns","style","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad",4,"ngIf"],[4,"ngIf"],["buildInTable",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange",4,"ngIf"],["class","p-datatable-footer",4,"ngIf"],["class","p-column-resizer-helper","style","display:none",4,"ngIf"],["class","pi pi-arrow-down p-datatable-reorder-indicator-up","style","display:none",4,"ngIf"],["class","pi pi-arrow-up p-datatable-reorder-indicator-down","style","display:none",4,"ngIf"],[1,"p-datatable-loading-overlay","p-component-overlay"],[1,"p-datatable-header"],[4,"ngTemplateOutlet"],["styleClass","p-paginator-top",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[3,"items","columns","scrollHeight","itemSize","step","delay","inline","lazy","loaderDisabled","showSpacer","showLoader","options","onLazyLoad"],["scroller",""],["pTemplate","content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","table",3,"ngClass"],["table",""],[1,"p-datatable-thead"],["thead",""],["class","p-datatable-tbody p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen",4,"ngIf"],[1,"p-datatable-tbody",3,"ngClass","value","pTableBody","pTableBodyTemplate","scrollerOptions"],["class","p-datatable-scroller-spacer",3,"style",4,"ngIf"],["class","p-datatable-tfoot",4,"ngIf"],[1,"p-datatable-tbody","p-datatable-frozen-tbody",3,"value","frozenRows","pTableBody","pTableBodyTemplate","frozen"],[1,"p-datatable-scroller-spacer"],[1,"p-datatable-tfoot"],["tfoot",""],["styleClass","p-paginator-bottom",3,"rows","first","totalRecords","pageLinkSize","alwaysShow","rowsPerPageOptions","templateLeft","templateRight","dropdownAppendTo","dropdownScrollHeight","currentPageReportTemplate","showFirstLastIcon","dropdownItemTemplate","showCurrentPageReport","showJumpToPageDropdown","showJumpToPageInput","showPageLinks","onPageChange"],[1,"p-datatable-footer"],[1,"p-column-resizer-helper",2,"display","none"],["resizeHelper",""],[1,"pi","pi-arrow-down","p-datatable-reorder-indicator-up",2,"display","none"],["reorderIndicatorUp",""],[1,"pi","pi-arrow-up","p-datatable-reorder-indicator-down",2,"display","none"],["reorderIndicatorDown",""]],template:function(e,s){1&e&&(de(0,"div",0,1),te(2,tB,2,2,"div",2),te(3,iB,2,1,"div",3),te(4,rB,1,17,"p-paginator",4),de(5,"div",5,6),te(7,lB,3,16,"p-scroller",7),te(8,dB,2,7,"ng-container",8),te(9,yB,10,28,"ng-template",null,9,Ki),ue(),te(11,bB,1,17,"p-paginator",10),te(12,wB,2,1,"div",11),te(13,EB,2,0,"div",12),te(14,SB,2,0,"span",13),te(15,xB,2,0,"span",14),ue()),2&e&&(Kt(s.styleClass),q("ngStyle",s.style)("ngClass",mr(16,TB,s.rowHover||s.selectionMode,s.scrollable,s.scrollable&&"flex"===s.scrollHeight)),jt("id",s.id),Q(2),q("ngIf",s.loading&&s.showLoader),Q(1),q("ngIf",s.captionTemplate),Q(1),q("ngIf",s.paginator&&("top"===s.paginatorPosition||"both"==s.paginatorPosition)),Q(1),q("ngStyle",ut(20,DB,s.virtualScroll?"":s.scrollHeight)),Q(2),q("ngIf",s.virtualScroll),Q(1),q("ngIf",!s.virtualScroll),Q(3),q("ngIf",s.paginator&&("bottom"===s.paginatorPosition||"both"==s.paginatorPosition)),Q(1),q("ngIf",s.summaryTemplate),Q(1),q("ngIf",s.resizableColumns),Q(1),q("ngIf",s.reorderableColumns),Q(1),q("ngIf",s.reorderableColumns))},dependencies:function(){return[Vi,Ci,Qi,ji,D4,Sr,qw,O6]},styles:[".p-datatable{position:relative}.p-datatable>.p-datatable-wrapper{overflow:auto}.p-datatable-table{border-spacing:0px;width:100%}.p-datatable .p-sortable-column{cursor:pointer;-webkit-user-select:none;user-select:none}.p-datatable .p-sortable-column .p-column-title,.p-datatable .p-sortable-column .p-sortable-column-icon,.p-datatable .p-sortable-column .p-sortable-column-badge{vertical-align:middle}.p-datatable .p-sortable-column .p-sortable-column-badge{display:inline-flex;align-items:center;justify-content:center}.p-datatable-hoverable-rows .p-selectable-row{cursor:pointer}.p-datatable-scrollable>.p-datatable-wrapper{position:relative}.p-datatable-scrollable-table>.p-datatable-thead{position:sticky;top:0;z-index:1}.p-datatable-scrollable-table>.p-datatable-frozen-tbody{position:sticky;z-index:1}.p-datatable-scrollable-table>.p-datatable-tfoot{position:sticky;bottom:0;z-index:1}.p-datatable-scrollable .p-frozen-column{position:sticky;background:inherit}.p-datatable-scrollable th.p-frozen-column{z-index:1}.p-datatable-flex-scrollable{display:flex;flex-direction:column;height:100%}.p-datatable-flex-scrollable>.p-datatable-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.p-datatable-scrollable-table>.p-datatable-tbody>.p-rowgroup-header{position:sticky;z-index:1}.p-datatable-resizable-table>.p-datatable-thead>tr>th,.p-datatable-resizable-table>.p-datatable-tfoot>tr>td,.p-datatable-resizable-table>.p-datatable-tbody>tr>td{overflow:hidden;white-space:nowrap}.p-datatable-resizable-table>.p-datatable-thead>tr>th.p-resizable-column:not(.p-frozen-column){background-clip:padding-box;position:relative}.p-datatable-resizable-table-fit>.p-datatable-thead>tr>th.p-resizable-column:last-child .p-column-resizer{display:none}.p-datatable .p-column-resizer{display:block;position:absolute!important;top:0;right:0;margin:0;width:.5rem;height:100%;padding:0;cursor:col-resize;border:1px solid transparent}.p-datatable .p-column-resizer-helper{width:1px;position:absolute;z-index:10;display:none}.p-datatable .p-row-editor-init,.p-datatable .p-row-editor-save,.p-datatable .p-row-editor-cancel,.p-datatable .p-row-toggler{display:inline-flex;align-items:center;justify-content:center;overflow:hidden;position:relative}.p-datatable-reorder-indicator-up,.p-datatable-reorder-indicator-down{position:absolute;display:none}.p-datatable-reorderablerow-handle,[pReorderableColumn]{cursor:move}.p-datatable .p-datatable-loading-overlay{position:absolute;display:flex;align-items:center;justify-content:center;z-index:2}.p-column-filter-row{display:flex;align-items:center;width:100%}.p-column-filter-menu{display:inline-flex}.p-column-filter-row p-columnfilterformelement{flex:1 1 auto;width:1%}.p-column-filter-menu-button,.p-column-filter-clear-button{display:inline-flex;justify-content:center;align-items:center;cursor:pointer;text-decoration:none;overflow:hidden;position:relative}.p-column-filter-overlay{position:absolute;top:0;left:0}.p-column-filter-row-items{margin:0;padding:0;list-style:none}.p-column-filter-row-item{cursor:pointer}.p-column-filter-add-button,.p-column-filter-remove-button{justify-content:center}.p-column-filter-add-button .p-button-label,.p-column-filter-remove-button .p-button-label{flex-grow:0}.p-column-filter-buttonbar{display:flex;align-items:center;justify-content:space-between}.p-column-filter-buttonbar .p-button{width:auto}.p-datatable-tbody>tr>td>.p-column-title{display:none}.p-datatable-scroller-spacer{display:flex}.p-datatable .p-scroller .p-scroller-loading{transform:none!important;min-height:0;position:sticky;top:0;left:0}\n"],encapsulation:2}),t})(),O6=(()=>{class t{constructor(e,s,o,d){this.dt=e,this.tableService=s,this.cd=o,this.el=d,this.subscription=this.dt.tableService.valueSource$.subscribe(()=>{this.dt.virtualScroll&&this.cd.detectChanges()})}get value(){return this._value}set value(e){this._value=e,this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}ngAfterViewInit(){this.frozenRows&&this.updateFrozenRowStickyPosition(),this.dt.scrollable&&"subheader"===this.dt.rowGroupMode&&this.updateFrozenRowGroupHeaderStickyPosition()}shouldRenderRowGroupHeader(e,s,o){let d=Le.resolveFieldData(s,this.dt.groupRowsBy),C=e[o-1];return!C||d!==Le.resolveFieldData(C,this.dt.groupRowsBy)}shouldRenderRowGroupFooter(e,s,o){let d=Le.resolveFieldData(s,this.dt.groupRowsBy),C=e[o+1];return!C||d!==Le.resolveFieldData(C,this.dt.groupRowsBy)}shouldRenderRowspan(e,s,o){let d=Le.resolveFieldData(s,this.dt.groupRowsBy),C=e[o-1];return!C||d!==Le.resolveFieldData(C,this.dt.groupRowsBy)}calculateRowGroupSize(e,s,o){let d=Le.resolveFieldData(s,this.dt.groupRowsBy),C=d,P=0;for(;d===C;){P++;let R=e[++o];if(!R)break;C=Le.resolveFieldData(R,this.dt.groupRowsBy)}return 1===P?null:P}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateFrozenRowStickyPosition(){this.el.nativeElement.style.top=oe.getOuterHeight(this.el.nativeElement.previousElementSibling)+"px"}updateFrozenRowGroupHeaderStickyPosition(){if(this.el.nativeElement.previousElementSibling){let e=oe.getOuterHeight(this.el.nativeElement.previousElementSibling);this.dt.rowGroupHeaderStyleObject.top=e+"px"}}getScrollerOption(e,s){return this.dt.virtualScroll&&(s=s||this.scrollerOptions)?s[e]:null}getRowIndex(e){const s=this.dt.paginator?this.dt.first+e:e,o=this.getScrollerOption("getItemOptions");return o?o(s).index:s}}return t.\u0275fac=function(e){return new(e||t)(ae(aE),ae(hg),ae($n),ae(Wt))},t.\u0275cmp=en({type:t,selectors:[["","pTableBody",""]],hostAttrs:[1,"p-element"],inputs:{columns:["pTableBody","columns"],template:["pTableBodyTemplate","template"],value:"value",frozen:"frozen",frozenRows:"frozenRows",scrollerOptions:"scrollerOptions"},attrs:PB,decls:5,vars:5,consts:[[4,"ngIf"],["ngFor","",3,"ngForOf","ngForTrackBy"],["role","row",4,"ngIf"],["role","row"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,s){1&e&&(te(0,VB,2,2,"ng-container",0),te(1,WB,2,2,"ng-container",0),te(2,e6,2,2,"ng-container",0),te(3,n6,2,5,"ng-container",0),te(4,s6,2,5,"ng-container",0)),2&e&&(q("ngIf",!s.dt.expandedRowTemplate),Q(1),q("ngIf",s.dt.expandedRowTemplate&&!(s.frozen&&s.dt.frozenExpandedRowTemplate)),Q(1),q("ngIf",s.dt.frozenExpandedRowTemplate&&s.frozen),Q(1),q("ngIf",s.dt.loading),Q(1),q("ngIf",s.dt.isEmpty()&&!s.dt.loading))},dependencies:[fs,Ci,Qi],encapsulation:2}),t})(),I6=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Vt({type:t}),t.\u0275inj=Lt({imports:[kn,P4,eg,lg,Zf,Xa,B4,uF,cg,G4,Ou,xr,Ou]}),t})();function A6(t,n){1&t&&(de(0,"tr")(1,"th",3),qe(2,"X"),ue(),de(3,"th",3),qe(4,"Y"),ue(),de(5,"th",3),qe(6,"R"),ue(),de(7,"th",3),qe(8,"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"),ue()())}function R6(t,n){if(1&t&&(de(0,"tr")(1,"td"),qe(2),ue(),de(3,"td"),qe(4),ue(),de(5,"td"),qe(6),ue(),de(7,"td"),qe(8),ue()()),2&t){const e=n.$implicit;Q(2),Zt(e.x),Q(2),Zt(e.y),Q(2),Zt(e.r),Q(2),Zt(e.hit)}}const N6=function(){return{}};class Ru{ngOnInit(){}addNewHit(n){this.hits.push({x:n.hit.x,y:n.hit.y,r:n.hit.r,hit:n.hit.hitted})}static#e=this.\u0275fac=function(e){return new(e||Ru)};static#t=this.\u0275cmp=en({type:Ru,selectors:[["app-table"]],inputs:{hits:"hits"},decls:3,vars:3,consts:[[3,"value","tableStyle"],["pTemplate","header"],["pTemplate","body"],[2,"width","25%"]],template:function(e,s){1&e&&(de(0,"p-table",0),te(1,A6,9,0,"ng-template",1),te(2,R6,9,4,"ng-template",2),ue()),2&e&&q("value",s.hits)("tableStyle",Lr(2,N6))},dependencies:[aE,Sr]})}class Nu{constructor(n,e){this.httpService=n,this.router=e,this.R=0}ngOnInit(){this.hits=new Array,this.httpService.getAllHits().subscribe({next:n=>{if(n){for(const e of n)this.hits.push(e);this.graph.drawPoints()}},error:n=>{401==n.status&&(localStorage.removeItem("auth-token"),this.router.navigate(["/login"]))}})}static#e=this.\u0275fac=function(e){return new(e||Nu)(ae(Jr),ae(an))};static#t=this.\u0275cmp=en({type:Nu,selectors:[["app-main-page"]],viewQuery:function(e,s){if(1&e&&Yt(il,5),2&e){let o;St(o=xt())&&(s.graph=o.first)}},decls:9,vars:5,consts:[[1,"text-center","mb-5"],["href","./login"],[3,"hits","rFromInputField"],["graphComponent",""],[1,"text-center","mt-5"],[3,"hits","r","rChange","deleteEvent","hitEvent"],[1,"mr-3",3,"hits"]],template:function(e,s){if(1&e){const o=ct();pt(0,"app-header"),de(1,"div",0)(2,"a",1),qe(3,"\u0412\u044b\u0439\u0442\u0438"),ue()(),pt(4,"app-graph",2,3),de(6,"div",4)(7,"app-hit-form",5),Ae("rChange",function(C){return s.R=C})("deleteEvent",function(){return pe(o),fe(wn(5).removePoints())})("hitEvent",function(C){return pe(o),fe(wn(5).drawPoint(C))}),ue()(),pt(8,"app-table",6)}2&e&&(Q(4),q("hits",s.hits)("rFromInputField",s.R),Q(3),q("hits",s.hits)("r",s.R),Q(1),q("hits",s.hits))},dependencies:[rl,il,Mu,Ru]})}class ku{constructor(n,e){this.router=n,this.httpService=e,this.token=""}ngOnInit(){this.form=new Ka({login:new bs(null,[zi.required]),password:new bs(null,[zi.required])})}onSubmitLogin(){this.validate()&&this.httpService.login(this.form.value).subscribe({next:e=>{localStorage.setItem("auth-token",e.token),this.router.navigate(["/main"])},error:e=>{401==e.status&&alert("Invalid login or password!")}})}onSubmitRegister(){this.validate()&&this.httpService.register(this.form.value).subscribe({next:()=>{alert("User has just been registered successfully")},error:e=>{401==e.status&&alert("User with such login already exists")}})}validate(){return null!=this.form.value.login&&null!=this.form.value.password||(alert("\u0412\u0441\u0435 \u043f\u043e\u043b\u044f \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b"),!1)}setToken(n){this.token=n}getToken(){return this.token}static#e=this.\u0275fac=function(e){return new(e||ku)(ae(an),ae(Jr))};static#t=this.\u0275cmp=en({type:ku,selectors:[["app-form"]],decls:18,vars:3,consts:[[1,"text-center","surface-card","p-4","shadow-2","border-round","lg:w-27rem","inline-block"],[2,"margin-top","50px","font-family","-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol","font-size","24px",3,"formGroup"],[1,"text-center","mb-5"],[1,"text-900","text-3xl","font-medium","mb-3"],["for","login",1,"mr-3"],[1,"text-center","mb-2"],["formControlName","login","id","login","type","text","pInputText","",1,"mt-2"],["for","password",1,"mr-3"],["formControlName","password","id","password","type","password","pInputText","",1,"mt-2"],[1,"mt-7"],["type","submit","pButton","","pRipple","","label","\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f","icon","pi pi-user",3,"disabled","click"],[1,"mt-2"],["type","submit","pButton","","pRipple","","label","\u0412\u043e\u0439\u0442\u0438","icon","pi pi-user",1,"w-13rem",2,"margin-top","7px",3,"disabled","click"]],template:function(e,s){1&e&&(de(0,"div",0)(1,"form",1)(2,"div")(3,"div",2)(4,"div",3),qe(5,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"),ue()(),de(6,"label",4),qe(7,"\u043b\u043e\u0433\u0438\u043d"),ue(),de(8,"div",5),pt(9,"input",6),ue(),de(10,"label",7),qe(11,"\u043f\u0430\u0440\u043e\u043b\u044c"),ue(),de(12,"div",5),pt(13,"input",8),ue(),de(14,"div",9)(15,"button",10),Ae("click",function(){return s.onSubmitRegister()}),ue()(),de(16,"div",11)(17,"button",12),Ae("click",function(){return s.onSubmitLogin()}),ue()()()()()),2&e&&(Q(1),q("formGroup",s.form),Q(14),q("disabled",s.form.invalid),Q(2),q("disabled",s.form.invalid))},dependencies:[uu,Qf,Yf,Ja,pu,Rf,el,Eu]})}class al{ngOnInit(){localStorage.removeItem("auth-token")}static#e=this.\u0275fac=function(e){return new(e||al)};static#t=this.\u0275cmp=en({type:al,selectors:[["app-login-page"]],decls:3,vars:0,consts:[[1,"text-center"]],template:function(e,s){1&e&&(pt(0,"app-header"),de(1,"div",0),pt(2,"app-form"),ue())},dependencies:[rl,ku]})}class ll{constructor(n){this.router=n}canActivate(n,e){return localStorage.getItem("auth-token")?Ye(!0):(this.router.navigate(["/login"]),Ye(!1))}canActivateChild(n,e){return this.canActivate(n,e)}static#e=this.\u0275fac=function(e){return new(e||ll)(je(an))};static#t=this.\u0275prov=We({token:ll,factory:ll.\u0275fac,providedIn:"root"})}const k6=[{path:"main",component:Nu,canActivate:[ll]},{path:"login",component:al},{path:"",component:al}];class Lu{static#e=this.\u0275fac=function(e){return new(e||Lu)};static#t=this.\u0275mod=Vt({type:Lu});static#n=this.\u0275inj=Lt({imports:[_C.forRoot(k6),_C]})}class Fu{static#e=this.\u0275fac=function(e){return new(e||Fu)};static#t=this.\u0275mod=Vt({type:Fu,bootstrap:[lu]});static#n=this.\u0275inj=Lt({imports:[sR,Xa,eg,Gk,Lu,fL,I6]})}rR().bootstrapModule(Fu).catch(t=>console.error(t))},899:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,I;module=__webpack_require__.nmd(module),typeof self<"u"&&self,I=function(){var requirejs,require,define;return function(E){var I,T,S,w,g={},m={},p={},a={},u=Object.prototype.hasOwnProperty,c=[].slice,l=/\.js$/;function f(M,O){return u.call(M,O)}function v(M,O){var A,N,L,B,V,U,j,z,$,X,Z,W=O&&O.split("/"),ee=p.map,ie=ee&&ee["*"]||{};if(M){for(V=(M=M.split("/")).length-1,p.nodeIdCompat&&l.test(M[V])&&(M[V]=M[V].replace(l,"")),"."===M[0].charAt(0)&&W&&(M=W.slice(0,W.length-1).concat(M)),$=0;$<M.length;$++)if("."===(Z=M[$]))M.splice($,1),$-=1;else if(".."===Z){if(0===$||1===$&&".."===M[2]||".."===M[$-1])continue;$>0&&(M.splice($-1,2),$-=2)}M=M.join("/")}if((W||ie)&&ee){for($=(A=M.split("/")).length;$>0;$-=1){if(N=A.slice(0,$).join("/"),W)for(X=W.length;X>0;X-=1)if((L=ee[W.slice(0,X).join("/")])&&(L=L[N])){B=L,U=$;break}if(B)break;!j&&ie&&ie[N]&&(j=ie[N],z=$)}!B&&j&&(B=j,U=z),B&&(A.splice(0,U,B),M=A.join("/"))}return M}function _(M,O){return function(){var A=c.call(arguments,0);return"string"!=typeof A[0]&&1===A.length&&A.push(null),T.apply(E,A.concat([M,O]))}}function h(M){return function(O){g[M]=O}}function y(M){if(f(m,M)){var O=m[M];delete m[M],a[M]=!0,I.apply(E,O)}if(!f(g,M)&&!f(a,M))throw new Error("No "+M);return g[M]}function b(M){var O,A=M?M.indexOf("!"):-1;return A>-1&&(O=M.substring(0,A),M=M.substring(A+1,M.length)),[O,M]}function x(M){return M?b(M):[]}function D(M){return function(){return p&&p.config&&p.config[M]||{}}}S=function(M,O){var A,N,L=b(M),B=L[0],V=O[1];return M=L[1],B&&(A=y(B=v(B,V))),B?M=A&&A.normalize?A.normalize(M,(N=V,function(U){return v(U,N)})):v(M,V):(B=(L=b(M=v(M,V)))[0],M=L[1],B&&(A=y(B))),{f:B?B+"!"+M:M,n:M,pr:B,p:A}},w={require:function(M){return _(M)},exports:function(M){var O=g[M];return void 0!==O?O:g[M]={}},module:function(M){return{id:M,uri:"",exports:g[M],config:D(M)}}},I=function(M,O,A,N){var L,B,V,U,j,z,$,X=[],Z=typeof A;if(z=x(N=N||M),"undefined"===Z||"function"===Z){for(O=!O.length&&A.length?["require","exports","module"]:O,j=0;j<O.length;j+=1)if("require"===(B=(U=S(O[j],z)).f))X[j]=w.require(M);else if("exports"===B)X[j]=w.exports(M),$=!0;else if("module"===B)L=X[j]=w.module(M);else if(f(g,B)||f(m,B)||f(a,B))X[j]=y(B);else{if(!U.p)throw new Error(M+" missing "+B);U.p.load(U.n,_(N,!0),h(B),{}),X[j]=g[B]}V=A?A.apply(g[M],X):void 0,M&&(L&&L.exports!==E&&L.exports!==g[M]?g[M]=L.exports:V===E&&$||(g[M]=V))}else M&&(g[M]=A)},requirejs=require=T=function(M,O,A,N,L){if("string"==typeof M)return w[M]?w[M](O):y(S(M,x(O)).f);if(!M.splice){if((p=M).deps&&T(p.deps,p.callback),!O)return;O.splice?(M=O,O=A,A=null):M=E}return O=O||function(){},"function"==typeof A&&(A=N,N=L),N?I(E,M,O,A):setTimeout(function(){I(E,M,O,A)},4),T},T.config=function(M){return T(M)},requirejs._defined=g,(define=function(M,O,A){if("string"!=typeof M)throw new Error("See almond README: incorrect module build, no module name");O.splice||(A=O,O=[]),f(g,M)||f(m,M)||(m[M]=[M,O,A])}).amd={jQuery:!0}}(),define("../node_modules/almond/almond",function(){}),define("jxg",[],function(){"use strict";var E={};return"object"!=typeof JXG||JXG.extend||(E=JXG),E.extend=function(I,T,S,w){var g;for(g in S=S||!1,w=w||!1,T)(!S||S&&T.hasOwnProperty(g))&&(I[w?g.toLowerCase():g]=T[g])},E.defineConstant=function(I,T,S,w){(w=w||!1)&&E.exists(I[T])||Object.defineProperty(I,T,{value:S,writable:!1,enumerable:!0,configurable:!1})},E.extendConstants=function(I,T,S,w){var g,m;for(g in S=S||!1,w=w||!1,T)(!S||S&&T.hasOwnProperty(g))&&(m=w?g.toUpperCase():g,this.defineConstant(I,m,T[g]))},E.extend(E,{boards:{},readers:{},elements:{},registerElement:function(I,T){I=I.toLowerCase(),this.elements[I]=T},registerReader:function(I,T){var S,w;for(S=0;S<T.length;S++)w=T[S].toLowerCase(),"function"!=typeof this.readers[w]&&(this.readers[w]=I)},shortcut:function(I,T){return function(){return I[T].apply(this,arguments)}},getRef:function(I,T){return E.deprecated("JXG.getRef()","Board.select()"),I.select(T)},getReference:function(I,T){return E.deprecated("JXG.getReference()","Board.select()"),I.select(T)},getBoardByContainerId:function(I){var T;for(T in JXG.boards)if(JXG.boards.hasOwnProperty(T)&&JXG.boards[T].container===I)return JXG.boards[T];return null},deprecated:function(I,T){var S=I+" is deprecated.";T&&(S+=" Please use "+T+" instead."),E.warn(S)},warn:function(I){"object"==typeof window&&window.console&&console.warn?console.warn("WARNING:",I):"object"==typeof document&&document.getElementById("warning")&&(document.getElementById("debug").innerHTML+="WARNING: "+I+"<br />")},debugInt:function(I){var T,S;for(T=0;T<arguments.length;T++)S=arguments[T],"object"==typeof window&&window.console&&console.log?console.log(S):"object"==typeof document&&document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=S+"<br/>")},debugWST:function(I){var T=new Error;E.debugInt.apply(this,arguments),T&&T.stack&&(E.debugInt("stacktrace"),E.debugInt(T.stack.split("\n").slice(1).join("\n")))},debugLine:function(I){var T=new Error;E.debugInt.apply(this,arguments),T&&T.stack&&E.debugInt("Called from",T.stack.split("\n").slice(2,3).join("\n"))},debug:function(I){E.debugInt.apply(this,arguments)}}),E}),define("base/constants",["jxg"],function(E){"use strict";var I;return E.extendConstants(E,I={version:"1.4.6",licenseText:"JSXGraph v1.4.6 Copyright (C) see https://jsxgraph.org",COORDS_BY_USER:1,COORDS_BY_SCREEN:2,OBJECT_TYPE_ARC:1,OBJECT_TYPE_ARROW:2,OBJECT_TYPE_AXIS:3,OBJECT_TYPE_AXISPOINT:4,OBJECT_TYPE_TICKS:5,OBJECT_TYPE_CIRCLE:6,OBJECT_TYPE_CONIC:7,OBJECT_TYPE_CURVE:8,OBJECT_TYPE_GLIDER:9,OBJECT_TYPE_IMAGE:10,OBJECT_TYPE_LINE:11,OBJECT_TYPE_POINT:12,OBJECT_TYPE_SLIDER:13,OBJECT_TYPE_CAS:14,OBJECT_TYPE_GXTCAS:15,OBJECT_TYPE_POLYGON:16,OBJECT_TYPE_SECTOR:17,OBJECT_TYPE_TEXT:18,OBJECT_TYPE_ANGLE:19,OBJECT_TYPE_INTERSECTION:20,OBJECT_TYPE_TURTLE:21,OBJECT_TYPE_VECTOR:22,OBJECT_TYPE_OPROJECT:23,OBJECT_TYPE_GRID:24,OBJECT_TYPE_TANGENT:25,OBJECT_TYPE_HTMLSLIDER:26,OBJECT_TYPE_CHECKBOX:27,OBJECT_TYPE_INPUT:28,OBJECT_TYPE_BUTTON:29,OBJECT_TYPE_TRANSFORMATION:30,OBJECT_TYPE_FOREIGNOBJECT:31,OBJECT_TYPE_VIEW3D:32,OBJECT_TYPE_POINT3D:33,OBJECT_TYPE_LINE3D:34,OBJECT_TYPE_PLANE3D:35,OBJECT_TYPE_CURVE3D:36,OBJECT_TYPE_SURFACE3D:37,OBJECT_CLASS_POINT:1,OBJECT_CLASS_LINE:2,OBJECT_CLASS_CIRCLE:3,OBJECT_CLASS_CURVE:4,OBJECT_CLASS_AREA:5,OBJECT_CLASS_OTHER:6,OBJECT_CLASS_TEXT:7,OBJECT_CLASS_3D:8,GENTYPE_ABC:1,GENTYPE_AXIS:2,GENTYPE_MID:3,GENTYPE_REFLECTION:4,GENTYPE_MIRRORELEMENT:5,GENTYPE_REFLECTION_ON_LINE:4,GENTYPE_REFLECTION_ON_POINT:5,GENTYPE_TANGENT:6,GENTYPE_PARALLEL:7,GENTYPE_BISECTORLINES:8,GENTYPE_BOARDIMG:9,GENTYPE_BISECTOR:10,GENTYPE_NORMAL:11,GENTYPE_POINT:12,GENTYPE_GLIDER:13,GENTYPE_INTERSECTION:14,GENTYPE_CIRCLE:15,GENTYPE_CIRCLE2POINTS:16,GENTYPE_LINE:17,GENTYPE_TRIANGLE:18,GENTYPE_QUADRILATERAL:19,GENTYPE_TEXT:20,GENTYPE_POLYGON:21,GENTYPE_REGULARPOLYGON:22,GENTYPE_SECTOR:23,GENTYPE_ANGLE:24,GENTYPE_PLOT:25,GENTYPE_SLIDER:26,GENTYPE_TRUNCATE:27,GENTYPE_JCODE:28,GENTYPE_MOVEMENT:29,GENTYPE_COMBINED:30,GENTYPE_RULER:31,GENTYPE_SLOPETRIANGLE:32,GENTYPE_PERPSEGMENT:33,GENTYPE_LABELMOVEMENT:34,GENTYPE_VECTOR:35,GENTYPE_NONREFLEXANGLE:36,GENTYPE_REFLEXANGLE:37,GENTYPE_PATH:38,GENTYPE_DERIVATIVE:39,GENTYPE_DELETE:41,GENTYPE_COPY:42,GENTYPE_MIRROR:43,GENTYPE_ROTATE:44,GENTYPE_ABLATION:45,GENTYPE_MIGRATE:46,GENTYPE_VECTORCOPY:47,GENTYPE_POLYGONCOPY:48,GENTYPE_CTX_TYPE_G:51,GENTYPE_CTX_TYPE_P:52,GENTYPE_CTX_TRACE:53,GENTYPE_CTX_VISIBILITY:54,GENTYPE_CTX_CCVISIBILITY:55,GENTYPE_CTX_MPVISIBILITY:56,GENTYPE_CTX_WITHLABEL:57,GENTYPE_CTX_LABEL:58,GENTYPE_CTX_FIXED:59,GENTYPE_CTX_STROKEWIDTH:60,GENTYPE_CTX_LABELSIZE:61,GENTYPE_CTX_SIZE:62,GENTYPE_CTX_FACE:63,GENTYPE_CTX_STRAIGHT:64,GENTYPE_CTX_ARROW:65,GENTYPE_CTX_COLOR:66,GENTYPE_CTX_RADIUS:67,GENTYPE_CTX_COORDS:68,GENTYPE_CTX_TEXT:69,GENTYPE_CTX_ANGLERADIUS:70,GENTYPE_CTX_DOTVISIBILITY:71,GENTYPE_CTX_FILLOPACITY:72,GENTYPE_CTX_PLOT:73,GENTYPE_CTX_SCALE:74,GENTYPE_CTX_INTVAL:75,GENTYPE_CTX_POINT1:76,GENTYPE_CTX_POINT2:77,GENTYPE_CTX_LABELSTICKY:78,GENTYPE_CTX_TYPE_I:79,GENTYPE_CTX_HASINNERPOINTS:80,GENTYPE_CTX_SNAPWIDTH:81,GENTYPE_CTX_SNAPTOGRID:82}),I}),define("utils/type",["jxg","base/constants"],function(E,I){"use strict";return E.extend(E,{isId:function(T,S){return"string"==typeof S&&!!T.objects[S]},isName:function(T,S){return"string"==typeof S&&!!T.elementsByName[S]},isGroup:function(T,S){return"string"==typeof S&&!!T.groups[S]},isString:function(T){return"string"==typeof T},isNumber:function(T){return"number"==typeof T||"[Object Number]"===Object.prototype.toString.call(T)},isFunction:function(T){return"function"==typeof T},isArray:function(T){return Array.isArray?Array.isArray(T):null!==T&&"object"==typeof T&&"function"==typeof T.splice&&"function"==typeof T.join},isObject:function(T){return"object"==typeof T&&!this.isArray(T)},isPoint:function(T){return!(null===T||"object"!=typeof T||!this.exists(T.elementClass))&&T.elementClass===I.OBJECT_CLASS_POINT},isPoint3D:function(T){return!(null===T||"object"!=typeof T||!this.exists(T.elType))&&"point3d"===T.elType},isPointType:function(T,S){var w,g;return!!this.isArray(S)||!!(this.isFunction(S)&&(w=S(),this.isArray(w)&&w.length>1))||(g=T.select(S),this.isPoint(g))},isTransformationOrArray:function(T){if(null!==T){if(this.isArray(T)&&T.length>0)return this.isTransformationOrArray(T[0]);if("object"==typeof T)return T.type===I.OBJECT_TYPE_TRANSFORMATION}return!1},exists:function(T,S){var w=!(null==T||null===T);return(S=S||!1)?w&&""!==T:w},isEmpty:function(T){return 0===Object.keys(T).length},def:function(T,S){return this.exists(T)?T:S},str2Bool:function(T){return!this.exists(T)||("boolean"==typeof T?T:!!this.isString(T)&&"true"===T.toLowerCase())},createEvalFunction:function(T,S,w){var g,m=[];for(g=0;g<w;g++)m[g]=E.createFunction(S[g],T,"",!0);return function(p){return m[p]()}},createFunction:function(T,S,w,g){var m=null;return this.exists(g)&&!g||!this.isString(T)?this.isFunction(T)?m=T:(this.isNumber(T)||this.isString(T))&&(m=function(){return T}):m=S.jc.snippet(T,!0,w,!0),null!==m&&(m.origin=T),m},providePoints:function(T,S,w,g,m){var p,a,u,c,l,f=0,v=[];for(this.isArray(S)||(S=[S]),u=S.length,this.exists(m)&&(f=m.length),0===f&&(c=this.copyAttributes(w,T.options,g)),p=0;p<u;++p)if(f>0&&(a=Math.min(p,f-1),c=this.copyAttributes(w,T.options,g,m[a])),this.isArray(S[p])&&S[p].length>1?(v.push(T.create("point",S[p],c)),v[v.length-1]._is_new=!0):this.isFunction(S[p])?(l=S[p](),this.isArray(l)&&l.length>1&&(v.push(T.create("point",[S[p]],c)),v[v.length-1]._is_new=!0)):v.push(T.select(S[p])),!this.isPoint(v[p]))return!1;return v},providePoints3D:function(T,S,w,g,m){var p,a,u,c,l,f=0,v=[];for(this.isArray(S)||(S=[S]),u=S.length,this.exists(m)&&(f=m.length),0===f&&(c=this.copyAttributes(w,T.board.options,g)),p=0;p<u;++p)if(f>0&&(a=Math.min(p,f-1),c=this.copyAttributes(w,T.board.options,g,m[a])),this.isArray(S[p])&&S[p].length>1?(v.push(T.create("point3d",S[p],c)),v[v.length-1]._is_new=!0):this.isFunction(S[p])?(l=S[p](),this.isArray(l)&&l.length>1&&(v.push(T.create("point3d",[S[p]],c)),v[v.length-1]._is_new=!0)):v.push(T.select(S[p])),!this.isPoint3D(v[p]))return!1;return v},bind:function(T,S){return function(){return T.apply(S,arguments)}},evaluate:function(T){return this.isFunction(T)?T():T},indexOf:function(T,S,w){var g,m=this.exists(w);if(Array.indexOf&&!m)return T.indexOf(S);for(g=0;g<T.length;g++)if(m&&T[g][w]===S||!m&&T[g]===S)return g;return-1},eliminateDuplicates:function(T){var S,w=T.length,g=[],m={};for(S=0;S<w;S++)m[T[S]]=0;for(S in m)m.hasOwnProperty(S)&&g.push(S);return g},swap:function(T,S,w){var g;return g=T[S],T[S]=T[w],T[w]=g,T},uniqueArray:function(T){var S,w,g,m=[];if(0===T.length)return[];for(S=0;S<T.length;S++)if(g=this.isArray(T[S]),this.exists(T[S]))for(w=S+1;w<T.length;w++)g&&E.cmpArrays(T[S],T[w])?T[S]=[]:g||T[S]!==T[w]||(T[S]="");else T[S]="";for(w=0,S=0;S<T.length;S++)(g=this.isArray(T[S]))||""===T[S]?g&&0!==T[S].length&&(m[w]=T[S].slice(0),w++):(m[w]=T[S],w++);return T=m,m},isInArray:function(T,S){return E.indexOf(T,S)>-1},coordsArrayToMatrix:function(T,S){var w,g=[],m=[];for(w=0;w<T.length;w++)S?(g.push(T[w].usrCoords[1]),m.push(T[w].usrCoords[2])):m.push([T[w].usrCoords[1],T[w].usrCoords[2]]);return S&&(m=[g,m]),m},cmpArrays:function(T,S){var w;if(T===S)return!0;if(T.length!==S.length)return!1;for(w=0;w<T.length;w++)if(this.isArray(T[w])&&this.isArray(S[w])){if(!this.cmpArrays(T[w],S[w]))return!1}else if(T[w]!==S[w])return!1;return!0},removeElementFromArray:function(T,S){var w;for(w=0;w<T.length;w++)if(T[w]===S)return T.splice(w,1),T;return T},trunc:function(T,S){return S=E.def(S,0),this.toFixed(T,S)},_decimalAdjust:function(T,S,w){return void 0===w||0==+w?Math[T](S):(S=+S,w=+w,isNaN(S)||"number"!=typeof w||w%1!=0?NaN:(S=S.toString().split("e"),+((S=(S=Math[T](+(S[0]+"e"+(S[1]?+S[1]-w:-w)))).toString().split("e"))[0]+"e"+(S[1]?+S[1]+w:w))))},_round10:function(T,S){return this._decimalAdjust("round",T,S)},_floor10:function(T,S){return this._decimalAdjust("floor",T,S)},_ceil10:function(T,S){return this._decimalAdjust("ceil",T,S)},toFixed:function(T,S){return this._round10(T,-S).toFixed(S)},autoDigits:function(T){var S=Math.abs(T);return S>=.1?this.toFixed(T,2):S>=.01?this.toFixed(T,4):S>=1e-4?this.toFixed(T,6):T},keys:function(T,S){var w,g=[];for(w in T)S?T.hasOwnProperty(w)&&g.push(w):g.push(w);return g},clone:function(T){var S={};return S.prototype=T,S},cloneAndCopy:function(T,S){var w,g=function(){};for(w in g.prototype=T,S)g[w]=S[w];return g},merge:function(T,S){var w,g;for(w in S)if(S.hasOwnProperty(w))if(this.isArray(S[w]))for(T[w]||(T[w]=[]),g=0;g<S[w].length;g++)T[w][g]="object"==typeof S[w][g]?this.merge(T[w][g],S[w][g]):S[w][g];else"object"==typeof S[w]?(T[w]||(T[w]={}),T[w]=this.merge(T[w],S[w])):T[w]=S[w];return T},deepCopy:function(T,S,w){var g,m,p,a;if(w=w||!1,"object"!=typeof T||null===T)return T;if(this.isArray(T))for(g=[],m=0;m<T.length;m++)g[m]="object"==typeof(p=T[m])?this.exists(p.board)?p.id:this.deepCopy(p):p;else{for(m in g={},T)T.hasOwnProperty(m)&&(g[a=w?m.toLowerCase():m]=null!==(p=T[m])&&"object"==typeof p?this.exists(p.board)?p.id:this.deepCopy(p):p);for(m in S)S.hasOwnProperty(m)&&(g[a=w?m.toLowerCase():m]="object"==typeof(p=S[m])?this.isArray(p)||!this.exists(g[a])?this.deepCopy(p):this.deepCopy(g[a],p,w):p)}return g},copyAttributes:function(T,S,w){var g,m,p,a,u,c={circle:1,curve:1,image:1,line:1,point:1,polygon:1,text:1,ticks:1,integral:1};for(g=(p=arguments.length)<3||c[w]?E.deepCopy(S.elements,null,!0):{},p<4&&this.exists(w)&&this.exists(S.layer[w])&&(g.layer=S.layer[w]),a=S,u=!0,m=2;m<p;m++){if(!this.exists(a[arguments[m]])){u=!1;break}a=a[arguments[m]]}for(u&&(g=E.deepCopy(g,a,!0)),a="object"==typeof T?T:{},u=!0,m=3;m<p;m++){if(!this.exists(a[arguments[m]])){u=!1;break}a=a[arguments[m]]}if(u&&this.extend(g,a,null,!0),"board"===arguments[2])return g;for(a=S,u=!0,m=2;m<p;m++){if(!this.exists(a[arguments[m]])){u=!1;break}a=a[arguments[m]]}return u&&this.exists(a.label)&&(g.label=E.deepCopy(a.label,g.label)),g.label=E.deepCopy(S.label,g.label),g},copyPrototypeMethods:function(T,S,w){var g;for(g in T.prototype[w]=S.prototype.constructor,S.prototype)S.prototype.hasOwnProperty(g)&&(T.prototype[g]=S.prototype[g])},toJSON:function(T,S){var w,g,m,p;if(S=E.def(S,!1),JSON.stringify&&!S)try{return JSON.stringify(T)}catch{}switch(typeof T){case"object":if(T){if(w=[],this.isArray(T)){for(m=0;m<T.length;m++)w.push(E.toJSON(T[m],S));return"["+w.join(",")+"]"}for(g in T)if(T.hasOwnProperty(g)){try{p=E.toJSON(T[g],S)}catch{p=""}w.push(S?g+":"+p:'"'+g+'":'+p)}return"{"+w.join(",")+"} "}return"null";case"string":return"'"+T.replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return T.toString()}return"0"},clearVisPropOld:function(T){return T.visPropOld={cssclass:"",cssdefaultstyle:"",cssstyle:"",fillcolor:"",fillopacity:"",firstarrow:!1,fontsize:-1,lastarrow:!1,left:-1e5,linecap:"",shadow:!1,strokecolor:"",strokeopacity:"",strokewidth:"",tabindex:-1e5,transitionduration:0,top:-1e5,visible:null},T},isInObject:function(T,S){var w;for(w in T)if(T.hasOwnProperty(w)&&T[w]===S)return!0;return!1},escapeHTML:function(T){return T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},unescapeHTML:function(T){return T.replace(/<\/?[^>]+>/gi,"").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")},capitalize:function(T){return T.charAt(0).toUpperCase()+T.substring(1).toLowerCase()},trimNumber:function(T){return"."!==(T=(T=T.replace(/^0+/,"")).replace(/0+$/,""))[T.length-1]&&","!==T[T.length-1]||(T=T.slice(0,-1)),"."!==T[0]&&","!==T[0]||(T="0"+T),T},filterElements:function(T,S){var w,g,m,p,a,u,c,l=T.length,f=[];if("function"!=typeof S&&"object"!=typeof S)return f;for(w=0;w<l;w++){if(c=!0,m=T[w],"object"==typeof S){for(g in S)if(S.hasOwnProperty(g)&&(p=g.toLowerCase(),a="function"==typeof m[g]?m[g]():m[g],u=m.visProp&&"function"==typeof m.visProp[p]?m.visProp[p]():m.visProp&&m.visProp[p],!(c="function"==typeof S[g]?S[g](a)||S[g](u):a===S[g]||u===S[g])))break}else"function"==typeof S&&(c=S(m));c&&f.push(m)}return f},trim:function(T){return T.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},sanitizeHTML:function(T,S){return"function"==typeof html_sanitize&&S?html_sanitize(T,function(){},function(w){return w}):(T&&"string"==typeof T&&(T=T.replace(/</g,"&lt;").replace(/>/g,"&gt;")),T)},evalSlider:function(T){return T&&T.type===I.OBJECT_TYPE_GLIDER&&"function"==typeof T.Value?T.Value():T}}),E}),define("utils/env",["jxg","utils/type"],function(E,I){"use strict";return E.extendConstants(E,{touchProperty:"touches"}),E.extend(E,{isTouchEvent:function(T){return E.exists(T[E.touchProperty])},isPointerEvent:function(T){return E.exists(T.pointerId)},isMouseEvent:function(T){return!E.isTouchEvent(T)&&!E.isPointerEvent(T)},getNumberOfTouchPoints:function(T){var S=-1;return E.isTouchEvent(T)&&(S=T[E.touchProperty].length),S},isFirstTouch:function(T){var S=E.getNumberOfTouchPoints(T);return E.isPointerEvent(T)?T.isPrimary:1===S},isBrowser:"object"==typeof window&&"object"==typeof document,supportsES6:function(){try{return new Function("(a = 0) => a"),!0}catch{return!1}},supportsVML:function(){return this.isBrowser&&!!document.namespaces},supportsSVG:function(){return this.isBrowser&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")},supportsCanvas:function(){var T=!1;if(this.isNode())try{T=!!__webpack_require__(Object(function(){var w=new Error("Cannot find module 'canvas'");throw w.code="MODULE_NOT_FOUND",w}()))}catch{}return T||this.isBrowser&&!!document.createElement("canvas").getContext},isNode:function(){return!this.isBrowser&&(!!module.exports||"object"==typeof global&&global.requirejsVars&&!global.requirejsVars.isBrowser)},isWebWorker:function(){return!this.isBrowser&&"object"==typeof self&&"function"==typeof self.postMessage},supportsPointerEvents:function(){return!!(this.isBrowser&&window.navigator&&(window.PointerEvent||window.navigator.pointerEnabled||window.navigator.msPointerEnabled))},isTouchDevice:function(){return this.isBrowser&&void 0!==window.ontouchstart},isAndroid:function(){return I.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("android")>-1},isWebkitAndroid:function(){return this.isAndroid()&&navigator.userAgent.indexOf(" AppleWebKit/")>-1},isApple:function(){return I.exists(navigator)&&(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)},isWebkitApple:function(){return this.isApple()&&navigator.userAgent.search(/Mobile\/[0-9A-Za-z.]*Safari/)>-1},isMetroApp:function(){return"object"==typeof window&&window.clientInformation&&window.clientInformation.appVersion&&window.clientInformation.appVersion.indexOf("MSAppHost")>-1},isMozilla:function(){return I.exists(navigator)&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1&&-1===navigator.userAgent.toLowerCase().indexOf("apple")},isFirefoxOS:function(){return I.exists(navigator)&&-1===navigator.userAgent.toLowerCase().indexOf("android")&&-1===navigator.userAgent.toLowerCase().indexOf("apple")&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1&&navigator.userAgent.toLowerCase().indexOf("mozilla")>-1},ieVersion:function(){var T,S,w=3;if("object"!=typeof document)return 0;S=(T=document.createElement("div")).getElementsByTagName("i");do{T.innerHTML="\x3c!--[if gt IE "+ ++w+"]><i></i><![endif]--\x3e"}while(S[0]);return w>4?w:void 0}(),getDimensions:function(T,S){var w,g,m,p,a,u,c,l,f,v=/\d+(\.\d*)?px/;if(!this.isBrowser||null===T)return{width:500,height:500};if(w=(S=S||document).getElementById(T),!I.exists(w))throw new Error("\nJSXGraph: HTML container element '"+T+"' not found.");return"none"!==(g=w.style.display)&&null!==g?w.clientWidth>0&&w.clientHeight>0?{width:w.clientWidth,height:w.clientHeight}:(f=window.getComputedStyle?window.getComputedStyle(w):w.style,{width:v.test(f.width)?parseFloat(f.width):0,height:v.test(f.height)?parseFloat(f.height):0}):(p=(m=w.style).visibility,a=m.position,u=m.display,m.visibility="hidden",m.position="absolute",m.display="block",c=w.clientWidth,l=w.clientHeight,m.display=u,m.position=a,m.visibility=p,{width:c,height:l})},addEvent:function(T,S,w,g){var m=function(){return w.apply(g,arguments)};m.origin=w,g["x_internal"+S]=g["x_internal"+S]||[],g["x_internal"+S].push(m),I.exists(T)&&I.exists(T.addEventListener)&&T.addEventListener(S,m,!1),I.exists(T)&&I.exists(T.attachEvent)&&T.attachEvent("on"+S,m)},removeEvent:function(T,S,w,g){var m;if(I.exists(g))if(I.exists(g["x_internal"+S]))if(I.isArray(g["x_internal"+S]))if(-1!==(m=I.indexOf(g["x_internal"+S],w,"origin"))){try{I.exists(T)&&I.exists(T.removeEventListener)&&T.removeEventListener(S,g["x_internal"+S][m],!1),I.exists(T)&&I.exists(T.detachEvent)&&T.detachEvent("on"+S,g["x_internal"+S][m])}catch{E.debug("event not registered in browser: ("+S+" -- "+w+")")}g["x_internal"+S].splice(m,1)}else E.debug("removeEvent: no such event function in internal list: "+w);else E.debug("owner[x_internal + "+S+"] is not an array");else E.debug("no such type: "+S);else E.debug("no such owner")},removeAllEvents:function(T,S,w){var g;if(w["x_internal"+S]){for(g=w["x_internal"+S].length-1;g>=0;g--)E.removeEvent(T,S,w["x_internal"+S][g].origin,w);w["x_internal"+S].length>0&&E.debug("removeAllEvents: Not all events could be removed.")}},getPosition:function(T,S,w){var g,m,p,a=0,u=0;if(T||(T=window.event),w=w||document,I.exists(p=T[E.touchProperty])&&0===p.length&&(p=T.changedTouches),I.exists(S)&&I.exists(p))if(-1===S){for(m=p.length,g=0;g<m;g++)if(p[g]){T=p[g];break}}else T=p[S];return T.clientX&&(a=T.clientX,u=T.clientY),[a,u]},getOffset:function(T){var S,w=T,g=T,m=w.offsetLeft-w.scrollLeft,p=w.offsetTop-w.scrollTop;for(m=(S=this.getCSSTransform([m,p],w))[0],p=S[1],w=w.offsetParent;w;){for(m+=w.offsetLeft,p+=w.offsetTop,w.offsetParent&&(m+=w.clientLeft-w.scrollLeft,p+=w.clientTop-w.scrollTop),m=(S=this.getCSSTransform([m,p],w))[0],p=S[1],g=g.parentNode;g!==w;)m=(S=this.getCSSTransform([m+=g.clientLeft-g.scrollLeft,p+=g.clientTop-g.scrollTop],g))[0],p=S[1],g=g.parentNode;w=w.offsetParent}return[m,p]},getStyle:function(T,S){var w,g=T.ownerDocument;return g.defaultView&&g.defaultView.getComputedStyle?w=g.defaultView.getComputedStyle(T,null).getPropertyValue(S):T.currentStyle&&E.ieVersion>=9?w=T.currentStyle[S]:T.style&&(S=S.replace(/-([a-z]|[0-9])/gi,function(m,p){return p.toUpperCase()}),w=T.style[S]),w},getProp:function(T,S){var w=parseInt(this.getStyle(T,S),10);return isNaN(w)?0:w},getCSSTransform:function(T,S){var w,g,m,p,a,u,c,l=["transform","webkitTransform","MozTransform","msTransform","oTransform"];for(a=l.length,w=0,m="";w<a;w++)if(I.exists(S.style[l[w]])){m=S.style[l[w]];break}if(""!==m&&(p=m.indexOf("("))>0){for(g=0,u=(c=m.substring(p+1,(a=m.length)-1).split(",")).length;g<u;g++)c[g]=parseFloat(c[g]);0===m.indexOf("matrix")?(T[0]+=c[4],T[1]+=c[5]):0===m.indexOf("translateX")?T[0]+=c[0]:0===m.indexOf("translateY")?T[1]+=c[0]:0===m.indexOf("translate")&&(T[0]+=c[0],T[1]+=c[1])}return I.exists(S.style.zoom)&&""!==(m=S.style.zoom)&&(T[0]*=parseFloat(m),T[1]*=parseFloat(m)),T},getCSSTransformMatrix:function(T){var S,w,g,m,p,a,u,c,l=T.ownerDocument,f=["transform","webkitTransform","MozTransform","msTransform","oTransform"],v=[[1,0,0],[0,1,0],[0,0,1]];if(l.defaultView&&l.defaultView.getComputedStyle)g=(c=l.defaultView.getComputedStyle(T,null)).getPropertyValue("-webkit-transform")||c.getPropertyValue("-moz-transform")||c.getPropertyValue("-ms-transform")||c.getPropertyValue("-o-transform")||c.getPropertyValue("transform");else for(p=f.length,S=0,g="";S<p;S++)if(I.exists(T.style[f[S]])){g=T.style[f[S]];break}if(""!==g&&(m=g.indexOf("("))>0){for(w=0,a=(u=g.substring(m+1,(p=g.length)-1).split(",")).length;w<a;w++)u[w]=parseFloat(u[w]);0===g.indexOf("matrix")?v=[[1,0,0],[0,u[0],u[1]],[0,u[2],u[3]]]:0===g.indexOf("scaleX")?v[1][1]=u[0]:0===g.indexOf("scaleY")?v[2][2]=u[0]:0===g.indexOf("scale")&&(v[1][1]=u[0],v[2][2]=u[1])}return I.exists(T.style.zoom)&&""!==(g=T.style.zoom)&&(v[1][1]*=parseFloat(g),v[2][2]*=parseFloat(g)),v},timedChunk:function(T,S,w,g){var m=T.concat(),p=function(){var a=+new Date;do{S.call(w,m.shift())}while(m.length>0&&+new Date-a<300);m.length>0?window.setTimeout(p,1):g(T)};window.setTimeout(p,1)},scaleJSXGraphDiv:function(T,S,w){var g,p,a,u,c,l,f,v,_,h,y=w.styleSheets.length,b=[":fullscreen",":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"],x=b.length,D=new RegExp(".*#"+T+":.*full.*screen.*#"+S+".*auto;.*transform:.*matrix");for(a=(u=w.getElementById(T).getBoundingClientRect()).height,p=u.width,l=(f=w.getElementById(S).getBoundingClientRect()).height,_="{margin:0 auto;transform:matrix("+(v=(c=f.width)/l>=p/a?.85*p/c:.85*a/l)+",0,0,"+v+",0,"+.5*(a-l)+");}",0===y&&((g=document.createElement("style")).appendChild(document.createTextNode("")),w.appendChild(g),y=w.styleSheets.length),w.styleSheets[y-1].cssRules.length>0&&D.test(w.styleSheets[y-1].cssRules[0].cssText)&&w.styleSheets[y-1].deleteRule&&w.styleSheets[y-1].deleteRule(0),h=0;h<x;h++)try{w.styleSheets[y-1].insertRule("#"+T+b[h]+" #"+S+_,0);break}catch{}h===x&&(console.log("JXG.scaleJSXGraphDiv: Could not add any CSS rule."),console.log("One possible reason could be that the id of the JSXGraph container does not start with a letter."))}}),E}),define("utils/xml",["jxg","utils/type"],function(E,I){"use strict";return E.XML={cleanWhitespace:function(T){for(var S=T.firstChild;I.exists(S);)3!==S.nodeType||/\S/.test(S.nodeValue)?1===S.nodeType&&this.cleanWhitespace(S):T.removeChild(S),S=S.nextSibling},parse:function(T){var S;return S=(new("function"==typeof DOMParser||"object"==typeof DOMParser?DOMParser:function(){this.parseFromString=function(g){var m;return"function"==typeof ActiveXObject&&(m=new ActiveXObject("MSXML.DomDocument")).loadXML(g),m}})).parseFromString(T,"text/xml"),this.cleanWhitespace(S),S}},E.XML}),define("utils/event",["jxg","utils/type"],function(E,I){"use strict";return E.EventEmitter={eventHandlers:{},suspended:{},trigger:function(T,S){var w,g,m,p,a,u;for(a=T.length,g=0;g<a;g++)if(p=this.eventHandlers[T[g]],!this.suspended[T[g]]){if(this.suspended[T[g]]=!0,p)for(u=p.length,w=0;w<u;w++)(m=p[w]).handler.apply(m.context,S);this.suspended[T[g]]=!1}return this},on:function(T,S,w){return I.isArray(this.eventHandlers[T])||(this.eventHandlers[T]=[]),w=I.def(w,this),this.eventHandlers[T].push({handler:S,context:w}),this},off:function(T,S){var w;return T&&I.isArray(this.eventHandlers[T])?(S?((w=I.indexOf(this.eventHandlers[T],S,"handler"))>-1&&this.eventHandlers[T].splice(w,1),0===this.eventHandlers[T].length&&delete this.eventHandlers[T]):delete this.eventHandlers[T],this):this},eventify:function(T){T.eventHandlers={},T.on=this.on,T.off=this.off,T.triggerEventHandlers=this.trigger,T.trigger=this.trigger,T.suspended={}}},E.EventEmitter}),define("math/math",["jxg","utils/type"],function(E,I){"use strict";var T,S=function(w){var g,m;return w.memo||(g={},m=Array.prototype.join,w.memo=function(){var p=m.call(arguments);return g[p]!==T?g[p]:g[p]=w.apply(this,arguments)}),w.memo};return E.Math={eps:1e-6,relDif:function(w,g){var m=Math.abs(w),p=Math.abs(g);return 0===(p=Math.max(m,p))?0:Math.abs(w-g)/p},mod:function(w,g){return w-Math.floor(w/g)*g},vector:function(w,g){var m,p;for(g=g||0,m=[],p=0;p<w;p++)m[p]=g;return m},matrix:function(w,g,m){var p,a,u;for(m=m||0,g=g||w,p=[],a=0;a<w;a++)for(p[a]=[],u=0;u<g;u++)p[a][u]=m;return p},identity:function(w,g){var m,p;for(g===T&&"number"!=typeof g&&(g=w),m=this.matrix(w,g),p=0;p<Math.min(w,g);p++)m[p][p]=1;return m},frustum:function(w,g,m,p,a,u){var c=this.matrix(4,4);return c[0][0]=2*a/(g-w),c[0][1]=0,c[0][2]=(g+w)/(g-w),c[0][3]=0,c[1][0]=0,c[1][1]=2*a/(p-m),c[1][2]=(p+m)/(p-m),c[1][3]=0,c[2][0]=0,c[2][1]=0,c[2][2]=-(u+a)/(u-a),c[2][3]=-u*a*2/(u-a),c[3][0]=0,c[3][1]=0,c[3][2]=-1,c[3][3]=0,c},projection:function(w,g,m,p){var a=m*Math.tan(w/2),u=a*g;return this.frustum(-u,u,-a,a,m,p)},matVecMult:function(w,g){var m,p,a,u=w.length,c=g.length,l=[];if(3===c)for(m=0;m<u;m++)l[m]=w[m][0]*g[0]+w[m][1]*g[1]+w[m][2]*g[2];else for(m=0;m<u;m++){for(p=0,a=0;a<c;a++)p+=w[m][a]*g[a];l[m]=p}return l},matMatMult:function(w,g){var m,p,a,u,c=w.length,l=c>0?g[0].length:0,f=g.length,v=this.matrix(c,l);for(m=0;m<c;m++)for(p=0;p<l;p++){for(a=0,u=0;u<f;u++)a+=w[m][u]*g[u][p];v[m][p]=a}return v},transpose:function(w){var g,m,p,a,u;for(g=this.matrix(u=w.length>0?w[0].length:0,a=w.length),m=0;m<u;m++)for(p=0;p<a;p++)g[m][p]=w[p][m];return g},inverse:function(w){var g,m,p,a,u,c,l,f=w.length,v=[],_=[],h=[];for(g=0;g<f;g++){for(v[g]=[],m=0;m<f;m++)v[g][m]=w[g][m];_[g]=g}for(m=0;m<f;m++){for(u=Math.abs(v[m][m]),c=m,g=m+1;g<f;g++)Math.abs(v[g][m])>u&&(u=Math.abs(v[g][m]),c=g);if(u<=this.eps)return[];if(c>m){for(p=0;p<f;p++)l=v[m][p],v[m][p]=v[c][p],v[c][p]=l;l=_[m],_[m]=_[c],_[c]=l}for(a=1/v[m][m],g=0;g<f;g++)v[g][m]*=a;for(v[m][m]=a,p=0;p<f;p++)if(p!==m){for(g=0;g<f;g++)g!==m&&(v[g][p]-=v[g][m]*v[m][p]);v[m][p]=-a*v[m][p]}}for(g=0;g<f;g++){for(p=0;p<f;p++)h[_[p]]=v[g][p];for(p=0;p<f;p++)v[g][p]=h[p]}return v},innerProduct:function(w,g,m){var p,a=0;for(m!==T&&I.isNumber(m)||(m=w.length),p=0;p<m;p++)a+=w[p]*g[p];return a},crossProduct:function(w,g){return[w[1]*g[2]-w[2]*g[1],w[2]*g[0]-w[0]*g[2],w[0]*g[1]-w[1]*g[0]]},norm:function(w,g){var m,p=0;for(g!==T&&I.isNumber(g)||(g=w.length),m=0;m<g;m++)p+=w[m]*w[m];return Math.sqrt(p)},axpy:function(w,g,m){var p,a=g.length,u=[];for(p=0;p<a;p++)u[p]=w*g[p]+m[p];return u},factorial:S(function(w){return w<0?NaN:0===(w=Math.floor(w))||1===w?1:w*this.factorial(w-1)}),binomial:S(function(w,g){var m,p;if(g>w||g<0)return NaN;if(g=Math.round(g),w=Math.round(w),0===g||g===w)return 1;for(m=1,p=0;p<g;p++)m*=w-p,m/=p+1;return m}),cosh:Math.cosh||function(w){return.5*(Math.exp(w)+Math.exp(-w))},sinh:Math.sinh||function(w){return.5*(Math.exp(w)-Math.exp(-w))},acosh:Math.acosh||function(w){return Math.log(w+Math.sqrt(w*w-1))},asinh:Math.asinh||function(w){return w===-1/0?w:Math.log(w+Math.sqrt(w*w+1))},cot:function(w){return 1/Math.tan(w)},acot:function(w){return(w>=0?.5:-.5)*Math.PI-Math.atan(w)},nthroot:function(w,g){var m=1/g;return g<=0||Math.floor(g)!==g?NaN:0===w?0:w>0?Math.exp(m*Math.log(w)):g%2==1?-Math.exp(m*Math.log(-w)):NaN},cbrt:Math.cbrt||function(w){return this.nthroot(w,3)},pow:function(w,g){return 0===w?0===g?1:0:Math.floor(g)===g?Math.pow(w,g):w>0?Math.exp(g*Math.log(w)):NaN},ratpow:function(w,g,m){var p;return 0===g?1:0===m?NaN:(p=this.gcd(g,m),this.nthroot(this.pow(w,g/p),m/p))},log10:function(w){return Math.log(w)/Math.log(10)},log2:function(w){return Math.log(w)/Math.log(2)},log:function(w,g){return void 0!==g&&I.isNumber(g)?Math.log(w)/Math.log(g):Math.log(w)},sign:Math.sign||function(w){return 0==(w=+w)||isNaN(w)?w:w>0?1:-1},squampow:function(w,g){var m;if(Math.floor(g)===g){for(m=1,g<0&&(w=1/w,g*=-1);0!==g;)1&g&&(m*=w),g>>=1,w*=w;return m}return this.pow(w,g)},gcd:function(w,g){if(w=Math.abs(w),g=Math.abs(g),!I.isNumber(w)||!I.isNumber(g))return NaN;if(g>w){var m=w;w=g,g=m}for(;;){if(0==(w%=g))return g;if(0==(g%=w))return w}},lcm:function(w,g){var m;return I.isNumber(w)&&I.isNumber(g)?0!=(m=w*g)?m/this.gcd(w,g):0:NaN},erf:function(w){return this.ProbFuncs.erf(w)},erfc:function(w){return this.ProbFuncs.erfc(w)},erfi:function(w){return this.ProbFuncs.erfi(w)},ndtr:function(w){return this.ProbFuncs.ndtr(w)},ndtri:function(w){return this.ProbFuncs.ndtri(w)},lt:function(w,g){return w<g},leq:function(w,g){return w<=g},gt:function(w,g){return w>g},geq:function(w,g){return w>=g},eq:function(w,g){return w===g},neq:function(w,g){return w!==g},and:function(w,g){return w&&g},not:function(w){return!w},or:function(w,g){return w||g},xor:function(w,g){return(w||g)&&!(w&&g)},normalize:function(w){var g,m,p=2*w[3],a=w[4]/p;return w[5]=a,w[6]=-w[1]/p,w[7]=-w[2]/p,isFinite(a)?Math.abs(a)>=1?(w[0]=(w[6]*w[6]+w[7]*w[7]-a*a)/(2*a),w[1]=-w[6]/a,w[2]=-w[7]/a,w[3]=1/(2*a),w[4]=1):(w[0]=(m=a<=0?-1:1)*(w[6]*w[6]+w[7]*w[7]-a*a)*.5,w[1]=-m*w[6],w[2]=-m*w[7],w[3]=m/2,w[4]=m*a):(g=Math.sqrt(w[1]*w[1]+w[2]*w[2]),w[0]/=g,w[1]/=g,w[2]/=g,w[3]=0,w[4]=1),w},toGL:function(w){var g,m,p;if(g="function"==typeof Float32Array?new Float32Array(16):new Array(16),4!==w.length&&4!==w[0].length)return g;for(m=0;m<4;m++)for(p=0;p<4;p++)g[m+4*p]=w[m][p];return g},Vieta:function(w){var g,m,p,a=w.length,u=[];for(u=w.slice(),g=1;g<a;++g){for(p=u[g],u[g]*=u[g-1],m=g-1;m>=1;--m)u[m]+=u[m-1]*p;u[0]+=p}return u}},E.Math}),define("base/coords",["jxg","base/constants","utils/event","utils/type","math/math"],function(E,I,T,S,w){"use strict";return E.Coords=function(g,m,p,a){this.board=p,this.usrCoords=[],this.scrCoords=[],this.emitter=!S.exists(a)||a,this.emitter&&T.eventify(this),this.setCoordinates(g,m,!1,!0)},E.extend(E.Coords.prototype,{normalizeUsrCoords:function(){Math.abs(this.usrCoords[0])>w.eps&&(this.usrCoords[1]/=this.usrCoords[0],this.usrCoords[2]/=this.usrCoords[0],this.usrCoords[0]=1)},usr2screen:function(g){var m=Math.round,p=this.board,a=this.usrCoords,u=p.origin.scrCoords;!0===g?(this.scrCoords[0]=m(a[0]),this.scrCoords[1]=m(a[0]*u[1]+a[1]*p.unitX),this.scrCoords[2]=m(a[0]*u[2]-a[2]*p.unitY)):(this.scrCoords[0]=a[0],this.scrCoords[1]=a[0]*u[1]+a[1]*p.unitX,this.scrCoords[2]=a[0]*u[2]-a[2]*p.unitY)},screen2usr:function(){var g=this.board.origin.scrCoords,m=this.scrCoords,p=this.board;this.usrCoords[0]=1,this.usrCoords[1]=(m[1]-g[1])/p.unitX,this.usrCoords[2]=(g[2]-m[2])/p.unitY},distance:function(g,m){var p,a,u=0,c=this.usrCoords,l=this.scrCoords;if(g===I.COORDS_BY_USER){if((u=(a=c[0]-(p=m.usrCoords)[0])*a)>w.eps*w.eps)return Number.POSITIVE_INFINITY;u+=(a=c[1]-p[1])*a,u+=(a=c[2]-p[2])*a}else u+=(a=l[1]-(p=m.scrCoords)[1])*a,u+=(a=l[2]-p[2])*a;return Math.sqrt(u)},setCoordinates:function(g,m,p,a){var u=this.usrCoords,c=this.scrCoords,l=[u[0],u[1],u[2]],f=[c[0],c[1],c[2]];return g===I.COORDS_BY_USER?(2===m.length?(u[0]=1,u[1]=m[0],u[2]=m[1]):(u[0]=m[0],u[1]=m[1],u[2]=m[2],this.normalizeUsrCoords()),this.usr2screen(p)):(2===m.length?(c[1]=m[0],c[2]=m[1]):(c[1]=m[1],c[2]=m[2]),this.screen2usr()),!this.emitter||a||f[1]===c[1]&&f[2]===c[2]||this.triggerEventHandlers(["update"],[l,f]),this},copy:function(g,m){return void 0===m&&(m=0),this[g].slice(m)},isReal:function(){return!isNaN(this.usrCoords[1]+this.usrCoords[2])&&Math.abs(this.usrCoords[0])>w.eps},__evt__update:function(g,m){},__evt:function(){}}),E.Coords}),define("utils/expect",["jxg","utils/type","base/constants","base/coords"],function(E,I,T,S){"use strict";var w={each:function(g,m,p){var a,u,c=[];if(I.exists(g.length))for(u=g.length,a=0;a<u;a++)c.push(m.call(this,g[a],p));return c},coords:function(g,m){var p=g;return g&&g.elementClass===T.OBJECT_CLASS_POINT?p=g.coords:g.usrCoords&&g.scrCoords&&g.usr2screen&&(p=g),m&&(p=new S(T.COORDS_BY_USER,p.usrCoords,p.board)),p},coordsArray:function(g,m){var p;return(p=I.isArray(g)?g:this.coords(g).usrCoords).length<3&&p.unshift(1),m&&(p=[p[0],p[1],p[2]]),p}};return E.Expect=w,w}),define("math/probfuncs",["math/math","utils/type"],function(E,I){"use strict";return E.ProbFuncs={MAXNUM:17014118346046923e22,SQRTH:.7071067811865476,SQRT2:1.4142135623730951,MAXLOG:708.3964185322641,P:[2.461969814735305e-10,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],Q:[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],R:[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],S:[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],T:[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],U:[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],M:128,MINV:.0078125,expx2:function(T,S){var w,g,m,p;return T=Math.abs(T),S<0&&(T=-T),w=(m=this.MINV*Math.floor(this.M*T+.5))*m,g=2*m*(p=T-m)+p*p,S<0&&(w=-w,g=-g),w+g>this.MAXLOG?1/0:w=Math.exp(w)*Math.exp(g)},polevl:function(T,S,w){var g,m;if(I.exists(S.reduce))return S.reduce(function(p,a){return p*T+a},0);for(m=0,g=0;m<=w;m++)g=g*T+S[m];return g},p1evl:function(T,S,w){var g,m;if(I.exists(S.reduce))return S.reduce(function(p,a){return p*T+a},1);for(m=0,g=1;m<w;m++)g=g*T+S[m];return g},ndtr:function(T){var S,w,g;return S=T*this.SQRTH,(g=Math.abs(S))<1?w=.5+.5*this.erf(S):(w=.5*this.erfce(g),g=this.expx2(T,-1),w*=Math.sqrt(g),S>0&&(w=1-w)),w},_underflow:function(T){return console.log("erfc","UNDERFLOW"),T<0?2:0},erfc:function(T){var S,w,g,m,p;return(g=T<0?-T:T)<1?1-this.erf(T):(p=-T*T)<-this.MAXLOG?this._underflow(T):(p=this.expx2(T,-1),g<8?(S=this.polevl(g,this.P,8),w=this.p1evl(g,this.Q,8)):(S=this.polevl(g,this.R,5),w=this.p1evl(g,this.S,6)),m=p*S/w,T<0&&(m=2-m),0===m?this._underflow(T):m)},erfce:function(T){var S,w;return T<8?(S=this.polevl(T,this.P,8),w=this.p1evl(T,this.Q,8)):(S=this.polevl(T,this.R,5),w=this.p1evl(T,this.S,6)),S/w},erf:function(T){var S;return Math.abs(T)>1?1-this.erfc(T):T*this.polevl(S=T*T,this.T,4)/this.p1evl(S,this.U,5)},s2pi:2.5066282746310007,P0:[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],Q0:[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],P1:[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],Q1:[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],P2:[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6.239745391849833e-9],Q2:[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6.790194080099813e-9],ndtri:function(T){var S,w,g,m,p;return T<=0?-1/0:T>=1?1/0:(p=1,(w=T)>.8646647167633873&&(w=1-w,p=0),w>.1353352832366127?(S=(w-=.5)+w*((m=w*w)*this.polevl(m,this.P0,4)/this.p1evl(m,this.Q0,8)),S*=this.s2pi):(g=1/(S=Math.sqrt(-2*Math.log(w))),S=S-Math.log(S)/S-(S<8?g*this.polevl(g,this.P1,8)/this.p1evl(g,this.Q1,8):g*this.polevl(g,this.P2,8)/this.p1evl(g,this.Q2,8)),0!==p&&(S=-S),S))},erfi:function(T){return this.ndtri(.5*(T+1))*this.SQRTH}},E.ProbFuncs}),define("math/ia",["jxg","math/math","utils/type"],function(E,I,T){"use strict";E.Math.DoubleBits=function(){var m,p,a,c,l,f,v=new Float64Array(1),_=new Uint32Array(v.buffer);void 0!==Float64Array&&(v[0]=1,1072693248===_[1]?(m=function(h,y){return _[0]=h,_[1]=y,v[0]},p=function(h){return v[0]=h,_[0]},a=function(h){return v[0]=h,_[1]},this.doubleBits=function(h){return v[0]=h,[_[0],_[1]]},this.pack=m,this.lo=p,this.hi=a):1072693248===_[0]&&(c=function(h,y){return _[1]=h,_[0]=y,v[0]},l=function(h){return v[0]=h,_[1]},f=function(h){return v[0]=h,_[0]},this.doubleBits=function(h){return v[0]=h,[_[1],_[0]]},this.pack=c,this.lo=l,this.hi=f))},E.extend(E.Math.DoubleBits.prototype,{sign:function(g){return this.hi(g)>>>31},exponent:function(g){return(this.hi(g)<<1>>>21)-1023},fraction:function(g){var m=this.lo(g),p=this.hi(g),a=1048575&p;return 2146435072&p&&(a+=1<<20),[m,a]},denormalized:function(g){return!(2146435072&this.hi(g))}});var S=new E.Math.DoubleBits,w=function(g,m){if(void 0!==g&&void 0!==m){if(I.IntervalArithmetic.isInterval(g)){if(!I.IntervalArithmetic.isSingleton(g))throw new TypeError("JXG.Math.IntervalArithmetic: interval `lo` must be a singleton");this.lo=g.lo}else this.lo=g;if(I.IntervalArithmetic.isInterval(m)){if(!I.IntervalArithmetic.isSingleton(m))throw new TypeError("JXG.Math.IntervalArithmetic: interval `hi` must be a singleton");this.hi=m.hi}else this.hi=m}else{if(void 0!==g)return Array.isArray(g)?new w(g[0],g[1]):new w(g,g);this.lo=this.hi=0}};return E.extend(w.prototype,{print:function(){console.log("[",this.lo,this.hi,"]")},set:function(g,m){return this.lo=g,this.hi=m,this},bounded:function(g,m){return this.set(I.IntervalArithmetic.prev(g),I.IntervalArithmetic.next(m))},boundedSingleton:function(g){return this.bounded(g,g)},assign:function(g,m){if("number"!=typeof g||"number"!=typeof m)throw new TypeError("JXG.Math.Interval#assign: arguments must be numbers");return isNaN(g)||isNaN(m)||g>m?this.setEmpty():this.set(g,m)},setEmpty:function(){return this.set(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY)},setWhole:function(){return this.set(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY)},open:function(g,m){return this.assign(I.IntervalArithmetic.next(g),I.IntervalArithmetic.prev(m))},halfOpenLeft:function(g,m){return this.assign(I.IntervalArithmetic.next(g),m)},halfOpenRight:function(g,m){return this.assign(g,I.IntervalArithmetic.prev(m))},toArray:function(){return[this.lo,this.hi]},clone:function(){return(new w).set(this.lo,this.hi)}}),E.Math.IntervalArithmetic={Interval:function(g,m){return new w(g,m)},isInterval:function(g){return null!==g&&"object"==typeof g&&"number"==typeof g.lo&&"number"==typeof g.hi},isSingleton:function(g){return g.lo===g.hi},add:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),new w(this.addLo(g.lo,m.lo),this.addHi(g.hi,m.hi))},sub:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),new w(this.subLo(g.lo,m.hi),this.subHi(g.hi,m.lo))},mul:function(g,m){var p,a,u,c,l;return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),this.isEmpty(g)||this.isEmpty(m)?this.EMPTY.clone():(p=g.lo,a=g.hi,u=m.lo,c=m.hi,l=new w,p<0?a>0?u<0?c>0?(l.lo=Math.min(this.mulLo(p,c),this.mulLo(a,u)),l.hi=Math.max(this.mulHi(p,u),this.mulHi(a,c))):(l.lo=this.mulLo(a,u),l.hi=this.mulHi(p,u)):c>0?(l.lo=this.mulLo(p,c),l.hi=this.mulHi(a,c)):(l.lo=0,l.hi=0):u<0?c>0?(l.lo=this.mulLo(p,c),l.hi=this.mulHi(p,u)):(l.lo=this.mulLo(a,c),l.hi=this.mulHi(p,u)):c>0?(l.lo=this.mulLo(p,c),l.hi=this.mulHi(a,u)):(l.lo=0,l.hi=0):a>0?u<0?c>0?(l.lo=this.mulLo(a,u),l.hi=this.mulHi(a,c)):(l.lo=this.mulLo(a,u),l.hi=this.mulHi(p,c)):c>0?(l.lo=this.mulLo(p,u),l.hi=this.mulHi(a,c)):(l.lo=0,l.hi=0):(l.lo=0,l.hi=0),l)},div:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),this.isEmpty(g)||this.isEmpty(m)?this.EMPTY.clone():this.zeroIn(m)?0!==m.lo?0!==m.hi?this.divZero(g):this.divNegative(g,m.lo):0!==m.hi?this.divPositive(g,m.hi):this.EMPTY.clone():this.divNonZero(g,m)},positive:function(g){return new w(g.lo,g.hi)},negative:function(g){return T.isNumber(g)?new w(-g):new w(-g.hi,-g.lo)},isEmpty:function(g){return g.lo>g.hi},isWhole:function(g){return g.lo===-1/0&&g.hi===1/0},zeroIn:function(g){return this.hasValue(g,0)},hasValue:function(g,m){return!this.isEmpty(g)&&g.lo<=m&&m<=g.hi},hasInterval:function(g,m){return!!this.isEmpty(g)||!this.isEmpty(m)&&m.lo<=g.lo&&g.hi<=m.hi},intervalsOverlap:function(g,m){return!this.isEmpty(g)&&!this.isEmpty(m)&&(g.lo<=m.lo&&m.lo<=g.hi||m.lo<=g.lo&&g.lo<=m.hi)},divNonZero:function(g,m){var p=g.lo,a=g.hi,u=m.lo,c=m.hi,l=new w;return a<0?c<0?(l.lo=this.divLo(a,u),l.hi=this.divHi(p,c)):(l.lo=this.divLo(p,u),l.hi=this.divHi(a,c)):p<0?c<0?(l.lo=this.divLo(a,c),l.hi=this.divHi(p,c)):(l.lo=this.divLo(p,u),l.hi=this.divHi(a,u)):c<0?(l.lo=this.divLo(a,c),l.hi=this.divHi(p,u)):(l.lo=this.divLo(p,c),l.hi=this.divHi(a,u)),l},divPositive:function(g,m){return 0===g.lo&&0===g.hi?g:this.zeroIn(g)?this.WHOLE:g.hi<0?new w(Number.NEGATIVE_INFINITY,this.divHi(g.hi,m)):new w(this.divLo(g.lo,m),Number.POSITIVE_INFINITY)},divNegative:function(g,m){return 0===g.lo&&0===g.hi?g:this.zeroIn(g)?this.WHOLE:g.hi<0?new w(this.divLo(g.hi,m),Number.POSITIVE_INFINITY):new w(Number.NEGATIVE_INFINITY,this.divHi(g.lo,m))},divZero:function(g){return 0===g.lo&&0===g.hi?g:this.WHOLE},fmod:function(g,m){var a;return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),this.isEmpty(g)||this.isEmpty(m)?this.EMPTY.clone():(a=(a=g.lo/(g.lo<0?m.lo:m.hi))<0?Math.ceil(a):Math.floor(a),this.sub(g,this.mul(m,new w(a))))},multiplicativeInverse:function(g){return T.isNumber(g)&&(g=this.Interval(g)),this.isEmpty(g)?this.EMPTY.clone():this.zeroIn(g)?0!==g.lo?0!==g.hi?this.WHOLE:new w(Number.NEGATIVE_INFINITY,this.divHi(1,g.lo)):0!==g.hi?new w(this.divLo(1,g.hi),Number.POSITIVE_INFINITY):this.EMPTY.clone():new w(this.divLo(1,g.hi),this.divHi(1,g.lo))},pow:function(g,m){var p,a;if(T.isNumber(g)&&(g=this.Interval(g)),this.isEmpty(g))return this.EMPTY.clone();if(this.isInterval(m)){if(!this.isSingleton(m))return this.EMPTY.clone();m=m.lo}return 0===m?0===g.lo&&0===g.hi?this.EMPTY.clone():this.ONE.clone():m<0?this.pow(this.multiplicativeInverse(g),-m):m%1==0?g.hi<0?(p=this.powLo(-g.hi,m),a=this.powHi(-g.lo,m),1==(1&m)?new w(-a,-p):new w(p,a)):g.lo<0?1==(1&m)?new w(-this.powLo(-g.lo,m),this.powHi(g.hi,m)):new w(0,this.powHi(Math.max(-g.lo,g.hi),m)):new w(this.powLo(g.lo,m),this.powHi(g.hi,m)):(console.warn("power is not an integer, you should use nth-root instead, returning an empty interval"),this.EMPTY.clone())},sqrt:function(g){return T.isNumber(g)&&(g=this.Interval(g)),this.nthRoot(g,2)},nthRoot:function(g,m){var p,a,u,c,l;if(T.isNumber(g)&&(g=this.Interval(g)),this.isEmpty(g)||m<0)return this.EMPTY.clone();if(this.isInterval(m)){if(!this.isSingleton(m))return this.EMPTY.clone();m=m.lo}return p=1/m,g.hi<0?m%1==0&&1==(1&m)?(a=this.powHi(-g.lo,p),u=this.powLo(-g.hi,p),new w(-a,-u)):this.EMPTY.clone():g.lo<0?(c=this.powHi(g.hi,p),m%1==0&&1==(1&m)?(l=-this.powHi(-g.lo,p),new w(l,c)):new w(0,c)):new w(this.powLo(g.lo,p),this.powHi(g.hi,p))},exp:function(g){return T.isNumber(g)&&(g=this.Interval(g)),this.isEmpty(g)?this.EMPTY.clone():new w(this.expLo(g.lo),this.expHi(g.hi))},log:function(g){var m;return T.isNumber(g)&&(g=this.Interval(g)),this.isEmpty(g)?this.EMPTY.clone():(m=g.lo<=0?Number.NEGATIVE_INFINITY:this.logLo(g.lo),new w(m,this.logHi(g.hi)))},ln:function(g){return this.log(g)},log10:function(g){return this.isEmpty(g)?this.EMPTY.clone():this.div(this.log(g),this.log(new w(10,10)))},log2:function(g){return this.isEmpty(g)?this.EMPTY.clone():this.div(this.log(g),this.log(new w(2,2)))},hull:function(g,m){var p=this.isEmpty(g),a=this.isEmpty(m);return p&&a?this.EMPTY.clone():p?m.clone():a?g.clone():new w(Math.min(g.lo,m.lo),Math.max(g.hi,m.hi))},intersection:function(g,m){var p,a;return this.isEmpty(g)||this.isEmpty(m)?this.EMPTY.clone():(p=Math.max(g.lo,m.lo))<=(a=Math.min(g.hi,m.hi))?new w(p,a):this.EMPTY.clone()},union:function(g,m){if(!this.intervalsOverlap(g,m))throw new Error("Interval#unions do not overlap");return new w(Math.min(g.lo,m.lo),Math.max(g.hi,m.hi))},difference:function(g,m){if(this.isEmpty(g)||this.isWhole(m))return this.EMPTY.clone();if(this.intervalsOverlap(g,m)){if(g.lo<m.lo&&m.hi<g.hi)throw new Error("Interval.difference: difference creates multiple intervals");return m.lo<=g.lo&&m.hi===1/0||m.hi>=g.hi&&m.lo===-1/0?this.EMPTY.clone():m.lo<=g.lo?(new w).halfOpenLeft(m.hi,g.hi):(new w).halfOpenRight(g.lo,m.lo)}return g.clone()},width:function(g){return this.isEmpty(g)?0:this.subHi(g.hi,g.lo)},abs:function(g){return T.isNumber(g)&&(g=this.Interval(g)),this.isEmpty(g)?this.EMPTY.clone():g.lo>=0?g.clone():g.hi<=0?this.negative(g):new w(0,Math.max(-g.lo,g.hi))},max:function(g,m){var p=this.isEmpty(g),a=this.isEmpty(m);return p&&a?this.EMPTY.clone():p?m.clone():a?g.clone():new w(Math.max(g.lo,m.lo),Math.max(g.hi,m.hi))},min:function(g,m){var p=this.isEmpty(g),a=this.isEmpty(m);return p&&a?this.EMPTY.clone():p?m.clone():a?g.clone():new w(Math.min(g.lo,m.lo),Math.min(g.hi,m.hi))},onlyInfinity:function(g){return!isFinite(g.lo)&&g.lo===g.hi},_handleNegative:function(g){var m;return g.lo<0&&(g.lo===-1/0?(g.lo=0,g.hi=1/0):(m=Math.ceil(-g.lo/this.piTwiceLow),g.lo+=this.piTwiceLow*m,g.hi+=this.piTwiceLow*m)),g},cos:function(g){var m,p,a,u,c,l,f,v;return this.isEmpty(g)||this.onlyInfinity(g)?this.EMPTY.clone():(m=(new w).set(g.lo,g.hi),this._handleNegative(m),a=this.fmod(m,p=this.PI_TWICE),this.width(a)>=p.lo?new w(-1,1):a.lo>=this.piHigh?(u=this.cos(this.sub(a,this.PI)),this.negative(u)):(c=a.lo,f=this.cosLo(l=a.hi),v=this.cosHi(c),l<=this.piLow?new w(f,v):new w(-1,l<=p.lo?Math.max(f,v):1)))},sin:function(g){return this.isEmpty(g)||this.onlyInfinity(g)?this.EMPTY.clone():this.cos(this.sub(g,this.PI_HALF))},tan:function(g){var m,p,a;return this.isEmpty(g)||this.onlyInfinity(g)?this.EMPTY.clone():(m=(new w).set(g.lo,g.hi),this._handleNegative(m),(p=this.fmod(m,a=this.PI)).lo>=this.piHalfLow&&(p=this.sub(p,a)),p.lo<=-this.piHalfLow||p.hi>=this.piHalfLow?this.WHOLE.clone():new w(this.tanLo(p.lo),this.tanHi(p.hi)))},asin:function(g){var m,p;return this.isEmpty(g)||g.hi<-1||g.lo>1?this.EMPTY.clone():(m=g.lo<=-1?-this.piHalfHigh:this.asinLo(g.lo),p=g.hi>=1?this.piHalfHigh:this.asinHi(g.hi),new w(m,p))},acos:function(g){var m,p;return this.isEmpty(g)||g.hi<-1||g.lo>1?this.EMPTY.clone():(m=g.hi>=1?0:this.acosLo(g.hi),p=g.lo<=-1?this.piHigh:this.acosHi(g.lo),new w(m,p))},atan:function(g){return this.isEmpty(g)?this.EMPTY.clone():new w(this.atanLo(g.lo),this.atanHi(g.hi))},sinh:function(g){return this.isEmpty(g)?this.EMPTY.clone():new w(this.sinhLo(g.lo),this.sinhHi(g.hi))},cosh:function(g){return this.isEmpty(g)?this.EMPTY.clone():g.hi<0?new w(this.coshLo(g.hi),this.coshHi(g.lo)):g.lo>=0?new w(this.coshLo(g.lo),this.coshHi(g.hi)):new w(1,this.coshHi(-g.lo>g.hi?g.lo:g.hi))},tanh:function(g){return this.isEmpty(g)?this.EMPTY.clone():new w(this.tanhLo(g.lo),this.tanhHi(g.hi))},equal:function(g,m){return this.isEmpty(g)?this.isEmpty(m):!this.isEmpty(m)&&g.lo===m.lo&&g.hi===m.hi},notEqual:function(g,m){return this.isEmpty(g)?!this.isEmpty(m):this.isEmpty(m)||g.hi<m.lo||g.lo>m.hi},lt:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),!this.isEmpty(g)&&!this.isEmpty(m)&&g.hi<m.lo},gt:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),!this.isEmpty(g)&&!this.isEmpty(m)&&g.lo>m.hi},leq:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),!this.isEmpty(g)&&!this.isEmpty(m)&&g.hi<=m.lo},geq:function(g,m){return T.isNumber(g)&&(g=this.Interval(g)),T.isNumber(m)&&(m=this.Interval(m)),!this.isEmpty(g)&&!this.isEmpty(m)&&g.lo>=m.hi},piLow:3.141592653589793,piHigh:3.1415926535897936,piHalfLow:1.5707963267948966,piHalfHigh:1.5707963267948968,piTwiceLow:6.283185307179586,piTwiceHigh:6.283185307179587,identity:function(g){return g},_prev:function(g){return g===1/0?g:this.nextafter(g,-1/0)},_next:function(g){return g===-1/0?g:this.nextafter(g,1/0)},prev:function(g){return this._prev(g)},next:function(g){return this._next(g)},toInteger:function(g){return g<0?Math.ceil(g):Math.floor(g)},addLo:function(g,m){return this.prev(g+m)},addHi:function(g,m){return this.next(g+m)},subLo:function(g,m){return this.prev(g-m)},subHi:function(g,m){return this.next(g-m)},mulLo:function(g,m){return this.prev(g*m)},mulHi:function(g,m){return this.next(g*m)},divLo:function(g,m){return this.prev(g/m)},divHi:function(g,m){return this.next(g/m)},intLo:function(g){return this.toInteger(this.prev(g))},intHi:function(g){return this.toInteger(this.next(g))},logLo:function(g){return this.prev(Math.log(g))},logHi:function(g){return this.next(Math.log(g))},expLo:function(g){return this.prev(Math.exp(g))},expHi:function(g){return this.next(Math.exp(g))},sinLo:function(g){return this.prev(Math.sin(g))},sinHi:function(g){return this.next(Math.sin(g))},cosLo:function(g){return this.prev(Math.cos(g))},cosHi:function(g){return this.next(Math.cos(g))},tanLo:function(g){return this.prev(Math.tan(g))},tanHi:function(g){return this.next(Math.tan(g))},asinLo:function(g){return this.prev(Math.asin(g))},asinHi:function(g){return this.next(Math.asin(g))},acosLo:function(g){return this.prev(Math.acos(g))},acosHi:function(g){return this.next(Math.acos(g))},atanLo:function(g){return this.prev(Math.atan(g))},atanHi:function(g){return this.next(Math.atan(g))},sinhLo:function(g){return this.prev(I.sinh(g))},sinhHi:function(g){return this.next(I.sinh(g))},coshLo:function(g){return this.prev(I.cosh(g))},coshHi:function(g){return this.next(I.cosh(g))},tanhLo:function(g){return this.prev(I.tanh(g))},tanhHi:function(g){return this.next(I.tanh(g))},sqrtLo:function(g){return this.prev(Math.sqrt(g))},sqrtHi:function(g){return this.next(Math.sqrt(g))},powLo:function(g,m){var p;if(m%1!=0)return this.prev(Math.pow(g,m));for(p=1==(1&m)?g:1,m>>=1;m>0;)g=this.mulLo(g,g),1==(1&m)&&(p=this.mulLo(g,p)),m>>=1;return p},powHi:function(g,m){var p;if(m%1!=0)return this.next(Math.pow(g,m));for(p=1==(1&m)?g:1,m>>=1;m>0;)g=this.mulHi(g,g),1==(1&m)&&(p=this.mulHi(g,p)),m>>=1;return p},disable:function(){this.next=this.prev=this.identity},enable:function(){this.prev=function(g){return this._prev(g)},this.next=function(g){return this._next(g)}},SMALLEST_DENORM:Math.pow(2,-1074),UINT_MAX:-1>>>0,nextafter:function(g,m){var p,a;return isNaN(g)||isNaN(m)?NaN:g===m?g:0===g?m<0?-this.SMALLEST_DENORM:this.SMALLEST_DENORM:(a=S.hi(g),p=S.lo(g),m>g==g>0?p===this.UINT_MAX?(a+=1,p=0):p+=1:0===p?(p=this.UINT_MAX,a-=1):p-=1,S.pack(p,a))}},E.Math.IntervalArithmetic.PI=new w(I.IntervalArithmetic.piLow,I.IntervalArithmetic.piHigh),E.Math.IntervalArithmetic.PI_HALF=new w(I.IntervalArithmetic.piHalfLow,I.IntervalArithmetic.piHalfHigh),E.Math.IntervalArithmetic.PI_TWICE=new w(I.IntervalArithmetic.piTwiceLow,I.IntervalArithmetic.piTwiceHigh),E.Math.IntervalArithmetic.ZERO=new w(0),E.Math.IntervalArithmetic.ONE=new w(1),E.Math.IntervalArithmetic.WHOLE=(new w).setWhole(),E.Math.IntervalArithmetic.EMPTY=(new w).setEmpty(),E.Math.IntervalArithmetic}),define("math/extrapolate",["math/math"],function(E){"use strict";return E.Extrapolate={upper:15,infty:1e4,wynnEps:function(I,T,S){var w,g,m,p,a;if(S[T]=I,0===T)a=I;else{for(m=0,w=T;w>0;w--)g=m,p=S[w]-(m=S[w-1]),S[w-1]=Math.abs(p)<=1e-15?1e20:1*g+1/p;a=S[T%2]}return a},aitken:function(I,T,S){var w,g,m,p,a,u;if(S[T]=I,T<2)w=I;else{for(p=T/2,a=1;a<=p;a++)g=S[2+(u=T-2*a)]-2*S[u+1]+S[u],Math.abs(g)<1e-15?S[u]=1e20:S[u]-=(m=S[u]-S[u+1])*m/g;w=S[T%2]}return w},brezinski:function(I,T,S){var w,g,m,p,a,u,c,l;if(S[T]=I,T<3)w=I;else{for(u=T/3,l=T,c=1;c<=u;c++)m=S[1+(l-=3)]-S[l],g=(a=S[l+3]-S[l+2])*((p=S[l+2]-S[l+1])-m)-m*(a-p),S[l]=Math.abs(g)<1e-15?1e20:S[l+1]-m*p*(a-p)/g;w=S[T%3]}return w},iteration:function(I,T,S,w,g){var m,p,a,c=NaN,l=[],f="finite",v=T;for(g=g||0,m=1;m<=this.upper;m++){if(p=S(I+(v=0===g?T/(m+1):.5*v),!0),a=this[w](p,m-1,l),isNaN(a)){f="NaN";break}if(0!==p&&a/p>this.infty){c=a,f="infinite";break}if(Math.abs(a-c)<1e-7)break;c=a}return[c,f,1-(m-1)/this.upper]},levin:function(I,T,S,w,g,m){var p,a,u,c;if(c=1/(w+T),g[T]=I/S,m[T]=1/S,T>0&&(g[T-1]=g[T]-g[T-1],m[T-1]=m[T]-m[T-1],T>1))for(u=(w+T-1)*c,p=2;p<=T;p++)a=(w+T-p)*Math.pow(u,p-2)*c,g[T-p]=g[T-p+1]-a*g[T-p],m[T-p]=m[T-p+1]-a*m[T-p],c*=u;return Math.abs(m[0])<1e-15?1e20:g[0]/m[0]},iteration_levin:function(I,T,S,w){var g,m,p,a,u,c,l,f=NaN,v=[],_=[],h="finite",y=T;for(w=w||0,a=S(I+T,!0),g=1;g<=this.upper;g++){if(u=(m=S(I+(y=0===w?T/(g+1):.5*y),!0))-a,l="u"==(Math.abs(u)<1?"u":"t")?(1+g)*u:u,a=m,c=(p=this.levin(m,g-1,l,1,v,_))-f,isNaN(p)){h="NaN";break}if(0!==m&&p/m>this.infty){f=p,h="infinite";break}if(Math.abs(c)<1e-7)break;f=p}return[f,h,1-(g-1)/this.upper]},limit:function(I,T,S){return this.iteration_levin(I,T,S,0)}},E.Extrapolate}),define("math/qdt",["math/math","utils/type"],function(E,I){"use strict";return E.Quadtree=function(T){this.capacity=10,this.points=[],this.xlb=T[0],this.xub=T[2],this.ylb=T[3],this.yub=T[1],this.northWest=null,this.northEast=null,this.southEast=null,this.southWest=null},I.extend(E.Quadtree.prototype,{contains:function(T,S){return this.xlb<T&&T<=this.xub&&this.ylb<S&&S<=this.yub},insert:function(T){return!!this.contains(T.usrCoords[1],T.usrCoords[2])&&(this.points.length<this.capacity?(this.points.push(T),!0):(null===this.northWest&&this.subdivide(),!!(this.northWest.insert(T)||this.northEast.insert(T)||this.southEast.insert(T)||this.southWest.insert(T))))},subdivide:function(){var T,S=this.points.length,w=this.xlb+(this.xub-this.xlb)/2,g=this.ylb+(this.yub-this.ylb)/2;for(this.northWest=new E.Quadtree([this.xlb,this.yub,w,g]),this.northEast=new E.Quadtree([w,this.yub,this.xub,g]),this.southEast=new E.Quadtree([this.xlb,g,w,this.ylb]),this.southWest=new E.Quadtree([w,g,this.xub,this.ylb]),T=0;T<S;T+=1)this.northWest.insert(this.points[T]),this.northEast.insert(this.points[T]),this.southEast.insert(this.points[T]),this.southWest.insert(this.points[T])},_query:function(T,S){var w;if(this.contains(T,S)){if(null===this.northWest)return this;if((w=this.northWest._query(T,S))||(w=this.northEast._query(T,S))||(w=this.southEast._query(T,S))||(w=this.southWest._query(T,S)))return w}return!1},query:function(T,S){var w,g;return I.exists(S)?(w=T,g=S):(w=T.usrCoords[1],g=T.usrCoords[2]),this._query(w,g)}}),E.Quadtree}),define("math/numerics",["jxg","utils/type","utils/env","math/math"],function(E,I,T,S){"use strict";var w={rk4:{s:4,A:[[0,0,0,0],[.5,0,0,0],[0,.5,0,0],[0,0,1,0]],b:[.16666666666666666,.3333333333333333,.3333333333333333,.16666666666666666],c:[0,.5,.5,1]},heun:{s:2,A:[[0,0],[1,0]],b:[.5,.5],c:[0,1]},euler:{s:1,A:[[0]],b:[1],c:[0]}};return S.Numerics={Gauss:function(g,m){var p,a,u,c,l,f=S.eps,v=g.length>0?g[0].length:0;if(v!==m.length||v!==g.length)throw new Error("JXG.Math.Numerics.Gauss: Dimensions don't match. A must be a square matrix and b must be of the same length as A.");for(c=[],l=m.slice(0,v),p=0;p<v;p++)c[p]=g[p].slice(0,v);for(a=0;a<v;a++){for(p=v-1;p>a;p--)if(Math.abs(c[p][a])>f)if(Math.abs(c[a][a])<f)I.swap(c,p,a),I.swap(l,p,a);else for(c[p][a]/=c[a][a],l[p]-=c[p][a]*l[a],u=a+1;u<v;u++)c[p][u]-=c[p][a]*c[a][u];if(Math.abs(c[a][a])<f)throw new Error("JXG.Math.Numerics.Gauss(): The given matrix seems to be singular.")}return this.backwardSolve(c,l,!0),l},backwardSolve:function(g,m,p){var a,c,l,f;for(a=p?m:m.slice(0,m.length),c=g.length>0?g[0].length:0,l=g.length-1;l>=0;l--){for(f=c-1;f>l;f--)a[l]-=g[l][f]*a[f];a[l]/=g[l][l]}return a},gaussBareiss:function(g){var m,p,a,u,c,l,f,v,_,h=S.eps;if((f=g.length)<=0)return 0;for(g[0].length<f&&(f=g[0].length),v=[],u=0;u<f;u++)v[u]=g[u].slice(0,f);for(p=1,a=1,m=0;m<f-1;m++){if(l=v[m][m],Math.abs(l)<h){for(u=m+1;u<f&&!(Math.abs(v[u][m])>=h);u++);if(u===f)return 0;for(c=m;c<f;c++)_=v[u][c],v[u][c]=v[m][c],v[m][c]=_;a=-a,l=v[m][m]}for(u=m+1;u<f;u++)for(c=m+1;c<f;c++)v[u][c]=(_=l*v[u][c]-v[u][m]*v[m][c])/p;p=l}return a*v[f-1][f-1]},det:function(g){return 2===g.length&&2===g[0].length?g[0][0]*g[1][1]-g[1][0]*g[0][1]:this.gaussBareiss(g)},Jacobi:function(g){var m,p,a,u,c,l,f,v,_,h=S.eps*S.eps,y=0,b=g.length,x=[[0,0,0],[0,0,0],[0,0,0]],D=[[0,0,0],[0,0,0],[0,0,0]],M=0;for(m=0;m<b;m++){for(p=0;p<b;p++)x[m][p]=0,D[m][p]=g[m][p],y+=Math.abs(D[m][p]);x[m][m]=1}if(1===b)return[D,x];if(y<=0)return[D,x];y/=b*b;do{for(v=0,_=0,p=1;p<b;p++)for(m=0;m<p;m++)if((u=Math.abs(D[m][p]))>_&&(_=u),v+=u,u>=h){for(u=.5*Math.atan2(2*D[m][p],D[m][m]-D[p][p]),c=Math.sin(u),l=Math.cos(u),a=0;a<b;a++)D[a][m]=l*(f=D[a][m])+c*D[a][p],D[a][p]=-c*f+l*D[a][p],x[a][m]=l*(f=x[a][m])+c*x[a][p],x[a][p]=-c*f+l*x[a][p];for(D[m][m]=l*D[m][m]+c*D[p][m],D[p][p]=-c*D[m][p]+l*D[p][p],D[m][p]=0,a=0;a<b;a++)D[m][a]=D[a][m],D[p][a]=D[a][p]}M+=1}while(Math.abs(v)/y>h&&M<2e3);return[D,x]},NewtonCotes:function(g,m,p){var a,u,c,l=0,f=p&&I.isNumber(p.number_of_nodes)?p.number_of_nodes:28,v={trapez:!0,simpson:!0,milne:!0},_=p&&p.integration_type&&v.hasOwnProperty(p.integration_type)&&v[p.integration_type]?p.integration_type:"milne",h=(g[1]-g[0])/f;switch(_){case"trapez":for(l=.5*(m(g[0])+m(g[1])),a=g[0],u=0;u<f-1;u++)l+=m(a+=h);l*=h;break;case"simpson":if(f%2>0)throw new Error("JSXGraph:  INT_SIMPSON requires config.number_of_nodes dividable by 2.");for(c=f/2,l=m(g[0])+m(g[1]),a=g[0],u=0;u<c-1;u++)l+=2*m(a+=2*h);for(a=g[0]-h,u=0;u<c;u++)l+=4*m(a+=2*h);l*=h/3;break;default:if(f%4>0)throw new Error("JSXGraph: Error in INT_MILNE: config.number_of_nodes must be a multiple of 4");for(c=.25*f,l=7*(m(g[0])+m(g[1])),a=g[0],u=0;u<c-1;u++)l+=14*m(a+=4*h);for(a=g[0]-3*h,u=0;u<c;u++)l+=32*(m(a+=4*h)+m(a+2*h));for(a=g[0]-2*h,u=0;u<c;u++)l+=12*m(a+=4*h);l*=2*h/45}return l},Romberg:function(g,m,p){var a,u,c,l,f,v,_,h,y=[],b=0,x=1/0,D=p&&I.isNumber(p.max_iterations)?p.max_iterations:20,M=p&&I.isNumber(p.eps)?p.eps:p.eps||1e-7;for(c=(u=g[1])-(a=g[0]),f=1,y[0]=.5*c*(m(a)+m(u)),v=0;v<D;++v){for(l=0,c*=.5,f*=2,h=1,_=1;_<f;_+=2)l+=m(a+_*c);for(y[v+1]=.5*y[v]+l*c,b=y[v+1],_=v-1;_>=0;--_)y[_]=y[_+1]+(y[_+1]-y[_])/((h*=4)-1),b=y[_];if(Math.abs(b-x)<M*Math.abs(b))break;x=b}return b},GaussLegendre:function(g,m,p){var a,u,c,l,f,v,_,h,y=0,b=[],x=[],D=p&&I.isNumber(p.n)?p.n:12;if(D>18&&(D=18),b[2]=[.5773502691896257],x[2]=[1],b[4]=[.33998104358485626,.8611363115940526],x[4]=[.6521451548625461,.34785484513745385],b[6]=[.2386191860831969,.6612093864662645,.932469514203152],x[6]=[.46791393457269104,.3607615730481386,.17132449237917036],b[8]=[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],x[8]=[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],b[10]=[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],x[10]=[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],b[12]=[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],x[12]=[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],b[14]=[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],x[14]=[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],b[16]=[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499],x[16]=[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096],b[18]=[.0847750130417353,.2518862256915055,.41175116146284263,.5597708310739475,.6916870430603532,.8037049589725231,.8926024664975557,.9558239495713977,.9915651684209309],x[18]=[.1691423829631436,.16427648374583273,.15468467512626524,.14064291467065065,.12255520671147846,.10094204410628717,.07642573025488905,.0497145488949698,.02161601352648331],b[3]=[0,.7745966692414834],x[3]=[.8888888888888888,.5555555555555556],b[5]=[0,.5384693101056831,.906179845938664],x[5]=[.5688888888888889,.47862867049936647,.23692688505618908],b[7]=[0,.4058451513773972,.7415311855993945,.9491079123427585],x[7]=[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],b[9]=[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],x[9]=[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],b[11]=[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],x[11]=[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],b[13]=[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],x[13]=[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],b[15]=[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],x[15]=[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],b[17]=[0,.17848418149584785,.3512317634538763,.5126905370864769,.6576711592166907,.7815140038968014,.8802391537269859,.9506755217687678,.9905754753144174],x[17]=[.17944647035620653,.17656270536699264,.16800410215645004,.15404576107681028,.13513636846852548,.11188384719340397,.08503614831717918,.0554595293739872,.02414830286854793],l=D+1>>1,_=b[D],h=x[D],v=.5*((u=g[1])-(a=g[0])),f=.5*(u+a),!0&D)for(y=h[0]*m(f),c=1;c<l;++c)y+=h[c]*(m(f+v*_[c])+m(f-v*_[c]));else for(y=0,c=0;c<l;++c)y+=h[c]*(m(f+v*_[c])+m(f-v*_[c]));return v*y},_rescale_error:function(g,m,p){var a,u;return g=Math.abs(g),0!==p&&0!==g&&(g=(a=Math.pow(200*g/p,1.5))<1?p*a:p),m>20041683600089728e-310&&(u=11102230246251565e-30*m)>g&&(g=u),g},_gaussKronrod:function(g,m,p,a,u,c,l){var f,v,_,h,y,b,x,D,M,O,A,N=g[0],L=g[1],B=.5*(N+L),V=.5*(L-N),U=Math.abs(V),j=m(B),z=0,$=j*c[p-1],X=Math.abs($),Z=0,W=[],ee=[];for(p%2==0&&(z=j*u[p/2-1]),f=Math.floor((p-1)/2),y=0;y<f;y++)O=(D=m(B-(x=V*a[b=2*y+1])))+(M=m(B+x)),W[b]=D,ee[b]=M,z+=u[y]*O,$+=c[b]*O,X+=c[b]*(Math.abs(D)+Math.abs(M));for(f=Math.floor(p/2),y=0;y<f;y++)D=m(B-(x=V*a[A=2*y])),M=m(B+x),W[A]=D,ee[A]=M,$+=c[A]*(D+M),X+=c[A]*(Math.abs(D)+Math.abs(M));for(_=.5*$,Z=c[p-1]*Math.abs(j-_),y=0;y<p-1;y++)Z+=c[y]*(Math.abs(W[y]-_)+Math.abs(ee[y]-_));return h=($-z)*V,v=$*=V,l.abserr=this._rescale_error(h,X*=U,Z*=U),l.resabs=X,l.resasc=Z,v},GaussKronrod15:function(g,m,p){return this._gaussKronrod(g,m,8,[.9914553711208126,.9491079123427585,.8648644233597691,.7415311855993945,.5860872354676911,.4058451513773972,.20778495500789848,0],[.1294849661688697,.27970539148927664,.3818300505051189,.4179591836734694],[.022935322010529224,.06309209262997856,.10479001032225019,.14065325971552592,.1690047266392679,.19035057806478542,.20443294007529889,.20948214108472782],p)},GaussKronrod21:function(g,m,p){return this._gaussKronrod(g,m,11,[.9956571630258081,.9739065285171717,.9301574913557082,.8650633666889845,.7808177265864169,.6794095682990244,.5627571346686047,.4333953941292472,.2943928627014602,.14887433898163122,0],[.06667134430868814,.1494513491505806,.21908636251598204,.26926671930999635,.29552422471475287],[.011694638867371874,.032558162307964725,.054755896574351995,.07503967481091996,.0931254545836976,.10938715880229764,.12349197626206584,.13470921731147334,.14277593857706009,.14773910490133849,.1494455540029169],p)},GaussKronrod31:function(g,m,p){return this._gaussKronrod(g,m,16,[.9980022986933971,.9879925180204854,.9677390756791391,.937273392400706,.8972645323440819,.8482065834104272,.790418501442466,.7244177313601701,.650996741297417,.5709721726085388,.4850818636402397,.3941513470775634,.29918000715316884,.20119409399743451,.1011420669187175,0],[.03075324199611727,.07036604748810812,.10715922046717194,.13957067792615432,.16626920581699392,.1861610000155622,.19843148532711158,.2025782419255613],[.005377479872923349,.015007947329316122,.02546084732671532,.03534636079137585,.04458975132476488,.05348152469092809,.06200956780067064,.06985412131872826,.07684968075772038,.08308050282313302,.08856444305621176,.09312659817082532,.09664272698362368,.09917359872179196,.10076984552387559,.10133000701479154],p)},_workspace:function(g,m){return{limit:m,size:0,nrmax:0,i:0,alist:[g[0]],blist:[g[1]],rlist:[0],elist:[0],order:[0],level:[0],qpsrt:function(){var p,a,u,c,l,f=this.size-1,v=this.limit,_=this.nrmax,h=this.order[_];if(f<2)return this.order[0]=0,this.order[1]=1,void(this.i=h);for(p=this.elist[h];_>0&&p>this.elist[this.order[_-1]];)this.order[_]=this.order[_-1],_--;for(l=f<v/2+2?f:v-f+1,u=_+1;u<l&&p<this.elist[this.order[u]];)this.order[u-1]=this.order[u],u++;for(this.order[u-1]=h,a=this.elist[f],c=l-1;c>u-2&&a>=this.elist[this.order[c]];)this.order[c+1]=this.order[c],c--;this.order[c+1]=f,this.i=h=this.order[_],this.nrmax=_},set_initial_result:function(p,a){this.size=1,this.rlist[0]=p,this.elist[0]=a},update:function(p,a,u,c,l,f,v,_){var h=this.i,y=this.size,b=this.level[this.i]+1;_>c?(this.alist[h]=l,this.rlist[h]=v,this.elist[h]=_,this.level[h]=b,this.alist[y]=p,this.blist[y]=a,this.rlist[y]=u,this.elist[y]=c,this.level[y]=b):(this.blist[h]=a,this.rlist[h]=u,this.elist[h]=c,this.level[h]=b,this.alist[y]=l,this.blist[y]=f,this.rlist[y]=v,this.elist[y]=_,this.level[y]=b),this.size++,b>this.maximum_level&&(this.maximum_level=b),this.qpsrt()},retrieve:function(){var p=this.i;return{a:this.alist[p],b:this.blist[p],r:this.rlist[p],e:this.elist[p]}},sum_results:function(){var p,a=this.size,u=0;for(p=0;p<a;p++)u+=this.rlist[p];return u},subinterval_too_small:function(p,a,u){var c=1.0000000000000222*(Math.abs(a)+22250738585072014e-321);return Math.abs(p)<=c&&Math.abs(u)<=c}}},Qag:function(g,m,p){var a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,V=this._workspace(g,1e3),U=p&&I.isNumber(p.limit)?p.limit:15,j=p&&I.isNumber(p.epsrel)?p.epsrel:1e-7,z=p&&I.isNumber(p.epsabs)?p.epsabs:1e-7,$=p&&I.isFunction(p.q)?p.q:this.GaussKronrod15,X={},Z=0,W=0,ee=0,ie=0,re=0,Me=0,Pe=0,Oe=0,Se=0,me=0;if(U>V.limit&&E.warn("iteration limit exceeds available workspace"),z<=0&&(j<50*S.eps||j<5e-29)&&E.warn("tolerance cannot be acheived with given epsabs and epsrel"),c=$.apply(this,[g,m,X]),f=X.resabs,v=X.resasc,V.set_initial_result(c,l=X.abserr),_=Math.max(z,j*Math.abs(c)),l<=11102230246251565e-30*f&&l>_)return E.warn("cannot reach tolerance because of roundoff error on first attempt"),-1/0;if(l<=_&&l!==v||0===l)return c;if(1===U)return E.warn("a maximum of one iteration was insufficient"),-1/0;a=c,u=l,Z=1;do{re=0,Me=0,Pe=0,Oe=0,Se=0,me=0,D=(L=V.retrieve()).a,O=L.r,A=L.e,b=y=.5*(D+(M=L.b)),x=M,re=$.apply(this,[[h=D,y],m,X]),Oe=X.abserr,N=X.resasc,Me=$.apply(this,[[b,x],m,X]),u+=(me=Oe+(Se=X.abserr))-A,a+=(Pe=re+Me)-O,N!==Oe&&X.resasc!==Se&&(Math.abs(O-Pe)<=1e-5*Math.abs(Pe)&&me>=.99*A&&W++,Z>=10&&me>A&&ee++),u>(_=Math.max(z,j*Math.abs(a)))&&((W>=6||ee>=20)&&(ie=2),V.subinterval_too_small(h,b,x)&&(ie=3)),V.update(h,y,re,Oe,b,x,Me,Se),D=(L=V.retrieve()).a_i,M=L.b_i,O=L.r_i,A=L.e_i,Z++}while(Z<U&&!ie&&u>_);return V.sum_results()},I:function(g,m){return this.Qag(g,m,{q:this.GaussKronrod15,limit:15,epsrel:1e-7,epsabs:1e-7})},Newton:function(g,m,p){var a,u=0,c=S.eps,l=g.apply(p,[m]);for(I.isArray(m)&&(m=m[0]);u<50&&Math.abs(l)>c;)a=this.D(g,p)(m),Math.abs(a)>c?m-=l/a:m+=.2*Math.random()-1,l=g.apply(p,[m]),u+=1;return m},root:function(g,m,p){return this.chandrupatla(g,m,p)},generalizedNewton:function(g,m,p,a){var u,c,l,f,v,_,h,y,b,x,D,M,O,A,N=0;for(this.generalizedNewton.t1memo?(u=this.generalizedNewton.t1memo,c=this.generalizedNewton.t2memo):(u=p,c=a),x=(y=g.X(u)-m.X(c))*y+(b=g.Y(u)-m.Y(c))*b,D=this.D(g.X,g),M=this.D(m.X,m),O=this.D(g.Y,g),A=this.D(m.Y,m);x>S.eps&&N<10;)l=D(u),f=-M(c),v=O(u),u-=((_=-A(c))*y-f*b)/(h=l*_-f*v),c-=(l*b-v*y)/h,x=(y=g.X(u)-m.X(c))*y+(b=g.Y(u)-m.Y(c))*b,N+=1;return this.generalizedNewton.t1memo=u,this.generalizedNewton.t2memo=c,Math.abs(u)<Math.abs(c)?[g.X(u),g.Y(u)]:[m.X(c),m.Y(c)]},Neville:function(g){var m=[],p=function(a){return function(u,c){var l,f,v,_=S.binomial,h=g.length,y=h-1,b=0,x=0;if(!c)for(v=1,l=0;l<h;l++)m[l]=_(y,l)*v,v*=-1;for(f=u,l=0;l<h;l++){if(0===f)return g[l][a]();v=m[l]/f,f-=1,b+=g[l][a]()*v,x+=v}return b/x}};return[p("X"),p("Y"),0,function(){return g.length-1}]},splineDef:function(g,m){var a,u,c=Math.min(g.length,m.length),l=[],f=[],v=[],_=[],h=[],y=[];if(2===c)return[0,0];for(a=0;a<c;a++)v.push({X:g[a],Y:m[a]});for(v.sort(function(b,x){return b.X-x.X}),a=0;a<c;a++)g[a]=v[a].X,m[a]=v[a].Y;for(a=0;a<c-1;a++)_.push(g[a+1]-g[a]);for(a=0;a<c-2;a++)h.push(6*(m[a+2]-m[a+1])/_[a+1]-6*(m[a+1]-m[a])/_[a]);for(l.push(2*(_[0]+_[1])),f.push(h[0]),a=0;a<c-3;a++)l.push(2*(_[a+1]+_[a+2])-(u=_[a+1]/l[a])*_[a+1]),f.push(h[a+1]-u*f[a]);for(y[c-3]=f[c-3]/l[c-3],a=c-4;a>=0;a--)y[a]=(f[a]-_[a+1]*y[a+1])/l[a];for(a=c-3;a>=0;a--)y[a+1]=y[a];return y[0]=0,y[c-1]=0,y},splineEval:function(g,m,p,a){var u,c,l,h,y=Math.min(m.length,p.length),b=1,x=!1,D=[];for(I.isArray(g)?(b=g.length,x=!0):g=[g],u=0;u<b;u++){if(g[u]<m[0]||m[u]>m[y-1])return NaN;for(c=1;c<y&&!(g[u]<=m[c]);c++);l=p[c-=1],D.push(l+((p[c+1]-p[c])/(m[c+1]-m[c])-(m[c+1]-m[c])/6*(a[c+1]+2*a[c])+(a[c]/2+(a[c+1]-a[c])/(6*(m[c+1]-m[c]))*(h=g[u]-m[c]))*h)*h)}return x?D:D[0]},generatePolynomialTerm:function(g,m,p,a){var u,c=[];for(u=m;u>=0;u--)c=c.concat(["(",g[u].toPrecision(a),")"]),u>1?c=c.concat(["*",p,"<sup>",u,"<","/sup> + "]):1===u&&(c=c.concat(["*",p," + "]));return c.join("")},lagrangePolynomial:function(g){var m=[],p=this,a=function(u,c){var l,f,v,_,h=g.length,y=0,b=0;if(!c)for(l=0;l<h;l++){for(m[l]=1,v=g[l].X(),f=0;f<h;f++)f!==l&&(m[l]*=v-g[f].X());m[l]=1/m[l]}for(l=0;l<h;l++){if(u===(v=g[l].X()))return g[l].Y();b+=_=m[l]/(u-v),y+=_*g[l].Y()}return y/b};return a.getTerm=function(u,c,l){return p.lagrangePolynomialTerm(g,u,c,l)()},a},lagrangePolynomialTerm:function(g,m,p,a){return function(){var u,c,l,f,v,_,h=g.length,y=[],b=[],x=[],D=!0;for(p=p||"x",void 0===a&&(a=" * "),u=h-1,f=0;f<h;f++)x[f]=0;for(l=0;l<h;l++){for(v=g[l].Y(),_=g[l].X(),y=[],f=0;f<h;f++)f!==l&&(v/=_-g[f].X(),y.push(g[f].X()));for(b=[1].concat(S.Vieta(y)),f=0;f<b.length;f++)x[f]+=(f%2==1?-1:1)*b[f]*v}for(c="",f=0;f<x.length;f++)v=x[f],Math.abs(v)<S.eps||(E.exists(m)&&(v=T._round10(v,-m)),D?(c+=v>0?v:"-"+-v,D=!1):c+=v>0?" + "+v:" - "+-v,u-f>1?c+=a+p+"^"+(u-f):u-f==1&&(c+=a+p));return c}},_initCubicPoly:function(g,m,p,a){return[g,p,-3*g+3*m-2*p-a,2*g-2*m+p+a]},CardinalSpline:function(g,m,p){var a,u,c,l,f=[],v=this;return l=I.isFunction(m)?m:function(){return m},void 0===p&&(p="uniform"),[(u=function(_){return function(h,y){var b,x,M,O,A,N,L,B,V;if(g.length<2)return NaN;if(!y)for(c=l(),M={X:function(){return 2*g[g.length-1].X()-g[g.length-2].X()},Y:function(){return 2*g[g.length-1].Y()-g[g.length-2].Y()},Dist:function(U){var j=this.X()-U.X(),z=this.Y()-U.Y();return Math.sqrt(j*j+z*z)}},V=(a=[{X:function(){return 2*g[0].X()-g[1].X()},Y:function(){return 2*g[0].Y()-g[1].Y()},Dist:function(U){var j=this.X()-U.X(),z=this.Y()-U.Y();return Math.sqrt(j*j+z*z)}}].concat(g,[M])).length,f[_]=[],b=0;b<V-3;b++)"centripetal"===p?(N=a[b].Dist(a[b+1]),L=a[b+2].Dist(a[b+1]),B=a[b+3].Dist(a[b+2]),N=Math.sqrt(N),L=Math.sqrt(L),B=Math.sqrt(B),L<S.eps&&(L=1),N<S.eps&&(N=L),B<S.eps&&(B=L),O=(a[b+1][_]()-a[b][_]())/N-(a[b+2][_]()-a[b][_]())/(L+N)+(a[b+2][_]()-a[b+1][_]())/L,A=(a[b+2][_]()-a[b+1][_]())/L-(a[b+3][_]()-a[b+1][_]())/(B+L)+(a[b+3][_]()-a[b+2][_]())/B,O*=L,A*=L,f[_][b]=v._initCubicPoly(a[b+1][_](),a[b+2][_](),c*O,c*A)):f[_][b]=v._initCubicPoly(a[b+1][_](),a[b+2][_](),c*(a[b+2][_]()-a[b][_]()),c*(a[b+3][_]()-a[b+1][_]()));return isNaN(h)?NaN:(V=g.length,h<=0?g[0][_]():h>=V?g[V-1][_]():(b=Math.floor(h))===h?g[b][_]():(h-=b,void 0===(x=f[_][b])?NaN:((x[3]*h+x[2])*h+x[1])*h+x[0]))}})("X"),u("Y"),0,function(){return g.length-1}]},CatmullRomSpline:function(g,m){return this.CardinalSpline(g,.5,m)},regressionPolynomial:function(g,m,p){var a,u,c,l,f,v,_="";if(I.isPoint(g)&&I.isFunction(g.Value))u=function(){return g.Value()};else if(I.isFunction(g))u=g;else{if(!I.isNumber(g))throw new Error("JSXGraph: Can't create regressionPolynomial from degree of type'"+typeof g+"'.");u=function(){return g}}if(3===arguments.length&&I.isArray(m)&&I.isArray(p))f=0;else if(2===arguments.length&&I.isArray(m)&&m.length>0&&I.isPoint(m[0]))f=1;else{if(!(2===arguments.length&&I.isArray(m)&&m.length>0&&m[0].usrCoords&&m[0].scrCoords))throw new Error("JSXGraph: Can't create regressionPolynomial. Wrong parameters.");f=2}return(v=function(h,y){var b,x,D,M,O,A,N,L,B,V=m.length;if(B=Math.floor(u()),!y){if(1===f)for(c=[],l=[],b=0;b<V;b++)c[b]=m[b].X(),l[b]=m[b].Y();if(2===f)for(c=[],l=[],b=0;b<V;b++)c[b]=m[b].usrCoords[1],l[b]=m[b].usrCoords[2];if(0===f)for(c=[],l=[],b=0;b<V;b++)I.isFunction(m[b])?c.push(m[b]()):c.push(m[b]),I.isFunction(p[b])?l.push(p[b]()):l.push(p[b]);for(D=[],x=0;x<V;x++)D.push([1]);for(b=1;b<=B;b++)for(x=0;x<V;x++)D[x][b]=D[x][b-1]*c[x];O=l,M=S.transpose(D),A=S.matMatMult(M,D),N=S.matVecMult(M,O),a=S.Numerics.Gauss(A,N),_=S.Numerics.generatePolynomialTerm(a,B,"x",3)}for(L=a[B],b=B-1;b>=0;b--)L=L*h+a[b];return L}).getTerm=function(){return _},v},bezier:function(g){var m,p,a=function(u){return function(c,l){var f=3*Math.floor(c),v=c%1,_=1-v;return l||(p=3*Math.floor((g.length-1)/3),m=Math.floor(p/3)),c<0?g[0][u]():c>=m?g[p][u]():isNaN(c)?NaN:_*_*(_*g[f][u]()+3*v*g[f+1][u]())+(3*_*g[f+2][u]()+v*g[f+3][u]())*v*v}};return[a("X"),a("Y"),0,function(){return Math.floor(g.length/3)}]},bspline:function(g,m){var a=function(u){return function(c,l){var f,v,_,h,y=g.length,b=y-1,x=m;if(b<=0)return NaN;if(b+2<=x&&(x=b+1),c<=0)return g[0][u]();if(c>=b-x+2)return g[b][u]();for(_=Math.floor(c)+x-1,h=function(D,M,O,A){var N,L,V,U,j=[];for(j[A]=M[A]<=D&&D<M[A+1]?1:0,N=2;N<=O;N++)for(L=A-N+1;L<=A;L++)V=L>=A?0:j[L+1],j[L]=0==(U=M[L+N-1]-M[L])?0:(D-M[L])/U*(L<=A-N+1||L<0?0:j[L]),0!=(U=M[L+N]-M[L+1])&&(j[L]+=(M[L+N]-D)/U*V);return j}(c,function(D,M){var O,A=[];for(O=0;O<D+M+1;O++)A[O]=O<M?0:O<=D?O-M+1:D-M+2;return A}(b,x),x,_),f=0,v=_-x+1;v<=_;v++)v<y&&v>=0&&(f+=g[v][u]()*h[v]);return f}};return[a("X"),a("Y"),0,function(){return g.length-1}]},D:function(g,m){return I.exists(m)?function(p,a){var u=1e-5;return(g.apply(m,[p+u,a])-g.apply(m,[p-u,a]))/2e-5}:function(p,a){var u=1e-5;return(g(p+u,a)-g(p-u,a))/2e-5}},_riemannValue:function(g,m,p,a){var u,c,l,f;if(a<0&&("trapezoidal"!==p&&(g+=a),a*=-1,"lower"===p?p="upper":"upper"===p&&(p="lower")),f=.01*a,"right"===p)u=m(g+a);else if("middle"===p)u=m(g+.5*a);else if("left"===p||"trapezoidal"===p)u=m(g);else if("lower"===p){for(u=m(g),l=g+f;l<=g+a;l+=f)(c=m(l))<u&&(u=c);(c=m(g+a))<u&&(u=c)}else if("upper"===p){for(u=m(g),l=g+f;l<=g+a;l+=f)(c=m(l))>u&&(u=c);(c=m(g+a))>u&&(u=c)}else u="random"===p?m(g+a*Math.random()):"simpson"===p?(m(g)+4*m(g+.5*a)+m(g+a))/6:m(g);return u},riemann:function(g,m,p,a,u){var c,l,f,v,_,h,y,b=[],x=[],D=0,M=a,O=0;if(I.isArray(g)?(_=g[0],v=g[1]):v=g,(m=Math.floor(m))<=0)return[b,x,O];for(l=(u-a)/m,c=0;c<m;c++)f=this._riemannValue(M,v,p,l),b[D]=M,x[D]=f,D+=1,M+=l,"trapezoidal"===p&&(f=v(M)),b[D]=M,x[D]=f,D+=1;for(c=0;c<m;c++)f=_?this._riemannValue(M,_,p,-l):0,b[D]=M,x[D]=f,D+=1,M-=l,"trapezoidal"===p&&_&&(f=_(M)),b[D]=M,x[D]=f,"trapezoidal"!==p?(h=f,y=x[2*(m-1)-2*c]):(y=.5*(v(M+l)+v(M)),h=_?.5*(_(M+l)+_(M)):0),O+=(y-h)*l,b[D+=1]=M,x[D]=x[2*(m-1)-2*c],D+=1;return[b,x,O]},riemannsum:function(g,m,p,a,u){return E.deprecated("Numerics.riemannsum()","Numerics.riemann()"),this.riemann(g,m,p,a,u)[2]},rungeKutta:function(g,m,p,a,u){var c,l,f,v,_,h,y=[],b=[],x=(p[1]-p[0])/a,D=p[0],M=m.length,O=[],A=0;for(I.isString(g)&&(g=w[g]||w.euler),h=g.s,c=0;c<M;c++)y[c]=m[c];for(l=0;l<a;l++){for(O[A]=[],c=0;c<M;c++)O[A][c]=y[c];for(A+=1,v=[],f=0;f<h;f++){for(c=0;c<M;c++)b[c]=0;for(_=0;_<f;_++)for(c=0;c<M;c++)b[c]+=g.A[f][_]*x*v[_][c];for(c=0;c<M;c++)b[c]+=y[c];v.push(u(D+g.c[f]*x,b))}for(c=0;c<M;c++)b[c]=0;for(_=0;_<h;_++)for(c=0;c<M;c++)b[c]+=g.b[_]*v[_][c];for(c=0;c<M;c++)y[c]=y[c]+x*b[c];D+=x}return O},maxIterationsRoot:80,maxIterationsMinimize:500,findBracket:function(g,m,p){var a,u,c,l,f,v,_,h,y,b;if(I.isArray(m))return m;for(c=g.call(p,a=m),b=(l=[a-.1*(u=0===a?1:a),a+.1*u,a-1,a+1,a-.5*u,a+.5*u,a-.6*u,a+.6*u,a-1*u,a+1*u,a-2*u,a+2*u,a-5*u,a+5*u,a-10*u,a+10*u,a-50*u,a+50*u,a-100*u,a+100*u]).length,y=0;y<b&&!(c*(v=g.call(p,f=l[y]))<=0);y++);return f<a&&(_=a,a=f,f=_,h=c,c=v,v=h),[a,c,f,v]},fzero:function(g,m,p){var a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N=S.eps,L=this.maxIterationsRoot,B=0;if(I.isArray(m)){if(m.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");l=g.call(p,a=m[0]),f=g.call(p,u=m[1])}else a=(_=this.findBracket(g,m,p))[0],l=_[1],u=_[2],f=_[3];if(Math.abs(l)<=N)return a;if(Math.abs(f)<=N)return u;if(l*f>0)return I.isArray(m)?this.fminbr(g,[a,u],p):this.Newton(g,a,p);for(c=a,v=l;B<L;){if(h=u-a,Math.abs(v)<Math.abs(f)&&(a=u,u=c,c=a,l=f,f=v,v=l),D=2*N*Math.abs(u)+.5*N,A=.5*(c-u),Math.abs(A)<=D||Math.abs(f)<=N)return u;Math.abs(h)>=D&&Math.abs(l)>Math.abs(f)&&(b=c-u,a===c?(M=b*(y=f/l),O=1-y):(M=(x=f/l)*(b*(O=l/v)*(O-(y=f/v))-(u-a)*(y-1)),O=(O-1)*(y-1)*(x-1)),M>0?O=-O:M=-M,M<.75*b*O-.5*Math.abs(D*O)&&M<Math.abs(h*O*.5)&&(A=M/O)),Math.abs(A)<D&&(A=A>0?D:-D),a=u,l=f,((f=g.call(p,u+=A))>0&&v>0||f<0&&v<0)&&(c=a,v=l),B++}return u},chandrupatla:function(g,m,p){var a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j=0,z=this.maxIterationsRoot,$=1+.001*Math.random(),X=.5*$,Z=S.eps;if(I.isArray(m)){if(m.length<2)throw new Error("JXG.Math.Numerics.fzero: length of array x0 has to be at least two.");u=g.call(p,a=m[0]),l=g.call(p,c=m[1])}else a=(f=this.findBracket(g,m,p))[0],u=f[1],c=f[2],l=f[3];if(u*l>0)return I.isArray(m)?this.fminbr(g,[a,c],p):this.Newton(g,a,p);v=a,_=c,b=u,x=l;do{if(M=g.call(p,y=v+X*(_-v)),Math.sign(M)===Math.sign(b)?(h=v,v=y,D=b,b=M):(h=_,_=v,D=x,x=b),O=v=y,A=b=M,Math.abs(x)<Math.abs(b)&&(O=_,A=x),(N=(2*Z*Math.abs(O)+5e-6)/Math.abs(_-v))>.5||0===A)break;L=(v-_)/(h-_),B=(b-x)/(D-x),V=1-Math.sqrt(1-L),U=Math.sqrt(L),(X=V<B&&B<U?b/(x-b)*(D/(x-D))+b/(D-b)*(x/(D-x))*((h-v)/(_-v)):.5*$)<N&&(X=N),X>1-N&&(X=1-N),j++}while(j<=z);return O},fminbr:function(g,m,p){var a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L=.5*(3-Math.sqrt(5)),B=S.eps,V=S.eps,U=this.maxIterationsMinimize,j=0;if(!I.isArray(m)||m.length<2)throw new Error("JXG.Math.Numerics.fminbr: length of array x0 has to be at least two.");for(c=l=(a=m[0])+L*((u=m[1])-a),f=l,v=_=g.call(p,l),h=_;j<U;){if(y=u-a,b=.5*(a+u),x=V*Math.abs(c)+B/3,Math.abs(c-b)+.5*y<=2*x)return c;D=L*(c<b?u-c:a-c),Math.abs(c-f)>=x&&(M=(c-l)*(O=(c-l)*(v-h))-(c-f)*(A=(c-f)*(v-_)),(O=2*(O-A))>0?M=-M:O=-O,Math.abs(M)<Math.abs(D*O)&&M>O*(a-c+2*x)&&M<O*(u-c-2*x)&&(D=M/O)),Math.abs(D)<x&&(D=D>0?x:-x),(N=g.call(p,A=c+D))<=v?(A<c?u=c:a=c,l=f,f=c,c=A,_=h,h=v,v=N):(A<c?a=A:u=A,N<=h||f===c?(l=f,f=A,_=h,h=N):(N<=_||l===c||l===f)&&(l=A,_=N)),j+=1}return c},RamerDouglasPeucker:function(g,m){var p,a,u,c=[],l=[],f=function(v,_,h,y,b){var x=function(M,O,A){var N,L,B,V,U,j,z,$,X,Z,W,ee=1e4,ie=0,re=O;if(A-O<2)return[-1,0];if(B=M[O].scrCoords,V=M[A].scrCoords,isNaN(B[1])||isNaN(B[2]))return[NaN,O];if(isNaN(V[1])||isNaN(V[2]))return[NaN,A];for(L=O+1;L<A;L++){if(U=M[L].scrCoords,isNaN(U[1])||isNaN(U[2]))return[NaN,L];j=(j=(j=U[1]-B[1])==1/0?ee:j)===-1/0?-ee:j,z=(z=(z=U[2]-B[2])==1/0?ee:z)===-1/0?-ee:z,(Z=($=($=($=V[1]-B[1])==1/0?ee:$)===-1/0?-ee:$)*$+(X=(X=(X=V[2]-B[2])==1/0?ee:X)===-1/0?-ee:X)*X)>=S.eps?((W=(j*$+z*X)/Z)<0?W=0:W>1&&(W=1),N=(j-=W*$)*j+(z-=W*X)*z):(W=0,N=j*j+z*z),N>ie&&(ie=N,re=L)}return[Math.sqrt(ie),re]}(v,_,h),D=x[1];if(isNaN(x[0])){f(v,_,D-1,y,b),b.push(v[D]);do{++D}while(D<=h&&isNaN(v[D].scrCoords[1]+v[D].scrCoords[2]));D<=h&&b.push(v[D]),f(v,D+1,h,y,b)}else x[0]>y?(f(v,_,D,y,b),f(v,D,h,y,b)):b.push(v[h])};for(u=g.length,p=0;;){for(;p<u&&isNaN(g[p].scrCoords[1]+g[p].scrCoords[2]);)p+=1;for(a=p+1;a<u&&!isNaN(g[a].scrCoords[1]+g[a].scrCoords[2]);)a+=1;if(a--,p<u&&a>p&&((l=[])[0]=g[p],f(g,p,a,m,l),c=c.concat(l)),p>=u)break;a<u-1&&c.push(g[a+1]),p=a+1}return c},RamerDouglasPeuker:function(g,m){return E.deprecated("Numerics.RamerDouglasPeuker()","Numerics.RamerDouglasPeucker()"),this.RamerDouglasPeucker(g,m)},Visvalingam:function(g,m){var p,a,u,c,l,f,v,_,h,y=[],b=[],x=[];if((a=g.length)<=2)return g;for(y[0]={used:!0,lft:null,node:null},l=0,p=1;p<a-1;p++)u=Math.abs(E.Math.Numerics.det([g[p-1].usrCoords,g[p].usrCoords,g[p+1].usrCoords])),isNaN(u)||(b.push(h={v:u,idx:p}),y[p]={used:!0,lft:l,node:h},y[l].rt=p,l=p);for(y[a-1]={used:!0,rt:null,lft:l,node:null},y[l].rt=a-1,c=-1/0;b.length>m;)b.sort(function(D,M){return M.v-D.v}),y[p=b.pop().idx].used=!1,c=y[p].node.v,y[l=y[p].lft].rt=f=y[p].rt,y[f].lft=l,null!==(v=y[l].lft)&&(u=Math.abs(E.Math.Numerics.det([g[v].usrCoords,g[l].usrCoords,g[f].usrCoords])),y[l].node.v=u>=c?u:c),null!==(_=y[f].rt)&&(u=Math.abs(E.Math.Numerics.det([g[l].usrCoords,g[f].usrCoords,g[_].usrCoords])),y[f].node.v=u>=c?u:c);x=[g[p=0]];do{x.push(g[p=y[p].rt])}while(null!==y[p].rt);return x}},S.Numerics}),define("math/nlp",["jxg","utils/type"],function(E,I){"use strict";return E.Math.Nlp={arr:function(T){return new Float64Array(T)},arr2:function(T,S){for(var w=0,g=new Array(T);w<T;)g[w]=this.arr(S),w++;return g},arraycopy:function(T,S,w,g,m){for(var p=0;p<m;)w[p+g]=T[p+S],p++},Normal:0,MaxIterationsReached:1,DivergingRoundingErrors:2,FindMinimum:function(T,S,w,g,m,p,a,u){var c,f=w+2,v=this.arr(S+1),_=this;return v[0]=0,this.arraycopy(g,0,v,1,S),c=this.cobylb(function(h,y,b,x){var D,M,O=_.arr(h);return _.arraycopy(b,1,O,0,h),D=_.arr(y),M=T(h,y,O,D),_.arraycopy(D,0,x,1,y),M},S,w,f,v,m,p,a,u),this.arraycopy(v,1,g,0,S),c},cobylb:function(T,S,w,g,m,p,a,u,c){var l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z,$,X,Z,W,ee,ie,re,Me,Pe,Oe=-1,Se=0,me=0,_e=S+1,ye=w+1,le=p,be=0,Ce=!1,He=!1,bt=0,dt=0,gt=0,Xe=this.arr(1+g),De=this.arr2(1+S,1+_e),Et=this.arr2(1+S,1+S),Je=this.arr2(1+g,1+_e),Tn=this.arr2(1+S,1+ye),rn=this.arr(1+S),hi=this.arr(1+S),ti=this.arr(1+S),Rt=this.arr(1+S),ir=this.arr(1+S);for(u>=2&&console.log("The initial value of RHO is "+le+" and PARMU is set to zero."),x=0,y=1/le,f=1;f<=S;++f)De[f][_e]=m[f],De[f][f]=le,Et[f][f]=y;D=_e,M=!1;e:for(;;){if(x>=c&&x>0){Oe=this.MaxIterationsReached;break e}for(++x,Se=T(S,w,m,Xe),me=0,_=1;_<=w;++_)me=Math.max(me,-Xe[_]);if(x!==u-1&&3!==u||this.PrintIterationResult(x,Se,me,m,S,u),Xe[ye]=Se,Xe[g]=me,O=!0,!M){for(O=!1,f=1;f<=g;++f)Je[f][D]=Xe[f];if(x<=_e){if(D<=S)if(Je[ye][_e]<=Se)m[D]=De[D][_e];else{for(De[D][_e]=m[D],_=1;_<=g;++_)Je[_][D]=Je[_][_e],Je[_][_e]=Xe[_];for(_=1;_<=D;++_){for(De[D][_]=-le,y=0,f=_;f<=D;++f)y-=Et[f][_];Et[D][_]=y}}if(x<=S){m[D=x]+=le;continue e}}M=!0}t:for(;;){n:do{if(!O){for(A=Je[ye][_e]+be*Je[g][_e],N=_e,v=1;v<=S;++v)(y=Je[ye][v]+be*Je[g][v])<A?(N=v,A=y):y===A&&0===be&&Je[g][v]<Je[g][N]&&(N=v);if(N<=S){for(f=1;f<=g;++f)y=Je[f][_e],Je[f][_e]=Je[f][N],Je[f][N]=y;for(f=1;f<=S;++f){for(y=De[f][N],De[f][N]=0,De[f][_e]+=y,b=0,_=1;_<=S;++_)De[f][_]-=y,b-=Et[_][f];Et[N][f]=b}}for(_=1;_<=ye;++_){for(Xe[_]=-Je[_][_e],v=1;v<=S;++v)ir[v]=Je[_][v]+Xe[_];for(f=1;f<=S;++f)Tn[f][_]=(_===ye?-1:1)*this.DOT_PRODUCT_ROW_COL(ir,-1,Et,f,1,S)}for(Ce=!0,bt=.25*le,L=2.1*le,v=1;v<=S;++v){for(B=0,V=0,_=1;_<=S;++_)B+=Et[v][_]*Et[v][_],V+=De[_][v]*De[_][v];rn[v]=1/Math.sqrt(B),hi[v]=Math.sqrt(V),(rn[v]<bt||hi[v]>L)&&(Ce=!1)}if(!M&&!Ce){for(D=0,y=L,v=1;v<=S;++v)hi[v]>y&&(D=v,y=hi[v]);if(0===D)for(v=1;v<=S;++v)rn[v]<y&&(D=v,y=rn[v]);for(y=.5*le*rn[D],_=1;_<=S;++_)Rt[_]=y*Et[D][_];for(U=0,j=0,l=0,_=1;_<=ye;++_)l=this.DOT_PRODUCT_ROW_COL(Rt,-1,Tn,_,1,S),_<ye&&(y=Je[_][_e],U=Math.max(U,-l-y),j=Math.max(j,l-y));for(z=be*(U-j)>2*l?-1:1,y=0,f=1;f<=S;++f)Rt[f]=z*Rt[f],De[f][D]=Rt[f],y+=Et[D][f]*Rt[f];for(_=1;_<=S;++_)Et[D][_]/=y;for(v=1;v<=S;++v){if(v!==D)for(y=this.DOT_PRODUCT_ROW_COL(Et,v,Rt,-1,1,S),_=1;_<=S;++_)Et[v][_]-=y*Et[D][_];m[v]=De[v][_e]+Rt[v]}continue e}if(!(He=this.trstlp(S,w,Tn,Xe,le,Rt))){for(y=0,_=1;_<=S;++_)y+=Rt[_]*Rt[_];if(y<.25*le*le){M=!0;break n}}for(l=0,$=0,Xe[ye]=0,_=1;_<=ye;++_)l=Xe[_]-this.DOT_PRODUCT_ROW_COL(Rt,-1,Tn,_,1,S),_<ye&&($=Math.max($,l));if(be<1.5*(X=(dt=Je[g][_e]-$)>0?l/dt:0))for(be=2*X,u>=2&&console.log("Increase in PARMU to "+be),Z=Je[ye][_e]+be*Je[g][_e],v=1;v<=S;++v)if((y=Je[ye][v]+be*Je[g][v])<Z||y===Z&&0===be&&Je[g][v]<Je[g][_e])continue t;for(gt=be*dt-l,_=1;_<=S;++_)m[_]=De[_][_e]+Rt[_];M=!0;continue e}for(O=!1,W=Je[ye][_e]+be*Je[g][_e]-(Se+be*me),0===be&&Se===Je[ye][_e]&&(gt=dt,W=Je[g][_e]-me),ee=W<=0?1:0,D=0,v=1;v<=S;++v)(y=Math.abs(this.DOT_PRODUCT_ROW_COL(Et,v,Rt,-1,1,S)))>ee&&(D=v,ee=y),ti[v]=y*rn[v];for(ie=1.1*le,h=0,v=1;v<=S;++v)if(ti[v]>=bt||ti[v]>=rn[v]){if(y=hi[v],W>0){for(y=0,_=1;_<=S;++_)y+=Math.pow(Rt[_]-De[_][v],2);y=Math.sqrt(y)}y>ie&&(h=v,ie=y)}if(h>0&&(D=h),0!==D){for(y=0,f=1;f<=S;++f)De[f][D]=Rt[f],y+=Et[D][f]*Rt[f];for(_=1;_<=S;++_)Et[D][_]/=y;for(v=1;v<=S;++v)if(v!==D)for(y=this.DOT_PRODUCT_ROW_COL(Et,v,Rt,-1,1,S),_=1;_<=S;++_)Et[v][_]-=y*Et[D][_];for(_=1;_<=g;++_)Je[_][D]=Xe[_];if(W>0&&W>=.1*gt)continue t}}while(0);if(Ce){if(le<=a){Oe=this.Normal;break e}if(re=0,Me=0,(le*=.5)<=1.5*a&&(le=a),be>0){for(Pe=0,_=1;_<=ye;++_){for(Me=re=Je[_][_e],f=1;f<=S;++f)re=Math.min(re,Je[_][f]),Me=Math.max(Me,Je[_][f]);_<=w&&re<.5*Me&&(y=Math.max(Me,0)-re,Pe=Pe<=0?y:Math.min(Pe,y))}0===Pe?be=0:Me-re<be*Pe&&(be=(Me-re)/Pe)}u>=2&&console.log("Reduction in RHO to "+le+"  and PARMU = "+be),2===u&&this.PrintIterationResult(x,Je[ye][_e],Je[g][_e],this.COL(De,_e),S,u)}else M=!1}}switch(Oe){case this.Normal:if(u>=1&&console.log("%nNormal return from subroutine COBYLA%n"),He)return u>=1&&this.PrintIterationResult(x,Se,me,m,S,u),Oe;break;case this.MaxIterationsReached:u>=1&&console.log("%nReturn from subroutine COBYLA because the MAXFUN limit has been reached.%n");break;case this.DivergingRoundingErrors:u>=1&&console.log("%nReturn from subroutine COBYLA because rounding errors are becoming damaging.%n")}for(_=1;_<=S;++_)m[_]=De[_][_e];return Se=Je[ye][_e],me=Je[g][_e],u>=1&&this.PrintIterationResult(x,Se,me,m,S,u),Oe},trstlp:function(T,S,w,g,m,p){var a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z,$,X,Z,W,ee,ie,re,Me,Pe,Oe,Se,me=0,_e=0,ye=0,le=this.arr2(1+T,1+T),be=this.arr(2+S),Ce=this.arr(2+S),He=this.arr(1+T),bt=this.arr(1+T),dt=this.arr(2+S),gt=this.arr(2+S),Xe=S,De=0;for(c=1;c<=T;++c)le[c][c]=1,p[c]=0;if(a=0,u=0,S>=1){for(l=1;l<=S;++l)g[l]>u&&(u=g[l],a=l);for(l=1;l<=S;++l)gt[l]=l,Ce[l]=u-g[l]}f=!0;do{e:for(;;){(!f||f&&0===u)&&(a=Xe=S+1,gt[Xe]=Xe,Ce[Xe]=0),f=!1,v=0,_=0,h=0,y=0;t:do{if(b=Xe===S?u:-this.DOT_PRODUCT_ROW_COL(p,-1,w,Xe,1,T),0===_||b<v?(v=b,_e=De,_=3):De>_e?(_e=De,_=3):--_,0===_)break e;if(x=0,a<=De){if(a<De){D=gt[a],M=Ce[a],l=a;do{for(N=gt[A=l+1],V=(L=this.DOT_PRODUCT(this.PART(this.COL(le,l),1,T),this.PART(this.COL(w,N),1,T)))/(me=Math.sqrt(L*L+be[A]*be[A])),be[A]=(B=be[A]/me)*be[l],be[l]=me,c=1;c<=T;++c)me=B*le[c][A]+V*le[c][l],le[c][A]=B*le[c][l]-V*le[c][A],le[c][l]=me;gt[l]=N,Ce[l]=Ce[A],l=A}while(l<De);gt[l]=D,Ce[l]=M}if(--De,Xe>S)for(me=1/be[De],l=1;l<=T;++l)He[l]=me*le[l][De];else for(me=this.DOT_PRODUCT_ROW_COL(He,-1,le,De+1,1,T),l=1;l<=T;++l)He[l]-=me*le[l][De+1]}else{for(N=gt[a],l=1;l<=T;++l)bt[l]=w[l][N];for(U=0,l=T;l>De;){for(L=0,j=0,c=1;c<=T;++c)L+=me=le[c][l]*bt[c],j+=Math.abs(me);if(z=j+.1*Math.abs(L),$=j+.2*Math.abs(L),(j>=z||z>=$)&&(L=0),0===U)U=L;else for(A=l+1,B=L/(me=Math.sqrt(L*L+U*U)),V=U/me,U=me,c=1;c<=T;++c)me=B*le[c][l]+V*le[c][A],le[c][A]=B*le[c][A]-V*le[c][l],le[c][l]=me;--l}if(0===U){x=-1,l=De;do{for(X=0,Z=0,c=1;c<=T;++c)X+=me=le[c][l]*bt[c],Z+=Math.abs(me);if(z=Z+.1*Math.abs(X),$=Z+.2*Math.abs(X),Z<z&&z<$){if((me=X/be[l])>0&&gt[l]<=S&&(Se=Ce[l]/me,(x<0||Se<x)&&(x=Se)),l>=2)for(W=gt[l],c=1;c<=T;++c)bt[c]-=me*w[c][W];dt[l]=me}else dt[l]=0}while(--l>0);if(x<0)break e;for(l=1;l<=De;++l)Ce[l]=Math.max(0,Ce[l]-x*dt[l]);if(a<De){D=gt[a],M=Ce[a],l=a;do{for(W=gt[A=l+1],V=(L=this.DOT_PRODUCT(this.PART(this.COL(le,l),1,T),this.PART(this.COL(w,W),1,T)))/(me=Math.sqrt(L*L+be[A]*be[A])),be[A]=(B=be[A]/me)*be[l],be[l]=me,c=1;c<=T;++c)me=B*le[c][A]+V*le[c][l],le[c][A]=B*le[c][l]-V*le[c][A],le[c][l]=me;gt[l]=W,Ce[l]=Ce[A],l=A}while(l<De);gt[l]=D,Ce[l]=M}if(0===(me=this.DOT_PRODUCT(this.PART(this.COL(le,De),1,T),this.PART(this.COL(w,N),1,T))))break e;be[De]=me,Ce[a]=0,Ce[De]=x}else be[++De]=U,Ce[a]=Ce[De],Ce[De]=0;if(gt[a]=gt[De],gt[De]=N,Xe>S&&N!==Xe){for(V=(L=this.DOT_PRODUCT(this.PART(this.COL(le,l=De-1),1,T),this.PART(this.COL(w,N),1,T)))/(me=Math.sqrt(L*L+be[De]*be[De])),be[De]=(B=be[De]/me)*be[l],be[l]=me,c=1;c<=T;++c)me=B*le[c][De]+V*le[c][l],le[c][De]=B*le[c][l]-V*le[c][De],le[c][l]=me;gt[De]=gt[l],gt[l]=N,me=Ce[l],Ce[l]=Ce[De],Ce[De]=me}if(Xe>S)for(me=1/be[De],l=1;l<=T;++l)He[l]=me*le[l][De];else for(me=(this.DOT_PRODUCT_ROW_COL(He,-1,w,N=gt[De],1,T)-1)/be[De],l=1;l<=T;++l)He[l]-=me*le[l][De]}for(ee=m*m,re=0,ie=0,c=1;c<=T;++c)Math.abs(p[c])>=1e-6*m&&(ee-=p[c]*p[c]),re+=p[c]*He[c],ie+=He[c]*He[c];if(ee<=0)break e;if(me=Math.sqrt(ie*ee),Math.abs(re)>=1e-6*me&&(me=Math.sqrt(ie*ee+re*re)),h=y=ee/(me+re),Xe===S){if($=h+.2*u,h>=(z=h+.1*u)||z>=$)break t;h=Math.min(h,u)}for(l=1;l<=T;++l)bt[l]=p[l]+h*He[l];if(Xe===S)for(ye=u,u=0,l=1;l<=De;++l)me=g[N=gt[l]]-this.DOT_PRODUCT_ROW_COL(bt,-1,w,N,1,T),u=Math.max(u,me);l=De;do{for(Me=0,Pe=0,c=1;c<=T;++c)Me+=me=le[c][l]*bt[c],Pe+=Math.abs(me);if(z=Pe+.1*Math.abs(Me),$=Pe+.2*Math.abs(Me),(Pe>=z||z>=$)&&(Me=0),dt[l]=Me/be[l],l>=2)for(N=gt[l],c=1;c<=T;++c)bt[c]-=dt[l]*w[c][N]}while(l-- >=2);for(Xe>S&&(dt[De]=Math.max(0,dt[De])),l=1;l<=T;++l)bt[l]=p[l]+h*He[l];if(Xe>De)for(l=De+1;l<=Xe;++l){for(O=u-g[N=gt[l]],Oe=u+Math.abs(g[N]),c=1;c<=T;++c)O+=me=w[c][N]*bt[c],Oe+=Math.abs(me);z=Oe+.1*Math.abs(O),$=Oe+.2*Math.abs(O),(Oe>=z||z>=$)&&(O=0),dt[l]=O}for(x=1,a=0,l=1;l<=Xe;++l)dt[l]<0&&(me=Ce[l]/(Ce[l]-dt[l]))<x&&(x=me,a=l);for(me=1-x,l=1;l<=T;++l)p[l]=me*p[l]+x*bt[l];for(l=1;l<=Xe;++l)Ce[l]=Math.max(0,me*Ce[l]+x*dt[l]);Xe===S&&(u=ye+x*(u-ye))}while(a>0);if(h===y)return!0}}while(Xe===S);return!1},PrintIterationResult:function(T,S,w,g,m,p){p>1&&console.log("NFVALS = "+T+"  F = "+S+"  MAXCV = "+w),p>1&&console.log("X = "+this.PART(g,1,m))},ROW:function(T,S){return T[S].slice()},COL:function(T,S){var w,g=T.length,m=[];for(w=0;w<g;++w)m[w]=T[w][S];return m},PART:function(T,S,w){return T.slice(S,w+1)},FORMAT:function(T){return T.join(",")},DOT_PRODUCT:function(T,S){var w,g=0,m=T.length;for(w=0;w<m;++w)g+=T[w]*S[w];return g},DOT_PRODUCT_ROW_COL:function(T,S,w,g,m,p){var a,u=0;if(-1===S)for(a=m;a<=p;++a)u+=T[a]*w[a][g];else if(-1===g)for(a=m;a<=p;++a)u+=T[S][a]*w[a];else for(a=m;a<=p;++a)u+=T[S][a]*w[a][g];return u}},E.Math.Nlp}),define("math/statistics",["jxg","math/math","utils/type"],function(E,I,T){"use strict";return I.Statistics={sum:function(S){var w,g=S.length,m=0;for(w=0;w<g;w++)m+=S[w];return m},prod:function(S){var w,g=S.length,m=1;for(w=0;w<g;w++)m*=S[w];return m},mean:function(S){return S.length>0?this.sum(S)/S.length:0},median:function(S){var w,g;return S.length>0?(ArrayBuffer.isView(S)?(w=new Float64Array(S)).sort():(w=S.slice(0)).sort(function(m,p){return m-p}),1&(g=w.length)?w[parseInt(.5*g,10)]:.5*(w[.5*g-1]+w[.5*g])):0},percentile:function(S,w){var g,m,p,a,u,c=[];if(S.length>0){for(ArrayBuffer.isView(S)?(g=new Float64Array(S)).sort():(g=S.slice(0)).sort(function(l,f){return l-f}),m=g.length,a=T.isArray(w)?w:[w],p=0;p<a.length;p++)u=m*a[p]*.01,parseInt(u,10)===u?c.push(.5*(g[u-1]+g[u])):c.push(g[parseInt(u,10)]);return T.isArray(w)?c:c[0]}return 0},variance:function(S){var w,g,m,p=S.length;if(p>1){for(w=this.mean(S),g=0,m=0;m<p;m++)g+=(S[m]-w)*(S[m]-w);return g/(S.length-1)}return 0},sd:function(S){return Math.sqrt(this.variance(S))},weightedMean:function(S,w){if(S.length!==w.length)throw new Error("JSXGraph error (Math.Statistics.weightedMean): Array dimension mismatch.");return S.length>0?this.mean(this.multiply(S,w)):0},max:function(S){return Math.max.apply(this,S)},min:function(S){return Math.min.apply(this,S)},range:function(S){return[this.min(S),this.max(S)]},abs:function(S){var w,g,m;if(T.isArray(S))if(S.map)m=S.map(Math.abs);else for(g=S.length,m=[],w=0;w<g;w++)m[w]=Math.abs(S[w]);else m=ArrayBuffer.isView(S)?S.map(Math.abs):Math.abs(S);return m},add:function(S,w){var g,m,p=[];if(S=T.evalSlider(S),w=T.evalSlider(w),T.isArray(S)&&T.isNumber(w))for(m=S.length,g=0;g<m;g++)p[g]=S[g]+w;else if(T.isNumber(S)&&T.isArray(w))for(m=w.length,g=0;g<m;g++)p[g]=S+w[g];else if(T.isArray(S)&&T.isArray(w))for(m=Math.min(S.length,w.length),g=0;g<m;g++)p[g]=S[g]+w[g];else p=S+w;return p},div:function(S,w){var g,m,p=[];if(S=T.evalSlider(S),w=T.evalSlider(w),T.isArray(S)&&T.isNumber(w))for(m=S.length,g=0;g<m;g++)p[g]=S[g]/w;else if(T.isNumber(S)&&T.isArray(w))for(m=w.length,g=0;g<m;g++)p[g]=S/w[g];else if(T.isArray(S)&&T.isArray(w))for(m=Math.min(S.length,w.length),g=0;g<m;g++)p[g]=S[g]/w[g];else p=S/w;return p},divide:function(){E.deprecated("Statistics.divide()","Statistics.div()"),I.Statistics.div.apply(I.Statistics,arguments)},mod:function(S,w,g){var m,p,a=[],u=function(c,l){return c%l};if((g=T.def(g,!1))&&(u=I.mod),S=T.evalSlider(S),w=T.evalSlider(w),T.isArray(S)&&T.isNumber(w))for(p=S.length,m=0;m<p;m++)a[m]=u(S[m],w);else if(T.isNumber(S)&&T.isArray(w))for(p=w.length,m=0;m<p;m++)a[m]=u(S,w[m]);else if(T.isArray(S)&&T.isArray(w))for(p=Math.min(S.length,w.length),m=0;m<p;m++)a[m]=u(S[m],w[m]);else a=u(S,w);return a},multiply:function(S,w){var g,m,p=[];if(S=T.evalSlider(S),w=T.evalSlider(w),T.isArray(S)&&T.isNumber(w))for(m=S.length,g=0;g<m;g++)p[g]=S[g]*w;else if(T.isNumber(S)&&T.isArray(w))for(m=w.length,g=0;g<m;g++)p[g]=S*w[g];else if(T.isArray(S)&&T.isArray(w))for(m=Math.min(S.length,w.length),g=0;g<m;g++)p[g]=S[g]*w[g];else p=S*w;return p},subtract:function(S,w){var g,m,p=[];if(S=T.evalSlider(S),w=T.evalSlider(w),T.isArray(S)&&T.isNumber(w))for(m=S.length,g=0;g<m;g++)p[g]=S[g]-w;else if(T.isNumber(S)&&T.isArray(w))for(m=w.length,g=0;g<m;g++)p[g]=S-w[g];else if(T.isArray(S)&&T.isArray(w))for(m=Math.min(S.length,w.length),g=0;g<m;g++)p[g]=S[g]-w[g];else p=S-w;return p},TheilSenRegression:function(S){var w,g,m=[],p=[],a=[];for(w=0;w<S.length;w++){for(p.length=0,g=0;g<S.length;g++)Math.abs(S[g].usrCoords[1]-S[w].usrCoords[1])>I.eps&&(p[g]=(S[g].usrCoords[2]-S[w].usrCoords[2])/(S[g].usrCoords[1]-S[w].usrCoords[1]));m[w]=this.median(p),a.push(S[w].usrCoords[2]-m[w]*S[w].usrCoords[1])}return[this.median(a),this.median(m),-1]},generateGaussian:function(S,w){var g,m,p;if(this.hasSpare)return this.hasSpare=!1,this.spare*w+S;do{p=(g=2*Math.random()-1)*g+(m=2*Math.random()-1)*m}while(p>=1||0===p);return p=Math.sqrt(-2*Math.log(p)/p),this.spare=m*p,this.hasSpare=!0,S+w*g*p}},I.Statistics}),define("math/geometry",["jxg","base/constants","base/coords","math/math","math/numerics","utils/type","utils/expect"],function(E,I,T,S,w,g,m){"use strict";return S.Geometry={},E.extend(S.Geometry,{angle:function(p,a,u){var c,l,f,v,_=[],h=[],y=[];return E.deprecated("Geometry.angle()","Geometry.rad()"),p.coords?(_[0]=p.coords.usrCoords[1],_[1]=p.coords.usrCoords[2]):(_[0]=p[0],_[1]=p[1]),a.coords?(h[0]=a.coords.usrCoords[1],h[1]=a.coords.usrCoords[2]):(h[0]=a[0],h[1]=a[1]),u.coords?(y[0]=u.coords.usrCoords[1],y[1]=u.coords.usrCoords[2]):(y[0]=u[0],y[1]=u[1]),c=_[0]-h[0],l=_[1]-h[1],f=y[0]-h[0],v=y[1]-h[1],Math.atan2(c*v-l*f,c*f+l*v)},trueAngle:function(p,a,u){return 57.29577951308232*this.rad(p,a,u)},rad:function(p,a,u){var c,l,f,v,_,h,y;return p.coords?(c=p.coords.usrCoords[1],l=p.coords.usrCoords[2]):(c=p[0],l=p[1]),a.coords?(f=a.coords.usrCoords[1],v=a.coords.usrCoords[2]):(f=a[0],v=a[1]),u.coords?(_=u.coords.usrCoords[1],h=u.coords.usrCoords[2]):(_=u[0],h=u[1]),(y=Math.atan2(h-v,_-f)-Math.atan2(l-v,c-f))<0&&(y+=6.283185307179586),y},angleBisector:function(p,a,u,c){var l,f,v,_,h,y=p.coords.usrCoords,b=a.coords.usrCoords,x=u.coords.usrCoords;return g.exists(c)||(c=p.board),0===b[0]?new T(I.COORDS_BY_USER,[1,.5*(y[1]+x[1]),.5*(y[2]+x[2])],c):(_=y[1]-b[1],h=y[2]-b[2],l=Math.atan2(h,_),_=x[1]-b[1],h=x[2]-b[2],v=.5*(l+(f=Math.atan2(h,_))),l>f&&(v+=Math.PI),_=Math.cos(v)+b[1],h=Math.sin(v)+b[2],new T(I.COORDS_BY_USER,[1,_,h],c))},reflection:function(p,a,u){var v,_,h,y=a.coords.usrCoords,b=p.point1.coords.usrCoords,x=p.point2.coords.usrCoords;return g.exists(u)||(u=a.board),new T(I.COORDS_BY_USER,[y[1]+2*(h=((v=x[1]-b[1])*(y[2]-b[2])-(_=x[2]-b[2])*(y[1]-b[1]))/(v*v+_*_))*_,y[2]-2*h*v],u)},rotation:function(p,a,u,c){var l,f,v,_,h,b=a.coords.usrCoords,x=p.coords.usrCoords;return g.exists(c)||(c=a.board),f=b[2]-x[2],h=(l=b[1]-x[1])*(v=Math.cos(u))-f*(_=Math.sin(u))+x[1],new T(I.COORDS_BY_USER,[h,l*_+f*v+x[2]],c)},perpendicular:function(p,a,u){var c,l,f,v,_,h=p.point1.coords.usrCoords,y=p.point2.coords.usrCoords,b=a.coords.usrCoords;return g.exists(u)||(u=a.board),a===p.point1?(c=h[1]+y[2]-h[2],l=h[2]-y[1]+h[1],_=h[0]*y[0],Math.abs(_)<S.eps&&(c=y[2],l=-y[1]),v=[_,c,l],f=!0):a===p.point2?(c=y[1]+h[2]-y[2],l=y[2]-h[1]+y[1],_=h[0]*y[0],Math.abs(_)<S.eps&&(c=h[2],l=-h[1]),v=[_,c,l],f=!1):Math.abs(S.innerProduct(b,p.stdform,3))<S.eps?(c=b[1]+y[2]-b[2],l=b[2]-y[1]+b[1],_=y[0],Math.abs(_)<S.eps&&(c=y[2],l=-y[1]),f=!0,Math.abs(_)>S.eps&&Math.abs(c-b[1])<S.eps&&Math.abs(l-b[2])<S.eps&&(c=b[1]+h[2]-b[2],l=b[2]-h[1]+b[1],f=!1),v=[_,c,l]):(v=S.crossProduct(v=[0,p.stdform[1],p.stdform[2]],b),v=S.crossProduct(v,p.stdform),f=!0),[new T(I.COORDS_BY_USER,v,u),f]},circumcenterMidpoint:function(){E.deprecated("Geometry.circumcenterMidpoint()","Geometry.circumcenter()"),this.circumcenter.apply(this,arguments)},circumcenter:function(p,a,u,c){var v,_,h=p.coords.usrCoords,y=a.coords.usrCoords,b=u.coords.usrCoords;return g.exists(c)||(c=p.board),v=S.crossProduct([y[0]-h[0],-y[2]+h[2],y[1]-h[1]],[.5*(h[0]+y[0]),.5*(h[1]+y[1]),.5*(h[2]+y[2])]),_=S.crossProduct([b[0]-y[0],-b[2]+y[2],b[1]-y[1]],[.5*(y[0]+b[0]),.5*(y[1]+b[1]),.5*(y[2]+b[2])]),new T(I.COORDS_BY_USER,S.crossProduct(v,_),c)},distance:function(p,a,u){var c,l=0;for(u||(u=Math.min(p.length,a.length)),c=0;c<u;c++)l+=(p[c]-a[c])*(p[c]-a[c]);return Math.sqrt(l)},affineDistance:function(p,a,u){var c;return(c=this.distance(p,a,u))>S.eps&&(Math.abs(p[0])<S.eps||Math.abs(a[0])<S.eps)?1/0:c},affineRatio:function(p,a,u){var c;return g.exists(p.usrCoords)&&(p=p.usrCoords),g.exists(a.usrCoords)&&(a=a.usrCoords),g.exists(u.usrCoords)&&(u=u.usrCoords),c=a[1]-p[1],Math.abs(c)>S.eps?(u[1]-p[1])/c:(u[2]-p[2])/(a[2]-p[2])},sortVertices:function(p){for(var a,u=m.each(p,m.coordsArray),c=u.length,l=null;u[0][0]===u[c-1][0]&&u[0][1]===u[c-1][1]&&u[0][2]===u[c-1][2];)l=u.pop(),c--;return a=u[0],u.sort(function(f,v){return(f[2]===a[2]&&f[1]===a[1]?-1/0:Math.atan2(f[2]-a[2],f[1]-a[1]))-(v[2]===a[2]&&v[1]===a[1]?-1/0:Math.atan2(v[2]-a[2],v[1]-a[1]))}),null!==l&&u.push(l),u},signedTriangle:function(p,a,u){var c=m.coordsArray(p),l=m.coordsArray(a),f=m.coordsArray(u);return.5*((l[1]-c[1])*(f[2]-c[2])-(l[2]-c[2])*(f[1]-c[1]))},signedPolygon:function(p,a){var u,c,l=0,f=m.each(p,m.coordsArray);for(void 0===a&&(a=!0),a?f.unshift(f[f.length-1]):f=this.sortVertices(f),c=f.length,u=1;u<c;u++)l+=f[u-1][1]*f[u][2]-f[u][1]*f[u-1][2];return.5*l},GrahamScan:function(p){var a,l,u=1,c=m.each(p,m.coordsArray);for(l=(c=this.sortVertices(c)).length,a=2;a<l;a++){for(;this.signedTriangle(c[u-1],c[u],c[a])<=0;){if(u>1)u-=1;else if(a===l-1)break;a+=1}c=g.swap(c,u+=1,a)}return c.slice(0,u)},calcStraight:function(p,a,u,c){var l,f,v,_,h,y,b,x,D,M;if(g.exists(c)||(c=10),y=g.evaluate(p.visProp.straightfirst),b=g.evaluate(p.visProp.straightlast),Math.abs(a.scrCoords[0])<S.eps&&(y=!0),Math.abs(u.scrCoords[0])<S.eps&&(b=!0),(y||b)&&((x=[])[0]=p.stdform[0]-p.stdform[1]*p.board.origin.scrCoords[1]/p.board.unitX+p.stdform[2]*p.board.origin.scrCoords[2]/p.board.unitY,x[1]=p.stdform[1]/p.board.unitX,x[2]=-p.stdform[2]/p.board.unitY,!isNaN(x[0]+x[1]+x[2]))){if(l=!y&&Math.abs(a.usrCoords[0])>=S.eps&&a.scrCoords[1]>=0&&a.scrCoords[1]<=p.board.canvasWidth&&a.scrCoords[2]>=0&&a.scrCoords[2]<=p.board.canvasHeight,f=!b&&Math.abs(u.usrCoords[0])>=S.eps&&u.scrCoords[1]>=0&&u.scrCoords[1]<=p.board.canvasWidth&&u.scrCoords[2]>=0&&u.scrCoords[2]<=p.board.canvasHeight,_=(v=this.meetLineBoard(x,p.board,c))[0],h=v[1],!l&&!f&&(!y&&b&&!this.isSameDirection(a,u,_)&&!this.isSameDirection(a,u,h)||y&&!b&&!this.isSameDirection(u,a,_)&&!this.isSameDirection(u,a,h)))return;l?f||(M=this.isSameDir(a,u,_,h)?h:_):f?D=this.isSameDir(a,u,_,h)?_:h:this.isSameDir(a,u,_,h)?(D=_,M=h):(M=_,D=h),D&&a.setCoordinates(I.COORDS_BY_USER,D.usrCoords),M&&u.setCoordinates(I.COORDS_BY_USER,M.usrCoords)}},calcLineDelimitingPoints:function(p,a,u){var c,l,f,v,_,h,y,b,x,D,M;if(_=g.evaluate(p.visProp.straightfirst),h=g.evaluate(p.visProp.straightlast),Math.abs(a.scrCoords[0])<S.eps&&(_=!0),Math.abs(u.scrCoords[0])<S.eps&&(h=!0),(y=[])[0]=p.stdform[0]-p.stdform[1]*p.board.origin.scrCoords[1]/p.board.unitX+p.stdform[2]*p.board.origin.scrCoords[2]/p.board.unitY,y[1]=p.stdform[1]/p.board.unitX,y[2]=-p.stdform[2]/p.board.unitY,!isNaN(y[0]+y[1]+y[2])){if(D=!_,M=!h,l=p.board.getBoundingBox(),p.getSlope()>=0?(f=this.projectPointToLine({coords:{usrCoords:[1,l[2],l[1]]}},p,p.board),v=this.projectPointToLine({coords:{usrCoords:[1,l[0],l[3]]}},p,p.board)):(f=this.projectPointToLine({coords:{usrCoords:[1,l[0],l[1]]}},p,p.board),v=this.projectPointToLine({coords:{usrCoords:[1,l[2],l[3]]}},p,p.board)),!D&&!M&&(!_&&!h&&(c=a.distance(I.COORDS_BY_USER,u),Math.abs(a.distance(I.COORDS_BY_USER,f)+f.distance(I.COORDS_BY_USER,u)-c)>S.eps||Math.abs(a.distance(I.COORDS_BY_USER,v)+v.distance(I.COORDS_BY_USER,u)-c)>S.eps)||!_&&h&&!this.isSameDirection(a,u,f)&&!this.isSameDirection(a,u,v)||_&&!h&&!this.isSameDirection(u,a,f)&&!this.isSameDirection(u,a,v)))return;D?M||(x=this.isSameDir(a,u,f,v)?v:f):M?b=this.isSameDir(a,u,f,v)?f:v:this.isSameDir(a,u,f,v)?(b=f,x=v):(x=f,b=v),b&&a.setCoordinates(I.COORDS_BY_USER,b.usrCoords),x&&u.setCoordinates(I.COORDS_BY_USER,x.usrCoords)}},calcLabelQuadrant:function(p){return p<0&&(p+=2*Math.PI),["rt","urt","top","ulft","lft","llft","lrt"][Math.floor((p+Math.PI/8)/(Math.PI/4))%8]},isSameDir:function(p,a,u,c){var l=a.usrCoords[1]-p.usrCoords[1],f=a.usrCoords[2]-p.usrCoords[2],v=c.usrCoords[1]-u.usrCoords[1],_=c.usrCoords[2]-u.usrCoords[2];return Math.abs(a.usrCoords[0])<S.eps&&(l=a.usrCoords[1],f=a.usrCoords[2]),Math.abs(p.usrCoords[0])<S.eps&&(l=-p.usrCoords[1],f=-p.usrCoords[2]),l*v+f*_>=0},isSameDirection:function(p,a,u){var c,l,f,v,_=!1;return c=a.usrCoords[1]-p.usrCoords[1],l=a.usrCoords[2]-p.usrCoords[2],f=u.usrCoords[1]-p.usrCoords[1],v=u.usrCoords[2]-p.usrCoords[2],Math.abs(c)<S.eps&&(c=0),Math.abs(l)<S.eps&&(l=0),Math.abs(f)<S.eps&&(f=0),Math.abs(v)<S.eps&&(v=0),(c>=0&&f>=0||c<=0&&f<=0)&&(_=l>=0&&v>=0||l<=0&&v<=0),_},det3p:function(p,a,u){return(p[1]-u[1])*(a[2]-u[2])-(a[1]-u[1])*(p[2]-u[2])},windingNumber:function(p,a,u){var c,l,f,v,_,h,y=0,b=a.length,x=p[1],D=p[2],M=0;if(0===b)return 0;if((u=u||!1)&&(M=1),isNaN(x)||isNaN(D)||(g.exists(a[0].coords)?(c=a[0].coords,l=a[b-1].coords):(c=a[0],l=a[b-1]),c.usrCoords[1]===x&&c.usrCoords[2]===D))return 1;for(h=0;h<b-M;h++)if(g.exists(a[h].coords)?(l=a[h].coords.usrCoords,f=a[(h+1)%b].coords.usrCoords):(l=a[h].usrCoords,f=a[(h+1)%b].usrCoords),!(0===l[0]||0===f[0]||isNaN(l[1])||isNaN(f[1])||isNaN(l[2])||isNaN(f[2]))){if(f[2]===D){if(f[1]===x)return 1;if(l[2]===D&&f[1]>x==l[1]<x)return 0}if(l[2]<D!=f[2]<D)if(_=2*(f[2]>l[2]?1:0)-1,l[1]>=x)if(f[1]>x)y+=_;else{if(0===(v=this.det3p(l,f,p)))return 0;v>0+S.eps==f[2]>l[2]&&(y+=_)}else f[1]>x&&(v=this.det3p(l,f,p))>0+S.eps==f[2]>l[2]&&(y+=_)}return y},pnpoly:function(p,a,u,c){var l,f,v,_,h,y,b,x,D=u,M=!1;for(c===I.COORDS_BY_USER?(_=(y=new T(I.COORDS_BY_USER,[p,a],this.board)).scrCoords[1],h=y.scrCoords[2]):(_=p,h=a),l=0,f=(v=u.length)-2;l<v-1;f=l++)b=g.exists(D[l].coords)?D[l].coords:D[l],x=g.exists(D[f].coords)?D[f].coords:D[f],b.scrCoords[2]>h!=x.scrCoords[2]>h&&_<(x.scrCoords[1]-b.scrCoords[1])*(h-b.scrCoords[2])/(x.scrCoords[2]-b.scrCoords[2])+b.scrCoords[1]&&(M=!M);return M},intersectionFunction:function(p,a,u,c,l,f){var v,_,h=this;return v=a.elementClass===I.OBJECT_CLASS_CURVE&&(a.type===I.OBJECT_TYPE_ARC||a.type===I.OBJECT_TYPE_SECTOR),_=u.elementClass===I.OBJECT_CLASS_CURVE&&(u.type===I.OBJECT_TYPE_ARC||u.type===I.OBJECT_TYPE_SECTOR),a.elementClass!==I.OBJECT_CLASS_CURVE&&u.elementClass!==I.OBJECT_CLASS_CURVE||a.elementClass!==I.OBJECT_CLASS_CURVE&&a.elementClass!==I.OBJECT_CLASS_CIRCLE||u.elementClass!==I.OBJECT_CLASS_CURVE&&u.elementClass!==I.OBJECT_CLASS_CIRCLE?a.elementClass===I.OBJECT_CLASS_CURVE&&!v&&u.elementClass===I.OBJECT_CLASS_LINE||u.elementClass===I.OBJECT_CLASS_CURVE&&!_&&a.elementClass===I.OBJECT_CLASS_LINE?function(){return h.meetCurveLine(a,u,c,a.board,f)}:a.type===I.OBJECT_TYPE_POLYGON||u.type===I.OBJECT_TYPE_POLYGON?a.elementClass===I.OBJECT_CLASS_LINE?function(){return h.meetPolygonLine(u,a,c,a.board,f)}:u.elementClass===I.OBJECT_CLASS_LINE?function(){return h.meetPolygonLine(a,u,c,a.board,f)}:function(){return h.meetPathPath(a,u,c,a.board)}:a.elementClass===I.OBJECT_CLASS_LINE&&u.elementClass===I.OBJECT_CLASS_LINE?function(){var y,x=g.evaluate(a.visProp.straightfirst),D=g.evaluate(a.visProp.straightlast),M=g.evaluate(u.visProp.straightfirst),O=g.evaluate(u.visProp.straightlast);return g.evaluate(f)||x&&D&&M&&O?h.meet(a.stdform,u.stdform,c,a.board):(y=h.meetSegmentSegment(a.point1.coords.usrCoords,a.point2.coords.usrCoords,u.point1.coords.usrCoords,u.point2.coords.usrCoords),new T(I.COORDS_BY_USER,!x&&y[1]<0||!D&&y[1]>1||!M&&y[2]<0||!O&&y[2]>1?[0,NaN,NaN]:y[0],a.board))}:function(){var y,b,x,D=h.meet(a.stdform,u.stdform,c,a.board),M=!0;return f?D:a.elementClass===I.OBJECT_CLASS_LINE&&(y=g.evaluate(a.visProp.straightfirst),b=g.evaluate(a.visProp.straightlast),(!y||!b)&&(x=h.affineRatio(a.point1.coords,a.point2.coords,D),!b&&x>1+S.eps||!y&&x<0-S.eps))||u.elementClass===I.OBJECT_CLASS_LINE&&(y=g.evaluate(u.visProp.straightfirst),b=g.evaluate(u.visProp.straightlast),(!y||!b)&&(x=h.affineRatio(u.point1.coords,u.point2.coords,D),!b&&x>1+S.eps||!y&&x<0-S.eps))||v&&((M=h.coordsOnArc(a,D))&&_&&(M=h.coordsOnArc(u,D)),!M)?new T(E.COORDS_BY_USER,[0,NaN,NaN],a.board):D}:function(){return h.meetCurveCurve(a,u,c,l,a.board)}},coordsOnArc:function(p,a){var u=this.rad(p.radiuspoint,p.center,a.usrCoords.slice(1)),c=0,l=this.rad(p.radiuspoint,p.center,p.anglepoint),f=g.evaluate(p.visProp.selection);return("minor"===f&&l>Math.PI||"major"===f&&l<Math.PI)&&(c=l,l=2*Math.PI),!(u<c||u>l)},meet:function(p,a,u,c){var l=S.eps;return Math.abs(p[3])<l&&Math.abs(a[3])<l?this.meetLineLine(p,a,u,c):Math.abs(p[3])>=l&&Math.abs(a[3])<l?this.meetLineCircle(a,p,u,c):Math.abs(p[3])<l&&Math.abs(a[3])>=l?this.meetLineCircle(p,a,u,c):this.meetCircleCircle(p,a,u,c)},meetLineBoard:function(p,a,u){var c,l,f,v,_=[];for(g.exists(u)||(u=0),_[0]=S.crossProduct(p,[u,0,1]),_[1]=S.crossProduct(p,[u,1,0]),_[2]=S.crossProduct(p,[-u-a.canvasHeight,0,1]),_[3]=S.crossProduct(p,[-u-a.canvasWidth,1,0]),f=0;f<4;f++)if(Math.abs(_[f][0])>S.eps){for(v=2;v>0;v--)_[f][v]/=_[f][0];_[f][0]=1}return Math.abs(_[1][0])<S.eps?(c=_[0],l=_[2]):Math.abs(_[0][0])<S.eps?(c=_[1],l=_[3]):_[1][2]<0?(c=_[0],l=_[3][2]>a.canvasHeight?_[2]:_[3]):_[1][2]>a.canvasHeight?(c=_[2],l=_[3][2]<0?_[0]:_[3]):(c=_[1],l=_[3][2]<0?_[0]:_[3][2]>a.canvasHeight?_[2]:_[3]),[c=new T(I.COORDS_BY_SCREEN,c.slice(1),a),l=new T(I.COORDS_BY_SCREEN,l.slice(1),a)]},meetLineLine:function(p,a,u,c){var l=isNaN(p[5]+a[5])?[0,0,0]:S.crossProduct(p,a);return new T(I.COORDS_BY_USER,l,c)},meetLineCircle:function(p,a,u,c){var l,f,v,_,h,y,b,x,D;return a[4]<S.eps?Math.abs(S.innerProduct([1,a[6],a[7]],p,3))<S.eps?new T(I.COORDS_BY_USER,a.slice(6,8),c):new T(I.COORDS_BY_USER,[NaN,NaN],c):(v=a[0],f=a.slice(1,3),l=a[3],_=p[0],h=p.slice(1,3),(x=(b=f[0]*h[1]-f[1]*h[0])*b-4*(y=l)*(l*_*_-(f[0]*h[0]+f[1]*h[1])*_+v))>-S.eps*S.eps?(D=[(-b+(x=Math.sqrt(Math.abs(x))))/(2*y),(-b-x)/(2*y)],new T(I.COORDS_BY_USER,0===u?[-D[0]*-h[1]-_*h[0],-D[0]*h[0]-_*h[1]]:[-D[1]*-h[1]-_*h[0],-D[1]*h[0]-_*h[1]],c)):new T(I.COORDS_BY_USER,[0,0,0],c))},meetCircleCircle:function(p,a,u,c){var l;return p[4]<S.eps?Math.abs(this.distance(p.slice(6,2),a.slice(6,8))-a[4])<S.eps?new T(I.COORDS_BY_USER,p.slice(6,8),c):new T(I.COORDS_BY_USER,[0,0,0],c):a[4]<S.eps?Math.abs(this.distance(a.slice(6,2),p.slice(6,8))-p[4])<S.eps?new T(I.COORDS_BY_USER,a.slice(6,8),c):new T(I.COORDS_BY_USER,[0,0,0],c):(l=S.normalize(l=[a[3]*p[0]-p[3]*a[0],a[3]*p[1]-p[3]*a[1],a[3]*p[2]-p[3]*a[2],0,1,1/0,1/0,1/0]),this.meetLineCircle(l,p,u,c))},meetCurveCurve:function(p,a,u,c,l,f){var v;return v=g.exists(f)&&"newton"===f?w.generalizedNewton(p,a,u,c):3===p.bezierDegree||3===a.bezierDegree?this.meetBezierCurveRedBlueSegments(p,a,u):this.meetCurveRedBlueSegments(p,a,u),new T(I.COORDS_BY_USER,v,l)},meetCurveLine:function(p,a,u,c,l){var f,v;return g.exists(c)||(c=p.board),p.elementClass===I.OBJECT_CLASS_CURVE?(f=p,v=a):(f=a,v=p),this.meetCurveLineDiscrete(f,v,u,c,!l)},meetCurveLineContinuous:function(p,a,u,c,l){var f,v,_,h,y,b,x,D,M,O,A,N,L,B=S.eps,V=S.eps;for(h=this.meetCurveLineDiscrete(p,a,u,c,l),y=h.usrCoords[1],b=h.usrCoords[2],v=function(U){var j,z;return U>p.maxX()||U<p.minX()?1/0:(j=y-p.X(U))*j+(z=b-p.Y(U))*z},_=function(U){var j=a.stdform[0]+a.stdform[1]*p.X(U)+a.stdform[2]*p.Y(U);return j*j},D=(p.maxX()-p.minX())/50,M=p.minX(),N=1e-4,A=NaN,O=0;O<50&&(f=w.root(v,[Math.max(M,p.minX()),Math.min(M+D,p.maxX())]),!((L=Math.abs(v(f)))<=N&&(A=f,(N=L)<B)));O++)M+=D;return f=A,L=_(f=w.root(_,[Math.max(f-D,p.minX()),Math.min(f+D,p.maxX())])),x=isNaN(L)||Math.abs(L)>V?0:1,new T(I.COORDS_BY_USER,[x,p.X(f),p.Y(f)],c)},meetCurveLineDiscrete:function(p,a,u,c,l){var f,v,_,h,y,b,x,D=a.point1.coords.usrCoords,M=a.point2.coords.usrCoords,O=0,A=p.numberPoints,N=g.evaluate(a.visProp.straightfirst),L=g.evaluate(a.visProp.straightlast);for(b=new T(I.COORDS_BY_USER,[0,NaN,NaN],c),0===D[0]?D=[1,M[1]+a.stdform[2],M[2]-a.stdform[1]]:0===M[0]&&(M=[1,D[1]+a.stdform[2],D[2]-a.stdform[1]]),h=p.points[0].usrCoords,f=1;f<A;f+=p.bezierDegree)if(_=h.slice(0),this.distance(_,h=p.points[f].usrCoords)>S.eps)for(x=3===p.bezierDegree?this.meetBeziersegmentBeziersegment([p.points[f-1].usrCoords.slice(1),p.points[f].usrCoords.slice(1),p.points[f+1].usrCoords.slice(1),p.points[f+2].usrCoords.slice(1)],[D.slice(1),M.slice(1)],l):[this.meetSegmentSegment(_,h,D,M)],v=0;v<x.length;v++)if(0<=(y=x[v])[1]&&y[1]<=1){if(O===u)return l&&(!N&&y[2]<0||!L&&y[2]>1)?b:b=new T(I.COORDS_BY_USER,y[0],c);O+=1}return b},meetCurveRedBlueSegments:function(p,a,u){var c,l,f,v,_,h,y,b,x,D=0,M=a.numberPoints,O=p.numberPoints;if(M<=1||O<=1)return[0,NaN,NaN];for(c=1;c<O;c++)for(f=p.points[c-1].usrCoords,v=p.points[c].usrCoords,b=Math.min(f[1],v[1]),x=Math.max(f[1],v[1]),h=a.points[0].usrCoords,l=1;l<M;l++)if(_=h,h=a.points[l].usrCoords,Math.min(_[1],h[1])<x&&Math.max(_[1],h[1])>b&&(y=this.meetSegmentSegment(f,v,_,h))[1]>=0&&y[2]>=0&&(y[1]<1&&y[2]<1||c===O-1&&1===y[1]||l===M-1&&1===y[2])){if(D===u)return y[0];D++}return[0,NaN,NaN]},meetSegmentSegment:function(p,a,u,c){var l,f,v,_=S.crossProduct(p,a),h=S.crossProduct(u,c),y=S.crossProduct(_,h);return Math.abs(y[0])<S.eps?[y,1/0,1/0]:(y[1]/=y[0],y[2]/=y[0],y[0]/=y[0],v=p[f=Math.abs(a[1]-a[0]*p[1])<S.eps?2:1]/p[0],l=(y[f]-v)/(0!==a[0]?a[f]/a[0]-v:a[f]),v=u[f=Math.abs(c[1]-c[0]*u[1])<S.eps?2:1]/u[0],[y,l,(y[f]-v)/(0!==c[0]?c[f]/c[0]-v:c[f])])},meetPathPath:function(p,a,u,c){var l,f,v,_;return(v=(l=E.Math.Clip._getPath(p,c)).length)>0&&this.distance(l[0].coords.usrCoords,l[v-1].coords.usrCoords,3)<S.eps&&l.pop(),(v=(f=E.Math.Clip._getPath(a,c)).length)>0&&this.distance(f[0].coords.usrCoords,f[v-1].coords.usrCoords,3)<S.eps*S.eps&&f.pop(),u<0||E.Math.Clip.isEmptyCase(l,f,"intersection")?new T(I.COORDS_BY_USER,[0,0,0],c):(E.Math.Clip.makeDoublyLinkedList(l),E.Math.Clip.makeDoublyLinkedList(f),u<(_=E.Math.Clip.findIntersections(l,f,c)[0]).length?_[u].coords:new T(I.COORDS_BY_USER,[0,0,0],c))},meetPolygonLine:function(p,a,u,c,l){var f,v,_,h=[0,0,0],y=p.borders.length,b=[];for(f=0;f<y;f++)v=this.meetSegmentSegment((_=p.borders[f]).point1.coords.usrCoords,_.point2.coords.usrCoords,a.point1.coords.usrCoords,a.point2.coords.usrCoords),(!l||v[2]>=0&&v[2]<1)&&v[1]>=0&&v[1]<1&&b.push(v[0]);return u>=0&&u<b.length&&(h=b[u]),new T(I.COORDS_BY_USER,h,c)},_bezierSplit:function(p){var a,u,c,l,f,v;return v=[.5*((l=[.5*((a=[.5*(p[0][0]+p[1][0]),.5*(p[0][1]+p[1][1])])[0]+(u=[.5*(p[1][0]+p[2][0]),.5*(p[1][1]+p[2][1])])[0]),.5*(a[1]+u[1])])[0]+(f=[.5*(u[0]+(c=[.5*(p[2][0]+p[3][0]),.5*(p[2][1]+p[3][1])])[0]),.5*(u[1]+c[1])])[0]),.5*(l[1]+f[1])],[[p[0],a,l,v],[v,f,c,p[3]]]},_bezierBbox:function(p){var a=[];return 4===p.length?(a[0]=Math.min(p[0][0],p[1][0],p[2][0],p[3][0]),a[1]=Math.max(p[0][1],p[1][1],p[2][1],p[3][1]),a[2]=Math.max(p[0][0],p[1][0],p[2][0],p[3][0]),a[3]=Math.min(p[0][1],p[1][1],p[2][1],p[3][1])):(a[0]=Math.min(p[0][0],p[1][0]),a[1]=Math.max(p[0][1],p[1][1]),a[2]=Math.max(p[0][0],p[1][0]),a[3]=Math.min(p[0][1],p[1][1])),a},_bezierOverlap:function(p,a){return p[2]>=a[0]&&p[0]<=a[2]&&p[1]>=a[3]&&p[3]<=a[1]},_bezierListConcat:function(p,a,u,c){var l,f=g.exists(c),v=0,_=a.length,h=p.length;for(h>0&&_>0&&(1===p[h-1][1]&&0===a[0][1]||f&&1===p[h-1][2]&&0===a[0][2])&&(v=1),l=v;l<_;l++)f&&(a[l][2]*=.5,a[l][2]+=c),a[l][1]*=.5,a[l][1]+=u,p.push(a[l])},_bezierMeetSubdivision:function(p,a,u){var c,l,f,v,_,h,y,b,x,D,M,O,A=[];return l=this._bezierBbox(a),c=this._bezierBbox(p),this._bezierOverlap(l,c)?u<5?(h=(f=this._bezierSplit(p))[0],y=f[1],v=(f=this._bezierSplit(a))[0],_=f[1],this._bezierListConcat(A,this._bezierMeetSubdivision(h,v,u+1),0,0),this._bezierListConcat(A,this._bezierMeetSubdivision(h,_,u+1),0,.5),this._bezierListConcat(A,this._bezierMeetSubdivision(y,v,u+1),.5,0),this._bezierListConcat(A,this._bezierMeetSubdivision(y,_,u+1),.5,.5),A):(M=[1].concat(p[0]),O=[1].concat(p[3]),x=[1].concat(a[0]),D=[1].concat(a[3]),(b=this.meetSegmentSegment(M,O,x,D))[1]>=0&&b[2]>=0&&b[1]<=1&&b[2]<=1?[b]:[]):[]},_bezierLineMeetSubdivision:function(p,a,u,c){var l,f,v,_,h,y,b,x,D,M,O=[];return l=this._bezierBbox(a),f=this._bezierBbox(p),c&&!this._bezierOverlap(f,l)?[]:u<5?(_=(v=this._bezierSplit(p))[0],h=v[1],this._bezierListConcat(O,this._bezierLineMeetSubdivision(_,a,u+1),0),this._bezierListConcat(O,this._bezierLineMeetSubdivision(h,a,u+1),.5),O):(D=[1].concat(p[0]),M=[1].concat(p[3]),b=[1].concat(a[0]),x=[1].concat(a[1]),(y=this.meetSegmentSegment(D,M,b,x))[1]>=0&&y[1]<=1&&(!c||y[2]>=0&&y[2]<=1)?[y]:[])},meetBeziersegmentBeziersegment:function(p,a,u){var c,l,f;for((c=4===p.length&&4===a.length?this._bezierMeetSubdivision(p,a,0):this._bezierLineMeetSubdivision(p,a,0,u)).sort(function(v,_){return 1e7*(v[1]-_[1])+(v[2]-_[2])}),l=[],f=0;f<c.length;f++)0!==f&&c[f][1]===c[f-1][1]&&c[f][2]===c[f-1][2]||l.push(c[f]);return l},meetBezierCurveRedBlueSegments:function(p,a,u){var c,l,f,v,_,h,y,b,x,D,M=0,O=0,A=a.numberPoints,N=p.numberPoints,L=[];if(A<a.bezierDegree+1||N<p.bezierDegree+1)return[0,NaN,NaN];for(A-=a.bezierDegree,N-=p.bezierDegree,p.type===I.OBJECT_TYPE_SECTOR&&(M=3,N-=3),a.type===I.OBJECT_TYPE_SECTOR&&(O=3,A-=3),l=M;l<N;l+=p.bezierDegree)for(h=[(c=p.points)[l].usrCoords.slice(1),c[l+1].usrCoords.slice(1)],3===p.bezierDegree&&(h[2]=c[l+2].usrCoords.slice(1),h[3]=c[l+3].usrCoords.slice(1)),b=this._bezierBbox(h),f=O;f<A;f+=a.bezierDegree)if(y=[(c=a.points)[f].usrCoords.slice(1),c[f+1].usrCoords.slice(1)],3===a.bezierDegree&&(y[2]=c[f+2].usrCoords.slice(1),y[3]=c[f+3].usrCoords.slice(1)),x=this._bezierBbox(y),this._bezierOverlap(b,x)){if(0===(D=this.meetBeziersegmentBeziersegment(h,y)).length)continue;for(v=0;v<D.length;v++)(_=D[v])[1]<-S.eps||_[1]>1+S.eps||_[2]<-S.eps||_[2]>1+S.eps||L.push(_);if(L.length>u)return L[u][0]}return L.length>u?L[u][0]:[0,NaN,NaN]},bezierSegmentEval:function(p,a){var u,c,l,f=1-p;return c=0,l=0,c+=(u=f*f*f)*a[0][0],l+=u*a[0][1],c+=(u=3*p*f*f)*a[1][0],l+=u*a[1][1],c+=(u=3*p*p*f)*a[2][0],l+=u*a[2][1],[1,c+=(u=p*p*p)*a[3][0],l+=u*a[3][1]]},bezierArc:function(p,a,u,c,l){var f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z=.5*Math.PI,$=a[1],X=a[2],Z=a[0],W=[],ee=[];for(y=this.distance(a,p),$/=Z,X/=Z,b=this.rad(p.slice(1),a.slice(1),u.slice(1)),-1===l&&(b=2*Math.PI-b),(f=p)[1]/=f[0],f[2]/=f[0],f[0]/=f[0],h=f.slice(0),c?(W=[$,$+.333*(f[1]-$),$+.666*(f[1]-$),f[1]],ee=[X,X+.333*(f[2]-X),X+.666*(f[2]-X),f[2]]):(W=[f[1]],ee=[f[2]]);b>S.eps;)b>z?(x=z,b-=z):(x=b,b=0),j=[[1,0,0],[$*(1-(D=Math.cos(l*x)))+X*(M=Math.sin(l*x)),D,-M],[X*(1-D)-$*M,M,D]],h=[(V=S.matVecMult(j,f))[0]/V[0],V[1]/V[0],V[2]/V[0]],O=f[1]-$,A=f[2]-X,N=h[1]-$,L=h[2]-X,U=Math.sqrt((O+N)*(O+N)+(A+L)*(A+L)),B=Math.abs(L-A)>S.eps?(O+N)*(y/U-.5)/(L-A)*8/3:(A+L)*(y/U-.5)/(O-N)*8/3,W=W.concat([(v=[1,f[1]-B*A,f[2]+B*O])[1],(_=[1,h[1]+B*L,h[2]-B*N])[1],h[1]]),ee=ee.concat([v[2],_[2],h[2]]),f=h.slice(0);return c&&(W=W.concat([h[1]+.333*($-h[1]),h[1]+.666*($-h[1]),$]),ee=ee.concat([h[2]+.333*(X-h[2]),h[2]+.666*(X-h[2]),X])),[W,ee]},projectPointToCircle:function(p,a,u){var c,l,_,h=a.center.coords.usrCoords;return g.exists(u)||(u=p.board),g.isPoint(p)?(c=p.coords.distance(I.COORDS_BY_USER,a.center.coords),l=p.coords.usrCoords):(c=p.distance(I.COORDS_BY_USER,a.center.coords),l=p.usrCoords),Math.abs(c)<S.eps&&(c=S.eps),_=a.Radius()/c,new T(I.COORDS_BY_USER,[h[1]+_*(l[1]-h[1]),h[2]+_*(l[2]-h[2])],u)},projectPointToLine:function(p,a,u){var c,l=[0,a.stdform[1],a.stdform[2]];return g.exists(u)||(u=g.exists(p.coords)?p.board:a.board),c=g.exists(p.coords)?p.coords.usrCoords:p.usrCoords,l=S.crossProduct(l,c),new T(I.COORDS_BY_USER,S.crossProduct(l,a.stdform),u)},projectCoordsToSegment:function(p,a,u){var c,l=[u[1]-a[1],u[2]-a[2]],f=[p[1]-a[1],p[2]-a[2]];return Math.abs(l[0])<S.eps&&Math.abs(l[1])<S.eps?[a,0]:(c=S.innerProduct(f,l),[[1,(c/=S.innerProduct(l,l))*l[0]+a[1],c*l[1]+a[2]],c])},projectCoordsToBeziersegment:function(p,a,u){var c;return c=E.Math.Numerics.fminbr(function(l){var f=[1,a.X(u+l),a.Y(u+l)];return f[1]-=p[1],f[2]-=p[2],f[1]*f[1]+f[2]*f[2]},[0,1]),[[1,a.X(c+u),a.Y(c+u)],c]},projectPointToCurve:function(p,a,u){g.exists(u)||(u=p.board);var c=p.X(),l=p.Y();return this.projectCoordsToCurve(c,l,p.position||0,a,u)},projectCoordsToCurve:function(p,a,u,c,l){var f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z,$,X,Z=Number.POSITIVE_INFINITY;if(g.exists(l)||(l=c.board),"plot"===g.evaluate(c.visProp.curvetype)){if(u=0,y=Z,f=0===c.numberPoints?[0,1,1]:[c.Z(0),c.X(0),c.Y(0)],c.numberPoints>1)for(D=[1,p,a],3===c.bezierDegree?h=0:A=[c.Z(0),c.X(0),c.Y(0)],_=0;_<c.numberPoints-1;_++)3===c.bezierDegree?L=this.projectCoordsToBeziersegment(D,c,h):(N=[c.Z(_+1),c.X(_+1),c.Y(_+1)],L=this.projectCoordsToSegment(D,A,N)),M=L[0],0<=(x=L[1])&&x<=1?(b=this.distance(M,D),O=_+x):x<0?(M=A,b=this.distance(A,D),O=_):x>1&&_===c.numberPoints-2&&(b=this.distance(M=N,D),O=c.numberPoints-1),b<y&&(y=b,u=O,f=M),3===c.bezierDegree?(h++,_+=2):A=N;v=new T(I.COORDS_BY_USER,f,l)}else{for(j=(B=function(W){var ee,ie;return W<c.minX()||W>c.maxX()?1/0:(ee=p-c.X(W))*ee+(ie=a-c.Y(W))*ie})(u),$=c.minX(),z=((X=c.maxX())-$)/50,V=$,_=0;_<50;_++)((U=B(V))<j||j===1/0||isNaN(j))&&(u=V,j=U),V+=z;u=(u=(u=w.fminbr(B,[Math.max(u-z,$),Math.min(u+z,X)]))<$?$:u)>X?X:u,v=new T(I.COORDS_BY_USER,[c.X(u),c.Y(u)],l)}return[c.updateTransform(v),u]},projectCoordsToPolygon:function(p,a){var u,c,l,f,v,_=a.vertices.length,h=1/0;for(u=0;u<_-1;u++)0<=(l=E.Math.Geometry.projectCoordsToSegment(p,a.vertices[u].coords.usrCoords,a.vertices[u+1].coords.usrCoords))[1]&&l[1]<=1?(c=E.Math.Geometry.distance(l[0],p,3),f=l[0]):l[1]<0?(c=E.Math.Geometry.distance(a.vertices[u].coords.usrCoords,p,3),f=a.vertices[u].coords.usrCoords):(c=E.Math.Geometry.distance(a.vertices[u+1].coords.usrCoords,p,3),f=a.vertices[u+1].coords.usrCoords),c<h&&(v=f.slice(0),h=c);return v},projectPointToTurtle:function(p,a,u){var c,l,f,v,_,h,y,b,x,D,M=0,O=0,A=Number.POSITIVE_INFINITY,N=a.objects.length;for(g.exists(u)||(u=p.board),_=0;_<N;_++)(y=a.objects[_]).elementClass===I.OBJECT_CLASS_CURVE&&(c=(x=this.projectPointToCurve(p,y))[0],D=x[1],(h=this.distance(c.usrCoords,p.coords.usrCoords))<A&&(f=c.usrCoords[1],v=c.usrCoords[2],l=D,A=h,b=y,O=M),M+=y.numberPoints);return c=new T(I.COORDS_BY_USER,[f,v],u),[b.updateTransform(c),l+O]},projectPointToPoint:function(p,a){return a.coords},projectPointToBoard:function(p,a){var u,c,l,f=a||p.board,v=[[1,1,0,0,3,0,1],[-1,2,1,0,1,2,1],[-1,1,2,2,1,2,3],[1,2,3,0,3,2,3]],_=p.coords||p,h=f.getBoundingBox();for(u=0;u<4;u++)(l=v[u])[0]*_.usrCoords[l[1]]<l[0]*h[l[2]]&&((c=S.crossProduct([1,h[l[3]],h[l[4]]],[1,h[l[5]],h[l[6]]]))[3]=0,c=S.normalize(c),_=this.projectPointToLine({coords:_},{stdform:c},f));return _},distPointLine:function(p,a){var u,c=a[1],l=a[2],f=a[0];return Math.abs(c)+Math.abs(l)<S.eps?Number.POSITIVE_INFINITY:(u=c*p[1]+l*p[2]+f,c*=c,l*=l,Math.abs(u)/Math.sqrt(c+l))},reuleauxPolygon:function(p,a){var u,c=2*Math.PI,l=c/a,f=(a-1)/2,v=0,_=function(h,y){return function(b,x){var D=(b%c+c)%c,M=Math.floor(D/l)%a;return x||(v=p[0].Dist(p[f]),u=S.Geometry.rad([p[0].X()+1,p[0].Y()],p[0],p[f%a])),isNaN(M)?M:(D=.5*D+M*l*.5+u,p[M][h]()+v*Math[y](D))}};return[_("X","cos"),_("Y","sin"),0,c]},meet3Planes:function(p,a,u,c,l,f){var v,_,h,y,b,x=[0,0,0];for(v=S.crossProduct(l,p),_=S.crossProduct(p,u),h=S.crossProduct(u,l),y=S.innerProduct(p,h,3),b=0;b<3;b++)x[b]=(a*h[b]+c*v[b]+f*_[b])/y;return x},meetPlanePlane:function(p,a,u,c){var l,f,v,_=[0,0,0],h=[0,0,0];for(l=0;l<3;l++)_[l]=g.evaluate(p[l]),h[l]=g.evaluate(a[l]);for(f=S.crossProduct(_,h),l=0;l<3;l++)_[l]=g.evaluate(u[l]),h[l]=g.evaluate(c[l]);return v=S.crossProduct(_,h),S.crossProduct(f,v)},project3DTo3DPlane:function(p,a,u){var c,l;return u=u||[0,0,0],c=S.norm(a),l=(S.innerProduct(p,a,3)-S.innerProduct(u,a,3))/c,S.axpy(-l,a,p)},getPlaneBounds:function(p,a,u,c,l){var f,v,_,y;return p[2]+a[0]!==0?(f=(y=w.Gauss(_=[[p[0],a[0]],[p[1],a[1]]],[c-u[0],c-u[1]]))[0],v=y[1],[f,(y=w.Gauss(_,[l-u[0],l-u[1]]))[0],v,y[1]]):null}}),S.Geometry}),define("math/plot",["jxg","base/constants","base/coords","math/math","math/extrapolate","math/numerics","math/statistics","math/geometry","math/ia","utils/type"],function(E,I,T,S,w,g,m,p,a,u){"use strict";return S.Plot={checkReal:function(c){var l,f,v=!1,_=c.length;for(l=0;l<_;l++)if(f=c[l].usrCoords,!isNaN(f[1])&&!isNaN(f[2])&&Math.abs(f[0])>S.eps){v=!0;break}return v},updateParametricCurveNaive:function(c,l,f,v){var _,h,y=!1,b=(f-l)/v;for(_=0;_<v;_++)c.points[_].setCoordinates(I.COORDS_BY_USER,[c.X(h=l+_*b,y),c.Y(h,y)],!1),c.points[_]._t=h,y=!0;return c},isSegmentOutside:function(c,l,f,v,_){return l<0&&v<0||l>_.canvasHeight&&v>_.canvasHeight||c<0&&f<0||c>_.canvasWidth&&f>_.canvasWidth},isDistOK:function(c,l,f,v){return Math.abs(c)<f&&Math.abs(l)<v&&!isNaN(c+l)},isSegmentDefined:function(c,l,f,v){return!(isNaN(c+l)&&isNaN(f+v))},updateParametricCurveOld:function(c,l,f){var v,_,h,y,b,x,D,M,O,A,N,W,ee,ie,re,Pe,Oe,Se,me,_e,L=!1,B=new T(I.COORDS_BY_USER,[0,0],c.board,!1),V=[],U=[],j=[],z=[],$=!1,X=0;for(E.deprecated("Curve.updateParametricCurveOld()"),c.board.updateQuality===c.board.BOARD_QUALITY_LOW?(O=15,A=10,N=10):(O=21,A=.7,N=.7),z[0]=f-l,v=1;v<O;v++)z[v]=.5*z[v-1];v=1,V[0]=1,U[0]=0,B.setCoordinates(I.COORDS_BY_USER,[c.X(_=l,L),c.Y(_,L)],!1),b=B.scrCoords[1],x=B.scrCoords[2],B.setCoordinates(I.COORDS_BY_USER,[c.X(_=f,L=!0),c.Y(_,L)],!1),j[0]=[h=B.scrCoords[1],y=B.scrCoords[2]],D=1,M=0,c.points=[],c.points[X++]=new T(I.COORDS_BY_SCREEN,[b,x],c.board,!1);do{for($=this.isDistOK(h-b,y-x,A,N)||this.isSegmentOutside(b,x,h,y,c.board);M<O&&(!$||M<6)&&(M<=7||this.isSegmentDefined(b,x,h,y));)V[D]=v,U[D]=M,j[D]=[h,y],D+=1,_=l+(v=2*v-1)*z[++M],B.setCoordinates(I.COORDS_BY_USER,[c.X(_,L),c.Y(_,L)],!1,!0),$=this.isDistOK((h=B.scrCoords[1])-b,(y=B.scrCoords[2])-x,A,N)||this.isSegmentOutside(b,x,h,y,c.board);X>1&&(re=void 0,Pe=void 0,Oe=void 0,void 0,void 0,void 0,Pe=(ie=c.points[X-1].scrCoords)[1]-(W=c.points[X-2].scrCoords)[1],Oe=ie[2]-W[2],(_e=(Se=(ee=[h,y])[0]-W[1])*Se+(me=ee[1]-W[2])*me)>=S.eps&&(re=(Pe*Se+Oe*me)/_e)>0&&(re<=1?(Pe-=re*Se,Oe-=re*me):(Pe-=Se,Oe-=me)),Math.sqrt(Pe*Pe+Oe*Oe)<.015)&&(X-=1),c.points[X]=new T(I.COORDS_BY_SCREEN,[h,y],c.board,!1),c.points[X]._t=_,X+=1,b=h,x=y,h=j[D-=1][0],y=j[D][1],M=U[D]+1,v=2*V[D]}while(D>0&&X<5e5);return c.numberPoints=c.points.length,c},_insertPoint_v2:function(c,l,f){var v=!isNaN(this._lastCrds[1]+this._lastCrds[2]),_=!isNaN(l.scrCoords[1]+l.scrCoords[2]);(!(_=_&&l.scrCoords[1]>-500&&l.scrCoords[2]>-500&&l.scrCoords[1]<c.board.canvasWidth+500&&l.scrCoords[2]<c.board.canvasHeight+500)&&v||_&&(!v||Math.abs(l.scrCoords[1]-this._lastCrds[1])>.7||Math.abs(l.scrCoords[2]-this._lastCrds[2])>.7))&&(l._t=f,c.points.push(l),this._lastCrds=l.copy("scrCoords"))},neighborhood_isNaN_v2:function(c,l){var f,v,_=new T(I.COORDS_BY_USER,[0,0],c.board,!1);return _.setCoordinates(I.COORDS_BY_USER,[c.X(f=l+S.eps,!0),c.Y(f,!0)],!1),v=_.usrCoords,!(!isNaN(v[1]+v[2])&&(f=l-S.eps,_.setCoordinates(I.COORDS_BY_USER,[c.X(f,!0),c.Y(f,!0)],!1),v=_.usrCoords,!isNaN(v[1]+v[2])))},_borderCase:function(c,l,f,v,_,h,y,b){var x,D,M,O,A,N,L,B=null,V=!1;if(b<=1){if(D=new T(I.COORDS_BY_USER,[0,0],c.board,!1),isNaN(l[1]+l[2])&&!isNaN(v[1]+v[2])&&!this.neighborhood_isNaN_v2(c,_)||isNaN(f[1]+f[2])&&!isNaN(v[1]+v[2])&&!this.neighborhood_isNaN_v2(c,h)||isNaN(v[1]+v[2])&&(!isNaN(l[1]+l[2])||!isNaN(f[1]+f[2]))&&!this.neighborhood_isNaN_v2(c,y))return!1;O=0;do{if(isNaN(l[1]+l[2])&&!isNaN(v[1]+v[2]))A=_,N=y,L=h;else if(isNaN(f[1]+f[2])&&!isNaN(v[1]+v[2]))A=h,N=y,L=_;else if(isNaN(v[1]+v[2])&&!isNaN(f[1]+f[2]))A=y,N=h,L=h+(h-y);else{if(!isNaN(v[1]+v[2])||isNaN(l[1]+l[2]))return!1;A=y,N=_,L=_-(y-_)}D.setCoordinates(I.COORDS_BY_USER,[c.X(x=.5*(A+N),!0),c.Y(x,!0)],!1),M=D.usrCoords,(V=isNaN(M[1]+M[2]))?A=x:(L=N,N=x),++O}while(V&&O<30);if(O<30&&(B=M.slice(),v=M.slice(),N=x),c.X(N,!0),c.X(L,!0),c.Y(N,!0),c.Y(L,!0),null!==B)return this._insertPoint_v2(c,new T(I.COORDS_BY_USER,B,c.board,!1)),!0}return!1},_plotRecursive_v2:function(c,l,f,v,_,h,y){var b,x,D,M,O,A=0,N=new T(I.COORDS_BY_USER,[0,0],c.board,!1);if(!(c.numberPoints>65536))return h<this.nanLevel&&this._isUndefined(c,l,f,v,_)||h<this.nanLevel&&this._isOutside(l,f,v,_,c.board)||(N.setCoordinates(I.COORDS_BY_USER,[c.X(b=.5*(f+_),!0),c.Y(b,!0)],!1),this._borderCase(c,l,v,x=N.scrCoords,f,_,b,h)||(D=this._triangleDists(l,v,x),M=h<this.smoothLevel&&D[3]<y,O=h<this.jumpLevel&&(D[2]>.99*D[0]||D[1]>.99*D[0]||D[0]===1/0||D[1]===1/0||D[2]===1/0),h<this.smoothLevel+2&&D[0]<.5*(D[1]+D[2])&&(A=0,M=!1),--h,O?this._insertPoint_v2(c,new T(I.COORDS_BY_SCREEN,[NaN,NaN],c.board,!1),b):h<=A||M?this._insertPoint_v2(c,N,b):(this._plotRecursive_v2(c,l,f,x,b,h,y),isNaN(N.scrCoords[1]+N.scrCoords[2])||this._insertPoint_v2(c,N,b),this._plotRecursive_v2(c,x,b,v,_,h,y)))),this},updateParametricCurve_v2:function(c,l,f){var v,_,h,y,b,x,D,M,O,A=!1,N=new T(I.COORDS_BY_USER,[0,0],c.board,!1),L=new T(I.COORDS_BY_USER,[0,0],c.board,!1);return c.board.updateQuality===c.board.BOARD_QUALITY_LOW?(b=u.evaluate(c.visProp.recursiondepthlow)||13,x=2,this.smoothLevel=b-6,this.jumpLevel=3):(b=u.evaluate(c.visProp.recursiondepthhigh)||17,x=2,this.smoothLevel=b-9,this.jumpLevel=2),this.nanLevel=b-4,c.points=[],"x"===this.xterm?(D=.3*((M=c.board.getBoundingBox())[2]-M[0]),v=Math.max(l,M[0]-D),_=Math.min(f,M[2]+D)):(v=l,_=f),N.setCoordinates(I.COORDS_BY_USER,[c.X(v,A),c.Y(v,A)],!1),L.setCoordinates(I.COORDS_BY_USER,[c.X(_,A=!0),c.Y(_,A)],!1),O=this._findStartPoint(c,N.scrCoords,v,L.scrCoords,_),N.setCoordinates(I.COORDS_BY_SCREEN,O[0],!1),O=this._findStartPoint(c,L.scrCoords,_,N.scrCoords,v=O[1]),L.setCoordinates(I.COORDS_BY_SCREEN,O[0],!1),this._visibleArea=[v,_=O[1]],h=N.copy("scrCoords"),y=L.copy("scrCoords"),N._t=v,c.points.push(N),this._lastCrds=N.copy("scrCoords"),this._plotRecursive_v2(c,h,v,y,_,b,x),L._t=_,c.points.push(L),c.numberPoints=c.points.length,c},_insertLimesPoint:function(c,l,f,v,_){var h,y,b;Math.abs(this._lastUsrCrds[1])===1/0&&Math.abs(_.left_x)===1/0||Math.abs(this._lastUsrCrds[2])===1/0&&Math.abs(_.left_y)===1/0||((h=new T(I.COORDS_BY_USER,[_.left_x,_.left_y],c.board))._t=f,c.points.push(h),isNaN(_.left_x)||isNaN(_.left_y)||isNaN(_.right_x)||isNaN(_.right_y)||!(Math.abs(_.left_x-_.right_x)>S.eps||Math.abs(_.left_y-_.right_y)>S.eps)||((y=new T(I.COORDS_BY_SCREEN,l,c.board))._t=f,c.points.push(y)),(b=new T(I.COORDS_BY_USER,[_.right_x,_.right_y],c.board))._t=f,c.points.push(b),this._lastScrCrds=b.copy("scrCoords"),this._lastUsrCrds=b.copy("usrCoords"))},_insertPoint:function(c,l,f,v,_){var h,y=!isNaN(this._lastScrCrds[1]+this._lastScrCrds[2]),b=!isNaN(l[1]+l[2]),x=c.board.canvasWidth,D=c.board.canvasHeight;u.exists(_)?this._insertLimesPoint(c,l,f,v,_):(b=b&&l[1]>-500&&l[2]>-500&&l[1]<x+500&&l[2]<D+500,(y||b)&&(b&&y&&Math.abs(l[1]-this._lastScrCrds[1])<.8&&Math.abs(l[2]-this._lastScrCrds[2])<.8||Math.abs(l[1])===1/0&&Math.abs(this._lastUsrCrds[1])===1/0||Math.abs(l[2])===1/0&&Math.abs(this._lastUsrCrds[2])===1/0||((h=new T(I.COORDS_BY_SCREEN,l,c.board))._t=f,c.points.push(h),this._lastScrCrds=h.copy("scrCoords"),this._lastUsrCrds=h.copy("usrCoords"))))},_triangleDists:function(c,l,f){var v;return v=[c[0]*l[0],.5*(c[1]+l[1]),.5*(c[2]+l[2])],[p.distance(c,l,3),p.distance(c,f,3),p.distance(f,l,3),p.distance(f,v,3)]},_isUndefined:function(c,l,f,v,_){var h,y,b;if(!isNaN(l[1]+l[2])||!isNaN(v[1]+v[2]))return!1;for(b=new T(I.COORDS_BY_USER,[0,0],c.board,!1),y=0;y<20;++y)if(h=f+Math.random()*(_-f),b.setCoordinates(I.COORDS_BY_USER,[c.X(h,!0),c.Y(h,!0)],!1),!isNaN(b.scrCoords[0]+b.scrCoords[1]+b.scrCoords[2]))return!1;return!0},_isOutside:function(c,l,f,v,_){var h=500,y=_.canvasWidth,b=_.canvasHeight;return c[1]<-500&&f[1]<-500||c[2]<-500&&f[2]<-500||c[1]>y+h&&f[1]>y+h||c[2]>b+h&&f[2]>b+h},_isOutsidePoint:function(c,l){return c[1]<-500||c[2]<-500||c[1]>l.canvasWidth+500||c[2]>l.canvasHeight+500},_findStartPoint:function(c,l,f,v,_){return new T(I.COORDS_BY_USER,[0,0],c.board,!1),c.board.getBoundingBox(),[l,f]},_getBorderPos:function(c,l,f,v,_,h,y){var b,x,D,M,O,A;if(x=new T(I.COORDS_BY_USER,[0,0],c.board,!1),M=0,isNaN(f[1]+f[2])&&!isNaN(_[1]+_[2]))A=l,O=v;else if(isNaN(y[1]+y[2])&&!isNaN(_[1]+_[2]))A=h,O=v;else if(isNaN(_[1]+_[2])&&!isNaN(y[1]+y[2]))A=v,O=h;else{if(!isNaN(_[1]+_[2])||isNaN(f[1]+f[2]))return!1;A=v,O=l}do{x.setCoordinates(I.COORDS_BY_USER,[c.X(b=.5*(O+A),!0),c.Y(b,!0)],!1),D=x.usrCoords,isNaN(D[1]+D[2])?A=b:O=b,++M}while(M<30&&Math.abs(O-A)>S.eps);return b},_getCuspPos:function(c,l,f){var v=[c.X(l,!0),c.Y(l,!0)],_=[c.X(f,!0),c.Y(f,!0)];return g.fminbr(function(h){var y=[c.X(h,!0),c.Y(h,!0)];return-(Math.sqrt((v[0]-y[0])*(v[0]-y[0])+(v[1]-y[1])*(v[1]-y[1]))+Math.sqrt((_[0]-y[0])*(_[0]-y[0])+(_[1]-y[1])*(_[1]-y[1])))},[l,f],c)},_getJumpPos:function(c,l,f){return g.fminbr(function(v){var _=S.eps*S.eps,h=[c.X(v,!0),c.Y(v,!0)],y=[c.X(v+_,!0),c.Y(v+_,!0)];return-Math.abs((y[1]-h[1])/(y[0]-h[0]))},[l,f],c)},_getLimits:function(c,l){var f,v,_,h,y,b=2/(c.maxX()-c.minX());return v=(f=w.limit(l,-b,c.X))[0],"infinite"===f[1]&&(v=Math.sign(v)*(1/0)),h=(f=w.limit(l,-b,c.Y))[0],"infinite"===f[1]&&(h=Math.sign(h)*(1/0)),_=(f=w.limit(l,b,c.X))[0],"infinite"===f[1]&&(_=Math.sign(_)*(1/0)),y=(f=w.limit(l,b,c.Y))[0],"infinite"===f[1]&&(y=Math.sign(y)*(1/0)),{left_x:v,left_y:h,right_x:_,right_y:y,t:l}},_getLimes:function(c,l,f,v,_,h,y,b,x){var D;return"border"===b?D=this._getBorderPos(c,l,f,v,_,h,y):"cusp"===b?D=this._getCuspPos(c,l,h):"jump"===b&&(D=this._getJumpPos(c,l,h)),this._getLimits(c,D)},_plotNonRecursive:function(c,l,f,v,_,h){var y,b,x,D,M,O,A,N,L,B,V,U=null,j=!1,z="",$=[],X=0;for(N=c.board.origin.scrCoords,$[X++]=[l,f,v,_,h,1/0];X>0;){if(l=(V=$[--X])[0],f=V[1],v=V[2],_=V[3],B=V[5],j=!1,z="",U=null,c.points.length>65536)return;(L=V[4])<this.nanLevel&&(this._isUndefined(c,l,f,v,_)||this._isOutside(l,f,v,_,c.board))||(O=c.X(y=.5*(f+_),!0),A=c.Y(y,!0),x=this._triangleDists(l,v,b=[1,N[1]+O*c.board.unitX,N[2]-A*c.board.unitY]),D=isNaN(l[1]+l[2]),M=isNaN(v[1]+v[2]),D&&!M||!D&&M?z="border":x[0]>.66*B||x[0]<this.cusp_threshold*(x[1]+x[2])||x[1]>5*x[2]||x[2]>5*x[1]?z="cusp":(x[2]>this.jump_threshold*x[0]||x[1]>this.jump_threshold*x[0]||x[0]===1/0||x[1]===1/0||x[2]===1/0)&&(z="jump"),j=""===z&&L<this.smoothLevel&&x[3]<this.smooth_threshold,L<this.testLevel&&!j&&(""===z?j=!0:U=this._getLimes(c,f,l,y,b,_,v,z,L)),null!==U?this._insertPoint(c,b=[1,NaN,NaN],y,L,U):L<=0||j?this._insertPoint(c,b,y,L,null):($[X++]=[b,y,v,_,L-1,x[0]],$[X++]=[l,f,b,y,L-1,x[0]]))}return this},updateParametricCurve_v3:function(c,l,f){var v,_,h,y,b,x,D,M,O=!1,A=new T(I.COORDS_BY_USER,[0,0],c.board,!1),N=new T(I.COORDS_BY_USER,[0,0],c.board,!1);return b=c.board.updateQuality===c.board.BOARD_QUALITY_LOW?u.evaluate(c.visProp.recursiondepthlow)||14:u.evaluate(c.visProp.recursiondepthhigh)||17,this.smoothLevel=7,this.nanLevel=b-4,this.testLevel=4,this.cusp_threshold=.5,this.jump_threshold=.99,this.smooth_threshold=2,c.points=[],"x"===c.xterm?(x=.3*((D=c.board.getBoundingBox())[2]-D[0]),v=Math.max(l,D[0]-x),_=Math.min(f,D[2]+x)):(v=l,_=f),A.setCoordinates(I.COORDS_BY_USER,[c.X(v,O),c.Y(v,O)],!1),N.setCoordinates(I.COORDS_BY_USER,[c.X(_,O=!0),c.Y(_,O)],!1),M=this._findStartPoint(c,A.scrCoords,v,N.scrCoords,_),A.setCoordinates(I.COORDS_BY_SCREEN,M[0],!1),M=this._findStartPoint(c,N.scrCoords,_,A.scrCoords,v=M[1]),N.setCoordinates(I.COORDS_BY_SCREEN,M[0],!1),this._visibleArea=[v,_=M[1]],h=A.copy("scrCoords"),y=N.copy("scrCoords"),A._t=v,c.points.push(A),this._lastScrCrds=A.copy("scrCoords"),this._lastUsrCrds=A.copy("usrCoords"),this._plotNonRecursive(c,h,v,y,_,b),N._t=_,c.points.push(N),c.numberPoints=c.points.length,c},_criticalInterval:function(c,l,f){var v,_,h,y,b,x,D,M=!1,O=-1/0,A=!1,N=!1,L=0,B=[],V=[],U=[];for(D=m.abs(c),(y=m.median(D))<1e-7?(y=1e-7,A=!0):y*=this.criticalThreshold,v=0;v<l;v++)D[v]>y?(U.push({i:v,v:c[v],group:L}),O=v,M||(M=!0)):M&&v>O+4&&(U.length>0&&B.push(U.slice(0)),U=[],M=!1,L++);for(M&&U.length>1&&B.push(U.slice(0)),A&&0===B.length&&(N=!0),_=0;_<B.length;_++)if(V[_]="point",!((h=B[_].length)<64)){for(x=0,b=Math.sign(B[_][0].v),v=1;v<h;v++)Math.sign(B[_][v].v)!==b&&(x++,b=Math.sign(B[_][v].v));6*x>h&&(V[_]="interval")}return{smooth:N,groups:B,types:V}},Component:function(){this.left_isNaN=!1,this.right_isNaN=!1,this.left_t=null,this.right_t=null,this.t_values=[],this.x_values=[],this.y_values=[],this.len=0},findComponents:function(c,l,f,v){var _,h,y,b,x,D,M=[],O=0,A=0,N=0,L=!1,B=!1;for(y=(f-l)/v,M[O]=new this.Component,D=M[O],_=0,h=l;_<=v;_++,h+=y)b=c.X(h,B),x=c.Y(h,B),isNaN(b)||isNaN(x)?++N>1&&L&&(D.right_isNaN=!0,D.right_t=h-y,D.len=A,L=!1,M[++O]=new this.Component,D=M[O],N=0):(L||(L=!0,A=0,N>0&&(D.left_t=h-y,D.left_isNaN=!0)),N=0,D.t_values[A]=h,D.x_values[A]=b,D.y_values[A]=x,A++),0===_&&(B=!0);return L?D.len=A:M.pop(),M},getPointType:function(c,l,f,v,_,h,y){var b=_[0],x=h[0],D=v.length,M={idx:l,t:f,x:b[l],y:x[l],type:"other"};return l<5?(M.type="borderleft",M.idx=0,M.t=v[0],M.x=b[0],M.y=x[0],M):(l>y-6&&(M.type="borderright",M.idx=D-1,M.t=v[D-1],M.x=b[D-1],M.y=x[D-1]),M)},newtonApprox:function(c,l,f,v,_){var h,y=0;for(h=v;h>0;h--)y=(y+_[h][c])*(l-(h-1)*f)/h;return y+_[0][c]},thiele:function(c,l,f,v,_){var h,y=0;for(h=_;h>1;h--)y=(c-f[v+h])/(l[h][v+1]-l[h-2][v+1]+y);return l[0][v+1]+(c-f[v+1])/(l[1][v+1]+y)},differenceMethodExperiments:function(c,l){var f,v,_,h,y,b,x,D,M,O,A,N=c.t_values,L=c.x_values,B=c.y_values,V=[],U=[],j=[],z=[],$=[],X=[],Z=[],W=[],ee=0,ie=[];for(y=N[1]-N[0],$.push([]),X.push([]),Z.push([]),W.push([]),_=B.length,f=0;f<_;f++)$[0][f]=L[f],X[0][f]=B[f],Z[0][f]=L[f],W[0][f]=B[f];for($.push([]),X.push([]),Z.push([]),W.push([]),b=y,_=B.length-1,f=0;f<_;f++)V[f]=L[f+1]-L[f],U[f]=B[f+1]-B[f],j[f]=V[f],z[f]=U[f],$[1][f]=V[f],X[1][f]=U[f],Z[1][f]=b/V[f],W[1][f]=b/U[f];for(_--,h=Math.min(8,B.length-1),v=1;v<h;v++){for($.push([]),X.push([]),Z.push([]),W.push([]),b*=y,f=0;f<_;f++)V[f]=V[f+1]-V[f],U[f]=U[f+1]-U[f],$[v+1][f]=V[f],X[v+1][f]=U[f],Z[v+1][f]=b/(Z[v][f+1]-Z[v][f])+Z[v-1][f+1],W[v+1][f]=b/(W[v][f+1]-W[v][f])+W[v-1][f+1];if(!1===(A=this._criticalPoints(U,_,v))){console.log("Polynomial of degree",v),A=[];break}if(A.length>0&&++ee>1&&v%2==0)break;_--}for(f=0;f<A.length;f++){for(D=-1/0,M=0;M<A[f].length;M++)(O=Math.abs(A[f][M].v))>D&&(D=O,x=M);x=Math.floor(A[f][x].i+v/2),ie.push(this.getPointType(l,x,N,L,B,j,z,_+1))}return[ie,$,X,Z,W]},getCenterOfCriticalInterval:function(c,l,f){var v,_,h,y,b,x=0,D=0,M=f[1]-f[0],O=[];for(v=-1/0,O=[],_=0;_<c.length;_++)(y=Math.abs(c[_].v))>v?(O=[_],v=y,h=_):v===y&&O.push(_);if(O.length>0&&(b=O.reduce(function(A,N){return A+N},0)/O.length,h=Math.floor(b),b+=c[0].i),v<1/0){for(_=0;_<c.length;_++)x+=Math.abs(c[_].v)*c[_].i,D+=Math.abs(c[_].v);b=x/D}return[c[h].i+l/2,b+=l/2,f[Math.floor(b)]+M*(b-Math.floor(b))]},differenceMethod:function(c,l){var f,v,_,h,y,b,x,D,O,A=c.t_values,L=c.y_values,B=[],V=[],U=0,j=-1,z=-1,$=[],X=[];for(_=L.length,B.push(new Float64Array(c.x_values)),V.push(new Float64Array(L)),_--,h=Math.min(12,_),v=0;v<h&&(B.push(new Float64Array(_)),V.push(new Float64Array(_)),B[v+1]=B[v].map(function(Z,W,ee){return ee[W+1]-Z}),V[v+1]=V[v].map(function(Z,W,ee){return ee[W+1]-Z}),!0===(D=this._criticalInterval(V[v+1],_,v)).smooth&&(z=v,$=[]),x=this._criticalInterval(B[v+1],_,v),-1===j&&!0===x.smooth&&(j=v),!(z>=0));v++){if(D.groups.length>0&&++U>2&&(v+1)%2==0){$=D.groups,O=D.types;break}_--}for(f=0;f<$.length;f++)"interval"!==O[f]&&(b=this.getCenterOfCriticalInterval($[f],v+1,A),y=Math.floor(b[1]),X.push(this.getPointType(l,y,b[2],A,B,V,_+1)));return[X,B,V,j,z]},_insertPoint_v4:function(c,l,f,v){var _,h,y,b=null;c.points.length>0&&(b=c.points[c.points.length-1].scrCoords),_=new T(I.COORDS_BY_USER,l,c.board),null!==b&&(h=_.scrCoords[1]-b[1])*h+(y=_.scrCoords[2]-b[2])*y<.8*.8||(_._t=f,c.points.push(_))},getInterval:function(c,l,f){var v,_;return a.disable(),v=a.Interval(l,f),c.board.mathLib=a,c.board.mathLibJXG=a,c.X(v,!0),_=c.Y(v,!0),c.board.mathLib=Math,c.board.mathLibJXG=E.Math,_},sign:function(c){return c<0?-1:c>0?1:0},handleBorder:function(c,l,f,v,_){var h,y,b,x,D,O,A,N,L,B,V,U=f.idx;if(V=l.t_values[1]-l.t_values[0],"borderleft"===f.type?b=(y=h=l.left_isNaN?l.left_t:f.t-V)+V:"borderright"===f.type?y=(b=h=l.right_isNaN?l.right_t:f.t+V)-V:console.log("No bordercase!!!"),0!==(L=this.findComponents(c,y,b,32)).length){for("borderleft"===f.type&&(b=L[0].t_values[0],V=L[0].t_values[1]-L[0].t_values[0],h=y=null===(y=L[0].left_t)?b-V:y,x=this.getInterval(c,y,b),u.isObject(x)&&(O=x.lo,A=x.hi,D=c.X(h,!0),this._insertPoint_v4(c,[1,D,_[1][U]<0?A:O],h))),B=L[0].t_values.length,N=0;N<B;N++)this._insertPoint_v4(c,[1,D=L[0].x_values[N],L[0].y_values[N]],h=L[0].t_values[N]);"borderright"===f.type&&(y=L[0].t_values[B-1],V=L[0].t_values[1]-L[0].t_values[0],h=b=null===(b=L[0].right_t)?y+V:b,x=this.getInterval(c,y,b),u.isObject(x)&&(O=x.lo,A=x.hi,D=c.X(h,!0),this._insertPoint_v4(c,[1,D,_[1][U]>0?A:O],h)))}},_seconditeration_v4:function(c,l,f,v,_){var h,x,D,M,O,A,N,L,B,V,U;for(D=this.findComponents(c,l.t_values[f.idx-2],l.t_values[f.idx+2],64),O=0;O<D.length;O++){for(A=(x=this.differenceMethod(M=D[O],c))[0],L=x[1],B=x[2],V=0,N=0;N<=A.length;N++){for(U=N===A.length?M.len:A[N].idx,h=V;h<U;h++)isNaN(M.x_values[h])||isNaN(M.y_values[h])||this._insertPoint_v4(c,[1,M.x_values[h],M.y_values[h]],M.t_values[h]);N<A.length&&(this.handleSingularity(c,M,A[N],L,B),V=A[N].idx+1)}U=M.len,O<D.length-1&&this._insertPoint_v4(c,[1,NaN,NaN],M.right_t)}return this},_recurse_v4:function(c,l,f,v,_,h,y,b){var x,D,M=.5*(l+f),O=c.X(M,!0),A=c.Y(M,!0);0!==b?(x=(O-v)*c.board.unitX,D=(A-_)*c.board.unitY,Math.sqrt(x*x+D*D)>2?this._recurse_v4(c,l,M,v,_,O,A,b-1):this._insertPoint_v4(c,[1,O,A],M),x=(O-h)*c.board.unitX,D=(A-y)*c.board.unitY,Math.sqrt(x*x+D*D)>2?this._recurse_v4(c,M,f,O,A,h,y,b-1):this._insertPoint_v4(c,[1,O,A],M)):this._insertPoint_v4(c,[1,NaN,NaN],M)},handleSingularity:function(c,l,f,v,_){var h,x,D,M,O,A,N,L,B,V=f.idx;h=f.t,console.log("HandleSingularity at t =",h),x=this.getInterval(c,l.t_values[V-5],l.t_values[V+5]),u.isObject(x)?(A=x.lo,N=x.hi):_[0][V-1]<_[0][V+1]?(A=_[0][V-1],N=_[0][V+1]):(A=_[0][V+1],N=_[0][V-1]),O=c.X(h,!0),L=(_[0][V-3]-_[0][V-5])/(l.t_values[V-3]-l.t_values[V-5]),B=(_[0][V+3]-_[0][V+5])/(l.t_values[V+3]-l.t_values[V+5]),console.log(":::",L,B),L<-100?(this._insertPoint_v4(c,[1,O,A],h,!0),B<=100&&this._insertPoint_v4(c,[1,NaN,NaN],h)):L>100?(this._insertPoint_v4(c,[1,O,N],h),B>=-100&&this._insertPoint_v4(c,[1,NaN,NaN],h)):(A===-1/0&&(this._insertPoint_v4(c,[1,O,A],h,!0),this._insertPoint_v4(c,[1,NaN,NaN],h)),N===1/0&&(this._insertPoint_v4(c,[1,NaN,NaN],h),this._insertPoint_v4(c,[1,O,N],h,!0)),f.t<l.t_values[V]?(D=V-1,M=V):(D=V,M=V+1),this._recurse_v4(c,l.t_values[D],l.t_values[M],v[0][D],_[0][D],v[0][M],_[0][M],10)),B<-100?this._insertPoint_v4(c,[1,O,N],h):B>100&&this._insertPoint_v4(c,[1,O,A],h)},steps:1021,criticalThreshold:1e3,plot_v4:function(c,l,f,v){var _,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z=(f-l)/v,$=function(W){return c.Y(W,!0)},X=function(W){return-c.Y(W,!0)},Z=.5*z;for(y=this.findComponents(c,l,f,v),b=0;b<y.length;b++){for(D=(A=this.differenceMethod(x=y[b],c))[0],N=A[1],L=A[2],0!==D.length&&"borderleft"===D[0].type||D.unshift({idx:0,t:x.t_values[0],x:x.x_values[0],y:x.y_values[0],type:"borderleft"}),"borderright"!==D[D.length-1].type&&D.push({idx:(h=x.t_values.length)-1,t:x.t_values[h-1],x:x.x_values[h-1],y:x.y_values[h-1],type:"borderright"}),O=0,M=0;M<=D.length;M++){for(h=M===D.length?x.len:D[M].idx-1,_=O;_<h-2;_++)this._insertPoint_v4(c,[1,x.x_values[_],x.y_values[_]],x.t_values[_]),Math.max(0,_-2),_>=O+3&&_<h-3&&L.length>3&&Math.abs(L[2][_])>.2*Math.abs(L[0][_])&&(Z=.25*z,j=this.getInterval(c,B=x.t_values[_],B+z),u.isObject(j)?L[2][_]>0?this._insertPoint_v4(c,[1,B+Z,j.lo],B+Z):this._insertPoint_v4(c,[1,B+z-Z,j.hi],B+z-Z):(V=g.fminbr($,[B,B+z]))<(U=g.fminbr(X,[B,B+z]))?(this._insertPoint_v4(c,[1,c.X(V,!0),c.Y(V,!0)],V),this._insertPoint_v4(c,[1,c.X(U,!0),c.Y(U,!0)],U)):(this._insertPoint_v4(c,[1,c.X(U,!0),c.Y(U,!0)],U),this._insertPoint_v4(c,[1,c.X(V,!0),c.Y(V,!0)],V)));M<D.length&&(_=D[M].idx,"borderleft"===D[M].type||"borderright"===D[M].type?this.handleBorder(c,x,D[M],N,L):this._seconditeration_v4(c,x,D[M],N,L),O=D[M].idx+1+1)}h=x.len,b<y.length-1&&this._insertPoint_v4(c,[1,NaN,NaN],x.right_t)}},updateParametricCurve_v4:function(c,l,f){var v,_,h,y;"x"===c.xterm?(h=.3*((y=c.board.getBoundingBox())[2]-y[0]),v=Math.max(l,y[0]-h),_=Math.min(f,y[2]+h)):(v=l,_=f),c.points=[],this.plot_v4(c,v,_,this.steps),c.numberPoints=c.points.length},updateParametricCurve:function(c,l,f){return this.updateParametricCurve_v2(c,l,f)}},S.Plot}),define("math/metapost",["utils/type","math/math"],function(E,I){"use strict";return I.Metapost={MP_ENDPOINT:0,MP_EXPLICIT:1,MP_GIVEN:2,MP_CURL:3,MP_OPEN:4,MP_END_CYCLE:5,UNITY:1,FRACTION_ONE:1,FRACTION_THREE:3,ONE_EIGHTY_DEG:Math.PI,THREE_SIXTY_DEG:2*Math.PI,EPS_SQ:1e-5*1e-5,make_choices:function(T){var S,w,g,m,p,a,u,c,l,f,v,_,h,y,b;u=T[0];do{if(!u)break;a=u.next,u.rtype>this.MP_EXPLICIT&&(u.x-a.x)*(u.x-a.x)+(u.y-a.y)*(u.y-a.y)<this.EPS_SQ&&(u.rtype=this.MP_EXPLICIT,u.ltype===this.MP_OPEN&&(u.ltype=this.MP_CURL,u.set_left_curl(this.UNITY)),a.ltype=this.MP_EXPLICIT,a.rtype===this.MP_OPEN&&(a.rtype=this.MP_CURL,a.set_right_curl(this.UNITY)),u.rx=u.x,a.lx=u.x,u.ry=u.y,a.ly=u.y),u=a}while(u!==T[0]);for(w=T[0];w.ltype===this.MP_OPEN&&w.rtype===this.MP_OPEN;)if((w=w.next)===T[0]){w.ltype=this.MP_END_CYCLE;break}for(u=w;u;){if(a=u.next,u.rtype>=this.MP_GIVEN){for(;a.ltype===this.MP_OPEN&&a.rtype===this.MP_OPEN;)a=a.next;for(g=0,c=u,p=T.length,_=[],h=[],y=[],b=[null];_.push((f=c.next).x-c.x),h.push(f.y-c.y),y.push(this.mp_pyth_add(_[g],h[g])),g>0&&(v=h[g-1]/y[g-1],l=_[g-1]/y[g-1],b.push(Math.atan2(h[g]*l-_[g]*v,_[g]*l+h[g]*v))),g++,(c=f)===a&&(p=g),!(g>=p&&c.ltype!==this.MP_END_CYCLE););b.push(g===p?0:b[1]),a.ltype===this.MP_OPEN&&((m=a.rx-a.x)*m+(S=a.ry-a.y)*S<this.EPS_SQ?(a.ltype=this.MP_CURL,a.set_left_curl(this.UNITY)):(a.ltype=this.MP_GIVEN,a.set_left_given(Math.atan2(S,m)))),u.rtype===this.MP_OPEN&&u.ltype===this.MP_EXPLICIT&&((m=u.x-u.lx)*m+(S=u.y-u.ly)*S<this.EPS_SQ?(u.rtype=this.MP_CURL,u.set_right_curl(this.UNITY)):(u.rtype=this.MP_GIVEN,u.set_right_given(Math.atan2(S,m)))),this.mp_solve_choices(u,a,p,_,h,y,b)}else u.rtype===this.MP_ENDPOINT&&(u.rx=u.x,u.ry=u.y,a.lx=a.x,a.ly=a.y);if((u=a)===w)break}},mp_solve_choices:function(T,S,w,g,m,p,a){var u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z,$,X,W,ee;for(v=p.length+1,x=new Array(v),b=new Array(v),l=new Array(v),N=new Array(v),W=0;W<v;W++)N[W]=l[W]=b[W]=x[W]=0;for(h=0,y=T,M=0;;){if(O=y.next,0===h)if(y.rtype===this.MP_GIVEN){if(O.ltype===this.MP_GIVEN)return u=Math.atan2(m[0],g[0]),j=(U=this.mp_n_sin_cos(T.right_given()-u))[0],z=U[1],X=($=this.mp_n_sin_cos(S.left_given()-u))[0],void this.mp_set_controls(T,S,g[0],m[0],z,j,-$[1],X);l[0]=y.right_given()-Math.atan2(m[0],g[0]),l[0]=this.reduce_angle(l[0]),x[0]=0,b[0]=0}else if(y.rtype===this.MP_CURL){if(O.ltype===this.MP_CURL)return T.rtype=this.MP_EXPLICIT,S.ltype=this.MP_EXPLICIT,D=Math.abs(S.left_tension()),L=Math.abs(T.right_tension()),T.rx=T.x+g[0]*(A=this.UNITY/(3*L)),T.ry=T.y+m[0]*A,S.lx=S.x-g[0]*(A=this.UNITY/(3*D)),void(S.ly=S.y-m[0]*A);V=y.right_curl(),D=Math.abs(O.left_tension()),L=Math.abs(y.right_tension()),x[0]=this.mp_curl_ratio(V,L,D),l[0]=-a[1]*x[0],b[0]=0}else y.rtype===this.MP_OPEN&&(x[0]=0,l[0]=0,b[0]=this.FRACTION_ONE);else if(y.ltype===this.MP_END_CYCLE||y.ltype===this.MP_OPEN){if(u=this.UNITY/(3*Math.abs(M.right_tension())-this.UNITY),B=p[h]*(this.FRACTION_THREE-this.UNITY/Math.abs(M.right_tension())),f=this.UNITY/(3*Math.abs(O.left_tension())-this.UNITY),_=p[h-1]*(this.FRACTION_THREE-this.UNITY/Math.abs(O.left_tension())),B*=V=this.FRACTION_ONE-x[h-1]*u,(D=Math.abs(y.left_tension()))<(L=Math.abs(y.right_tension()))?B*=Math.pow(D/L,2):D>L&&(_*=Math.pow(L/D,2)),x[h]=(A=_/(_+B))*f,c=-a[h+1]*x[h],M.rtype===this.MP_CURL?(b[h]=0,l[h]=c-a[1]*(this.FRACTION_ONE-A)):(l[h]=(c-=a[h]*(A=(this.FRACTION_ONE-A)/V))-l[h-1]*(A*=u),b[h]=-b[h-1]*A),y.ltype===this.MP_END_CYCLE){for(u=0,f=this.FRACTION_ONE;0==(h-=1)&&(h=w),u=l[h]-u*x[h],f=b[h]-f*x[h],h!==w;);for(N[w]=u/=this.FRACTION_ONE-f,l[0]=u,ee=1;ee<w;ee++)l[ee]=l[ee]+u*b[ee];break}}else{if(y.ltype===this.MP_CURL){V=y.left_curl(),D=Math.abs(y.left_tension()),L=Math.abs(M.right_tension()),A=this.mp_curl_ratio(V,D,L),N[w]=-l[w-1]*A/(this.FRACTION_ONE-A*x[w-1]);break}if(y.ltype===this.MP_GIVEN){N[w]=y.left_given()-Math.atan2(m[w-1],g[w-1]),N[w]=this.reduce_angle(N[w]);break}}M=y,y=O,h+=1}for(h=w-1;h>-1;h--)N[h]=l[h]-N[h+1]*x[h];for(y=T,h=0;O=y.next,j=(U=this.mp_n_sin_cos(N[h]))[0],z=U[1],X=($=this.mp_n_sin_cos(-a[h+1]-N[h+1]))[0],this.mp_set_controls(y,O,g[h],m[h],z,j,$[1],X),y=O,++h!==w;);},mp_n_sin_cos:function(T){return[Math.cos(T),Math.sin(T)]},mp_set_controls:function(T,S,w,g,m,p,a,u){var c,l,f,v,_;f=Math.abs(S.left_tension()),c=Math.abs(T.right_tension()),_=this.mp_velocity(m,p,a,u,c),l=this.mp_velocity(a,u,m,p,f),(T.right_tension()<0||S.left_tension()<0)&&(m>=0&&a>=0||m<=0&&a<=0)&&(v=Math.abs(m)*u+Math.abs(a)*p)>0&&(v*=1.00024414062,T.right_tension()<0&&this.mp_ab_vs_cd(Math.abs(a),this.FRACTION_ONE,_,v)<0&&(_=Math.abs(a)/v),S.left_tension()<0&&this.mp_ab_vs_cd(Math.abs(m),this.FRACTION_ONE,l,v)<0&&(l=Math.abs(m)/v)),T.rx=T.x+(w*p-g*m)*_,T.ry=T.y+(g*p+w*m)*_,S.lx=S.x-(w*u+g*a)*l,S.ly=S.y-(g*u-w*a)*l,T.rtype=this.MP_EXPLICIT,S.ltype=this.MP_EXPLICIT},mp_pyth_add:function(T,S){return Math.sqrt(T*T+S*S)},mp_curl_ratio:function(T,S,w){var g=1/S,m=1/w;return Math.min(4,((3-g)*g*g*T+m*m*m)/(g*g*g*T+(3-m)*m*m))},mp_ab_vs_cd:function(T,S,w,g){return T*S==w*g?0:T*S>w*g?1:-1},mp_velocity:function(T,S,w,g,m){return Math.min(4,(2+Math.sqrt(2)*(T-w/16)*(w-T/16)*(S-g))/(1.5*m*(2+(Math.sqrt(5)-1)*S+(3-Math.sqrt(5))*g)))},reduce_angle:function(T){return Math.abs(T)>this.ONE_EIGHTY_DEG&&(T>0?T-=this.THREE_SIXTY_DEG:T+=this.THREE_SIXTY_DEG),T},makeknots:function(T,S,w){var g,m,p=[];for(S=S||1,m=T.length,g=0;g<m;g++)p.push({x:T[g][0],y:T[g][1],ltype:this.MP_OPEN,rtype:this.MP_OPEN,ly:S,ry:S,lx:S,rx:S,left_curl:function(){return this.lx||0},right_curl:function(){return this.rx||0},left_tension:function(){return this.ly||(this.ly=1),this.ly},right_tension:function(){return this.ry||(this.ry=1),this.ry},set_right_curl:function(a){this.rx=a||0},set_left_curl:function(a){this.lx=a||0}});for(m=p.length,g=0;g<m;g++)p[g].next=p[g+1]||p[g],p[g].set_right_given=p[g].set_right_curl,p[g].set_left_given=p[g].set_left_curl,p[g].right_given=p[g].right_curl,p[g].left_given=p[g].left_curl;return p[m-1].next=p[0],w||(p[m-1].rtype=this.MP_ENDPOINT,p[m-1].ltype=this.MP_CURL,p[0].rtype=this.MP_CURL),p},curve:function(T,S){var w,g,m,p,a=[],u=[];for(m in g=(w=this.makeknots(T,E.evaluate((S=S||{tension:1,direction:{},curl:{},isClosed:!1}).tension),S.isClosed)).length,S.direction)S.direction.hasOwnProperty(m)&&(p=E.evaluate(S.direction[m]),E.isArray(p)?(!1!==p[0]&&(w[m].lx=p[0]*Math.PI/180,w[m].ltype=this.MP_GIVEN),!1!==p[1]&&(w[m].rx=p[1]*Math.PI/180,w[m].rtype=this.MP_GIVEN)):(w[m].lx=p*Math.PI/180,w[m].rx=p*Math.PI/180,w[m].ltype=w[m].rtype=this.MP_GIVEN));for(m in S.curl)S.curl.hasOwnProperty(m)&&(p=E.evaluate(S.curl[m]),0===parseInt(m,10)?(w[m].rtype=this.MP_CURL,w[m].set_right_curl(p)):parseInt(m,10)===g-1&&(w[m].ltype=this.MP_CURL,w[m].set_left_curl(p)));for(this.make_choices(w),m=0;m<g-1;m++)a.push(w[m].x),a.push(w[m].rx),a.push(w[m+1].lx),u.push(w[m].y),u.push(w[m].ry),u.push(w[m+1].ly);return a.push(w[g-1].x),u.push(w[g-1].y),S.isClosed&&(a.push(w[g-1].rx),u.push(w[g-1].ry),a.push(w[0].lx),u.push(w[0].ly),a.push(w[0].x),u.push(w[0].y)),[a,u]}},I.Metapost}),define("utils/zip",["jxg"],function(E){"use strict";var I=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],g=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];return E.Util=E.Util||{},E.Util.Unzip=function(p){var a,u,c,l,f=[],v=0,_=[],h=new Array(32768),y=0,b=!1,x=p.length,D=0,M=1,O=new Array(288),A=new Array(32),N=0,L=null,B=(new Array(64),new Array(64),0),V=new Array(17),U=[];function j(){return D<x?p[D++]:-1}function z(){M=1}function $(){var _e;try{return _e=1&M,0==(M>>=1)&&(_e=1&(M=j()),M=M>>1|128),_e}catch(ye){throw ye}}function X(_e){var ye=0,le=_e;try{for(;le--;)ye=ye<<1|$();_e&&(ye=I[ye]>>8-_e)}catch(be){throw be}return ye}function Z(){y=0}function W(_e){h[y++]=_e,f.push(String.fromCharCode(_e)),32768===y&&(y=0)}function ee(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1}function ie(){for(;;){if(V[B]>=l)return-1;if(c[V[B]]===B)return V[B]++;V[B]++}}function re(){var _e,ye=L[N];if(17===B)return-1;if(N++,B++,(_e=ie())>=0)ye.b0=_e;else if(ye.b0=32768,re())return-1;if((_e=ie())>=0)ye.b1=_e,ye.jump=null;else if(ye.b1=32768,ye.jump=L[N],ye.jumppos=N,re())return-1;return B--,0}function Me(_e,ye,le,be){var Ce;for(L=_e,N=0,c=le,l=ye,Ce=0;Ce<17;Ce++)V[Ce]=0;return B=0,re()?-1:0}function Pe(_e){for(var ye,le,be=0,Ce=_e[be];;)if($()){if(!(32768&Ce.b1))return Ce.b1;for(Ce=Ce.jump,ye=_e.length,le=0;le<ye;le++)if(_e[le]===Ce){be=le;break}}else{if(!(32768&Ce.b0))return Ce.b0;Ce=_e[++be]}}function Oe(){var _e,ye,le,be,Ce,He,bt,dt,gt,Xe,De,Et,Je,Tn,rn;do{if(_e=$(),0===(ye=X(2)))for(z(),gt=j(),gt|=j()<<8,De=j(),65535&(gt^~(De|=j()<<8))&&E.debug("BlockLen checksum mismatch\n");gt--;)W(j());else if(1===ye)for(;;)if((be=I[X(7)]>>1)>23?(be=be<<1|$())>199?be=(be-=128)<<1|$():(be-=48)>143&&(be+=136):be+=256,be<256)W(be);else{if(256===be)break;for(dt=X(S[be-=257])+T[be],be=I[X(5)]>>3,g[be]>8?(Xe=X(8),Xe|=X(g[be]-8)<<8):Xe=X(g[be]),Xe+=w[be],be=0;be<dt;be++)W(h[y-Xe&32767])}else if(2===ye){for(He=new Array(320),Je=257+X(5),Tn=1+X(5),rn=4+X(4),be=0;be<19;be++)He[be]=0;for(be=0;be<rn;be++)He[m[be]]=X(3);for(dt=A.length,le=0;le<dt;le++)A[le]=new ee;if(Me(A,19,He))return Z(),1;for(Et=Je+Tn,le=0;le<Et;)if((be=Pe(A))<16)He[le++]=be;else if(16===be){if(le+(be=3+X(2))>Et)return Z(),1;for(Ce=le?He[le-1]:0;be--;)He[le++]=Ce}else{if(le+(be=17===be?3+X(3):11+X(7))>Et)return Z(),1;for(;be--;)He[le++]=0}for(dt=O.length,le=0;le<dt;le++)O[le]=new ee;if(Me(O,Je,He))return Z(),1;for(dt=O.length,le=0;le<dt;le++)A[le]=new ee;for(bt=[],le=Je;le<He.length;le++)bt[le-Je]=He[le];if(Me(A,Tn,bt))return Z(),1;for(;;)if((be=Pe(O))>=256){if(0==(be-=256))break;for(dt=X(S[be-=1])+T[be],be=Pe(A),g[be]>8?(Xe=X(8),Xe|=X(g[be]-8)<<8):Xe=X(g[be]),Xe+=w[be];dt--;)W(h[y-Xe&32767])}else W(be)}}while(!_e);return Z(),z(),0}function Se(){var _e,ye,le,be,Ce,He=[];try{if(f=[],b=!1,He[0]=j(),He[1]=j(),120===He[0]&&218===He[1]&&(Oe(),_[v]=[f.join(""),"geonext.gxt"],v++),31===He[0]&&139===He[1]&&(me(),_[v]=[f.join(""),"file"],v++),80===He[0]&&75===He[1]){if(b=!0,He[2]=j(),He[3]=j(),3===He[2]&&4===He[3]){for(He[0]=j(),He[1]=j(),a=j(),a|=j()<<8,Ce=j(),Ce|=j()<<8,j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),j(),be=j(),be|=j()<<8,le=j(),le|=j()<<8,_e=0,U=[];be--;)"/"===(ye=j())|":"===ye?_e=0:_e<255&&(U[_e++]=String.fromCharCode(ye));for(u||(u=U),_e=0;_e<le;)ye=j(),_e++;if(8===Ce&&(Oe(),_[v]=new Array(2),_[v][0]=f.join(""),_[v][1]=U.join(""),v++),me())return!1}return!0}}catch(bt){throw bt}return!1}function me(){var _e,ye,le=[];if(8&a&&(le[0]=j(),le[1]=j(),le[2]=j(),le[3]=j(),80===le[0]&&75===le[1]&&7===le[2]&&8===le[3]&&(j(),j(),j(),j()),j(),j(),j(),j(),j(),j(),j(),j()),b&&Se())return!1;if(le[0]=j(),8!==le[0])return!0;if(a=j(),j(),j(),j(),j(),j(),j(),4&a)for(le[0]=j(),le[2]=j(),B=le[0]+256*le[1],_e=0;_e<B;_e++)j();if(8&a)for(_e=0,U=[],ye=j();ye;)"7"!==ye&&":"!==ye||(_e=0),_e<255&&(U[_e++]=ye),ye=j();if(16&a)for(ye=j();ye;)ye=j();return 2&a&&(j(),j()),Oe(),j(),j(),j(),j(),j(),j(),j(),j(),b&&Se(),!1}V[0]=0,E.Util.Unzip.prototype.unzipFile=function(_e){var ye;for(this.unzip(),ye=0;ye<_.length;ye++)if(_[ye][1]===_e)return _[ye][0];return""},E.Util.Unzip.prototype.unzip=function(){return Se(),_}},E.Util}),define("utils/encoding",["jxg"],function(E){"use strict";var I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,10,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,11,6,6,6,5,8,8,8,8,8,8,8,8,8,8,8,0,12,24,36,60,96,84,12,12,12,48,72,12,12,12,12,12,12,12,12,12,12,12,12,12,0,12,12,12,12,12,0,12,0,12,12,12,24,12,12,12,12,12,24,12,24,12,12,12,12,12,12,12,12,12,24,12,12,12,12,12,24,12,12,12,12,12,12,12,24,12,12,12,12,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,36,12,36,12,12,12,36,12,12,12,12,12,12,12,12,12,12];return E.Util=E.Util||{},E.Util.UTF8={encode:function(T){var S,w,g="",m=T.length;if(T=T.replace(/\r\n/g,"\n"),"function"==typeof unescape&&"function"==typeof encodeURIComponent)return unescape(encodeURIComponent(T));for(S=0;S<m;S++)(w=T.charCodeAt(S))<128?g+=String.fromCharCode(w):w>127&&w<2048?(g+=String.fromCharCode(w>>6|192),g+=String.fromCharCode(63&w|128)):(g+=String.fromCharCode(w>>12|224),g+=String.fromCharCode(w>>6&63|128),g+=String.fromCharCode(63&w|128));return g},decode:function(T){var S,w,g,m=0,p=0,a=0,u=[],c=T.length,l=[];for(S=0;S<c;S++)w=T.charCodeAt(S),g=I[w],p=0!==a?63&w|p<<6:255>>g&w,0===(a=I[256+a+g])&&(p>65535?u.push(55232+(p>>10),56320+(1023&p)):u.push(p),++m%1e4==0&&(l.push(String.fromCharCode.apply(null,u)),u=[]));return l.push(String.fromCharCode.apply(null,u)),l.join("")},asciiCharCodeAt:function(T,S){var w=T.charCodeAt(S);if(w>255)switch(w){case 8364:w=128;break;case 8218:w=130;break;case 402:w=131;break;case 8222:w=132;break;case 8230:w=133;break;case 8224:w=134;break;case 8225:w=135;break;case 710:w=136;break;case 8240:w=137;break;case 352:w=138;break;case 8249:w=139;break;case 338:w=140;break;case 381:w=142;break;case 8216:w=145;break;case 8217:w=146;break;case 8220:w=147;break;case 8221:w=148;break;case 8226:w=149;break;case 8211:w=150;break;case 8212:w=151;break;case 732:w=152;break;case 8482:w=153;break;case 353:w=154;break;case 8250:w=155;break;case 339:w=156;break;case 382:w=158;break;case 376:w=159}return w}},E.Util.UTF8}),define("utils/base64",["jxg","utils/encoding"],function(E,I){"use strict";var T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",S="=";function w(m,p){return 255&m.charCodeAt(p)}function g(m,p){return T.indexOf(m.charAt(p))}return E.Util=E.Util||{},E.Util.Base64={encode:function(m){var p,a,u,c,l,f=[];for(c=(u=(l=I.encode(m)).length)%3,p=0;p<u-c;p+=3)a=w(l,p)<<16|w(l,p+1)<<8|w(l,p+2),f.push(T.charAt(a>>18),T.charAt(a>>12&63),T.charAt(a>>6&63),T.charAt(63&a));switch(c){case 1:a=w(l,u-1),f.push(T.charAt(a>>2),T.charAt(a<<4&63),S,S);break;case 2:a=w(l,u-2)<<8|w(l,u-1),f.push(T.charAt(a>>10),T.charAt(a>>4&63),T.charAt(a<<2&63),S)}return f.join("")},decode:function(m,p){var a,u,c,l,f,v,_=[],h=[];if((c=(a=m.replace(/[^A-Za-z0-9+/=]/g,"")).length)%4!=0)throw new Error("JSXGraph/utils/base64: Can't decode string (invalid input length).");for(a.charAt(c-1)===S&&(l=1,a.charAt(c-2)===S&&(l=2),c-=4),u=0;u<c;u+=4)f=g(a,u)<<18|g(a,u+1)<<12|g(a,u+2)<<6|g(a,u+3),h.push(f>>16,f>>8&255,255&f),u%1e4==0&&(_.push(String.fromCharCode.apply(null,h)),h=[]);switch(l){case 1:f=g(a,c)<<12|g(a,c+1)<<6|g(a,c+2),h.push(f>>10,f>>2&255);break;case 2:f=g(a,u)<<6|g(a,u+1),h.push(f>>4)}return _.push(String.fromCharCode.apply(null,h)),v=_.join(""),p&&(v=I.decode(v)),v},decodeAsArray:function(m){var p,a=this.decode(m),u=[],c=a.length;for(p=0;p<c;p++)u[p]=a.charCodeAt(p);return u}},E.Util.Base64}),define("server/server",["jxg","utils/zip","utils/base64","utils/type"],function(E,I,T,S){"use strict";return E.Server={modules:{},runningCalls:{},handleError:function(w){E.debug("error occured, server says: "+w.message)},callServer:function(w,g,m,p){var a,u,c,l,f,v,_;for(v in p=p||!1,m)m.hasOwnProperty(v)&&(escape(v),escape(m[v]));f=S.toJSON(m);do{l=w+Math.floor(4096*Math.random())}while(S.exists(this.runningCalls[l]));return this.runningCalls[l]={action:w},S.exists(m.module)&&(this.runningCalls[l].module=m.module),a=E.serverBase+"JXGServer.py",u="action="+escape(w)+"&id="+l+"&dataJSON="+escape(T.encode(f)),this.cbp=function(h){var y,b,x,D,M,O,A,N;if(y=new I.Unzip(T.decodeAsArray(h)).unzip(),S.isArray(y)&&y.length>0&&(y=y[0][0]),S.exists(y))if("error"===(b=window.JSON&&window.JSON.parse?window.JSON.parse(y):new Function("return "+y)()).type)this.handleError(b);else if("response"===b.type){for(O=b.id,A=0;A<b.fields.length;A++)D=(x=b.fields[A]).namespace+("object"==typeof new Function("return "+x.namespace)()?".":".prototype.")+x.name+" = "+x.value,new Function(D)();for(A=0;A<b.handler.length;A++){for(x=b.handler[A],M=[],N=0;N<x.parameters.length;N++)M[N]='"'+x.parameters[N]+'": '+x.parameters[N];D="if(typeof JXG.Server.modules."+this.runningCalls[O].module+' == "undefined")JXG.Server.modules.'+this.runningCalls[O].module+" = {};",D+="JXG.Server.modules."+this.runningCalls[O].module+"."+x.name+"_cb = "+x.callback+";",D+="JXG.Server.modules."+this.runningCalls[O].module+"."+x.name+" = function ("+x.parameters.join(",")+', __JXGSERVER_CB__, __JXGSERVER_SYNC) {if(typeof __JXGSERVER_CB__ == "undefined") __JXGSERVER_CB__ = JXG.Server.modules.'+this.runningCalls[O].module+"."+x.name+"_cb;var __JXGSERVER_PAR__ = {"+M.join(",")+', "module": "'+this.runningCalls[O].module+'", "handler": "'+x.name+'" };JXG.Server.callServer("exec", __JXGSERVER_CB__, __JXGSERVER_PAR__, __JXGSERVER_SYNC);};',new Function(D)()}delete this.runningCalls[O],g(b.data)}},this.cb=E.bind(this.cbp,this),window.XMLHttpRequest?(c=new XMLHttpRequest).overrideMimeType("text/plain; charset=iso-8859-1"):c=new ActiveXObject("Microsoft.XMLHTTP"),!(!c||(c.open("POST",a,!p),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p||(c.onreadystatechange=(_=this.cb,function(){return 4===c.readyState&&200===c.status&&(_(c.responseText),!0)})),c.send(u),!p)||(this.cb(c.responseText),0))},loadModule_cb:function(w){var g;for(g=0;g<w.length;g++)E.debug(w[g].name+": "+w[g].value)},loadModule:function(w){return E.Server.callServer("load",E.Server.loadModule_cb,{module:w},!0)}},E.Server.load=E.Server.loadModule,E.Server}),define("math/symbolic",["base/constants","base/coords","math/math","math/geometry","server/server","utils/type"],function(E,I,T,S,w,g){"use strict";var m;return T.Symbolic={generateSymbolicCoordinatesPartial:function(p,a,u,c){var l,f,v,_=a.ancestors,h=0,y=function(b){return"underscore"===c?u+"_{"+b+"}":"brace"===c?u+"["+b+"]":u+b};for(f in p.listOfFreePoints=[],p.listOfDependantPoints=[],_)if(_.hasOwnProperty(f)&&(l=0,g.isPoint(_[f]))){for(v in _[f].ancestors)_[f].ancestors.hasOwnProperty(v)&&l++;0===l?(_[f].symbolic.x=_[f].coords.usrCoords[1],_[f].symbolic.y=_[f].coords.usrCoords[2],p.listOfFreePoints.push(_[f])):(_[f].symbolic.x=y(h+=1),_[f].symbolic.y=y(h+=1),p.listOfDependantPoints.push(_[f]))}return g.isPoint(a)&&(a.symbolic.x="x",a.symbolic.y="y"),h},clearSymbolicCoordinates:function(p){var a=function(u){var c,l=u&&u.length||0;for(c=0;c<l;c++)g.isPoint(u[c])&&(u[c].symbolic.x="",u[c].symbolic.y="")};a(p.listOfFreePoints),a(p.listOfDependantPoints),delete p.listOfFreePoints,delete p.listOfDependantPoints},generatePolynomials:function(p,a,u){var c,l,f,v,_=a.ancestors,h=[],y=[];for(c in u&&this.generateSymbolicCoordinatesPartial(p,a,"u","brace"),_[a.id]=a,_)if(_.hasOwnProperty(c)&&(v=0,h=[],g.isPoint(_[c]))){for(l in _[c].ancestors)_[c].ancestors.hasOwnProperty(l)&&v++;if(v>0)for(h=_[c].generatePolynomial(),f=0;f<h.length;f++)y.push(h[f])}return u&&this.clearSymbolicCoordinates(p),y},geometricLocusByGroebnerBase:function(p,a){var u,c,l,f,v,_,h,y,b,x,D,M,O=p.options.locus,A={},N=this.generateSymbolicCoordinatesPartial(p,a,"u","brace"),L=new I(E.COORDS_BY_USR,[0,0],p),B=new I(E.COORDS_BY_USR,[p.canvasWidth,p.canvasHeight],p),V=1,U=0,j=0,z=0;if(w.modules.geoloci===m&&w.loadModule("geoloci"),w.modules.geoloci===m)throw new Error("JSXGraph: Unable to load JXG.Server module 'geoloci.py'.");if(_=L.usrCoords[1],h=B.usrCoords[1],y=B.usrCoords[2],b=L.usrCoords[2],O.translateToOrigin&&p.listOfFreePoints.length>0){for(U=(l=O.toOrigin!==m&&null!==O.toOrigin&&g.isInArray(p.listOfFreePoints,O.toOrigin.id)?O.toOrigin:p.listOfFreePoints[0]).symbolic.x,j=l.symbolic.y,v=0;v<p.listOfFreePoints.length;v++)p.listOfFreePoints[v].symbolic.x-=U,p.listOfFreePoints[v].symbolic.y-=j;if(_-=U,h-=U,y-=j,b-=j,O.translateTo10&&p.listOfFreePoints.length>1){for(f=O.to10!==m&&null!==O.to10&&O.to10.id!==O.toOrigin.id&&g.isInArray(p.listOfFreePoints,O.to10.id)?O.to10:p.listOfFreePoints[0].id===l.id?p.listOfFreePoints[1]:p.listOfFreePoints[0],z=S.rad([1,0],[0,0],[f.symbolic.x,f.symbolic.y]),x=Math.cos(-z),D=Math.sin(-z),v=0;v<p.listOfFreePoints.length;v++)M=p.listOfFreePoints[v].symbolic.x,p.listOfFreePoints[v].symbolic.x=x*p.listOfFreePoints[v].symbolic.x-D*p.listOfFreePoints[v].symbolic.y,p.listOfFreePoints[v].symbolic.y=D*M+x*p.listOfFreePoints[v].symbolic.y;if(f.symbolic.y=0,M=_,_=x*_-D*y,y=D*M+x*y,M=h,h=x*h-D*b,b=D*M+x*b,O.stretch&&Math.abs(f.symbolic.x)>T.eps){for(V=f.symbolic.x,v=0;v<p.listOfFreePoints.length;v++)p.listOfFreePoints[v].symbolic.x/=V,p.listOfFreePoints[v].symbolic.y/=V;for(v=0;v<p.objectsList.length;v++)p.objectsList[v].elementClass===E.OBJECT_CLASS_CIRCLE&&"pointRadius"===p.objectsList[v].method&&(A[v]=p.objectsList[v].radius,p.objectsList[v].radius/=V);_/=V,h/=V,y/=V,b/=V,f.symbolic.x=1}}for(v=0;v<p.listOfFreePoints.length;v++)M=p.listOfFreePoints[v].symbolic.x,Math.abs(M)<T.eps&&(p.listOfFreePoints[v].symbolic.x=0),Math.abs(M-Math.round(M))<T.eps&&(p.listOfFreePoints[v].symbolic.x=Math.round(M)),M=p.listOfFreePoints[v].symbolic.y,Math.abs(M)<T.eps&&(p.listOfFreePoints[v].symbolic.y=0),Math.abs(M-Math.round(M))<T.eps&&(p.listOfFreePoints[v].symbolic.y=Math.round(M))}for(v in u=this.generatePolynomials(p,a).join(","),this.cbp=function($){c=$},this.cb=g.bind(this.cbp,this),w.modules.geoloci.lociCoCoA(_,h,y,b,N,u,V,z,U,j,this.cb,!0),this.clearSymbolicCoordinates(p),A)A.hasOwnProperty(v)&&(p.objects[v].radius=A[v]);return c}},T.Symbolic}),define("math/clip",["jxg","base/constants","base/coords","math/math","math/geometry","utils/type"],function(E,I,T,S,w,g){"use strict";return S.Clip={_isSeparator:function(m){return isNaN(m.coords.usrCoords[1])&&isNaN(m.coords.usrCoords[2])},makeDoublyLinkedList:function(m){var p,a=null,u=[],c=m.length;if(c>0)for(p=0;p<c;p++)this._isSeparator(m[p])?(m[p]._next=m[(p+1)%c],m[p]._prev=m[(c+p-1)%c]):(null===a&&u.push(a=p),this._isSeparator(m[(p+1)%c])||p===c-1?(m[p]._next=m[a],m[a]._prev=m[p],m[p]._end=!0,a=null):(m[p]._next=m[(p+1)%c],m[a]._prev=m[p]),this._isSeparator(m[(c+p-1)%c])||(m[p]._prev=m[(c+p-1)%c]));return u},Vertex:function(m,p,a,u,c,l){this.pos=p,this.intersection=!0,this.coords=m,this.elementClass=I.OBJECT_CLASS_POINT,this.data={alpha:a,path:u,pathname:c,done:!1,type:l,idx:0},this.neighbour=null,this.entry_exit=!1},_addToList:function(m,p,a){var u=m.length,c=S.eps*S.eps;u>0&&Math.abs(m[u-1].coords.usrCoords[0]-p.usrCoords[0])<c&&Math.abs(m[u-1].coords.usrCoords[1]-p.usrCoords[1])<c&&Math.abs(m[u-1].coords.usrCoords[2]-p.usrCoords[2])<c||m.push({pos:a,intersection:!1,coords:p,elementClass:I.OBJECT_CLASS_POINT})},sortIntersections:function(m){var p,a,u,c,l,f,v=[],_=m.length;for(p=0;p<_;p++)if(m[p].sort(function(h,y){return h.data.alpha>y.data.alpha?1:-1}),m[p].length>0){for(l=m[p].length-1,f=(c=(u=m[p][0]).data.path[u.pos])._next,p===_-1&&(c._end=!1),0===u.data.alpha&&"T"===u.data.type?(c.intersection=!0,c.data=u.data,c.neighbour=u.neighbour,c.neighbour.neighbour=c,c.entry_exit=!1,m[p][0]=c):(u._prev=c,u._prev._next=u),a=1;a<=l;a++)(u=m[p][a])._prev=m[p][a-1],u._prev._next=u;(u=m[p][l])._next=f,u._next._prev=u,p===_-1&&(u._end=!0),v=v.concat(m[p])}return v},_inbetween:function(m,p,a){var u,c=S.eps*S.eps,l=a[1]-p[1],f=a[2]-p[2],v=m[1]-p[1],_=m[2]-p[2];return 0===l&&0===f&&0===v&&0===_||(u=Math.abs(v)<c&&Math.abs(l)<c?_/f:v/l,Math.abs(u)<c&&(u=0),u)},_print_array:function(m){var p,a;for(p=0;p<m.length;p++)try{a="",m[p]._end&&(a=" end"),console.log(p,m[p].coords.usrCoords,m[p].data.type,"\t","prev",m[p]._prev.coords.usrCoords,"next",m[p]._next.coords.usrCoords+a)}catch{console.log(p,m[p].coords.usrCoords)}},_print_list:function(m){for(var a=0;a<100&&(console.log("\t",m.coords.usrCoords,"\n\t\tis:",m.intersection,"end:",m._end,m.data?m.data.alpha:"-","\n\t\t-:",m._prev.coords.usrCoords,"\n\t\t+:",m._next.coords.usrCoords,"\n\t\tn:",m.intersection?m.neighbour.coords.usrCoords:"-"),!m._end);)m=m._next,a++},_noOverlap:function(m,p,a,u){var c,l,f,v,_,h=Math.sqrt(S.eps),y=!1;for(c=0;c<3;c++)if(l=Math.min(m[c],p[c]),f=Math.max(m[c],p[c]),v=Math.min(a[c],u[c]),_=Math.max(a[c],u[c]),f<v-h||l>_+h){y=!0;break}return y},findIntersections:function(m,p,a){var u,c,l,f,v,_,h,y,b,x,D,M,O,A=[],N=S.eps,L=m.length,B=p.length,V=[],U=[],j=[],z=!1,$=!1;for(c=0;c<B;c++)j.push([]);for(u=0;u<L;u++)if(U.push([]),this._isSeparator(m[u])||this._isSeparator(m[(u+1)%L]))z=!0;else{if(z&&u===L-1)break;for(f=m[u].coords.usrCoords,v=m[(u+1)%L].coords.usrCoords,c=0;c<B;c++)if(this._isSeparator(p[c])||this._isSeparator(p[(c+1)%B]))$=!0;else{if($&&c===B-1)break;if(!this._noOverlap(f,v,_=p[c].coords.usrCoords,h=p[(c+1)%B].coords.usrCoords)&&(A=w.meetSegmentSegment(f,v,_,h),y=w.distance(f,v,3),b=w.distance(_,h,3),A[1]*y>-N&&A[1]<1-N/y&&A[2]*b>-N&&A[2]<1-N/b||A[1]===1/0&&A[2]===1/0&&S.norm(A[0],3)<N)){if(l=new T(I.COORDS_BY_USER,A[0],a),D="X",Math.abs(A[1])*y<N||Math.abs(A[2])*b<N)D="T",Math.abs(A[1])*y<N&&(A[1]=0),Math.abs(A[2])*b<N&&(A[2]=0),l=new T(I.COORDS_BY_USER,0===A[1]?f:_,a);else if(A[1]===1/0&&A[2]===1/0&&S.norm(A[0],3)<N){(x=this._inbetween(f,_,h))>=0&&x<1&&(D="T",l=new T(I.COORDS_BY_USER,f,a),A[1]=0,A[2]=x,M=new this.Vertex(l,u,A[1],m,"S",D),O=new this.Vertex(l,c,A[2],p,"C",D),M.neighbour=O,O.neighbour=M,U[u].push(M),j[c].push(O)),x=this._inbetween(_,f,v),w.distance(f,_,3)>N&&x>=0&&x<1&&(D="T",l=new T(I.COORDS_BY_USER,_,a),A[1]=x,A[2]=0,M=new this.Vertex(l,u,A[1],m,"S",D),O=new this.Vertex(l,c,A[2],p,"C",D),M.neighbour=O,O.neighbour=M,U[u].push(M),j[c].push(O));continue}M=new this.Vertex(l,u,A[1],m,"S",D),O=new this.Vertex(l,c,A[2],p,"C",D),M.neighbour=O,O.neighbour=M,U[u].push(M),j[c].push(O)}}}for(V=this.sortIntersections(U),u=0;u<V.length;u++)V[u].data.idx=u,V[u].neighbour.data.idx=u;return[V,this.sortIntersections(j)]},_getPosition:function(m,p,a,u){var c=w.det3p(m,p,a),l=w.det3p(m,a,u);return w.det3p(p,a,u)>=0?c>=0&&l>=0?"left":"right":c>=0||l>=0?"left":"right"},_classifyDegenerateIntersections:function(m){var p,a,u,c,l,f,v,_,h,y,b,x,D,M;for(h=w.det3p,v=0,m._tours=0;;){if(m.intersection&&"T"===m.data.type&&(a=m._prev.coords.usrCoords,w.distance(m.coords.usrCoords,p=m._next.coords.usrCoords,3)<S.eps&&(p=m._next._next.coords.usrCoords),w.distance(m.coords.usrCoords,a,3)<S.eps&&(a=m._prev._prev.coords.usrCoords),c=(l=m.neighbour)._prev.coords.usrCoords,w.distance(l.coords.usrCoords,u=l._next.coords.usrCoords,3)<S.eps&&(u=l._next._next.coords.usrCoords),w.distance(l.coords.usrCoords,c,3)<S.eps&&(c=l._prev._prev.coords.usrCoords),b=h(m.coords.usrCoords,a,c),x=h(m.coords.usrCoords,p,u),D=h(m.coords.usrCoords,a,u),M=h(m.coords.usrCoords,p,c),0===b&&0===x&&0===D&&0===M&&(m.coords.usrCoords[1]*=1+Math.random()*S.eps,m.coords.usrCoords[2]*=1+Math.random()*S.eps,l.coords.usrCoords[1]=m.coords.usrCoords[1],l.coords.usrCoords[2]=m.coords.usrCoords[2],b=h(m.coords.usrCoords,a,c),x=h(m.coords.usrCoords,p,u),D=h(m.coords.usrCoords,a,u),M=h(m.coords.usrCoords,p,c)),y=!1,0===b?w.affineRatio(m.coords.usrCoords,a,c)<0&&(y=!0):0===x?w.affineRatio(m.coords.usrCoords,p,u)<0&&(y=!0):0===D?w.affineRatio(m.coords.usrCoords,a,u)>0&&(y=!0):0===M&&w.affineRatio(m.coords.usrCoords,p,c)>0&&(y=!0),y&&(_=c,c=u,u=_,_=b,b=D,D=_,_=x,x=M,M=_),g.exists(m.delayedStatus)||(m.delayedStatus=[]),0===b&&0===x?m.delayedStatus=["on","on"]:0===b?(f=this._getPosition(p,c,l.coords.usrCoords,u),m.delayedStatus=["on",f]):0===x?(f=this._getPosition(a,c,l.coords.usrCoords,u),m.delayedStatus=[f,"on"]):0===m.delayedStatus.length&&(m.data.type=this._getPosition(a,c,l.coords.usrCoords,u)!==this._getPosition(p,c,l.coords.usrCoords,u)?"X":"B")),g.exists(m._tours)&&m._tours++,m._tours>3||m._end||v>1e3){v>1e3&&console.log("Clipping: _classifyDegenerateIntersections exit"),g.exists(m._tours)&&delete m._tours;break}m.intersection&&v++,m=m._next}},_handleIntersectionChains:function(m){for(var p,a=0,u="Null",c=!1,l=!1;!0===m.intersection&&("T"===m.data.type&&("on"!==m.delayedStatus[0]&&"on"===m.delayedStatus[1]?(c=!0,p=m,u=m.delayedStatus[0]):c&&"on"===m.delayedStatus[0]&&"on"===m.delayedStatus[1]?m.data.type="B":c&&"on"===m.delayedStatus[0]&&"on"!==m.delayedStatus[1]&&(c=!1,u===m.delayedStatus[1]?(p.data.type="DB",m.data.type="DB"):(p.data.type="DX",m.data.type="DX"))),a++),m._end&&(l=!0),!l||c;){if(a>1e3){console.log("Warning: _handleIntersectionChains: intersection chain reached maximum numbers of iterations");break}m=m._next}},_handleFullyDegenerateCase:function(m,p,a){var u,c,l,f,v,_,h,y,b,x,D,M,O,A,N=[m,p];for(l=0;l<2;l++){for(x=(u=N[l]).length,y=0,A=!0;y<x;y++)if(!u[y].intersection){A=!1;break}if(A)for(D=(c=N[(l+1)%2]).length,y=0;y<x;y++){for(f=[.5*((v=u[y].coords.usrCoords)[0]+(_=u[y]._next.coords.usrCoords)[0]),.5*(v[1]+_[1]),.5*(v[2]+_[2])],b=0,M=!1;b<D;b++)if(Math.abs(w.det3p(c[b].coords.usrCoords,c[(b+1)%D].coords.usrCoords,f))<S.eps){M=!0;break}if(!M){h={pos:y,intersection:!1,coords:new T(I.COORDS_BY_USER,f,a),elementClass:I.OBJECT_CLASS_POINT},O=u[y]._next,u[y]._next=h,h._prev=u[y],h._next=O,O._prev=h,u[y]._end&&(u[y]._end=!1,h._end=!0);break}}}},_getStatus:function(m,p){for(;m.intersection&&!m._end;)m=m._next;return[m,0===w.windingNumber(m.coords.usrCoords,p)?"entry":"exit"]},markEntryExit:function(m,p,a){var u,c,l,f,v,_,h,y=null,b=0;for(_=a.length,v=0;v<_;v++)for(this._classifyDegenerateIntersections(m[h=a[v]]),this._handleIntersectionChains(m[h]),c=(f=this._getStatus(m[h],p))[0],u=f[1],c._starter=!0,l=0,y=null,b=0;!0===c.intersection&&("X"===c.data.type&&1===b&&(y.entry_exit=u,"exit"===u&&(y.data.type="X"),b=2),"X"!==c.data.type&&"DB"!==c.data.type||(c.entry_exit=u,u="entry"===u?"exit":"entry"),"DX"===c.data.type&&(0===b?(y=c,b=1):1===b?(c.entry_exit=u,y.entry_exit=u,"exit"===u?y.data.type="X":c.data.type="X",u="entry"===u?"exit":"entry",y=null,b=0):2===b&&(c.entry_exit=u,c.data.type="X",u="entry"===u?"exit":"entry",y=null,b=0))),!(g.exists((c=c._next)._starter)||l>1e4);)l++},_stayOnPath:function(m,p){var a=!0;return m.intersection&&"B"!==m.data.type&&(a=p===m.entry_exit),a},_addVertex:function(m,p,a){return isNaN(p.coords.usrCoords[1])||isNaN(p.coords.usrCoords[2])||m.push(p),p.intersection&&p.data.done?(a&&console.log("Add last intersection point",p.coords.usrCoords,"on",p.data.pathname,p.entry_exit,p.data.type),!0):(p.intersection&&(p.data.done=!0,a&&console.log("Add intersection point",p.coords.usrCoords,"on",p.data.pathname,p.entry_exit,p.data.type)),!1)},tracing:function(m,p,a){for(var u,c,l,f,v=0,_=1e4,h=0,y=[],b=!1,x=!1;h<p.length&&v<_;)if((c=p[h]).data.done||"X"!==c.data.type)h++;else{y.length>0&&y.push([NaN,NaN]),l=c.data.idx,u=m,b=this._addVertex(y,c,x),f=c.entry_exit;do{if(b)break;if("intersection"===a&&"entry"===c.entry_exit||"union"===a&&"exit"===c.entry_exit||"difference"===a&&u===m==("exit"===c.entry_exit)){do{if(b=this._addVertex(y,c=c._next,x))break}while(this._stayOnPath(c,f));v++}else{do{if(b=this._addVertex(y,c=c._prev,x))break}while(this._stayOnPath(c,f));v++}if(b)break;if(!c.neighbour)return console.log("Tracing: emergency break - no neighbour!!!!!!!!!!!!!!!!!",v),[[0],[0]];if((c=c.neighbour).data.done)break;c.data.done=!0,f=c.entry_exit,u=c.data.path}while(c.data.idx!==l&&v<_);v>=_&&console.log("Tracing: stopping an infinite loop!",v),h++}return this._getCoordsArrays(y,!1)},isEmptyCase:function(m,p,a){return"intersection"===a&&(0===m.length||0===p.length)||"union"===a&&0===m.length&&0===p.length||"difference"===a&&0===m.length},_getCoordsArrays:function(m,p){var a,u=[],c=[],l=m.length;for(a=0;a<l;a++)m[a].coords?(u.push(m[a].coords.usrCoords[1]),c.push(m[a].coords.usrCoords[2])):(u.push(m[a][0]),c.push(m[a][1]));return p&&l>0&&(m[0].coords?(u.push(m[0].coords.usrCoords[1]),c.push(m[0].coords.usrCoords[2])):(u.push(m[0][0]),c.push(m[0][1]))),[u,c]},handleEmptyIntersection:function(m,p,a){var u,c,l=!1,f=[];if(0===m.length)return this._getCoordsArrays(f="union"===a?p:[],!0);if(0===p.length)return this._getCoordsArrays(f="intersection"===a?[]:m,!0);if(m.length>0)for(u=m[0];u.intersection&&!(u=u._next)._end;);if(p.length>0)for(c=p[0];c.intersection&&!(c=c._next)._end;);return 0===w.windingNumber(u.coords.usrCoords,p)?0!==w.windingNumber(c.coords.usrCoords,m)?("union"===a?(f=f.concat(m)).push(m[0]):"difference"===a&&((f=f.concat(m)).push(m[0]),w.signedPolygon(m)*w.signedPolygon(p)>0&&f.reverse(),f.push([NaN,NaN])),"difference"!==a&&"intersection"!==a||((f=f.concat(p)).push(p[0]),l=!1)):"difference"===a?(f=f.concat(m),l=!0):"union"===a&&((f=f.concat(m)).push(m[0]),f.push([NaN,NaN]),(f=f.concat(p)).push(p[0])):"intersection"===a?(f=f.concat(m),l=!0):"union"===a&&(f=f.concat(p)).push(p[0]),this._getCoordsArrays(f,l)},_countCrossingIntersections:function(m){var p,a=m.length,u=0;for(p=0;p<a;p++)"X"===m[p].data.type&&u++;return u},_getPath:function(m,p){var a,u,c,l,f,v,_,h=[];if(m.elementClass!==I.OBJECT_CLASS_CURVE||m.type!==I.OBJECT_TYPE_ARC&&m.type!==I.OBJECT_TYPE_SECTOR){if(m.elementClass===I.OBJECT_CLASS_CURVE&&g.exists(m.points))for(u=m.numberPoints,a=0;a<u;a++)this._addToList(h,m.points[a],a);else if(m.type===I.OBJECT_TYPE_POLYGON)for(a=0;a<m.vertices.length;a++)this._addToList(h,m.vertices[a].coords,a);else if(m.elementClass===I.OBJECT_CLASS_CIRCLE)for(_=359,c=m.Radius(),l=2*Math.PI/_,a=0;a<=_;a++)this._addToList(h,new T(I.COORDS_BY_USER,[m.center.coords.usrCoords[0],m.center.coords.usrCoords[1]+Math.cos(a*l)*c,m.center.coords.usrCoords[2]+Math.sin(a*l)*c],p),a);else if(g.isArray(m))for(u=m.length,a=0;a<u;a++)g.exists(m[a].coords)?this._addToList(h,m[a].coords,a):g.isArray(m[a])?this._addToList(h,new T(I.COORDS_BY_USER,m[a],p),a):g.exists(m[a].usrCoords)&&this._addToList(h,m[a],a)}else{for(f=w.rad(m.radiuspoint,m.center,m.anglepoint),_=Math.floor(180*f/Math.PI),c=m.Radius(),l=f/_,v=Math.atan2(m.radiuspoint.coords.usrCoords[2]-m.center.coords.usrCoords[2],m.radiuspoint.coords.usrCoords[1]-m.center.coords.usrCoords[1]),m.type===I.OBJECT_TYPE_SECTOR&&this._addToList(h,m.center.coords,0),a=0;a<=_;a++)this._addToList(h,new T(I.COORDS_BY_USER,[m.center.coords.usrCoords[0],m.center.coords.usrCoords[1]+Math.cos(a*l+v)*c,m.center.coords.usrCoords[2]+Math.sin(a*l+v)*c],p),a+1);m.type===I.OBJECT_TYPE_SECTOR&&this._addToList(h,m.center.coords,_+2)}return h},greinerHormann:function(m,p,a,u){var c,l,f,v,_=[],h=[];return(c=(_=this._getPath(m,u)).length)>0&&w.distance(_[0].coords.usrCoords,_[c-1].coords.usrCoords,3)<S.eps&&_.pop(),(c=(h=this._getPath(p,u)).length)>0&&w.distance(h[0].coords.usrCoords,h[c-1].coords.usrCoords,3)<S.eps*S.eps&&h.pop(),this.isEmptyCase(_,h,a)?[[],[]]:(f=this.makeDoublyLinkedList(_),v=this.makeDoublyLinkedList(h),l=this.findIntersections(_,h,u)[0],this._handleFullyDegenerateCase(_,h,u),this.markEntryExit(_,h,f),this.markEntryExit(h,_,v),0===this._countCrossingIntersections(l)?this.handleEmptyIntersection(_,h,a):this.tracing(_,l,a))},union:function(m,p,a){return this.greinerHormann(m,p,"union",a)},intersection:function(m,p,a){return this.greinerHormann(m,p,"intersection",a)},difference:function(m,p,a){return this.greinerHormann(m,p,"difference",a)}},E.extend(S.Clip,{}),S.Clip}),define("math/poly",["jxg","math/math","utils/type"],function(E,I,T){"use strict";return I.Poly={},I.Poly.Ring=function(S){this.vars=S},E.extend(I.Poly.Ring.prototype,{}),I.Poly.Monomial=function(S,w,g){var m;if(!T.exists(S))throw new Error("JSXGraph error: In JXG.Math.Poly.monomial missing parameter 'ring'.");for(T.isArray(g)||(g=[]),m=(g=g.slice(0,S.vars.length)).length;m<S.vars.length;m++)g.push(0);this.ring=S,this.coefficient=w||0,this.exponents=T.deepCopy(g)},E.extend(I.Poly.Monomial.prototype,{copy:function(){return new I.Poly.Monomial(this.ring,this.coefficient,this.exponents)},print:function(){var S,w=[];for(S=0;S<this.ring.vars.length;S++)w.push(this.ring.vars[S]+"^"+this.exponents[S]);return this.coefficient+"*"+w.join("*")}}),I.Poly.Polynomial=function(S,w){var g;if(!T.exists(S))throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial missing parameter 'ring'.");g=T.exists(w)&&T.isString(w)?void 0:[],this.ring=S,this.monomials=g},E.extend(I.Poly.Polynomial.prototype,{findSignature:function(S){var w;for(w=0;w<this.monomials.length;w++)if(T.cmpArrays(this.monomials[w].exponents,S))return w;return-1},addSubMonomial:function(S,w){var g;(g=this.findSignature(S.exponents))>-1?this.monomials[g].coefficient+=w*S.coefficient:(S.coefficient*=w,this.monomials.push(S))},add:function(S){var w;if(!T.exists(S)||S.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.add either summand is undefined or rings don't match.");if(T.isArray(S.exponents))this.addSubMonomial(S,1);else for(w=0;w<S.monomials.length;w++)this.addSubMonomial(S.monomials[w],1)},sub:function(S){var w;if(!T.exists(S)||S.ring!==this.ring)throw new Error("JSXGraph error: In JXG.Math.Poly.polynomial.sub either summand is undefined or rings don't match.");if(T.isArray(S.exponents))this.addSubMonomial(S,-1);else for(w=0;w<S.monomials.length;w++)this.addSubMonomial(S.monomials[w],-1)},copy:function(){var S,w;for(w=new I.Poly.Polynomial(this.ring),S=0;S<this.monomials.length;S++)w.monomials.push(this.monomials[S].copy());return w},print:function(){var S,w=[];for(S=0;S<this.monomials.length;S++)w.push("("+this.monomials[S].print()+")");return w.join("+")}}),I.Poly}),define("math/complex",["jxg","utils/type"],function(E,I){"use strict";return E.Complex=function(T,S){this.isComplex=!0,T&&T.isComplex&&(S=T.imaginary,T=T.real),this.real=T||0,this.imaginary=S||0,this.absval=0,this.angle=0},E.extend(E.Complex.prototype,{toString:function(){return this.real+" + "+this.imaginary+"i"},add:function(T){return I.isNumber(T)?this.real+=T:(this.real+=T.real,this.imaginary+=T.imaginary),this},sub:function(T){return I.isNumber(T)?this.real-=T:(this.real-=T.real,this.imaginary-=T.imaginary),this},mult:function(T){var S,w;return I.isNumber(T)?(this.real*=T,this.imaginary*=T):(this.real=(S=this.real)*T.real-(w=this.imaginary)*T.imaginary,this.imaginary=S*T.imaginary+w*T.real),this},div:function(T){var S,w,g;if(I.isNumber(T)){if(Math.abs(T)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real/=T,this.imaginary/=T}else{if(Math.abs(T.real)<Math.eps&&Math.abs(T.imaginary)<Math.eps)return this.real=1/0,this.imaginary=1/0,this;this.real=((g=this.real)*T.real+(w=this.imaginary)*T.imaginary)/(S=T.real*T.real+T.imaginary*T.imaginary),this.imaginary=(w*T.real-g*T.imaginary)/S}return this},conj:function(){return this.imaginary*=-1,this}}),E.C={},E.C.add=function(T,S){var w=new E.Complex(T);return w.add(S),w},E.C.sub=function(T,S){var w=new E.Complex(T);return w.sub(S),w},E.C.mult=function(T,S){var w=new E.Complex(T);return w.mult(S),w},E.C.div=function(T,S){var w=new E.Complex(T);return w.div(S),w},E.C.conj=function(T){var S=new E.Complex(T);return S.conj(),S},E.C.abs=function(T){var S=new E.Complex(T);return S.conj(),S.mult(T),Math.sqrt(S.real)},E.Complex.C=E.C,E.Complex}),define("utils/color",["jxg","utils/type","math/math"],function(E,I,T){"use strict";var S={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},w=[{re:/^\s*rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d.]{1,3})\s*\)\s*$/,example:["rgba(123, 234, 45, 0.5)","rgba(255,234,245,1.0)"],process:function(g){return[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10)]}},{re:/^\s*rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(g){return[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(g){return[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(g){return[parseInt(g[1]+g[1],16),parseInt(g[2]+g[2],16),parseInt(g[3]+g[3],16)]}}];return E.rgbParser=function(g,m,p){var a,u,l,f,v,_,h,y,b,x=g;if(!I.exists(g))return[];if(I.exists(m)&&I.exists(p)&&(x=[g,m,p]),b=!1,I.isArray(a=x)){for(v=0;v<3;v++)b=b||/\./.test(x[v].toString());for(v=0;v<3;v++)b=b&&x[v]>=0&&x[v]<=1;return b?[Math.ceil(255*x[0]),Math.ceil(255*x[1]),Math.ceil(255*x[2])]:x}for("string"==typeof x&&(a=x),"#"===a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,"").toLowerCase(),a=S[a]||a,v=0;v<w.length;v++)l=w[v].process,(f=w[v].re.exec(a))&&(_=(u=l(f))[0],h=u[1],y=u[2]);return isNaN(_)||isNaN(h)||isNaN(y)?[]:[_=_<0||isNaN(_)?0:_>255?255:_,h=h<0||isNaN(h)?0:h>255?255:h,y=y<0||isNaN(y)?0:y>255?255:y]},E.rgb2css=function(g,m,p){var a;return"rgb("+(a=E.rgbParser(g,m,p))[0]+", "+a[1]+", "+a[2]+")"},E.rgb2hex=function(g,m,p){var a,u,c;return u=(a=E.rgbParser(g,m,p))[1],c=a[2],a=(a=a[0]).toString(16),u=u.toString(16),c=c.toString(16),1===a.length&&(a="0"+a),1===u.length&&(u="0"+u),1===c.length&&(c="0"+c),"#"+a+u+c},E.hex2rgb=function(g){return E.deprecated("JXG.hex2rgb()","JXG.rgb2css()"),E.rgb2css(g)},E.hsv2rgb=function(g,m,p){var a,u,c,l,f,v,_,h,y;if(g=(g%360+360)%360,0===m){if(!(isNaN(g)||g<T.eps))return"#ffffff";a=p,u=p,c=p}else switch(v=g>=360?0:g,_=p*(1-m),h=p*(1-m*(l=(v/=60)-(f=Math.floor(v)))),y=p*(1-m*(1-l)),f){case 0:a=p,u=y,c=_;break;case 1:a=h,u=p,c=_;break;case 2:a=_,u=p,c=y;break;case 3:a=_,u=h,c=p;break;case 4:a=y,u=_,c=p;break;case 5:a=p,u=_,c=h}return["#",a=2===(a=Math.round(255*a).toString(16)).length?a:1===a.length?"0"+a:"00",u=2===(u=Math.round(255*u).toString(16)).length?u:1===u.length?"0"+u:"00",c=2===(c=Math.round(255*c).toString(16)).length?c:1===c.length?"0"+c:"00"].join("")},E.rgb2hsv=function(g,m,p){var a,u,c,l,f,v,_,h,y,b,x,D,M;return u=(a=E.rgbParser(g,m,p))[1],c=a[2],l=(a=a[0])/255,f=u/255,v=c/255,D=Math.max(a,u,c),h=(M=Math.min(a,u,c))/255,b=0,(x=_=D/255)>0&&(b=(x-h)/x),y=1/(_-h),b>0&&(D===a?y*=f-v:y=D===u?2+(v-l)*y:4+(l-f)*y),(y*=60)<0&&(y+=360),D===M&&(y=0),[y,b,x]},E.rgb2LMS=function(g,m,p){var a,u,c,l,f,v,_,h=[[.05059983,.08585369,.0095242],[.01893033,.08925308,.01370054],[.00292202,.00975732,.07145979]];return u=(a=E.rgbParser(g,m,p))[1],c=a[2],a=a[0],a=Math.pow(a,.476190476),u=Math.pow(u,.476190476),c=Math.pow(c,.476190476),(_=[l=a*h[0][0]+u*h[0][1]+c*h[0][2],f=a*h[1][0]+u*h[1][1]+c*h[1][2],v=a*h[2][0]+u*h[2][1]+c*h[2][2]]).l=l,_.m=f,_.s=v,_},E.LMS2rgb=function(g,m,p){var a,u,c,l,f=[[30.830854,-29.832659,1.610474],[-6.481468,17.715578,-2.532642],[-.37569,-1.199062,14.273846]],v=function(_){for(var h=127,y=64;y>0;){if(Math.pow(h,.476190476)>_)h-=y;else{if(Math.pow(h+1,.476190476)>_)return h;h+=y}y/=2}return 254===h&&13.994955247<_?255:h};return u=g*f[1][0]+m*f[1][1]+p*f[1][2],c=g*f[2][0]+m*f[2][1]+p*f[2][2],(l=[a=v(a=g*f[0][0]+m*f[0][1]+p*f[0][2]),u=v(u),c=v(c)]).r=a,l.g=u,l.b=c,l},E.rgba2rgbo=function(g){var m;return 9===g.length&&"#"===g.charAt(0)?(m=parseInt(g.substr(7,2).toUpperCase(),16)/255,g=g.substr(0,7)):m=1,[g,m]},E.rgbo2rgba=function(g,m){var p;return"none"===g?g:(1===(p=Math.round(255*m).toString(16)).length&&(p="0"+p),g+p)},E.rgb2bw=function(g){var m,p,a,u="0123456789ABCDEF";return"none"===g?g:(a=E.rgbParser(g),m=Math.floor(.3*a[0]+.59*a[1]+.11*a[2]),g="#"+(p=u.charAt(m>>4&15)+u.charAt(15&m))+p+p)},E.rgb2cb=function(g,m){var p,a,u,c,l,f,v,_,h,y,b,x="0123456789ABCDEF";if("none"===g)return g;switch(a=(l=E.rgb2LMS(g))[0],u=l[1],c=l[2],m=m.toLowerCase()){case"protanopia":f=-.06150039994295001,v=.08277001656812001,_=-.013200141220000003,h=.05858939668799999,y=-.07934519995360001,b=.013289415272000003,a=c/u<.6903216543277437?-(v*u+_*c)/f:-(y*u+b*c)/h;break;case"tritanopia":f=-.00058973116217,v=.007690316482,_=-.01011703519052,h=.025495080838999994,y=-.0422740347,b=.017005316784,c=u/a<.8349489908460004?-(f*a+v*u)/_:-(h*a+y*u)/b;break;default:f=-.06150039994295001,v=.08277001656812001,_=-.013200141220000003,h=.05858939668799999,y=-.07934519995360001,b=.013289415272000003,u=c/a<.5763833686400911?-(f*a+_*c)/v:-(h*a+b*c)/y}return p=E.LMS2rgb(a,u,c),g="#"+(x.charAt(p[0]>>4&15)+x.charAt(15&p[0])),(g+=x.charAt(p[1]>>4&15)+x.charAt(15&p[1]))+(x.charAt(p[2]>>4&15)+x.charAt(15&p[2]))},E.autoHighlight=function(g){var m=E.rgba2rgbo(g),p=m[0],a=m[1];return"#"===g.charAt(0)?E.rgbo2rgba(p,a*=a<.3?1.8:.4):g},E.contrast=function(g,m,p,a){var u,c,l,f,v;return m=m||"#000000",p=p||"#ffffff",a=a||7,u=E.rgbParser(g),c=E.rgbParser("#000000"),v=(l=.2126*Math.pow(u[0]/255,2.2)+.7152*Math.pow(u[1]/255,2.2)+.0722*Math.pow(u[2]/255,2.2))>(f=.2126*Math.pow(c[0]/255,2.2)+.7152*Math.pow(c[1]/255,2.2)+.0722*Math.pow(c[2]/255,2.2))?Math.floor((l+.05)/(f+.05)):Math.floor((f+.05)/(l+.05)),(v-=1)>a?m:p},E.setClassicColors=function(){E.Options.elements.strokeColor="blue",E.Options.elements.fillColor="red",E.Options.hatch.strokeColor="blue",E.Options.angle.fillColor="#ff7f00",E.Options.angle.highlightFillColor="#ff7f00",E.Options.angle.strokeColor="#ff7f00",E.Options.angle.label.strokeColor="blue",E.Options.arc.strokeColor="blue",E.Options.circle.center.fillColor="red",E.Options.circle.center.strokeColor="blue",E.Options.circumcircle.strokeColor="blue",E.Options.circumcircle.center.fillColor="red",E.Options.circumcircle.center.strokeColor="blue",E.Options.circumcirclearc.strokeColor="blue",E.Options.circumcirclesector.strokeColor="blue",E.Options.circumcirclesector.fillColor="green",E.Options.circumcirclesector.highlightFillColor="green",E.Options.conic.strokeColor="blue",E.Options.curve.strokeColor="blue",E.Options.incircle.strokeColor="blue",E.Options.incircle.center.fillColor="red",E.Options.incircle.center.strokeColor="blue",E.Options.inequality.fillColor="red",E.Options.integral.fillColor="red",E.Options.integral.curveLeft.color="red",E.Options.integral.curveRight.color="red",E.Options.line.strokeColor="blue",E.Options.point.fillColor="red",E.Options.point.strokeColor="red",E.Options.polygon.fillColor="green",E.Options.polygon.highlightFillColor="green",E.Options.polygon.vertices.strokeColor="red",E.Options.polygon.vertices.fillColor="red",E.Options.regularpolygon.fillColor="green",E.Options.regularpolygon.highlightFillColor="green",E.Options.regularpolygon.vertices.strokeColor="red",E.Options.regularpolygon.vertices.fillColor="red",E.Options.riemannsum.fillColor="yellow",E.Options.sector.fillColor="green",E.Options.sector.highlightFillColor="green",E.Options.semicircle.center.fillColor="red",E.Options.semicircle.center.strokeColor="blue",E.Options.slopetriangle.fillColor="red",E.Options.slopetriangle.highlightFillColor="red",E.Options.turtle.arrow.strokeColor="blue"},E.extend(E,{paletteWong:{black:"#000000",orange:"#E69F00",skyblue:"#56B4E9",bluishgreen:"#009E73",yellow:"#F0E442",darkblue:"#0072B2",vermillion:"#D55E00",reddishpurple:"#CC79A7",blue:"#0072B2",red:"#D55E00",green:"#009E73",purple:"#CC79A7",white:"#ffffff"}}),E.palette=E.paletteWong,E}),define("options",["jxg","base/constants","math/math","utils/color","utils/type"],function(E,I,T,S,w){"use strict";return E.Options={jc:{enabled:!0,compile:!0},board:{boundingBox:[-5,5,5,-5],maxBoundingBox:[-1/0,1/0,1/0,-1/0],zoomFactor:1,zoomX:1,zoomY:1,title:"",description:"",showCopyright:!0,axis:!1,defaultAxes:{x:{name:"x",ticks:{label:{visible:"inherit",anchorX:"middle",anchorY:"top",fontSize:12,offset:[0,-3]},drawZero:!1,visible:"inherit"}},y:{name:"y",ticks:{label:{visible:"inherit",anchorX:"right",anchorY:"middle",fontSize:12,offset:[-6,0]},tickEndings:[1,0],drawZero:!1,visible:"inherit"}}},showNavigation:!0,showZoom:!0,showReload:!1,showScreenshot:!1,screenshot:{scale:1,type:"png",symbol:"\u2318",css:"background-color:#eeeeee; opacity:1.0; border:2px solid black; border-radius:10px; text-align:center",cssButton:"padding: 4px 10px; border: solid #356AA0 1px; border-radius: 5px; position: absolute; right: 2ex; top: 2ex; background-color: rgba(255, 255, 255, 0.3);"},showFullscreen:!1,fullscreen:{symbol:'<svg height="1em" width="1em" version="1.1" viewBox="10 10 18 18"><path fill="#666" d="m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"></path><path fill="#666" d="m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"></path><path fill="#666" d="m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"></path><path fill="#666" d="M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"></path></svg>',id:null},showClearTraces:!1,keepAspectRatio:!1,ignoreLabels:!0,maxNameLength:1,document:!1,takeFirst:!1,takeSizeFromFile:!1,renderer:"auto",animationDelay:35,maxFrameRate:40,registerEvents:!0,minimizeReflow:"none",offsetX:0,offsetY:0,zoom:{enabled:!0,factorX:1.25,factorY:1.25,wheel:!0,needShift:!0,min:1e-4,max:1e4,pinchHorizontal:!0,pinchVertical:!0,pinchSensitivity:7},pan:{needShift:!0,needTwoFingers:!1,enabled:!0},drag:{enabled:!0},keyboard:{enabled:!0,dx:10,dy:10,panShift:!0,panCtrl:!1},resize:{enabled:!0,throttle:10},moveTarget:null,selection:{enabled:!1,name:"selectionPolygon",needShift:!1,needCtrl:!0,withLines:!1,vertices:{visible:!1},fillColor:"#ffff00",visible:!1},showInfobox:!0},navbar:{strokeColor:"#333333",fillColor:"transparent",highlightFillColor:"#aaaaaa",padding:"2px",position:"absolute",fontSize:"14px",cursor:"pointer",zIndex:"100",right:"5px",bottom:"5px"},elements:{strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",fillColor:S.palette.red,highlightFillColor:"none",strokeOpacity:1,highlightStrokeOpacity:1,fillOpacity:1,highlightFillOpacity:1,gradient:null,gradientSecondColor:"#ffffff",gradientSecondOpacity:1,gradientStartOffset:0,gradientEndOffset:1,gradientAngle:0,gradientCX:.5,gradientCY:.5,gradientR:.5,gradientFX:.5,gradientFY:.5,gradientFR:0,transitionDuration:100,strokeWidth:2,highlightStrokeWidth:2,fixed:!1,frozen:!1,withLabel:!1,visible:!0,priv:!1,layer:0,dash:0,shadow:!1,shadowColor:"black",trace:!1,traceAttributes:{},highlight:!0,needsRegularUpdate:!0,snapToGrid:!1,scalable:!0,rotatable:!0,dragToTopOfLayer:!1,precision:"inherit",draft:{draft:!1,strokeColor:"#565656",fillColor:"#565656",strokeOpacity:.8,fillOpacity:.8,strokeWidth:1},isLabel:!1,tabindex:0},ticks:{generateLabelText:null,generateLabelValue:null,drawLabels:!1,label:{},beautifulScientificTickLabels:!1,useUnicodeMinus:!0,anchor:"left",drawZero:!1,insertTicks:!1,minTicksDistance:10,minorHeight:4,majorHeight:10,tickEndings:[1,1],minorTicks:4,ticksPerLabel:!1,scale:1,scaleSymbol:"",labels:[],maxLabelLength:5,precision:3,digits:3,ticksDistance:1,face:"|",strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"none",highlightFillColor:"none",visible:"inherit",includeBoundaries:!1,type:"linear"},hatch:{drawLabels:!1,drawZero:!0,majorHeight:20,anchor:"middle",face:"|",strokeWidth:2,strokeColor:S.palette.blue,ticksDistance:.2},precision:{touch:30,touchMax:100,mouse:4,pen:4,epsilon:1e-4,hasPoint:4},layer:{numlayers:20,unused9:19,unused8:18,unused7:17,unused6:16,unused5:15,unused4:14,unused3:13,unused2:12,unused1:11,unused0:10,text:9,point:9,glider:9,arc:8,line:7,circle:6,curve:5,turtle:5,polygon:3,sector:3,angle:3,integral:3,axis:2,ticks:2,grid:1,image:0,trace:0},angle:{withLabel:!0,radius:"auto",type:"sector",orthoType:"square",orthoSensitivity:1,fillColor:S.palette.orange,highlightFillColor:S.palette.orange,strokeColor:S.palette.orange,fillOpacity:.3,highlightFillOpacity:.3,radiuspoint:{withLabel:!1,visible:!1,name:""},pointsquare:{withLabel:!1,visible:!1,name:""},dot:{visible:!1,strokeColor:"none",fillColor:"#000000",size:2,face:"o",withLabel:!1,name:""},label:{position:"top",offset:[0,0],strokeColor:S.palette.blue},arc:{visible:!1,fillColor:"none"}},arc:{selection:"auto",hasInnerPoints:!1,label:{anchorX:"auto",anchorY:"auto"},firstArrow:!1,lastArrow:!1,fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",useDirection:!1,center:{},radiusPoint:{},anglePoint:{}},arrow:{firstArrow:!1,lastArrow:{type:1,highlightSize:6,size:6}},axis:{name:"",needsRegularUpdate:!1,strokeWidth:1,lastArrow:{type:1,highlightSize:8,size:8},strokeColor:"#666666",highlightStrokeWidth:1,highlightStrokeColor:"#888888",withTicks:!0,straightFirst:!0,straightLast:!0,margin:-4,withLabel:!1,scalable:!1,ticks:{label:{offset:[4,-9],parse:!1,needsRegularUpdate:!1,display:"internal",visible:"inherit",layer:9},visible:"inherit",needsRegularUpdate:!1,strokeWidth:1,strokeColor:"#666666",highlightStrokeColor:"#888888",drawLabels:!0,drawZero:!1,insertTicks:!0,minTicksDistance:5,minorHeight:10,majorHeight:-1,tickEndings:[0,1],minorTicks:4,ticksDistance:1,strokeOpacity:.25},point1:{needsRegularUpdate:!1,visible:!1},point2:{needsRegularUpdate:!1,visible:!1},tabindex:-1,label:{position:"lft",offset:[10,10]}},bisector:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},bisectorlines:{line1:{strokeColor:"#000000"},line2:{strokeColor:"#000000"}},boxplot:{dir:"vertical",smallWidth:.5,strokeWidth:2,strokeColor:S.palette.blue,fillColor:S.palette.blue,fillOpacity:.2,highlightStrokeWidth:2,highlightStrokeColor:S.palette.blue,highlightFillColor:S.palette.blue,highlightFillOpacity:.1},button:{disabled:!1,display:"html"},cardinalspline:{createPoints:!0,isArrayOfCoordinates:!1,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},chart:{chartStyle:"line",colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],highlightcolors:null,fillcolor:null,highlightonsector:!1,highlightbysize:!1,fillOpacity:.6,withLines:!1,label:{}},checkbox:{disabled:!1,checked:!1,display:"html"},circle:{hasInnerPoints:!1,fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,fillColor:S.palette.red,strokeColor:S.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},label:{position:"urt"}},circumcircle:{fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:S.palette.red,strokeColor:S.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},circumcirclearc:{fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,withLabel:!1,fixed:!1,name:""}},circumcirclesector:{useDirection:!0,fillColor:S.palette.yellow,highlightFillColor:S.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},conic:{fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",foci:{fixed:!1,visible:!1,withLabel:!1,name:""},center:{visible:!1,withLabel:!1,name:""},point:{withLabel:!1,name:""},line:{visible:!1}},curve:{strokeWidth:1,strokeColor:S.palette.blue,fillColor:"none",fixed:!0,useQDT:!1,handDrawing:!1,curveType:null,RDPsmoothing:!1,numberPointsHigh:1600,numberPointsLow:400,doAdvancedPlot:!0,recursionDepthHigh:17,recursionDepthLow:15,doAdvancedPlotOld:!1,plotVersion:2,label:{position:"lft"},firstArrow:!1,lastArrow:!1},foreignobject:{attractors:[],fixed:!0,visible:!0},glider:{label:{}},grid:{needsRegularUpdate:!1,hasGrid:!1,gridX:1,gridY:1,strokeColor:"#c0c0c0",strokeOpacity:.5,strokeWidth:1,dash:0,snapToGrid:!1,snapSizeX:10,snapSizeY:10},group:{needsRegularUpdate:!0},htmlslider:{widthRange:100,widthOut:34,step:.01,frozen:!0,isLabel:!1,strokeColor:"#000000",display:"html",anchorX:"left",anchorY:"middle",withLabel:!1},image:{imageString:null,fillOpacity:1,highlightFillOpacity:.6,cssClass:"JXGimage",highlightCssClass:"JXGimageHighlight",rotate:0,snapSizeX:1,snapSizeY:1,attractors:[]},incircle:{fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",center:{visible:!1,fixed:!1,withLabel:!1,fillColor:S.palette.red,strokeColor:S.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",name:""}},inequality:{fillColor:S.palette.red,fillOpacity:.2,strokeColor:"none",inverse:!1},infobox:{fontSize:12,isLabel:!1,strokeColor:"#bbbbbb",display:"html",anchorX:"left",anchorY:"middle",cssClass:"JXGinfobox",rotate:0,visible:!0,parse:!1,transitionDuration:0,needsRegularUpdate:!1},integral:{axis:"x",withLabel:!0,fixed:!0,strokeWidth:0,strokeOpacity:0,fillColor:S.palette.red,fillOpacity:.3,highlightFillColor:S.palette.red,highlightFillOpacity:.2,curveLeft:{visible:!0,withLabel:!1,color:S.palette.red,fillOpacity:.8,layer:9},baseLeft:{visible:!1,fixed:!1,withLabel:!1,name:""},curveRight:{visible:!0,withLabel:!1,color:S.palette.red,fillOpacity:.8,layer:9},baseRight:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{fontSize:20}},input:{disabled:!1,maxlength:524288,display:"html"},intersection:{alwaysIntersect:!0},label:{visible:"inherit",strokeColor:"#000000",strokeOpacity:1,highlightStrokeOpacity:.666666,highlightStrokeColor:"#000000",fixed:!0,position:"urt",offset:[10,10],autoPosition:!1},legend:{style:"vertical",labels:["1","2","3","4","5","6","7","8"],colors:["#B02B2C","#3F4C6B","#C79810","#D15600","#FFFF88","#c3d9ff","#4096EE","#008C00"],rowHeight:20,strokeWidth:5},line:{firstArrow:!1,lastArrow:!1,margin:0,straightFirst:!0,straightLast:!0,fillColor:"none",highlightFillColor:"none",strokeColor:S.palette.blue,highlightStrokeColor:"#c3d9ff",withTicks:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},ticks:{drawLabels:!0,label:{offset:[4,-9]},drawZero:!1,insertTicks:!1,minTicksDistance:50,minorHeight:4,majorHeight:-1,minorTicks:4,defaultDistance:1,strokeOpacity:.3,visible:"inherit"},label:{position:"llft"},snapToGrid:!1,snapSizeX:1,snapSizeY:1,touchFirstPoint:!1,touchLastPoint:!1,lineCap:"butt"},locus:{translateToOrigin:!1,translateTo10:!1,stretch:!1,toOrigin:null,to10:null},metapostspline:{createPoints:!0,isArrayOfCoordinates:!1,points:{strokeOpacity:.05,fillOpacity:.05,highlightStrokeOpacity:1,highlightFillOpacity:1,withLabel:!1,name:"",fixed:!1}},mirrorelement:{fixed:!0,point:{},center:{},type:"Euclidean"},normal:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""}},orthogonalprojection:{},parallel:{strokeColor:"#000000",point:{visible:!1,fixed:!1,withLabel:!1,name:""},label:{position:"llft"}},perpendicular:{strokeColor:"#000000",straightFirst:!0,straightLast:!0},perpendicularsegment:{strokeColor:"#000000",straightFirst:!1,straightLast:!1,point:{visible:!1,fixed:!0,withLabel:!1,name:""}},point:{withLabel:!0,label:{},style:5,face:"o",size:3,sizeUnit:"screen",strokeWidth:2,fillColor:S.palette.red,strokeColor:S.palette.red,highlightFillColor:"#c3d9ff",highlightStrokeColor:"#c3d9ff",zoom:!1,showInfobox:"inherit",infoboxDigits:"auto",draft:!1,attractors:[],attractorUnit:"user",attractorDistance:0,snatchDistance:0,snapToGrid:!1,attractToGrid:!1,snapSizeX:1,snapSizeY:1,snapToPoints:!1,ignoredSnapToPoints:[]},polygon:{hasInnerPoints:!1,fillColor:S.palette.yellow,highlightFillColor:S.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"},visible:"inherit"},vertices:{layer:9,withLabel:!1,name:"",strokeColor:S.palette.red,fillColor:S.palette.red,fixed:!1,visible:"inherit"},label:{offset:[0,0]}},polygonalchain:{fillColor:"none",highlightFillColor:"none"},prescribedangle:{anglePoint:{size:2,visible:!1,withLabel:!1}},reflection:{fixed:!0,center:{},type:"Euclidean"},regularpolygon:{hasInnerPoints:!1,fillColor:S.palette.yellow,highlightFillColor:S.palette.yellow,fillOpacity:.3,highlightFillOpacity:.2,withLines:!0,borders:{withLabel:!1,strokeWidth:1,highlightStrokeWidth:1,layer:5,label:{position:"top"}},vertices:{layer:9,withLabel:!0,strokeColor:S.palette.red,fillColor:S.palette.red,fixed:!1},label:{offset:[0,0]}},riemannsum:{withLabel:!1,fillOpacity:.3,fillColor:S.palette.yellow},sector:{fillColor:S.palette.yellow,highlightFillColor:S.palette.yellow,fillOpacity:.3,highlightFillOpacity:.3,highlightOnSector:!1,highlightStrokeWidth:0,selection:"auto",arc:{visible:!1,fillColor:"none"},radiusPoint:{visible:!1,withLabel:!1},center:{visible:!1,withLabel:!1},anglePoint:{visible:!1,withLabel:!1},label:{offset:[0,0],anchorX:"auto",anchorY:"auto"}},segment:{label:{position:"top"}},semicircle:{center:{visible:!1,withLabel:!1,fixed:!1,fillColor:S.palette.red,strokeColor:S.palette.red,highlightFillColor:"#eeeeee",highlightStrokeColor:S.palette.red,name:""}},slider:{snapWidth:-1,precision:2,digits:2,firstArrow:!1,lastArrow:!1,withTicks:!0,withLabel:!0,suffixLabel:null,unitLabel:null,postLabel:null,layer:9,showInfobox:!1,name:"",visible:!0,strokeColor:"#000000",highlightStrokeColor:"#888888",fillColor:"#ffffff",highlightFillColor:"none",size:6,point1:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},point2:{needsRegularUpdate:!1,showInfobox:!1,withLabel:!1,visible:!1,fixed:!0,name:""},baseline:{needsRegularUpdate:!1,visible:"inherit",fixed:!0,scalable:!1,tabindex:null,name:"",strokeWidth:1,strokeColor:"#000000",highlightStrokeColor:"#888888"},ticks:{needsRegularUpdate:!1,fixed:!0,drawLabels:!1,digits:2,includeBoundaries:1,drawZero:!0,label:{offset:[-4,-14],display:"internal"},minTicksDistance:30,insertTicks:!0,minorHeight:4,majorHeight:5,minorTicks:0,defaultDistance:1,strokeOpacity:1,strokeWidth:1,tickEndings:[0,1],strokeColor:"#000000",visible:"inherit"},highline:{strokeWidth:3,visible:"inherit",fixed:!0,tabindex:null,name:"",strokeColor:"#000000",highlightStrokeColor:"#888888"},label:{visible:"inherit",strokeColor:"#000000"},moveOnUp:!0},comb:{frequency:.2,width:.4,angle:Math.PI/3,reverse:!1,point1:{visible:!1,withLabel:!1,fixed:!1,name:""},point2:{visible:!1,withLabel:!1,fixed:!1,name:""},curve:{strokeWidth:1,strokeColor:"#000000",fillColor:"none"}},slopetriangle:{fillColor:S.palette.red,fillOpacity:.4,highlightFillColor:S.palette.red,highlightFillOpacity:.3,borders:{lastArrow:{type:1,size:6}},glider:{fixed:!0,visible:!1,withLabel:!1},baseline:{visible:!1,withLabel:!1,name:""},basepoint:{visible:!1,withLabel:!1,name:""},tangent:{visible:!1,withLabel:!1,name:""},toppoint:{visible:!1,withLabel:!1,name:""},label:{visible:!0}},stepfunction:{},tapemeasure:{strokeColor:"#000000",strokeWidth:2,highlightStrokeColor:"#000000",withTicks:!0,withLabel:!0,precision:2,digits:2,point1:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},point2:{visible:"inherit",strokeColor:"#000000",fillColor:"#ffffff",fillOpacity:0,highlightFillOpacity:.1,size:6,snapToPoints:!0,attractorUnit:"screen",attractorDistance:20,showInfobox:!1,withLabel:!1,name:""},ticks:{drawLabels:!1,drawZero:!0,insertTicks:!0,minorHeight:8,majorHeight:16,minorTicks:4,tickEndings:[0,1],defaultDistance:.1,strokeOpacity:1,strokeWidth:1,strokeColor:"#000000",visible:"inherit"},label:{position:"top"}},text:{fontSize:12,fontUnit:"px",digits:2,parse:!0,useCaja:!1,isLabel:!1,strokeColor:"#000000",highlightStrokeColor:"#000000",highlightStrokeOpacity:.666666,cssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",highlightCssDefaultStyle:"font-family: Arial, Helvetica, Geneva, sans-serif;",cssStyle:"",highlightCssStyle:"",useASCIIMathML:!1,useMathJax:!1,useKatex:!1,display:"html",anchor:null,anchorX:"left",anchorY:"middle",cssClass:"JXGtext",highlightCssClass:"JXGtext",dragArea:"all",withLabel:!1,rotate:0,visible:!0,snapSizeX:1,snapSizeY:1,attractors:[]},tracecurve:{strokeColor:"#000000",fillColor:"none",numberPoints:100},turtle:{strokeWidth:1,fillColor:"none",strokeColor:"#000000",arrow:{strokeWidth:2,withLabel:!1,strokeColor:S.palette.red,lastArrow:!0}},shortcuts:{color:["strokeColor","fillColor"],opacity:["strokeOpacity","fillOpacity"],highlightColor:["highlightStrokeColor","highlightFillColor"],highlightOpacity:["highlightStrokeOpacity","highlightFillOpacity"],strokeWidth:["strokeWidth","highlightStrokeWidth"]}},E.Validator=function(){var g,m=function(v){return w.isString(v)},p=function(v){return Math.abs(v-Math.round(v))<T.eps},a=function(v){return p(v)&&v>0},u=function(v){return v>0},c=function(v){return v>=0},l={},f={attractorDistance:c,color:m,defaultDistance:w.isNumber,display:function(v){return"html"===v||"internal"===v},doAdvancedPlot:!1,draft:!1,drawLabels:!1,drawZero:!1,face:function(v){return w.exists(E.normalizePointFace(v))},factor:w.isNumber,fillColor:m,fillOpacity:w.isNumber,firstArrow:!1,fontSize:p,dash:p,gridX:w.isNumber,gridY:w.isNumber,hasGrid:!1,highlightFillColor:m,highlightFillOpacity:w.isNumber,highlightStrokeColor:m,highlightStrokeOpacity:w.isNumber,insertTicks:!1,lastArrow:!1,layer:function(v){return p(v)&&v>=0},majorHeight:p,minorHeight:p,minorTicks:c,minTicksDistance:a,numberPointsHigh:a,numberPointsLow:a,opacity:w.isNumber,radius:w.isNumber,RDPsmoothing:!1,renderer:function(v){return"vml"===v||"svg"===v||"canvas"===v||"no"===v},right:function(v){return/^[0-9]+px$/.test(v)},showCopyright:!1,showInfobox:!1,showNavigation:!1,size:c,snapSizeX:u,snapSizeY:u,snapWidth:w.isNumber,snapToGrid:!1,snatchDistance:c,straightFirst:!1,straightLast:!1,stretch:!1,strokeColor:m,strokeOpacity:w.isNumber,strokeWidth:c,takeFirst:!1,takeSizeFromFile:!1,to10:!1,toOrigin:!1,translateTo10:!1,translateToOrigin:!1,useASCIIMathML:!1,useDirection:!1,useMathJax:!1,withLabel:!1,withTicks:!1,zoom:!1};for(g in f)f.hasOwnProperty(g)&&(l[g.toLowerCase()]=f[g]);return l}(),E.normalizePointFace=function(g){return{cross:"x",x:"x",circle:"o",o:"o",square:"[]","[]":"[]",plus:"+","+":"+",diamond:"<>","<>":"<>",triangleup:"^",a:"^","^":"^",triangledown:"v",v:"v",triangleleft:"<","<":"<",triangleright:">",">":">"}[g]},E.useStandardOptions=function(g){var m,p,a,u,c=E.Options,l=g.hasGrid;for(m in g.options.grid.hasGrid=c.grid.hasGrid,g.options.grid.gridX=c.grid.gridX,g.options.grid.gridY=c.grid.gridY,g.options.grid.gridColor=c.grid.gridColor,g.options.grid.gridOpacity=c.grid.gridOpacity,g.options.grid.gridDash=c.grid.gridDash,g.options.grid.snapToGrid=c.grid.snapToGrid,g.options.grid.snapSizeX=c.grid.SnapSizeX,g.options.grid.snapSizeY=c.grid.SnapSizeY,g.takeSizeFromFile=c.takeSizeFromFile,u=function(f,v){f.visProp.fillcolor=v.fillColor,f.visProp.highlightfillcolor=v.highlightFillColor,f.visProp.strokecolor=v.strokeColor,f.visProp.highlightstrokecolor=v.highlightStrokeColor},g.objects)if(g.objects.hasOwnProperty(m))if((a=g.objects[m]).elementClass===I.OBJECT_CLASS_POINT)u(a,c.point);else if(a.elementClass===I.OBJECT_CLASS_LINE)for(u(a,c.line),p=0;p<a.ticks.length;p++)a.ticks[p].majorTicks=c.line.ticks.majorTicks,a.ticks[p].minTicksDistance=c.line.ticks.minTicksDistance,a.ticks[p].visProp.minorheight=c.line.ticks.minorHeight,a.ticks[p].visProp.majorheight=c.line.ticks.majorHeight;else a.elementClass===I.OBJECT_CLASS_CIRCLE?u(a,c.circle):a.type===I.OBJECT_TYPE_ANGLE?u(a,c.angle):a.type===I.OBJECT_TYPE_ARC?u(a,c.arc):a.type===I.OBJECT_TYPE_POLYGON?u(a,c.polygon):a.type===I.OBJECT_TYPE_CONIC?u(a,c.conic):a.type===I.OBJECT_TYPE_CURVE?u(a,c.curve):a.type===I.OBJECT_TYPE_SECTOR&&(a.arc.visProp.fillcolor=c.sector.fillColor,a.arc.visProp.highlightfillcolor=c.sector.highlightFillColor,a.arc.visProp.fillopacity=c.sector.fillOpacity,a.arc.visProp.highlightfillopacity=c.sector.highlightFillOpacity);g.fullUpdate(),l&&!g.hasGrid?g.removeGrids(g):!l&&g.hasGrid&&g.create("grid",[])},E.useBlackWhiteOptions=function(g){var m=E.Options;m.point.fillColor=S.rgb2bw(m.point.fillColor),m.point.highlightFillColor=S.rgb2bw(m.point.highlightFillColor),m.point.strokeColor=S.rgb2bw(m.point.strokeColor),m.point.highlightStrokeColor=S.rgb2bw(m.point.highlightStrokeColor),m.line.fillColor=S.rgb2bw(m.line.fillColor),m.line.highlightFillColor=S.rgb2bw(m.line.highlightFillColor),m.line.strokeColor=S.rgb2bw(m.line.strokeColor),m.line.highlightStrokeColor=S.rgb2bw(m.line.highlightStrokeColor),m.circle.fillColor=S.rgb2bw(m.circle.fillColor),m.circle.highlightFillColor=S.rgb2bw(m.circle.highlightFillColor),m.circle.strokeColor=S.rgb2bw(m.circle.strokeColor),m.circle.highlightStrokeColor=S.rgb2bw(m.circle.highlightStrokeColor),m.arc.fillColor=S.rgb2bw(m.arc.fillColor),m.arc.highlightFillColor=S.rgb2bw(m.arc.highlightFillColor),m.arc.strokeColor=S.rgb2bw(m.arc.strokeColor),m.arc.highlightStrokeColor=S.rgb2bw(m.arc.highlightStrokeColor),m.polygon.fillColor=S.rgb2bw(m.polygon.fillColor),m.polygon.highlightFillColor=S.rgb2bw(m.polygon.highlightFillColor),m.sector.fillColor=S.rgb2bw(m.sector.fillColor),m.sector.highlightFillColor=S.rgb2bw(m.sector.highlightFillColor),m.curve.strokeColor=S.rgb2bw(m.curve.strokeColor),m.grid.gridColor=S.rgb2bw(m.grid.gridColor),E.useStandardOptions(g)},E.Options.normalizePointFace=E.normalizePointFace,E.Options}),define("renderer/abstract",["jxg","options","base/coords","base/constants","math/math","math/geometry","utils/type","utils/env"],function(E,I,T,S,w,g,m,p){"use strict";return E.AbstractRenderer=function(){this.vOffsetText=0,this.enhancedRendering=!0,this.container=null,this.type="",this.supportsForeignObject=!1},E.extend(E.AbstractRenderer.prototype,{_updateVisual:function(a,u,c){(c||this.enhancedRendering)&&(u=u||{},this.setObjectTransition(a),m.evaluate(a.visProp.draft)?this.setDraft(a):(u.stroke||(a.highlighted?(this.setObjectStrokeColor(a,a.visProp.highlightstrokecolor,a.visProp.highlightstrokeopacity),this.setObjectStrokeWidth(a,a.visProp.highlightstrokewidth)):(this.setObjectStrokeColor(a,a.visProp.strokecolor,a.visProp.strokeopacity),this.setObjectStrokeWidth(a,a.visProp.strokewidth))),u.fill||(a.highlighted?this.setObjectFillColor(a,a.visProp.highlightfillcolor,a.visProp.highlightfillopacity):this.setObjectFillColor(a,a.visProp.fillcolor,a.visProp.fillopacity)),u.dash||this.setDashStyle(a,a.visProp),u.shadow||this.setShadow(a),u.gradient||this.setShadow(a),u.tabindex||this.setTabindex(a)))},_getHighlighted:function(a){var u=!1;return m.exists(a.board)&&m.exists(a.board.highlightedObjects)||(u=!0),!u&&m.exists(a.board.highlightedObjects[a.id])?"highlight":""},drawPoint:function(a){var u,c=I.normalizePointFace(m.evaluate(a.visProp.face));a.rendNode=this.appendChildPrim(this.createPrim(u="o"===c?"ellipse":"[]"===c?"rect":"path",a.id),m.evaluate(a.visProp.layer)),this.appendNodesToElement(a,u),this._updateVisual(a,{dash:!0,shadow:!0},!0),this.updatePoint(a)},updatePoint:function(a){var u,c=m.evaluate(a.visProp.size),l=I.normalizePointFace(m.evaluate(a.visProp.face)),f=m.evaluate(a.visProp.sizeunit),v=m.evaluate(a.visProp.zoom);isNaN(a.coords.scrCoords[2]+a.coords.scrCoords[1])||("user"===f&&(c*=Math.sqrt(a.board.unitX*a.board.unitY)),u=0==(c*=a.board&&v?Math.sqrt(a.board.zoomX*a.board.zoomY):1)?0:c+1,"o"===l?this.updateEllipsePrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2],u,u):"[]"===l?this.updateRectPrim(a.rendNode,a.coords.scrCoords[1]-c,a.coords.scrCoords[2]-c,2*c,2*c):this.updatePathPrim(a.rendNode,this.updatePathStringPoint(a,c,l),a.board),this._updateVisual(a,{dash:!1,shadow:!1}),this.setShadow(a))},changePointStyle:function(a){var u=this.getElementById(a.id);m.exists(u)&&this.remove(u),this.drawPoint(a),m.clearVisPropOld(a),a.visPropCalc.visible||this.display(a,!1),m.evaluate(a.visProp.draft)&&this.setDraft(a)},drawLine:function(a){a.rendNode=this.appendChildPrim(this.createPrim("line",a.id),m.evaluate(a.visProp.layer)),this.appendNodesToElement(a,"lines"),this.updateLine(a)},updateLine:function(a){this._updateVisual(a),this.updatePathWithArrowHeads(a),this.setLineCap(a)},drawCurve:function(a){a.rendNode=this.appendChildPrim(this.createPrim("path",a.id),m.evaluate(a.visProp.layer)),this.appendNodesToElement(a,"path"),this.updateCurve(a)},updateCurve:function(a){this._updateVisual(a),this.updatePathWithArrowHeads(a),this.setLineCap(a)},updatePathWithArrowHeads:function(a,u){var c,l,f=a.visProp,v=u?"highlight":"";c=u&&f.highlightstrokewidth?Math.max(m.evaluate(f.highlightstrokewidth),m.evaluate(f.strokewidth)):m.evaluate(f.strokewidth),l=this.getArrowHeadData(a,c,v),this.makeArrows(a,l),a.elementClass===S.OBJECT_CLASS_LINE?this.updateLineWithEndings(a,l):a.elementClass===S.OBJECT_CLASS_CURVE&&this.updatePath(a),this.setArrowSize(a,l)},getArrowHeadData:function(a,u,c){var l,f,v,_,h=w.eps,y=0,b=0,x=0,D=0,M=m.evaluate(a.visProp.firstarrow),O=m.evaluate(a.visProp.lastarrow);return(M||O)&&(l=m.exists(M.type)?m.evaluate(M.type):a.elementClass===S.OBJECT_CLASS_LINE?1:7,f=m.exists(O.type)?m.evaluate(O.type):a.elementClass===S.OBJECT_CLASS_LINE?1:7,M&&(_=6,m.exists(M.size)&&(_=m.evaluate(M.size)),""!==c&&m.exists(M[c+"size"])&&(_=m.evaluate(M[c+"size"])),v=u*_,2===l?(v*=.5,h+=u*_):3===l?(v=u*_/3,h+=u):4===l||5===l||6===l?(v=u*_/1.5,h+=u*_):7===l?(v=0,_=10,h+=u):h+=u*_,y+=v,x=_),O&&(_=6,m.exists(O.size)&&(_=m.evaluate(O.size)),""!==c&&m.exists(O[c+"size"])&&(_=m.evaluate(O[c+"size"])),v=u*_,2===f?(v*=.5,h+=u*_):3===f?(v=u*_/3,h+=u):4===f||5===f||6===f?(v=u*_/1.5,h+=u*_):7===f?(v=0,_=10,h+=u):h+=u*_,b+=v,D=_)),a.visPropCalc.typeFirst=l,a.visPropCalc.typeLast=f,{evFirst:M,evLast:O,typeFirst:l,typeLast:f,offFirst:y,offLast:b,sizeFirst:x,sizeLast:D,showFirst:1,showLast:1,minLen:h,strokeWidth:u}},updateLineWithEndings:function(a,u){var c,l,f;return c=new T(S.COORDS_BY_USER,a.point1.coords.usrCoords,a.board),l=new T(S.COORDS_BY_USER,a.point2.coords.usrCoords,a.board),f=m.evaluate(a.visProp.margin),g.calcStraight(a,c,l,f),this.handleTouchpoints(a,c,l,u),this.getPositionArrowHead(a,c,l,u),this.updateLinePrim(a.rendNode,c.scrCoords[1],c.scrCoords[2],l.scrCoords[1],l.scrCoords[2],a.board),this},updatePath:function(a){return m.evaluate(a.visProp.handdrawing)?this.updatePathPrim(a.rendNode,this.updatePathStringBezierPrim(a),a.board):this.updatePathPrim(a.rendNode,this.updatePathStringPrim(a),a.board),this},getPositionArrowHead:function(a,u,c,l){var f,v,_,h,y;return(l.evFirst||l.evLast)&&(v=_=h=y=0,f=u.distance(S.COORDS_BY_SCREEN,c),l.evFirst&&"vml"!==a.board.renderer.type&&(f>=l.minLen?(v=(c.scrCoords[1]-u.scrCoords[1])*l.offFirst/f,_=(c.scrCoords[2]-u.scrCoords[2])*l.offFirst/f):l.showFirst=0),l.evLast&&"vml"!==a.board.renderer.type&&(f>=l.minLen?(h=(c.scrCoords[1]-u.scrCoords[1])*l.offLast/f,y=(c.scrCoords[2]-u.scrCoords[2])*l.offLast/f):l.showLast=0),u.setCoordinates(S.COORDS_BY_SCREEN,[u.scrCoords[1]+v,u.scrCoords[2]+_],!1,!0),c.setCoordinates(S.COORDS_BY_SCREEN,[c.scrCoords[1]-h,c.scrCoords[2]-y],!1,!0)),this},handleTouchpoints:function(a,u,c,l){var f,v,_,h,y,b,x;return(l.evFirst||l.evLast)&&(_=h=y=b=x=0,f=m.evaluate(a.point1.visProp.size)+m.evaluate(a.point1.visProp.strokewidth),v=m.evaluate(a.point2.visProp.size)+m.evaluate(a.point2.visProp.strokewidth),l.evFirst&&m.evaluate(a.visProp.touchfirstpoint)&&(_=u.distance(S.COORDS_BY_SCREEN,c),h=(c.scrCoords[1]-u.scrCoords[1])*f/_,y=(c.scrCoords[2]-u.scrCoords[2])*f/_),l.evLast&&m.evaluate(a.visProp.touchlastpoint)&&(_=u.distance(S.COORDS_BY_SCREEN,c),b=(c.scrCoords[1]-u.scrCoords[1])*v/_,x=(c.scrCoords[2]-u.scrCoords[2])*v/_),u.setCoordinates(S.COORDS_BY_SCREEN,[u.scrCoords[1]+h,u.scrCoords[2]+y],!1,!0),c.setCoordinates(S.COORDS_BY_SCREEN,[c.scrCoords[1]-b,c.scrCoords[2]-x],!1,!0)),this},setArrowSize:function(a,u){return u.evFirst&&this._setArrowWidth(a.rendNodeTriangleStart,u.showFirst*u.strokeWidth,a.rendNode,u.sizeFirst),u.evLast&&this._setArrowWidth(a.rendNodeTriangleEnd,u.showLast*u.strokeWidth,a.rendNode,u.sizeLast),this},setLineCap:function(a){},drawTicks:function(a){a.rendNode=this.appendChildPrim(this.createPrim("path",a.id),m.evaluate(a.visProp.layer)),this.appendNodesToElement(a,"path")},updateTicks:function(a){},drawEllipse:function(a){a.rendNode=this.appendChildPrim(this.createPrim("ellipse",a.id),m.evaluate(a.visProp.layer)),this.appendNodesToElement(a,"ellipse"),this.updateEllipse(a)},updateEllipse:function(a){this._updateVisual(a);var u=a.Radius();u>0&&Math.abs(a.center.coords.usrCoords[0])>w.eps&&!isNaN(u+a.center.coords.scrCoords[1]+a.center.coords.scrCoords[2])&&u*a.board.unitX<2e6&&this.updateEllipsePrim(a.rendNode,a.center.coords.scrCoords[1],a.center.coords.scrCoords[2],u*a.board.unitX,u*a.board.unitY)},drawPolygon:function(a){a.rendNode=this.appendChildPrim(this.createPrim("polygon",a.id),m.evaluate(a.visProp.layer)),this.appendNodesToElement(a,"polygon"),this.updatePolygon(a)},updatePolygon:function(a){this._updateVisual(a,{stroke:!0,dash:!0}),this.updatePolygonPrim(a.rendNode,a)},displayCopyright:function(a,u){},drawInternalText:function(a){},updateInternalText:function(a){},drawText:function(a){var u,c,l,f;"html"===m.evaluate(a.visProp.display)&&p.isBrowser&&"no"!==this.type?((u=this.container.ownerDocument.createElement("div")).style.position="absolute",u.className=m.evaluate(a.visProp.cssclass),l=m.evaluate(a.visProp.layer),m.exists(l)||(l=0),c=""===this.container.style.zIndex?0:parseInt(this.container.style.zIndex,10),u.style.zIndex=c+l,this.container.appendChild(u),u.setAttribute("id",this.container.id+"_"+a.id)):u=this.drawInternalText(a),a.rendNode=u,a.htmlStr="",a.visProp.islabel&&m.exists(a.visProp.anchor)?(f=m.evaluate(a.visProp.anchor.visProp.visible),a.prepareUpdate().updateVisibility(f)):a.prepareUpdate().updateVisibility(),this.updateText(a)},updateText:function(a){var u,c,l,_,h,y,b,x=a.plaintext;if(a.visPropCalc.visible)if(this.updateTextStyle(a,!1),"html"===m.evaluate(a.visProp.display)&&"no"!==this.type){if(isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])||(c=a.coords.scrCoords[1],c=Math.abs(c)<1e6?c:1e6,u="right"===(y=a.getAnchorX())?a.board.canvasWidth-c:"middle"===y?c-.5*a.size[0]:c,a.visPropOld.left!==y+u&&("right"===y?(a.rendNode.style.right=u+"px",a.rendNode.style.left="auto"):(a.rendNode.style.left=u+"px",a.rendNode.style.right="auto"),a.visPropOld.left=y+u),c=a.coords.scrCoords[2]+this.vOffsetText,c=Math.abs(c)<1e6?c:1e6,u="bottom"===(b=a.getAnchorY())?a.board.canvasHeight-c:"middle"===b?c-.5*a.size[1]:c,a.visPropOld.top!==b+u&&("bottom"===b?(a.rendNode.style.top="auto",a.rendNode.style.bottom=u+"px"):(a.rendNode.style.bottom="auto",a.rendNode.style.top=u+"px"),a.visPropOld.top=b+u)),a.htmlStr!==x){try{a.type===m.OBJECT_TYPE_BUTTON?a.rendNodeButton.innerHTML=x:a.type===m.OBJECT_TYPE_CHECKBOX||a.type===m.OBJECT_TYPE_INPUT?a.rendNodeLabel.innerHTML=x:a.rendNode.innerHTML=x}catch{l=a.rendNode.parentNode,a.rendNode.parentNode.removeChild(a.rendNode),a.rendNode.innerHTML=x,l.appendChild(a.rendNode)}if(a.htmlStr=x,m.evaluate(a.visProp.usemathjax))try{MathJax.typeset?MathJax.typeset([a.rendNode]):MathJax.Hub.Queue(["Typeset",MathJax.Hub,a.rendNode]),h="fullscreenwrap_"+(_=a.board.container),document.getElementById(h)&&p.scaleJSXGraphDiv("#"+h,"#"+_,a.board.containerObj._cssFullscreenStore.scale,a.board.containerObj._cssFullscreenStore.vshift)}catch{E.debug("MathJax (not yet) loaded")}else if(m.evaluate(a.visProp.usekatex))try{katex.render(x,a.rendNode,{throwOnError:!1})}catch{E.debug("KaTeX (not yet) loaded")}else if(m.evaluate(a.visProp.useasciimathml))try{AMprocessNode(a.rendNode,!1)}catch{E.debug("AsciiMathML (not yet) loaded")}}this.transformImage(a,a.transformations)}else this.updateInternalText(a)},_css2js:function(a){var u,c,l,f,v,_=[],h=m.trim(a).replace(/;$/,"").split(";");for(c=h.length,u=0;u<c;++u)""!==m.trim(h[u])&&(v=h[u].split(":"),l=m.trim(v[0].replace(/-([a-z])/gi,function(y,b){return b.toUpperCase()})),f=m.trim(v[1]),_.push({key:l,val:f}));return _},updateTextStyle:function(a,u){var c,l,f,v,_,h,y,b,x,D=a.visProp,M=p.isBrowser?D.display:"internal",O=["rendNode","rendNodeTag","rendNodeLabel"],A=O.length,N=m.evaluate(D.fontunit),L=["cssdefaultstyle","cssstyle"],B=L.length;if(u?(f=D.highlightstrokecolor,l=D.highlightstrokeopacity,v=D.highlightcssclass):(f=D.strokecolor,l=D.strokeopacity,v=D.cssclass),"no"!==this.type&&("html"===M||"canvas"!==this.type)){for(b=0;b<B;b++)if(""!==(x=m.evaluate(D[(u?"highlight":"")+L[b]]))&&a.visPropOld[L[b]]!==x){for(h=this._css2js(x),_=0;_<A;_++)if(m.exists(a[O[_]]))for(y in h)h.hasOwnProperty(y)&&(a[O[_]].style[h[y].key]=h[y].val);a.visPropOld[L[b]]=x}if(c=m.evaluate(D.fontsize),a.visPropOld.fontsize!==c){a.needsSizeUpdate=!0;try{for(_=0;_<A;_++)m.exists(a[O[_]])&&(a[O[_]].style.fontSize=c+N)}catch{for(_=0;_<A;_++)m.exists(a[O[_]])&&(a[O[_]].style.fontSize=c)}a.visPropOld.fontsize=c}}return this.setObjectTransition(a),"html"===M&&"no"!==this.type?(a.visPropOld.cssclass!==v&&(a.rendNode.className=v,a.visPropOld.cssclass=v,a.needsSizeUpdate=!0),this.setObjectStrokeColor(a,f,l)):this.updateInternalTextStyle(a,f,l),this},updateInternalTextStyle:function(a,u,c){this.setObjectStrokeColor(a,u,c)},drawImage:function(a){},updateImage:function(a){this.updateRectPrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]),this.updateImageURL(a),this.transformImage(a,a.transformations),this._updateVisual(a,{stroke:!0,dash:!0},!0)},joinTransforms:function(a,u){var c,l=a.board.origin.scrCoords[1],f=a.board.origin.scrCoords[2],v=a.board.unitX,_=a.board.unitY,h=u.length,y=[[1,0,0],[-l/v,1/v,0],[f/_,0,-1/_]];for(c=0;c<h;c++)y=w.matMatMult(u[c].matrix,y);return w.matMatMult([[1,0,0],[l,v,0],[f,0,-_]],y)},transformImage:function(a,u){},updateImageURL:function(a){},updateImageStyle:function(a,u){a.rendNode.className=m.evaluate(u?a.visProp.highlightcssclass:a.visProp.cssclass)},drawForeignObject:function(a){},updateForeignObject:function(a){},appendChildPrim:function(a,u){},appendNodesToElement:function(a,u){},createPrim:function(a,u){return null},remove:function(a){},makeArrows:function(a,u){},_setArrowWidth:function(a,u,c){},updateEllipsePrim:function(a,u,c,l,f){},updateLinePrim:function(a,u,c,l,f,v){},updatePathPrim:function(a,u,c){},updatePathStringPoint:function(a,u,c){},updatePathStringPrim:function(a){},updatePathStringBezierPrim:function(a){},updatePolygonPrim:function(a,u){},updateRectPrim:function(a,u,c,l,f){},setPropertyPrim:function(a,u,c){},setTabindex:function(a){var u;a.board.attr.keyboard.enabled&&m.exists(a.rendNode)&&(u=m.evaluate(a.visProp.tabindex),a.visPropCalc.visible&&!m.evaluate(a.visProp.fixed)||(u=null),u!==a.visPropOld.tabindex&&(a.rendNode.setAttribute("tabindex",u),a.visPropOld.tabindex=u))},display:function(a,u){a&&(a.visPropOld.visible=u)},show:function(a){},hide:function(a){},setBuffering:function(a,u){},setDashStyle:function(a){},setDraft:function(a){if(m.evaluate(a.visProp.draft)){var u=a.board.options.elements.draft.color,c=a.board.options.elements.draft.opacity;this.setObjectTransition(a),a.type===S.OBJECT_TYPE_POLYGON?this.setObjectFillColor(a,u,c):(a.elementClass===S.OBJECT_CLASS_POINT?this.setObjectFillColor(a,u,c):this.setObjectFillColor(a,"none",0),this.setObjectStrokeColor(a,u,c),this.setObjectStrokeWidth(a,a.board.options.elements.draft.strokeWidth))}},removeDraft:function(a){this.setObjectTransition(a),a.type===S.OBJECT_TYPE_POLYGON?this.setObjectFillColor(a,a.visProp.fillcolor,a.visProp.fillopacity):(a.type===S.OBJECT_CLASS_POINT&&this.setObjectFillColor(a,a.visProp.fillcolor,a.visProp.fillopacity),this.setObjectStrokeColor(a,a.visProp.strokecolor,a.visProp.strokeopacity),this.setObjectStrokeWidth(a,a.visProp.strokewidth))},setGradient:function(a){},updateGradient:function(a){},setObjectTransition:function(a,u){},setObjectFillColor:function(a,u,c){},setObjectStrokeColor:function(a,u,c){},setObjectStrokeWidth:function(a,u){},setShadow:function(a){},highlight:function(a){var u,c,l=a.visProp;if(this.setObjectTransition(a),!l.draft){if(a.type===S.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(a,l.highlightfillcolor,l.highlightfillopacity),u=0;u<a.borders.length;u++)this.setObjectStrokeColor(a.borders[u],a.borders[u].visProp.highlightstrokecolor,a.borders[u].visProp.highlightstrokeopacity);else a.elementClass===S.OBJECT_CLASS_TEXT?this.updateTextStyle(a,!0):a.type===S.OBJECT_TYPE_IMAGE?(this.updateImageStyle(a,!0),this.setObjectFillColor(a,l.highlightfillcolor,l.highlightfillopacity)):(this.setObjectStrokeColor(a,l.highlightstrokecolor,l.highlightstrokeopacity),this.setObjectFillColor(a,l.highlightfillcolor,l.highlightfillopacity));l.highlightstrokewidth&&(c=Math.max(m.evaluate(l.highlightstrokewidth),m.evaluate(l.strokewidth)),this.setObjectStrokeWidth(a,c),a.elementClass!==S.OBJECT_CLASS_LINE&&a.elementClass!==S.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(a,!0))}return this},noHighlight:function(a){var u,c,l=a.visProp;if(this.setObjectTransition(a),!m.evaluate(a.visProp.draft)){if(a.type===S.OBJECT_TYPE_POLYGON)for(this.setObjectFillColor(a,l.fillcolor,l.fillopacity),u=0;u<a.borders.length;u++)this.setObjectStrokeColor(a.borders[u],a.borders[u].visProp.strokecolor,a.borders[u].visProp.strokeopacity);else a.elementClass===S.OBJECT_CLASS_TEXT?this.updateTextStyle(a,!1):a.type===S.OBJECT_TYPE_IMAGE?(this.updateImageStyle(a,!1),this.setObjectFillColor(a,l.fillcolor,l.fillopacity)):(this.setObjectStrokeColor(a,l.strokecolor,l.strokeopacity),this.setObjectFillColor(a,l.fillcolor,l.fillopacity));c=m.evaluate(l.strokewidth),this.setObjectStrokeWidth(a,c),a.elementClass!==S.OBJECT_CLASS_LINE&&a.elementClass!==S.OBJECT_CLASS_CURVE||this.updatePathWithArrowHeads(a,!1)}return this},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(a,u){var c,l,f=function(_){_||(_=window.event),_.stopPropagation?_.stopPropagation():_.cancelBubble=!0},v=function(_,h,y){var b;y=y||"",(b=c.createElement("span")).innerHTML=_,b.style.paddingLeft="7px",b.style.paddingRight="7px",void 0!==b.classList&&b.classList.add("JXG_navigation_button"),b.setAttribute("id",y),l.appendChild(b),p.addEvent(b,"click",function(x){return m.bind(h,a)(),!1},a),p.addEvent(b,"mouseup",f,a),p.addEvent(b,"mousedown",f,a),p.addEvent(b,"touchend",f,a),p.addEvent(b,"touchstart",f,a)};p.isBrowser&&"no"!==this.type&&((l=(c=a.containerObj.ownerDocument).createElement("div")).setAttribute("id",a.container+"_navigationbar"),l.style.color=u.strokecolor,l.style.backgroundColor=u.fillcolor,l.style.padding=u.padding,l.style.position=u.position,l.style.fontSize=u.fontsize,l.style.cursor=u.cursor,l.style.zIndex=u.zindex,a.containerObj.appendChild(l),l.style.right=u.right,l.style.bottom=u.bottom,void 0!==l.classList&&l.classList.add("JXG_navigation"),a.attr.showfullscreen&&v(a.attr.fullscreen.symbol,function(){a.toFullscreen(a.attr.fullscreen.id)},a.container+"_navigation_fullscreen"),a.attr.showscreenshot&&v(a.attr.screenshot.symbol,function(){window.setTimeout(function(){a.renderer.screenshot(a,"",!1)},330)},a.container+"_navigation_screenshot"),a.attr.showreload&&v("\u21bb",function(){a.reload()},a.container+"_navigation_reload"),a.attr.showcleartraces&&v("\u2297",function(){a.clearTraces()},a.container+"_navigation_cleartraces"),a.attr.shownavigation&&(a.attr.showzoom&&(v("\u2013",a.zoomOut,a.container+"_navigation_out"),v("o",a.zoom100,a.container+"_navigation_100"),v("+",a.zoomIn,a.container+"_navigation_in")),v("\u2190",a.clickLeftArrow,a.container+"_navigation_left"),v("\u2193",a.clickUpArrow,a.container+"_navigation_up"),v("\u2191",a.clickDownArrow,a.container+"_navigation_down"),v("\u2192",a.clickRightArrow,a.container+"_navigation_right")))},getElementById:function(a){return m.exists(this.container)?this.container.ownerDocument.getElementById(this.container.id+"_"+a):""},removeToInsertLater:function(a){var u=a.parentNode,c=a.nextSibling;if(null!==u)return u.removeChild(a),function(){c?u.insertBefore(a,c):u.appendChild(a)}},resize:function(a,u){},createTouchpoints:function(a){},showTouchpoint:function(a){},hideTouchpoint:function(a){},updateTouchpoint:function(a,u){},dumpToDataURI:function(a){},dumpToCanvas:function(a,u,c,l){},screenshot:function(a){},setLayer:function(a,u){}}),E.AbstractRenderer}),define("reader/file",["jxg","utils/env","utils/type","utils/encoding","utils/base64"],function(E,I,T,S,w){"use strict";return E.FileReader={handleRemoteFile:function(g,m,p,a,u,c){var l=!1;try{l=new XMLHttpRequest,"raw"===p.toLowerCase()?l.overrideMimeType("text/plain; charset="+u):l.overrideMimeType("text/xml; charset="+u)}catch{try{l=new ActiveXObject("Msxml2.XMLHTTP")}catch{try{l=new ActiveXObject("Microsoft.XMLHTTP")}catch{l=!1}}}if(l){l.open("GET",g,a),this.cbp="raw"===p.toLowerCase()?function(){4===l.readyState&&m(l.responseText)}:function(){var f=l,v="";4===f.readyState&&(v=!T.exists(f.responseStream)||"PK"!==f.responseText.slice(0,2)&&31!==S.asciiCharCodeAt(f.responseText.slice(0,1),0)?f.responseText:w.decode(jxgBinFileReader(f)),this.parseString(v,m,p,c))},this.cb=T.bind(this.cbp,this),l.onreadystatechange=this.cb;try{l.send(null)}catch{throw new Error("JSXGraph: A problem occurred while trying to read remote file '"+g+"'.")}}else E.debug("AJAX not activated!")},handleLocalFile:function(g,m,p,a,u,c){T.exists(a)||(a=!0),this.cbp="raw"===p.toLowerCase()?function(f){m(f.target.result)}:function(f){this.parseString(f.target.result,m,p,c)},this.cb=T.bind(this.cbp,this);var l=new FileReader;l.onload=this.cb,"raw"===p.toLowerCase()?l.readAsText(g):l.readAsText(g,u)},parseFileContent:function(g,m,p,a,u,c){T.isString(g)||void 0===FileReader?this.handleRemoteFile(g,m,p,a,u,c):this.handleLocalFile(g,m,p,a,u,c)},parseString:function(g,m,p,a){var u;if(p=p.toLowerCase(),T.exists(u=E.readers[p]))new u(m,g).read();else if("jessiecode"!==p)throw new Error("JSXGraph: There is no reader available for '"+p+"'.");T.isFunction(a)&&a(m)}},!I.isMetroApp()&&I.isBrowser&&"object"==typeof navigator&&/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&document&&document.write&&document.write('<script type="text/vbscript">\nFunction Base64Encode(inData)\n  Const Base64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"\n  Dim cOut, sOut, I\n  For I = 1 To LenB(inData) Step 3\n    Dim nGroup, pOut, sGroup\n    nGroup = &H10000 * AscB(MidB(inData, I, 1)) + _\n      &H100 * MyASC(MidB(inData, I + 1, 1)) + MyASC(MidB(inData, I + 2, 1))\n    nGroup = Oct(nGroup)\n    nGroup = String(8 - Len(nGroup), "0") & nGroup\n    pOut = Mid(Base64, CLng("&o" & Mid(nGroup, 1, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 3, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 5, 2)) + 1, 1) + _\n      Mid(Base64, CLng("&o" & Mid(nGroup, 7, 2)) + 1, 1)\n    sOut = sOut + pOut\n  Next\n  Select Case LenB(inData) Mod 3\n    Case 1: \'8 bit final\n      sOut = Left(sOut, Len(sOut) - 2) + "=="\n    Case 2: \'16 bit final\n      sOut = Left(sOut, Len(sOut) - 1) + "="\n  End Select\n  Base64Encode = sOut\nEnd Function\n\nFunction MyASC(OneChar)\n  If OneChar = "" Then MyASC = 0 Else MyASC = AscB(OneChar)\nEnd Function\n\nFunction jxgBinFileReader(xhr)\n    Dim byteString\n    Dim b64String\n    Dim i\n    byteString = xhr.responseBody\n    ReDim byteArray(LenB(byteString))\n    For i = 1 To LenB(byteString)\n        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n    Next\n    b64String = Base64Encode(byteString)\n    jxgBinFileReader = b64String\nEnd Function\n<\/script>\n'),E.FileReader}),define("parser/geonext",["jxg","base/constants","utils/type"],function(E,I,T){"use strict";return E.GeonextParser={replacePow:function(S){var w,g,m,p,a,u,c,l,f,v,_,h;for(v=(S=S.replace(/(\s*)\^(\s*)/g,"^")).indexOf("^"),p=-1;v>=0&&v<S.length-1;){if(p===v)throw new Error("JSXGraph: Error while parsing expression '"+S+"'");if(p=v,f=S.slice(0,v),_=S.slice(v+1),")"===f.charAt(f.length-1)){for(w=1,g=f.length-2;g>=0&&w>0;)")"===(m=f.charAt(g))?w++:"("===m&&(w-=1),g-=1;if(0!==w)throw new Error("JSXGraph: Missing '(' in expression");for(a="",c=f.substring(0,g+1),l=g;l>=0&&c.substr(l,1).match(/([\w.]+)/);)a=RegExp.$1+a,l-=1;a=(a+=f.substring(g+1,f.length)).replace(/([()+*%^\-/\][])/g,"\\$1")}else a="[\\w\\.]+";if(_.match(/^([\w.]*\()/)){for(w=1,g=RegExp.$1.length;g<_.length&&w>0;)")"===(m=_.charAt(g))?w-=1:"("===m&&(w+=1),g+=1;if(0!==w)throw new Error("JSXGraph: Missing ')' in expression");u=(u=_.substring(0,g)).replace(/([()+*%^\-/[\]])/g,"\\$1")}else u="[\\w\\.]+";h=new RegExp("("+a+")\\^("+u+")"),v=(S=S.replace(h,"pow($1,$2)")).indexOf("^")}return S},replaceIf:function(S){var w,g,m,p,a,u,c,l,f,v="",_=null,h=null,y=null;if((m=S.indexOf("If("))<0)return S;for(S=S.replace(/""/g,"0");m>=0;){for(w=S.slice(0,m),g=S.slice(m+3),a=1,p=0,u=-1,c=-1;p<g.length&&a>0;)")"===(l=g.charAt(p))?a-=1:"("===l?a+=1:","===l&&1===a&&(u<0?u=p:c=p),p+=1;if(f=g.slice(0,p-1),g=g.slice(p),u<0||c<0)return"";_=f.slice(0,u),h=f.slice(u+1,c),y=f.slice(c+1),v+=w+"(("+(_=this.replaceIf(_))+")?("+(h=this.replaceIf(h))+"):("+(y=this.replaceIf(y))+"))",_=null,h=null,m=(S=g).indexOf("If(")}return v+g},replaceNameById:function(S,w,g){var m,p,a,u,c=0,l=["X","Y","L","V"],f=function(v){return g?"$('"+v+"')":v};for(u=0;u<l.length;u++)for(c=S.indexOf(l[u]+"(");c>=0;)c>=0&&(m=S.indexOf(")",c+2))>=0&&(p=(p=S.slice(c+2,m)).replace(/\\(['"])?/g,"$1"),(a=w.elementsByName[p])&&(S=S.slice(0,c+2)+(g?"$('":"")+f(a.id)+S.slice(m))),m=S.indexOf(")",c+2),c=S.indexOf(l[u]+"(",m);for(c=S.indexOf("Dist(");c>=0;)c>=0&&(m=S.indexOf(",",c+5))>=0&&(p=(p=S.slice(c+5,m)).replace(/\\(['"])?/g,"$1"),(a=w.elementsByName[p])&&(S=S.slice(0,c+5)+f(a.id)+S.slice(m))),m=S.indexOf(",",c+5),c=S.indexOf(",",m),(m=S.indexOf(")",c+1))>=0&&(p=(p=S.slice(c+1,m)).replace(/\\(['"])?/g,"$1"),(a=w.elementsByName[p])&&(S=S.slice(0,c+1)+f(a.id)+S.slice(m))),m=S.indexOf(")",c+1),c=S.indexOf("Dist(",m);for(l=["Deg","Rad"],u=0;u<l.length;u++)for(c=S.indexOf(l[u]+"(");c>=0;)c>=0&&(m=S.indexOf(",",c+4))>=0&&(p=(p=S.slice(c+4,m)).replace(/\\(['"])?/g,"$1"),(a=w.elementsByName[p])&&(S=S.slice(0,c+4)+f(a.id)+S.slice(m))),m=S.indexOf(",",c+4),c=S.indexOf(",",m),(m=S.indexOf(",",c+1))>=0&&(p=(p=S.slice(c+1,m)).replace(/\\(['"])?/g,"$1"),(a=w.elementsByName[p])&&(S=S.slice(0,c+1)+f(a.id)+S.slice(m))),m=S.indexOf(",",c+1),c=S.indexOf(",",m),(m=S.indexOf(")",c+1))>=0&&(p=(p=S.slice(c+1,m)).replace(/\\(['"])?/g,"$1"),(a=w.elementsByName[p])&&(S=S.slice(0,c+1)+f(a.id)+S.slice(m))),m=S.indexOf(")",c+1),c=S.indexOf(l[u]+"(",m);return S},replaceIdByObj:function(S){var w=/(X|Y|L)\(([\w_]+)\)/g;return(S=(S=(S=(S=(S=S.replace(w,"$('$2').$1()")).replace(w=/(V)\(([\w_]+)\)/g,"$('$2').Value()")).replace(w=/(Dist)\(([\w_]+),([\w_]+)\)/g,"dist($('$2'), $('$3'))")).replace(w=/(Deg)\(([\w_]+),([ \w[\w_]+),([\w_]+)\)/g,"deg($('$2'),$('$3'),$('$4'))")).replace(w=/Rad\(([\w_]+),([\w_]+),([\w_]+)\)/g,"rad($('$1'),$('$2'),$('$3'))")).replace(w=/N\((.+)\)/g,"($1)")},geonext2JS:function(S,w){var g,m,p,a=["Abs","ACos","ASin","ATan","Ceil","Cos","Exp","Factorial","Floor","Log","Max","Min","Random","Round","Sin","Sqrt","Tan","Trunc"],u=["abs","acos","asin","atan","ceil","cos","exp","factorial","floor","log","max","min","random","round","sin","sqrt","tan","ceil"];for(m=S=(S=(S=S.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),m=this.replaceNameById(m,w),m=this.replaceIf(m),m=this.replacePow(m),m=this.replaceIdByObj(m),p=0;p<a.length;p++)g=new RegExp(["(\\W|^)(",a[p],")"].join(""),"ig"),m=m.replace(g,["$1",u[p]].join(""));return(m=(m=(m=(m=m.replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")).replace(/Pi/g,"PI")).replace(/"/g,"'")},findDependencies:function(S,w,g){var m,p,a,u;for(p in T.exists(g)||(g=S.board),m=g.elementsByName)m.hasOwnProperty(p)&&p!==S.name&&(m[p].elementClass===I.OBJECT_CLASS_TEXT&&T.evaluate(m[p].visProp.islabel)||(u=(u=p.replace(/\[/g,"\\[")).replace(/\]/g,"\\]"),a=new RegExp("\\(([\\w\\[\\]'_ ]+,)*("+u+")(,[\\w\\[\\]'_ ]+)*\\)","g"),w.search(a)>=0&&m[p].addChild(S)))},gxt2jc:function(S,w){var g;return g=S=(S=(S=S.replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&"),(g=(g=(g=this.replaceNameById(g,w,!0)).replace(/True/g,"true")).replace(/False/g,"false")).replace(/fasle/g,"false")}},E.GeonextParser}),define("base/element",["jxg","base/constants","base/coords","math/math","math/statistics","options","utils/event","utils/color","utils/type"],function(E,I,T,S,w,g,m,p,a){"use strict";return E.GeometryElement=function(u,c,l,f){var v,_,h;if(this.needsUpdate=!0,this.isDraggable=!1,this.isReal=!0,this.childElements={},this.hasLabel=!1,this.highlighted=!1,this.notExistingParents={},this.traces={},this.numTraces=0,this.transformations=[],this.baseElement=null,this.descendants={},this.ancestors={},this.parents=[],this.symbolic={},this.rendNode=null,this.elType="",this.dump=!0,this.subs={},this.inherits=[],this._pos=-1,this.stdform=[1,0,0,0,1,1,0,0],this.methodMap={setLabel:"setLabel",label:"label",setName:"setName",getName:"getName",addTransform:"addTransform",setProperty:"setAttribute",setAttribute:"setAttribute",addChild:"addChild",animate:"animate",on:"on",off:"off",trigger:"trigger",addTicks:"addTicks",removeTicks:"removeTicks",removeAllTicks:"removeAllTicks"},this.quadraticform=[[1,0,0],[0,1,0],[0,0,1]],this.visProp={},this.visPropCalc={visible:!1},m.eventify(this),this.mouseover=!1,this.lastDragTime=new Date,arguments.length>0){for(_ in this.board=u,this.type=l,this._org_type=l,this.elementClass=f||I.OBJECT_CLASS_OTHER,this.id=c.id,a.exists(v=c.name)||(v=this.board.generateName(this)),""!==v&&(this.board.elementsByName[v]=this),this.name=v,this.needsRegularUpdate=c.needsregularupdate,a.clearVisPropOld(this),h=this.resolveShortcuts(c))h.hasOwnProperty(_)&&this._set(_,h[_]);this.visProp.draft=h.draft&&h.draft.draft}},E.extend(E.GeometryElement.prototype,{addChild:function(u){var c,l;for(c in this.childElements[u.id]=u,this.addDescendants(u),u.ancestors[this.id]=this,this.descendants)if(this.descendants.hasOwnProperty(c))for(l in this.descendants[c].ancestors[this.id]=this,this.ancestors)this.ancestors.hasOwnProperty(l)&&(this.descendants[c].ancestors[this.ancestors[l].id]=this.ancestors[l]);for(c in this.ancestors)if(this.ancestors.hasOwnProperty(c))for(l in this.descendants)this.descendants.hasOwnProperty(l)&&(this.ancestors[c].descendants[this.descendants[l].id]=this.descendants[l]);return this},addDescendants:function(u){var c;for(c in this.descendants[u.id]=u,u.childElements)u.childElements.hasOwnProperty(c)&&this.addDescendants(u.childElements[c]);return this},addParents:function(u){var c,l,f;for(l=(f=a.isArray(u)?u:arguments).length,c=0;c<l;++c)a.exists(f[c])&&(a.isId(this.board,f[c])?this.parents.push(f[c]):a.exists(f[c].id)&&this.parents.push(f[c].id));this.parents=a.uniqueArray(this.parents)},setParents:function(u){this.parents=[],this.addParents(u)},removeChild:function(u){return delete this.childElements[u.id],this.removeDescendants(u),delete u.ancestors[this.id],this},removeDescendants:function(u){var c;for(c in delete this.descendants[u.id],u.childElements)u.childElements.hasOwnProperty(c)&&this.removeDescendants(u.childElements[c]);return this},countChildren:function(){var u,c,l=0;for(u in c=this.childElements)c.hasOwnProperty(u)&&u.indexOf("Label")<0&&l++;return l},getName:function(){return this.name},addTransform:function(u){return this},draggable:function(){return this.isDraggable&&!a.evaluate(this.visProp.fixed)&&this.type!==I.OBJECT_TYPE_GLIDER},setPosition:function(u,c){var l,f,v,_,h=[];if(!a.exists(this.parents))return this;for(v=this.parents.length,f=0;f<v;++f)if(l=this.board.select(this.parents[f]),a.isPoint(l)){if(!l.draggable())return this;h.push(l)}for(3===c.length&&(c=c.slice(1)),_=this.board.create("transform",c,{type:"translate"}),(v=h.length)>0?_.applyOnce(h):this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(_):this.addTransform(_),f=0;f<v;++f)h[f].type===I.OBJECT_TYPE_GLIDER&&h[f].updateGlider();return this},setPositionDirectly:function(u,c,l){var f=new T(u,c,this.board,!1),v=new T(u,l,this.board,!1),_=w.subtract(f.usrCoords,v.usrCoords);return this.setPosition(I.COORDS_BY_USER,_),this},generatePolynomial:function(){return[]},animate:function(u,c,l){l=l||{};var f,v,_,y=Math.ceil(c/this.board.attr.animationdelay),b=this,x=function(M,O,A){var N,L,B,V,U;for(N=p.rgb2hsv(M),B=((L=p.rgb2hsv(O))[0]-N[0])/y,V=(L[1]-N[1])/y,U=(L[2]-N[2])/y,b.animationData[A]=[],_=0;_<y;_++)b.animationData[A][y-_-1]=p.hsv2rgb(N[0]+(_+1)*B,N[1]+(_+1)*V,N[2]+(_+1)*U)},D=function(M,O,A,N){var L,B;if(M=parseFloat(M),O=parseFloat(O),!isNaN(M)&&!isNaN(O))for(B=(O-M)/y,b.animationData[A]=[],_=0;_<y;_++)L=M+(_+1)*B,b.animationData[A][y-_-1]=N?Math.floor(L):L};for(f in this.animationData={},u)if(u.hasOwnProperty(f))switch(v=f.toLowerCase()){case"strokecolor":case"fillcolor":x(this.visProp[v],u[f],v);break;case"size":if(!a.isPoint(this))break;D(this.visProp[v],u[f],v,!0);break;case"strokeopacity":case"strokewidth":case"fillopacity":D(this.visProp[v],u[f],v,!1)}return this.animationCallback=l.callback,this.board.addAnimation(this),this},update:function(){return a.evaluate(this.visProp.trace)&&this.cloneToBackground(),this},updateRenderer:function(){return this},fullUpdate:function(u){return this.prepareUpdate().update().updateVisibility(u).updateRenderer()},setDisplayRendNode:function(u){var c,l,f,v,_;if(void 0===u&&(u=this.visPropCalc.visible),u===this.visPropOld.visible)return this;for(this.board.renderer.display(this,u),l=this.inherits.length,f=0;f<l;f++)if(a.isArray(_=this.inherits[f]))for(v=_.length,c=0;c<v;c++)a.exists(_[c])&&a.exists(_[c].rendNode)&&"inherit"===a.evaluate(_[c].visProp.visible)&&_[c].setDisplayRendNode(u);else a.exists(_)&&a.exists(_.rendNode)&&"inherit"===a.evaluate(_.visProp.visible)&&_.setDisplayRendNode(u);return this.hasLabel&&a.exists(this.label)&&a.exists(this.label.rendNode)&&"inherit"===a.evaluate(this.label.visProp.visible)&&this.label.setDisplayRendNode(u),this},hide:function(){return this.setAttribute({visible:!1}),this},hideElement:function(){return this.hide(),this},show:function(){return this.setAttribute({visible:!0}),this},showElement:function(){return this.show(),this},updateVisibility:function(u){var c,l,f,v,_,h;if(this.needsUpdate){for(void 0!==u?this.visPropCalc.visible=u:(h=a.evaluate(this.visProp.visible),a.exists(this.hiddenByParent)&&this.hiddenByParent&&(h=!1),"inherit"!==h&&(this.visPropCalc.visible=h)),l=this.inherits.length,f=0;f<l;f++)if(a.isArray(_=this.inherits[f]))for(v=_.length,c=0;c<v;c++)a.exists(_[c])&&"inherit"===a.evaluate(_[c].visProp.visible)&&_[c].prepareUpdate().updateVisibility(this.visPropCalc.visible);else a.exists(_)&&"inherit"===a.evaluate(_.visProp.visible)&&_.prepareUpdate().updateVisibility(this.visPropCalc.visible);a.exists(this.label)&&a.exists(this.label.visProp)&&a.evaluate(this.label.visProp.visible)&&this.label.prepareUpdate().updateVisibility(this.visPropCalc.visible)}return this},_set:function(u,c){var l;if(u=u.toLocaleLowerCase(),this.visProp.hasOwnProperty(u)&&u.indexOf("color")>=0&&a.isString(c)&&9===c.length&&"#"===c.charAt(0))c=p.rgba2rgbo(c),this.visProp[u]=c[0],this.visProp[u.replace("color","opacity")]=c[1];else if(null===c||!a.isObject(c)||a.exists(c.id)||a.exists(c.name))this.visProp[u]=c;else for(l in this.visProp[u]={},c)c.hasOwnProperty(l)&&(this.visProp[u][l.toLocaleLowerCase()]=c[l])},resolveShortcuts:function(u){var c,l,f,v=["traceattributes","traceAttributes"];for(c in g.shortcuts)if(g.shortcuts.hasOwnProperty(c)){if(a.exists(u[c]))for(l=0;l<g.shortcuts[c].length;l++)a.exists(u[g.shortcuts[c][l]])||(u[g.shortcuts[c][l]]=u[c]);for(f=0;f<v.length;f++)a.isObject(u[v[f]])&&(u[v[f]]=this.resolveShortcuts(u[v[f]]))}return u},setLabel:function(u){this.hasLabel||this.setAttribute({withlabel:!0}),this.setLabelText(u)},setLabelText:function(u){return a.exists(this.label)&&(u=u.replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.label.setText(u)),this},setName:function(u){u=u.replace(/</g,"&lt;").replace(/>/g,"&gt;"),"slider"!==this.elType&&this.setLabelText(u),this.setAttribute({name:u})},setProperty:function(){E.deprecated("setProperty()","setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(u){var c,l,f,v,_,h,y,b,x,D={};for(c=0;c<arguments.length;c++)a.isString(h=arguments[c])?(b=h.split(":"),D[a.trim(b[0])]=a.trim(b[1])):a.isArray(h)?D[h[0]]=h[1]:E.extend(D,h);for(c in D=this.resolveShortcuts(D))if(D.hasOwnProperty(c)){if(v=c.replace(/\s+/g,"").toLowerCase(),a.isObject(_=D[c])&&a.exists(this.visProp[v])){if(this.visProp[v]=a.merge(this.visProp[v],_),this.type===I.OBJECT_TYPE_TICKS&&a.exists(this.labels))for(f=this.labels.length,l=0;l<f;l++)this.labels[l].setAttribute(_);else if(a.exists(this[v]))if(a.isArray(this[v]))for(l=0;l<this[v].length;l++)this[v][l].setAttribute(_);else this[v].setAttribute(_);continue}switch(x=this.visProp[v],v){case"name":x=this.name,delete this.board.elementsByName[this.name],this.name=_,this.board.elementsByName[this.name]=this;break;case"needsregularupdate":this.needsRegularUpdate=!("false"===_||!1===_),this.board.renderer.setBuffering(this,this.needsRegularUpdate?"auto":"static");break;case"labelcolor":y=(_=p.rgba2rgbo(_))[1],_=_[0],0===y&&a.exists(this.label)&&this.hasLabel&&this.label.hideElement(),a.exists(this.label)&&this.hasLabel&&(this.label.visProp.strokecolor=_,this.board.renderer.setObjectStrokeColor(this.label,_,y)),this.elementClass===I.OBJECT_CLASS_TEXT&&(this.visProp.strokecolor=_,this.visProp.strokeopacity=y,this.board.renderer.setObjectStrokeColor(this,_,y));break;case"infoboxtext":this.infoboxText=!!a.isString(_)&&_;break;case"visible":this.visProp.visible="false"!==_&&("true"===_||_),this.setDisplayRendNode(a.evaluate(this.visProp.visible)),a.evaluate(this.visProp.visible)&&a.exists(this.updateSize)&&this.updateSize();break;case"face":a.isPoint(this)&&(this.visProp.face=_,this.board.renderer.changePointStyle(this));break;case"trace":"false"===_||!1===_?(this.clearTrace(),this.visProp.trace=!1):this.visProp.trace="pause"!==_;break;case"gradient":this.visProp.gradient=_,this.board.renderer.setGradient(this);break;case"gradientsecondcolor":_=p.rgba2rgbo(_),this.visProp.gradientsecondcolor=_[0],this.visProp.gradientsecondopacity=_[1],this.board.renderer.updateGradient(this);break;case"gradientsecondopacity":this.visProp.gradientsecondopacity=_,this.board.renderer.updateGradient(this);break;case"withlabel":this.visProp.withlabel=_,a.evaluate(_)?(this.label||this.createLabel(),this.label.setAttribute({visible:"inherit"})):this.label&&this.hasLabel&&this.label.setAttribute({visible:!1}),this.hasLabel=_;break;case"radius":this.type!==I.OBJECT_TYPE_ANGLE&&this.type!==I.OBJECT_TYPE_SECTOR||this.setRadius(_);break;case"rotate":(this.elementClass===I.OBJECT_CLASS_TEXT&&"internal"===a.evaluate(this.visProp.display)||this.type===I.OBJECT_TYPE_IMAGE)&&this.addRotation(_);break;case"ticksdistance":this.type===I.OBJECT_TYPE_TICKS&&a.isNumber(_)&&(this.ticksFunction=this.makeTicksFunction(_));break;case"generatelabelvalue":this.type===I.OBJECT_TYPE_TICKS&&a.isFunction(_)&&(this.generateLabelValue=_);break;case"onpolygon":this.type===I.OBJECT_TYPE_GLIDER&&(this.onPolygon=!!_);break;case"disabled":a.exists(this.rendNodeTag)&&(this.rendNodeTag.disabled=!!_);break;case"checked":a.exists(this.rendNodeTag)&&(this.rendNodeCheckbox.checked=!!_);break;case"maxlength":a.exists(this.rendNodeTag)&&(this.rendNodeTag.maxlength=!!_);break;case"layer":this.board.renderer.setLayer(this,a.evaluate(_)),this._set(v,_);break;case"tabindex":a.exists(this.rendNode)&&(this.rendNode.setAttribute("tabindex",_),this._set(v,_));break;default:a.exists(this.visProp[v])&&(!E.Validator[v]||E.Validator[v]&&E.Validator[v](_)||E.Validator[v]&&a.isFunction(_)&&E.Validator[v](_()))&&(_=(!_.toLowerCase||"false"!==_.toLowerCase())&&_,this._set(v,_))}this.triggerEventHandlers(["attribute:"+v],[x,_,this])}return this.triggerEventHandlers(["attribute"],[D,this]),a.evaluate(this.visProp.needsregularupdate)?this.board.update(this):this.board.fullUpdate(),this},getProperty:function(){E.deprecated("getProperty()","getAttribute()"),this.getProperty.apply(this,arguments)},getAttribute:function(u){var c;switch(u=u.toLowerCase()){case"needsregularupdate":c=this.needsRegularUpdate;break;case"labelcolor":c=this.label.visProp.strokecolor;break;case"infoboxtext":c=this.infoboxText;break;case"withlabel":c=this.hasLabel;break;default:c=this.visProp[u]}return c},setDash:function(u){return this.setAttribute({dash:u}),this},prepareUpdate:function(){return this.needsUpdate=!0,this},remove:function(){return this.board.renderer.remove(this.board.renderer.getElementById(this.id)),this.hasLabel&&this.board.renderer.remove(this.board.renderer.getElementById(this.label.id)),this},getTextAnchor:function(){return new T(I.COORDS_BY_USER,[0,0],this.board)},getLabelAnchor:function(){return new T(I.COORDS_BY_USER,[0,0],this.board)},setArrow:function(u,c){return this.visProp.firstarrow=u,this.visProp.lastarrow=c,c&&(this.type=I.OBJECT_TYPE_VECTOR,this.elType="arrow"),this.prepareUpdate().update().updateVisibility().updateRenderer(),this},createGradient:function(){var u=a.evaluate(this.visProp.gradient);"linear"!==u&&"radial"!==u||this.board.renderer.setGradient(this)},createLabel:function(){var u,c=this;return E.elements.text?((u=a.deepCopy(this.visProp.label,null)).id=this.id+"Label",u.isLabel=!0,u.anchor=this,u.priv=this.visProp.priv,this.visProp.withlabel&&(this.label=E.elements.text(this.board,[0,0,function(){return a.isFunction(c.name)?c.name():c.name}],u),this.label.needsUpdate=!0,this.label.dump=!1,this.label.fullUpdate(),this.hasLabel=!0)):E.debug("JSXGraph: Can't create label: text element is not available. Make sure you include base/text"),this},highlight:function(u){return u=a.def(u,!1),!a.evaluate(this.visProp.highlight)||this.highlighted&&!u||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this)),this},noHighlight:function(){return this.highlighted&&(this.highlighted=!1,delete this.board.highlightedObjects[this.id],this.board.renderer.noHighlight(this)),this},clearTrace:function(){var u;for(u in this.traces)this.traces.hasOwnProperty(u)&&this.board.renderer.remove(this.traces[u]);return this.numTraces=0,this},cloneToBackground:function(){return this},bounds:function(){return[0,0,0,0]},normalize:function(){return this.stdform=S.normalize(this.stdform),this},toJSON:function(){var u,c,l=['{"name":',this.name];for(c in l.push(', "id":'+this.id),u=[],this.visProp)this.visProp.hasOwnProperty(c)&&a.exists(this.visProp[c])&&u.push('"'+c+'":'+this.visProp[c]);return l.push(', "visProp":{'+u.toString()+"}"),l.push("}"),l.join("")},addRotation:function(u){var c,l,f,v,_,h=this;return(this.elementClass===I.OBJECT_CLASS_TEXT&&"internal"===a.evaluate(this.visProp.display)||this.type===I.OBJECT_TYPE_IMAGE)&&0!==u&&(c=this.board.create("transform",[function(){return-h.X()},function(){return-h.Y()}],{type:"translate"}),l=this.board.create("transform",[function(){return h.X()},function(){return h.Y()}],{type:"translate"}),f=this.board.create("transform",[function(){return h.board.unitX/h.board.unitY},function(){return 1}],{type:"scale"}),v=this.board.create("transform",[function(){return h.board.unitY/h.board.unitX},function(){return 1}],{type:"scale"}),_=this.board.create("transform",[function(){return a.evaluate(u)*Math.PI/180}],{type:"rotate"}),c.bindTo(this),f.bindTo(this),_.bindTo(this),v.bindTo(this),l.bindTo(this)),this},highlightStrokeColor:function(u){return E.deprecated("highlightStrokeColor()","setAttribute()"),this.setAttribute({highlightStrokeColor:u}),this},strokeColor:function(u){return E.deprecated("strokeColor()","setAttribute()"),this.setAttribute({strokeColor:u}),this},strokeWidth:function(u){return E.deprecated("strokeWidth()","setAttribute()"),this.setAttribute({strokeWidth:u}),this},fillColor:function(u){return E.deprecated("fillColor()","setAttribute()"),this.setAttribute({fillColor:u}),this},highlightFillColor:function(u){return E.deprecated("highlightFillColor()","setAttribute()"),this.setAttribute({highlightFillColor:u}),this},labelColor:function(u){return E.deprecated("labelColor()","setAttribute()"),this.setAttribute({labelColor:u}),this},dash:function(u){return E.deprecated("dash()","setAttribute()"),this.setAttribute({dash:u}),this},visible:function(u){return E.deprecated("visible()","setAttribute()"),this.setAttribute({visible:u}),this},shadow:function(u){return E.deprecated("shadow()","setAttribute()"),this.setAttribute({shadow:u}),this},getType:function(){return this.elType},getParents:function(){return a.isArray(this.parents)?this.parents:[]},snapToGrid:function(){return this},snapToPoints:function(){return this},getAttributes:function(){var u,c=a.deepCopy(this.visProp),l=[],f=l.length;for(c.id=this.id,c.name=this.name,u=0;u<f;u++)delete c[l[u]];return c},hasPoint:function(u,c){return!1},addTicks:function(u){return""!==u.id&&a.exists(u.id)||(u.id=this.id+"_ticks_"+(this.ticks.length+1)),this.board.renderer.drawTicks(u),this.ticks.push(u),u.id},removeAllTicks:function(){var u;if(a.exists(this.ticks)){for(u=this.ticks.length-1;u>=0;u--)this.removeTicks(this.ticks[u]);this.ticks=[],this.board.update()}},removeTicks:function(u){var c,l;if(a.exists(this.defaultTicks)&&this.defaultTicks===u&&(this.defaultTicks=null),a.exists(this.ticks))for(c=this.ticks.length-1;c>=0;c--)if(this.ticks[c]===u){if(this.board.removeObject(this.ticks[c]),this.ticks[c].ticks)for(l=0;l<this.ticks[c].ticks.length;l++)a.exists(this.ticks[c].labels[l])&&this.board.removeObject(this.ticks[c].labels[l]);delete this.ticks[c];break}},getSnapSizes:function(){var u,c,l;return u=a.evaluate(this.visProp.snapsizex),c=a.evaluate(this.visProp.snapsizey),u<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(u=(l=this.board.defaultAxes.x.defaultTicks).ticksDelta*(a.evaluate(l.visProp.minorticks)+1)),c<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(c=(l=this.board.defaultAxes.y.defaultTicks).ticksDelta*(a.evaluate(l.visProp.minorticks)+1)),[u,c]},handleSnapToGrid:function(u,c){var l,f,v,_,h,y,b,x,D,M=a.evaluate(this.visProp.attracttogrid),O=a.evaluate(this.visProp.attractorunit),A=a.evaluate(this.visProp.attractordistance);return!a.exists(this.coords)||a.evaluate(this.visProp.fixed)||(a.evaluate(this.visProp.snaptogrid)||M||!0===u)&&(l=this.coords.usrCoords[1],f=this.coords.usrCoords[2],x=(b=this.getSnapSizes())[0],D=b[1],x>0&&D>0&&(y=this.board.getBoundingBox(),v=Math.round(l/x)*x,_=Math.round(f/D)*D,h=new E.Coords(I.COORDS_BY_USER,[v,_],this.board),(!M||h.distance("screen"===O?I.COORDS_BY_SCREEN:I.COORDS_BY_USER,this.coords)<A)&&(l=v,f=_,c||(l<y[0]?l+=x:l>y[2]&&(l-=x),f<y[3]?f+=D:f>y[1]&&(f-=D)),this.coords.setCoordinates(I.COORDS_BY_USER,[l,f])))),this},getBoundingBox:function(){var u,c,l,f,v,_=[1/0,1/0,-1/0,-1/0];if(this.type===I.OBJECT_TYPE_POLYGON){if((c=this.vertices.length-1)<=0)return _;for(u=0;u<c;u++)l=this.vertices[u].X(),_[0]=l<_[0]?l:_[0],_[2]=l>_[2]?l:_[2],l=this.vertices[u].Y(),_[1]=l<_[1]?l:_[1],_[3]=l>_[3]?l:_[3]}else if(this.elementClass===I.OBJECT_CLASS_CIRCLE)f=this.center.X(),v=this.center.Y(),_=[f-this.radius,v+this.radius,f+this.radius,v-this.radius];else if(this.elementClass===I.OBJECT_CLASS_CURVE){if(0===(c=this.vertices.length))return _;for(u=0;u<c;u++)_[0]=(l=this.points[u].coords.usrCoords[1])<_[0]?l:_[0],_[2]=l>_[2]?l:_[2],_[1]=(l=this.points[u].coords.usrCoords[1])<_[1]?l:_[1],_[3]=l>_[3]?l:_[3]}return _},addEvent:E.shortcut(E.GeometryElement.prototype,"on"),removeEvent:E.shortcut(E.GeometryElement.prototype,"off"),__evt__over:function(u){},__evt__mouseover:function(u){},__evt__out:function(u){},__evt__mouseout:function(u){},__evt__move:function(u){},__evt__mousemove:function(u){},__evt__drag:function(u){},__evt__mousedrag:function(u){},__evt__pendrag:function(u){},__evt__touchdrag:function(u){},__evt__down:function(u){},__evt__mousedown:function(u){},__evt__pendown:function(u){},__evt__touchdown:function(u){},__evt__up:function(u){},__evt__mouseup:function(u){},__evt__penup:function(u){},__evt__touchup:function(u){},__evt__attribute:function(u,c){},__evt__attribute_:function(u,c,l){},__evt:function(){}}),E.GeometryElement}),define("base/coordselement",["jxg","math/math","math/geometry","math/numerics","math/statistics","base/coords","base/constants","utils/type"],function(E,I,T,S,w,g,m,p){"use strict";return E.CoordsElement=function(a,u){var c;for(p.exists(a)||(a=[1,0,0]),c=0;c<a.length;++c)a[c]=parseFloat(a[c]);this.coords=new g(m.COORDS_BY_USER,a,this.board),this.initialCoords=new g(m.COORDS_BY_USER,a,this.board),this.position=null,this.isConstrained=!1,this.onPolygon=!1,this.slideObject=null,this.slideObjects=[],this.needsUpdateFromParent=!0,this.groups=[],this.Xjc=null,this.Yjc=null,this.methodMap=p.deepCopy(this.methodMap,{move:"moveTo",moveTo:"moveTo",moveAlong:"moveAlong",visit:"visit",glide:"makeGlider",makeGlider:"makeGlider",intersect:"makeIntersection",makeIntersection:"makeIntersection",X:"X",Y:"Y",free:"free",setPosition:"setGliderPosition",setGliderPosition:"setGliderPosition",addConstraint:"addConstraint",dist:"Dist",onPolygon:"onPolygon"}),p.exists(this.element)&&this.addAnchor(a,u),this.isDraggable=!0},E.extend(E.CoordsElement.prototype,{updateConstraint:function(){return this},updateCoords:function(a){return this.needsUpdate?(p.exists(a)||(a=!1),p.evaluate(this.visProp.frozen)||this.updateConstraint(),this.type===m.OBJECT_TYPE_GLIDER&&(this.isConstrained&&(a=!1),a?this.updateGliderFromParent():this.updateGlider()),this.updateTransform(a),this):this},updateGlider:function(){var a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U=2*Math.PI,j=!1,z=this.slideObject,$=[];if(this.needsUpdateFromParent=!1,z.elementClass===m.OBJECT_CLASS_CIRCLE)p.evaluate(this.visProp.isgeonext)&&(U=1),O=T.projectPointToCircle(this,z,this.board),A=T.rad([z.center.X()+1,z.center.Y()],z.center,this)/U;else if(z.elementClass===m.OBJECT_CLASS_LINE){if(this.onPolygon){if(l=(c=z.point2.coords.usrCoords)[a=1]-(u=z.point1.coords.usrCoords)[a],Math.abs(l)<I.eps&&(l=c[a=2]-u[a]),_=(T.projectPointToLine(this,z,this.board).usrCoords[a]-u[a])/l,v=z.parentPolygon,_<0){for(a=0;a<v.borders.length;a++)if(z===v.borders[a]){z=v.borders[(a-1+v.borders.length)%v.borders.length];break}}else if(_>1)for(a=0;a<v.borders.length;a++)if(z===v.borders[a]){z=v.borders[(a+1+v.borders.length)%v.borders.length];break}z.id!==this.slideObject.id&&(this.slideObject=z)}(l=(u=z.point1.coords).distance(m.COORDS_BY_USER,c=z.point2.coords))<I.eps?(O=u,j=!0,A=0):(O=T.projectPointToLine(this,z,this.board),u=u.usrCoords.slice(0),c=c.usrCoords.slice(0),Math.abs(c[0])<I.eps?(l=c[a=1],Math.abs(l)<I.eps&&(l=c[a=2]),A=((l=(O.usrCoords[a]-u[a])/l)>=0?1:-1)*(l=Math.abs(l))/(l+1)):Math.abs(u[0])<I.eps?(l=u[a=1],Math.abs(l)<I.eps&&(l=u[a=2]),A=(l=(O.usrCoords[a]-c[a])/l)<0?(1-2*l)/(1-l):1/(l+1)):(l=c[a=1]-u[a],Math.abs(l)<I.eps&&(l=c[a=2]-u[a]),A=(O.usrCoords[a]-u[a])/l)),N=p.evaluate(this.visProp.snapwidth),p.evaluate(N)>0&&Math.abs(this._smax-this._smin)>=I.eps&&(f=(A=Math.max(Math.min(A,1),0))*(this._smax-this._smin)+this._smin,A=((f=Math.round(f/N)*N)-this._smin)/(this._smax-this._smin),this.update(!0)),u=z.point1.coords,!p.evaluate(z.visProp.straightfirst)&&Math.abs(u.usrCoords[0])>I.eps&&A<0&&(O=u,j=!0,A=0),c=z.point2.coords,!p.evaluate(z.visProp.straightlast)&&Math.abs(c.usrCoords[0])>I.eps&&A>1&&(O=c,j=!0,A=1)}else if(z.type===m.OBJECT_TYPE_TURTLE)this.updateConstraint(),O=(L=T.projectPointToTurtle(this,z,this.board))[0],A=L[1];else if(z.elementClass===m.OBJECT_CLASS_CURVE)if(z.type===m.OBJECT_TYPE_ARC||z.type===m.OBJECT_TYPE_SECTOR)O=T.projectPointToCircle(this,z,this.board),b=T.rad(z.radiuspoint,z.center,this),h=0,y=T.rad(z.radiuspoint,z.center,z.anglepoint),A=b,("minor"===(N=p.evaluate(z.visProp.selection))&&y>Math.PI||"major"===N&&y<Math.PI)&&(h=y,y=2*Math.PI),(b<h||b>y)&&(A=y,(b<h&&b>.5*h||b>y&&b>.5*y+Math.PI)&&(A=h),this.needsUpdateFromParent=!0,this.updateGliderFromParent()),U=y-h,this.visProp.isgeonext&&(U=1),Math.abs(U)>I.eps&&(A/=U);else if(this.updateConstraint(),z.transformations.length>0){for(V=!1,(L=z.getTransformationSource())[0]&&(V=L[0],$.push(z),$.push(L[1]));L[0]&&p.exists(L[1]._transformationSource);)L=L[1].getTransformationSource(),$.push(L[1]);if(B=this.coords.usrCoords,V){for(a=0;a<$.length;a++)$[a].updateTransformMatrix(),M=I.inverse($[a].transformMat),B=I.matVecMult(M,B);for(x=new g(m.COORDS_BY_USER,B,this.board).usrCoords,B=(D=T.projectCoordsToCurve(x[1],x[2],this.position||0,$[$.length-1],this.board))[0].usrCoords,a=$.length-2;a>=0;a--)B=I.matVecMult($[a].transformMat,B);D[0]=new g(m.COORDS_BY_USER,B,this.board)}else z.updateTransformMatrix(),M=I.inverse(z.transformMat),B=I.matVecMult(M,B),x=new g(m.COORDS_BY_USER,B,this.board).usrCoords,D=T.projectCoordsToCurve(x[1],x[2],this.position||0,z,this.board);O=D[0],A=D[1]}else O=(L=T.projectPointToCurve(this,z,this.board))[0],A=L[1];else p.isPoint(z)&&(O=T.projectPointToPoint(this,z,this.board),A=this.position);this.coords.setCoordinates(m.COORDS_BY_USER,O.usrCoords,j),this.position=A},updateGliderFromParent:function(){var a,u,c,l,f,v,_,h,y,b,x,D,M=this.slideObject,O=[],A=2*Math.PI;if(this.needsUpdateFromParent){if(M.elementClass===m.OBJECT_CLASS_CIRCLE)c=M.Radius(),p.evaluate(this.visProp.isgeonext)&&(A=1),f=[M.center.X()+c*Math.cos(this.position*A),M.center.Y()+c*Math.sin(this.position*A)];else if(M.elementClass===m.OBJECT_CLASS_LINE)u=M.point2.coords.usrCoords,0===(a=M.point1.coords.usrCoords)[0]&&0===a[1]&&0===a[2]||0===u[0]&&0===u[1]&&0===u[2]?f=[0,0,0]:Math.abs(u[0])<I.eps?(l=Math.min(Math.abs(this.position),1-I.eps),l/=1-l,this.position<0&&(l=-l),f=[a[0]+l*u[0],a[1]+l*u[1],a[2]+l*u[2]]):Math.abs(a[0])<I.eps?(l=Math.max(this.position,I.eps),l=(l=Math.min(l,2-I.eps))>1?(l-1)/(l-2):(1-l)/l,f=[u[0]+l*a[0],u[1]+l*a[1],u[2]+l*a[2]]):f=[a[0]+(l=this.position)*(u[0]-a[0]),a[1]+l*(u[1]-a[1]),a[2]+l*(u[2]-a[2])];else if(M.type===m.OBJECT_TYPE_TURTLE)this.coords.setCoordinates(m.COORDS_BY_USER,[M.Z(this.position),M.X(this.position),M.Y(this.position)]),this.updateConstraint(),f=T.projectPointToTurtle(this,M,this.board)[0].usrCoords;else if(M.elementClass===m.OBJECT_CLASS_CURVE){for(h=!1,(v=M.getTransformationSource())[0]&&(h=v[0],O.push(M),O.push(v[1]));v[0]&&p.exists(v[1]._transformationSource);)v=v[1].getTransformationSource(),O.push(v[1]);if(this.coords.setCoordinates(m.COORDS_BY_USER,h?[O[O.length-1].Z(this.position),O[O.length-1].X(this.position),O[O.length-1].Y(this.position)]:[M.Z(this.position),M.X(this.position),M.Y(this.position)]),M.type===m.OBJECT_TYPE_ARC||M.type===m.OBJECT_TYPE_SECTOR)y=T.rad([M.center.X()+1,M.center.Y()],M.center,M.radiuspoint),b=0,D=T.rad(M.radiuspoint,M.center,M.anglepoint),("minor"===M.visProp.selection&&D>Math.PI||"major"===M.visProp.selection&&D<Math.PI)&&(b=D,D=2*Math.PI),A=D-b,p.evaluate(this.visProp.isgeonext)&&(A=1),((x=this.position*A)<b||x>D)&&(((x=D)<b&&x>.5*b||x>D&&x>.5*D+Math.PI)&&(x=b),this.position=x,Math.abs(A)>I.eps&&(this.position/=A)),c=M.Radius(),f=[M.center.X()+c*Math.cos(this.position*A+y),M.center.Y()+c*Math.sin(this.position*A+y)];else if(this.updateConstraint(),h)for(f=T.projectPointToCurve(this,O[O.length-1],this.board)[0].usrCoords,_=O.length-2;_>=0;_--)f=new g(m.COORDS_BY_USER,I.matVecMult(O[_].transformMat,f),this.board).usrCoords;else f=T.projectPointToCurve(this,M,this.board)[0].usrCoords}else p.isPoint(M)&&(f=T.projectPointToPoint(this,M,this.board).usrCoords);this.coords.setCoordinates(m.COORDS_BY_USER,f,!1)}else this.needsUpdateFromParent=!0},updateRendererGeneric:function(a){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.coords.usrCoords[1]+this.coords.usrCoords[2]),this.isReal=Math.abs(this.coords.usrCoords[0])>I.eps&&this.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer[a](this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},X:function(){return this.coords.usrCoords[1]},Y:function(){return this.coords.usrCoords[2]},Z:function(){return this.coords.usrCoords[0]},XEval:function(){return this.coords.usrCoords[1]},YEval:function(){return this.coords.usrCoords[2]},ZEval:function(){return this.coords.usrCoords[0]},Dist:function(a){return this.isReal&&a.isReal?this.coords.distance(m.COORDS_BY_USER,a.coords):NaN},snapToGrid:function(a){return this.handleSnapToGrid(a)},handleSnapToPoints:function(a){var u,c,l,f,v,_,h,y,b=0,x=1/0,D=null,M=p.evaluate(this.visProp.ignoredsnaptopoints),O=!1;if(f=this.board.objectsList.length,M&&(h=M.length),p.evaluate(this.visProp.snaptopoints)||a){for(v=p.evaluate(this.visProp.attractorunit),_=p.evaluate(this.visProp.attractordistance),u=0;u<f;u++){if(c=this.board.objectsList[u],M){for(O=!1,y=0;y<h;y++)if(c===this.board.select(M[y])){O=!0;break}if(O)continue}p.isPoint(c)&&c!==this&&c.visPropCalc.visible&&(b=(l=T.projectPointToPoint(this,c,this.board)).distance("screen"===v?m.COORDS_BY_SCREEN:m.COORDS_BY_USER,this.coords))<_&&b<x&&(x=b,D=l)}null!==D&&this.coords.setCoordinates(m.COORDS_BY_USER,D.usrCoords)}return this},snapToPoints:function(a){return this.handleSnapToPoints(a)},handleAttractors:function(){var a,u,c,l,f=0,v=p.evaluate(this.visProp.attractorunit),_=p.evaluate(this.visProp.attractordistance),h=p.evaluate(this.visProp.snatchdistance),y=p.evaluate(this.visProp.attractors),b=y.length;if(0!==_){for(a=0;a<b;a++)if(u=this.board.select(y[a]),p.exists(u)&&u!==this){if(p.isPoint(u)?c=T.projectPointToPoint(this,u,this.board):u.elementClass===m.OBJECT_CLASS_LINE?(l=T.projectCoordsToSegment(this.coords.usrCoords,u.point1.coords.usrCoords,u.point2.coords.usrCoords),c=!p.evaluate(u.visProp.straightfirst)&&l[1]<0?u.point1.coords:!p.evaluate(u.visProp.straightlast)&&l[1]>1?u.point2.coords:new g(m.COORDS_BY_USER,l[0],this.board)):u.elementClass===m.OBJECT_CLASS_CIRCLE?c=T.projectPointToCircle(this,u,this.board):u.elementClass===m.OBJECT_CLASS_CURVE?c=T.projectPointToCurve(this,u,this.board)[0]:u.type===m.OBJECT_TYPE_TURTLE?c=T.projectPointToTurtle(this,u,this.board)[0]:u.type===m.OBJECT_TYPE_POLYGON&&(c=new g(m.COORDS_BY_USER,T.projectCoordsToPolygon(this.coords.usrCoords,u),this.board)),(f=c.distance("screen"===v?m.COORDS_BY_SCREEN:m.COORDS_BY_USER,this.coords))<_){this.type===m.OBJECT_TYPE_GLIDER&&(u===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===u)||this.makeGlider(u);break}f>=h&&(u===this.slideObject||this.slideObject&&this.onPolygon&&this.slideObject.parentPolygon===u)&&this.popSlideObject()}return this}},setPositionDirectly:function(a,u){var c,l,f,v,_=this.coords;if(this.relativeCoords)return l=new g(a,u,this.board),p.evaluate(this.visProp.islabel)?(f=w.subtract(l.scrCoords,_.scrCoords),this.relativeCoords.scrCoords[1]+=f[1],this.relativeCoords.scrCoords[2]+=f[2]):(f=w.subtract(l.usrCoords,_.usrCoords),this.relativeCoords.usrCoords[1]+=f[1],this.relativeCoords.usrCoords[2]+=f[2]),this;for(this.coords.setCoordinates(a,u),this.handleSnapToGrid(),this.handleSnapToPoints(),this.handleAttractors(),c=this.transformations.length-1;c>=0;c--)a===m.COORDS_BY_SCREEN?v=new g(a,u,this.board).usrCoords:(2===u.length&&(u=[1].concat(u)),v=u),this.initialCoords.setCoordinates(m.COORDS_BY_USER,I.matVecMult(I.inverse(this.transformations[c].matrix),v));return this.prepareUpdate().update(),this.board.isSuspendedUpdate&&this.type===m.OBJECT_TYPE_GLIDER&&this.updateGlider(),this},setPositionByTransform:function(a,u){var c;return u=new g(a,u,this.board),c=this.board.create("transform",u.usrCoords.slice(1),{type:"translate"}),this.transformations.length>0&&this.transformations[this.transformations.length-1].isNumericMatrix?this.transformations[this.transformations.length-1].melt(c):this.addTransform(this,c),this.prepareUpdate().update(),this},setPosition:function(a,u){return this.setPositionDirectly(a,u)},setGliderPosition:function(a){return this.type===m.OBJECT_TYPE_GLIDER&&(this.position=a,this.board.update()),this},makeGlider:function(a){var u,c,l,f=this.board.select(a),v=!1;if(f.type===m.OBJECT_TYPE_POLYGON){for(u=Number.MAX_VALUE,c=0;c<f.borders.length;c++)(l=E.Math.Geometry.distPointLine(this.coords.usrCoords,f.borders[c].stdform))<u&&(u=l,a=f.borders[c]);f=this.board.select(a),v=!0}if(!p.exists(f))throw new Error("JSXGraph: slide object undefined.");if(f.type===m.OBJECT_TYPE_TICKS)throw new Error("JSXGraph: gliders on ticks are not possible.");return this.slideObject=this.board.select(a),this.slideObjects.push(this.slideObject),this.addParents(a),this.type=m.OBJECT_TYPE_GLIDER,this.elType="glider",this.visProp.snapwidth=-1,this.slideObject.addChild(this),this.isDraggable=!0,this.onPolygon=v,this.generatePolynomial=function(){return this.slideObject.generatePolynomial(this)},this.updateGlider(),this.needsUpdateFromParent=!0,this.updateGliderFromParent(),this},popSlideObject:function(){this.slideObjects.length>0&&(this.slideObjects.pop(),this.slideObject.removeChild(this),0===this.slideObjects.length?(this.type=this._org_type,this.type===m.OBJECT_TYPE_POINT?this.elType="point":this.elementClass===m.OBJECT_CLASS_TEXT?this.elType="text":this.type===m.OBJECT_TYPE_IMAGE?this.elType="image":this.type===m.OBJECT_TYPE_FOREIGNOBJECT&&(this.elType="foreignobject"),this.slideObject=null):this.slideObject=this.slideObjects[this.slideObjects.length-1])},free:function(){var a,u;if(this.type!==m.OBJECT_TYPE_GLIDER){if(this.transformations.length=0,delete this.updateConstraint,this.isConstrained=!1,this.isDraggable)return;this.isDraggable=!0,this.elementClass===m.OBJECT_CLASS_POINT&&(this.type=m.OBJECT_TYPE_POINT,this.elType="point"),this.XEval=function(){return this.coords.usrCoords[1]},this.YEval=function(){return this.coords.usrCoords[2]},this.ZEval=function(){return this.coords.usrCoords[0]},this.Xjc=null,this.Yjc=null}for(a in this.board.objects)this.board.objects.hasOwnProperty(a)&&(u=this.board.objects[a]).descendants&&(delete u.descendants[this.id],delete u.childElements[this.id],this.hasLabel&&(delete u.descendants[this.label.id],delete u.childElements[this.label.id]));this.ancestors={},this.slideObject=null,this.slideObjects=[],this.elementClass===m.OBJECT_CLASS_POINT?(this.type=m.OBJECT_TYPE_POINT,this.elType="point"):this.elementClass===m.OBJECT_CLASS_TEXT?(this.type=this._org_type,this.elType="text"):this.elementClass===m.OBJECT_CLASS_OTHER&&(this.type=this._org_type,this.elType="image")},addConstraint:function(a){var u,c,l=[],f=["X","Y"],v=function(h){return function(){return h}},_=function(h){return function(){return h.Value()}};for(this.elementClass===m.OBJECT_CLASS_POINT&&(this.type=m.OBJECT_TYPE_CAS),this.isDraggable=!1,u=0;u<a.length;u++)p.isString(c=a[u])?(l[u]=this.board.jc.snippet(c,!0,null,!0),2===a.length&&(this[f[u]+"jc"]=a[u])):p.isFunction(c)?l[u]=c:p.isNumber(c)?l[u]=v(c):p.isObject(c)&&p.isFunction(c.Value)&&(l[u]=_(c)),l[u].origin=c;return 1===a.length?this.updateConstraint=function(){var h=l[0]();return p.isArray(h)?this.coords.setCoordinates(m.COORDS_BY_USER,h):this.coords=h,this}:2===a.length?(this.XEval=l[0],this.YEval=l[1],this.setParents([l[0].origin,l[1].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(m.COORDS_BY_USER,[this.XEval(),this.YEval()]),this}):(this.ZEval=l[0],this.XEval=l[1],this.YEval=l[2],this.setParents([l[0].origin,l[1].origin,l[2].origin]),this.updateConstraint=function(){return this.coords.setCoordinates(m.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()]),this}),this.isConstrained=!0,this.prepareUpdate().update(),this.board.isSuspendedUpdate||(this.updateVisibility().updateRenderer(),this.hasLabel&&this.label.fullUpdate()),this},addAnchor:function(a,u){this.relativeCoords=u?new g(m.COORDS_BY_SCREEN,a.slice(0,2),this.board):new g(m.COORDS_BY_USER,a,this.board),this.element.addChild(this),u&&this.addParents(this.element),this.XEval=function(){var c,l,f;return p.evaluate(this.visProp.islabel)?(f=p.evaluate(this.visProp.offset),c=parseFloat(f[0]),l=this.element.getLabelAnchor(),new g(m.COORDS_BY_SCREEN,[c+this.relativeCoords.scrCoords[1]+l.scrCoords[1],0],this.board).usrCoords[1]):(l=this.element.getTextAnchor(),this.relativeCoords.usrCoords[1]+l.usrCoords[1])},this.YEval=function(){var c,l,f;return p.evaluate(this.visProp.islabel)?(f=p.evaluate(this.visProp.offset),c=-parseFloat(f[1]),l=this.element.getLabelAnchor(),new g(m.COORDS_BY_SCREEN,[0,c+this.relativeCoords.scrCoords[2]+l.scrCoords[2]],this.board).usrCoords[2]):(l=this.element.getTextAnchor(),this.relativeCoords.usrCoords[2]+l.usrCoords[2])},this.ZEval=p.createFunction(1,this.board,""),this.updateConstraint=function(){this.coords.setCoordinates(m.COORDS_BY_USER,[this.ZEval(),this.XEval(),this.YEval()])},this.isConstrained=!0,this.updateConstraint()},updateTransform:function(a){var u;if(0===this.transformations.length)return this;for(u=0;u<this.transformations.length;u++)this.transformations[u].update();return this},addTransform:function(a,u){var c,l=p.isArray(u)?u:[u],f=l.length;for(0===this.transformations.length&&(this.baseElement=a),c=0;c<f;c++)this.transformations.push(l[c]);return this},startAnimation:function(a,u,c){var l=this;return c=c||250,this.type!==m.OBJECT_TYPE_GLIDER||p.exists(this.intervalCode)||(this.intervalCode=window.setInterval(function(){l._anim(a,u)},c),p.exists(this.intervalCount)||(this.intervalCount=0)),this},stopAnimation:function(){return p.exists(this.intervalCode)&&(window.clearInterval(this.intervalCode),delete this.intervalCode),this},moveAlong:function(a,u,c){c=c||{};var l,f,v,_,h,y=[],b=[],x=u/this.board.attr.animationdelay,D=function(M,O){return function(){return a[M][O]}};if(p.isArray(a)){for(v=a.length,l=0;l<v;l++)b[l]=p.isPoint(a[l])?a[l]:{elementClass:m.OBJECT_CLASS_POINT,X:D(l,0),Y:D(l,1)};if(0===(u=u||0))return this.setPosition(m.COORDS_BY_USER,[b[b.length-1].X(),b[b.length-1].Y()]),this.board.update(this);if(!p.exists(c.interpolate)||c.interpolate)for(f=S.Neville(b),l=0;l<x;l++)y[l]=[],y[l][0]=f[0]((x-l)/x*f[3]()),y[l][1]=f[1]((x-l)/x*f[3]());else{for(v=a.length-1,l=0;l<x;++l)h=l/x*v-(_=Math.floor(l/x*v)),y[l]=[],y[l][0]=(1-h)*b[_].X()+h*b[_+1].X(),y[l][1]=(1-h)*b[_].Y()+h*b[_+1].Y();y.push([b[v].X(),b[v].Y()]),y.reverse()}this.animationPath=y}else p.isFunction(a)&&(this.animationPath=a,this.animationStart=(new Date).getTime());return this.animationCallback=c.callback,this.board.addAnimation(this),this},moveTo:function(a,u,c){c=c||{},a=new g(m.COORDS_BY_USER,a,this.board);var l,v=Math.ceil(u/this.board.attr.animationdelay),_=[],h=this.coords.usrCoords[1],y=this.coords.usrCoords[2],b=a.usrCoords[1]-h,x=a.usrCoords[2]-y,D=function(M){return c.effect&&"<>"===c.effect?Math.pow(Math.sin(M/v*Math.PI/2),2):M/v};if(!p.exists(u)||0===u||Math.abs(a.usrCoords[0]-this.coords.usrCoords[0])>I.eps)return this.setPosition(m.COORDS_BY_USER,a.usrCoords),this.board.update(this);if(!p.exists(c.callback)&&Math.abs(b)<I.eps&&Math.abs(x)<I.eps)return this;for(l=v;l>=0;l--)_[v-l]=[a.usrCoords[0],h+b*D(l),y+x*D(l)];return this.animationPath=_,this.animationCallback=c.callback,this.board.addAnimation(this),this},visit:function(a,u,c){a=new g(m.COORDS_BY_USER,a,this.board);var l,f,v,_=this.board.attr.animationdelay,h=[],y=this.coords.usrCoords[1],b=this.coords.usrCoords[2],x=a.usrCoords[1]-y,D=a.usrCoords[2]-b,M=function(O){var A=O<v/2?2*O/v:2*(v-O)/v;return c.effect&&"<>"===c.effect?Math.pow(Math.sin(A*Math.PI/2),2):A};for(p.isNumber(c)?c={repeat:c}:p.exists((c=c||{}).repeat)||(c.repeat=1),v=Math.ceil(u/(_*c.repeat)),f=0;f<c.repeat;f++)for(l=v;l>=0;l--)h[f*(v+1)+v-l]=[a.usrCoords[0],y+x*M(l),b+D*M(l)];return this.animationPath=h,this.animationCallback=c.callback,this.board.addAnimation(this),this},_anim:function(a,u){var c,l,f,v,_,h,y,b,x;return this.intervalCount+=1,this.intervalCount>u&&(this.intervalCount=0),this.slideObject.elementClass===m.OBJECT_CLASS_LINE?(y=this.slideObject.point1.coords.scrCoords,b=this.slideObject.point2.coords.scrCoords,c=Math.round((b[1]-y[1])*this.intervalCount/u),l=Math.round((b[2]-y[2])*this.intervalCount/u),a>0?v=this.slideObject.point1:(v=this.slideObject.point2,c*=-1,l*=-1),this.coords.setCoordinates(m.COORDS_BY_SCREEN,[v.coords.scrCoords[1]+c,v.coords.scrCoords[2]+l])):this.slideObject.elementClass===m.OBJECT_CLASS_CURVE?(_=a>0?Math.round(this.intervalCount/u*this.board.canvasWidth):Math.round((u-this.intervalCount)/u*this.board.canvasWidth),this.coords.setCoordinates(m.COORDS_BY_SCREEN,[_,0]),x=T.projectPointToCurve(this,this.slideObject,this.board),this.coords=x[0],this.position=x[1]):this.slideObject.elementClass===m.OBJECT_CLASS_CIRCLE&&(f=2*Math.PI,f*=a<0?this.intervalCount/u:(u-this.intervalCount)/u,h=this.slideObject.Radius(),this.coords.setCoordinates(m.COORDS_BY_USER,[this.slideObject.center.coords.usrCoords[1]+h*Math.cos(f),this.slideObject.center.coords.usrCoords[2]+h*Math.sin(f)])),this.board.update(this),this},getTextAnchor:function(){return this.coords},getLabelAnchor:function(){return this.coords},getParents:function(){var a=[this.Z(),this.X(),this.Y()];return 0!==this.parents.length&&(a=this.parents),this.type===m.OBJECT_TYPE_GLIDER&&(a=[this.X(),this.Y(),this.slideObject.id]),a}}),E.CoordsElement.create=function(a,u,c,l,f,v){var _,h,y=!1;for(h=0;h<c.length;h++)(p.isFunction(c[h])||p.isString(c[h]))&&(y=!0);if(y)(_=new a(u,[0,0],l,f,v)).addConstraint(c);else if(p.isNumber(c[0])&&p.isNumber(c[1]))_=new a(u,c,l,f,v),p.exists(l.slideobject)?_.makeGlider(l.slideobject):_.baseElement=_,_.isDraggable=!0;else{if(!p.isObject(c[0])||!p.isTransformationOrArray(c[1]))return!1;(_=new a(u,[0,0],l,f,v)).addTransform(c[0],c[1]),_.isDraggable=!1}return _.handleSnapToGrid(),_.handleSnapToPoints(),_.handleAttractors(),_.addParents(c),_},E.CoordsElement}),define("base/text",["jxg","base/constants","base/element","parser/geonext","utils/env","utils/type","math/math","base/coordselement"],function(E,I,T,S,w,g,m,p){"use strict";var a=function(){this._val=parseFloat(this.rendNodeRange.value),this.rendNodeOut.value=this.rendNodeRange.value,this.board.update()};return E.Text=function(u,c,l,f){this.constructor(u,l,I.OBJECT_TYPE_TEXT,I.OBJECT_CLASS_TEXT),this.element=this.board.select(l.anchor),this.coordsConstructor(c,g.evaluate(this.visProp.islabel)),this.content="",this.plaintext="",this.plaintextOld=null,this.orgText="",this.needsSizeUpdate=!1,this.hiddenByParent=!1,this.size=[1,1],this.id=this.board.setId(this,"T"),this.board.renderer.drawText(this),this.board.finalizeAdding(this),this.setText(f),g.isString(this.content)&&this.notifyParents(this.content),this.elType="text",this.methodMap=g.deepCopy(this.methodMap,{setText:"setTextJessieCode",move:"setCoords"})},E.Text.prototype=new T,g.copyPrototypeMethods(E.Text,p,"coordsConstructor"),E.extend(E.Text.prototype,{hasPoint:function(u,c){var l,f,v,_,h,y,x;return x=g.isObject(g.evaluate(this.visProp.precision))?g.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,this.transformations.length>0&&(u=(l=m.matVecMult(m.inverse(this.board.renderer.joinTransforms(this,this.transformations)),[1,u,c]))[1],c=l[2]),f=(l="right"===(h=this.getAnchorX())?this.coords.scrCoords[1]-this.size[0]:"middle"===h?this.coords.scrCoords[1]-.5*this.size[0]:this.coords.scrCoords[1])+this.size[0],v=(_="top"===(y=this.getAnchorY())?this.coords.scrCoords[2]+this.size[1]:"middle"===y?this.coords.scrCoords[2]+.5*this.size[1]:this.coords.scrCoords[2])-this.size[1],"all"===g.evaluate(this.visProp.dragarea)?u>=l-x&&u<f+x&&c>=v-x&&c<=_+x:c>=v-x&&c<=_+x&&(u>=l-x&&u<=l+2*x||u>=f-2*x&&u<=f+x)},_createFctUpdateText:function(u){var c,l,f=g.evaluate(this.visProp.parse),v=g.evaluate(this.visProp.usemathjax),_=g.evaluate(this.visProp.usekatex),h=!1;this.orgText=u,g.isFunction(u)?this.updateText=function(){l=u().toString(),this.plaintext=!f||v||_?l:this.replaceSub(this.replaceSup(this.convertGeonextAndSketchometry2CSS(l)))}:(g.isNumber(u)?this.content=g.toFixed(u,g.evaluate(this.visProp.digits)):g.isString(u)&&f&&(g.evaluate(this.visProp.useasciimathml)?this.content="'`"+u+"`'":v||_?(this.content=this.valueTagToJessieCode(u),this.content=this.content.replace(/\\/g,"\\\\")):this.content=this.poorMansTeX(this.valueTagToJessieCode(u)),h=!0),h?(c=this.board.jc.snippet(this.content,!0,"",!1),this.updateText=function(){this.plaintext=this.unescapeTicks(c())}):this.updateText=function(){this.plaintext=u})},_setText:function(u){return this._createFctUpdateText(u),this.updateText(),this.fullUpdate(),this.board.infobox&&this.id===this.board.infobox.id||this.updateSize(),this},setTextJessieCode:function(u){var c;return this.visProp.castext=u,c=g.isFunction(u)?function(){return g.sanitizeHTML(u())}:g.isNumber(u)?u:g.sanitizeHTML(u),this._setText(c)},setText:function(u){return this._setText(u)},updateSize:function(){var u,c,l,f=g.evaluate(this.visProp.display);return w.isBrowser&&"no"!==this.board.renderer.type?(l=this.rendNode,"html"===f||"vml"===this.board.renderer.type?g.exists(l.offsetWidth)?(c=this,window.setTimeout(function(){c.size=[l.offsetWidth,l.offsetHeight],c.needsUpdate=!0,c.updateRenderer()},0)):this.size=this.crudeSizeEstimate():"internal"===f&&("svg"===this.board.renderer.type?(c=this,window.setTimeout(function(){try{u=l.getBBox(),c.size=[u.width,u.height],c.needsUpdate=!0,c.updateRenderer()}catch{}},0)):"canvas"===this.board.renderer.type&&(this.size=this.crudeSizeEstimate())),this):this},crudeSizeEstimate:function(){var u=parseFloat(g.evaluate(this.visProp.fontsize));return[u*this.plaintext.length*.45,.9*u]},utf8_decode:function(u){return u.replace(/&#x(\w+);/g,function(c,l){return String.fromCharCode(parseInt(l,16))})},replaceSub:function(u){if(!u.indexOf)return u;for(var c,l=u.indexOf("_{");l>=0;)(c=(u=u.substr(0,l)+u.substr(l).replace(/_\{/,"<sub>")).substr(l).indexOf("}"))>=0&&(u=u.substr(0,c)+u.substr(c).replace(/\}/,"</sub>")),l=u.indexOf("_{");for(l=u.indexOf("_");l>=0;)l=(u=u.substr(0,l)+u.substr(l).replace(/_(.?)/,"<sub>$1</sub>")).indexOf("_");return u},replaceSup:function(u){if(!u.indexOf)return u;for(var c,l=u.indexOf("^{");l>=0;)(c=(u=u.substr(0,l)+u.substr(l).replace(/\^\{/,"<sup>")).substr(l).indexOf("}"))>=0&&(u=u.substr(0,c)+u.substr(c).replace(/\}/,"</sup>")),l=u.indexOf("^{");for(l=u.indexOf("^");l>=0;)l=(u=u.substr(0,l)+u.substr(l).replace(/\^(.?)/,"<sup>$1</sup>")).indexOf("^");return u},getSize:function(){return this.size},setCoords:function(u,c){var l,f;return g.isArray(u)&&u.length>1&&(c=u[1],u=u[0]),g.evaluate(this.visProp.islabel)&&g.exists(this.element)?(f=(u-(l=this.element.getLabelAnchor()).usrCoords[1])*this.board.unitX,this.relativeCoords.setCoordinates(I.COORDS_BY_SCREEN,[f,-(c-l.usrCoords[2])*this.board.unitY])):this.coords.setCoordinates(I.COORDS_BY_USER,[u,c]),this.fullUpdate(),this},update:function(u){return this.needsUpdate?(this.updateCoords(u),this.updateText(),"internal"===g.evaluate(this.visProp.display)&&g.isString(this.plaintext)&&(this.plaintext=this.utf8_decode(this.plaintext)),this.checkForSizeUpdate(),this.needsSizeUpdate&&this.updateSize(),this):this},checkForSizeUpdate:function(){this.board.infobox&&this.id===this.board.infobox.id?this.needsSizeUpdate=!1:(this.needsSizeUpdate=this.plaintextOld!==this.plaintext,this.needsSizeUpdate&&(this.plaintextOld=this.plaintext))},updateRenderer:function(){return g.evaluate(this.visProp.autoposition)&&this.setAutoPosition().updateConstraint(),this.updateRendererGeneric("updateText")},expandShortMath:function(u){return u.replace(/([)0-9.])\s*([(a-zA-Z_])/g,"$1*$2")},generateTerm:function(u,c,l){var f,v,_,h,y='""';if(_=(u=(u=(u=(u=(u=(u=(u=(u=(u=(u=(u=u||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/"/g,"'")).replace(/'/g,"\\'")).replace(/&amp;arc;/g,"&ang;")).replace(/<arc\s*\/>/g,"&ang;")).replace(/&lt;arc\s*\/&gt;/g,"&ang;")).replace(/&lt;sqrt\s*\/&gt;/g,"&radic;")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),h=u.indexOf("</value>"),_>=0)for(;_>=0;)y+=' + "'+this.replaceSub(this.replaceSup(u.slice(0,_)))+'"',v=(v=u.slice(_+7,h)).replace(/\s+/g,""),!0===c&&(v=this.expandShortMath(v)),(f=(f=(f=l?v:S.geonext2JS(v,this.board)).replace(/\\"/g,"'")).replace(/\\'/g,"'")).indexOf("toFixed")<0&&g.isNumber(g.bind(this.board.jc.snippet(f,!0,"",!1),this)())?y+="+("+f+").toFixed("+g.evaluate(this.visProp.digits)+")":y+="+("+f+")",_=(u=u.slice(h+8)).indexOf("<value>"),h=u.indexOf("</value>");return y+=' + "'+this.replaceSub(this.replaceSup(u))+'"',(y=(y=this.convertGeonextAndSketchometry2CSS(y)).replace(/&amp;/g,"&")).replace(/"/g,"'")},valueTagToJessieCode:function(u){var c,l,f,v,_=[],h='"';if(f=(u=(u=(u=(u=(u=u||"").replace(/\r/g,"")).replace(/\n/g,"")).replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>")).indexOf("<value>"),v=u.indexOf("</value>"),f>=0)for(;f>=0;)_.push(h+this.escapeTicks(u.slice(0,f))+h),l=(l=u.slice(f+7,v)).replace(/\s+/g,""),(c=(c=l=this.expandShortMath(l)).replace(/\\"/g,"'").replace(/\\'/g,"'")).indexOf("toFixed")<0&&g.isNumber(g.bind(this.board.jc.snippet(c,!0,"",!1),this)())?_.push("("+c+").toFixed("+g.evaluate(this.visProp.digits)+")"):_.push("("+c+")"),f=(u=u.slice(v+8)).indexOf("<value>"),v=u.indexOf("</value>");return _.push(h+this.escapeTicks(u)+h),_.join(" + ").replace(/&amp;/g,"&")},poorMansTeX:function(u){return u=u.replace(/<arc\s*\/*>/g,"&ang;").replace(/&lt;arc\s*\/*&gt;/g,"&ang;").replace(/<sqrt\s*\/*>/g,"&radic;").replace(/&lt;sqrt\s*\/*&gt;/g,"&radic;"),this.convertGeonextAndSketchometry2CSS(this.replaceSub(this.replaceSup(u)))},escapeTicks:function(u){return u.replace(/"/g,"%22").replace(/'/g,"%27")},unescapeTicks:function(u){return u.replace(/%22/g,'"').replace(/%27/g,"'")},convertGeonext2CSS:function(u){return g.isString(u)&&(u=(u=(u=(u=u.replace(/(<|&lt;)overline(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/overline(>|&gt;)/g,"</span>")).replace(/(<|&lt;)arrow(>|&gt;)/g,"<span style=text-decoration:overline;>")).replace(/(<|&lt;)\/arrow(>|&gt;)/g,"</span>")),u},convertSketchometry2CSS:function(u){return g.isString(u)&&(u=(u=(u=(u=u.replace(/(<|&lt;)sketchofont(>|&gt;)/g,"<span style=font-family:sketchometry-light;font-weight:500;>")).replace(/(<|&lt;)\/sketchofont(>|&gt;)/g,"</span>")).replace(/(<|&lt;)sketchometry-light(>|&gt;)/g,"<span style=font-family:sketchometry-light;font-weight:500;>")).replace(/(<|&lt;)\/sketchometry-light(>|&gt;)/g,"</span>")),u},convertGeonextAndSketchometry2CSS:function(u){return u=this.convertGeonext2CSS(u),this.convertSketchometry2CSS(u)},notifyParents:function(u){var c,l=null;u=(u=u.replace(/&lt;value&gt;/g,"<value>")).replace(/&lt;\/value&gt;/g,"</value>");do{null!==(l=(c=/<value>([\w\s*/^\-+()[\],<>=!]+)<\/value>/).exec(u))&&(S.findDependencies(this,l[1],this.board),u=(u=u.substr(l.index)).replace(c,""))}while(null!==l);return this},getParents:function(){var u;return u=void 0!==this.relativeCoords?[this.relativeCoords.usrCoords[1],this.relativeCoords.usrCoords[2],this.orgText]:[this.Z(),this.X(),this.Y(),this.orgText],0!==this.parents.length&&(u=this.parents),u},bounds:function(){var u=this.coords.usrCoords;return g.evaluate(this.visProp.islabel)||0===this.board.unitY||0===this.board.unitX?[0,0,0,0]:[u[1],u[2]+this.size[1]/this.board.unitY,u[1]+this.size[0]/this.board.unitX,u[2]]},getAnchorX:function(){var u=g.evaluate(this.visProp.anchorx);if("auto"===u)switch(this.visProp.position){case"top":case"bot":return"middle";case"rt":case"lrt":case"urt":return"left";default:return"right"}return u},getAnchorY:function(){var u=g.evaluate(this.visProp.anchory);if("auto"===u)switch(this.visProp.position){case"top":case"ulft":case"urt":return"bottom";case"bot":case"lrt":case"llft":return"top";default:return"middle"}return u},getNumberofConflicts:function(u,c,l,f){var v,_,h,y,b=0;for(y=this.board.options.precision.hasPoint,this.board.options.precision.hasPoint=.25*(l+f),v=0,h=this.board.objectsList.length;v<h;v++)(_=this.board.objectsList[v]).visPropCalc.visible&&"axis"!==_.elType&&"ticks"!==_.elType&&_!==this.board.infobox&&_!==this&&_.hasPoint(u,c)&&b++;return this.board.options.precision.hasPoint=y,b},setAutoPosition:function(){var u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B=this.size[0],V=this.size[1],U={conflicts:1/0,angle:0,r:0},j=2*Math.PI/12;if(this===this.board.infobox||!this.visPropCalc.visible||!g.evaluate(this.visProp.islabel)||!this.element)return this;if(x=g.evaluate(this.visProp.offset),l=(v=this.element.getLabelAnchor()).scrCoords[1],0===(b=this.getNumberofConflicts(l+(O=x[0]),(f=v.scrCoords[2])-(A=x[1]),B,V)))return this;for(y=.2*(D=12),_=Math.atan2(A,O),U.conflicts=b,U.angle=_,U.r=D;U.conflicts>0&&D<28;){for(M=1,h=_+j;M<12&&U.conflicts>0&&(u=l+D*(N=Math.cos(h)),c=f-D*(L=Math.sin(h)),(b=this.getNumberofConflicts(u,c,B,V))<U.conflicts&&(U.conflicts=b,U.angle=h,U.r=D),0!==U.conflicts);M++)h+=j;D+=y}return D=U.r,N=Math.cos(U.angle),L=Math.sin(U.angle),this.visProp.offset=[D*N,D*L],this.visProp.anchorx=N<-.2?"right":N>.2?"left":"middle",this}}),E.createText=function(u,c,l){var f,v=g.copyAttributes(l,u.options,"text"),_=c.slice(0,-1),h=c[c.length-1];if(v.anchor=v.parent||v.anchor,!(f=p.create(E.Text,u,_,v,h)))throw new Error("JSXGraph: Can't create text with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==v.rotate&&"internal"===v.display&&f.addRotation(v.rotate),f},E.registerElement("text",E.createText),E.createHTMLSlider=function(u,c,l){var f,_=g.copyAttributes(l,u.options,"htmlslider");if(2!==c.length||2!==c[0].length||3!==c[1].length)throw new Error("JSXGraph: Can't create htmlslider with parent types '"+typeof c[0]+"' and '"+typeof c[1]+"'.\nPossible parents are: [[x,y], [min, start, max]]");_.anchor=_.parent||_.anchor,_.fixed=_.fixed||!0,(f=E.createText(u,[c[0][0],c[0][1],'<form style="display:inline"><input type="range" /><span></span><input type="text" /></form>'],_)).type=g.OBJECT_TYPE_HTMLSLIDER,f.rendNodeForm=f.rendNode.childNodes[0],f.rendNodeRange=f.rendNodeForm.childNodes[0],f.rendNodeRange.min=c[1][0],f.rendNodeRange.max=c[1][2],f.rendNodeRange.step=_.step,f.rendNodeRange.value=c[1][1],f.rendNodeLabel=f.rendNodeForm.childNodes[1],f.rendNodeLabel.id=f.rendNode.id+"_label",_.withlabel&&(f.rendNodeLabel.innerHTML=f.name+"="),f.rendNodeOut=f.rendNodeForm.childNodes[2],f.rendNodeOut.value=c[1][1];try{f.rendNodeForm.id=f.rendNode.id+"_form",f.rendNodeRange.id=f.rendNode.id+"_range",f.rendNodeOut.id=f.rendNode.id+"_out"}catch(h){E.debug(h)}return f.rendNodeRange.style.width=_.widthrange+"px",f.rendNodeRange.style.verticalAlign="middle",f.rendNodeOut.style.width=_.widthout+"px",f._val=c[1][1],E.supportsVML()?w.addEvent(f.rendNodeForm,"change",a,f):w.addEvent(f.rendNodeForm,"input",a,f),f.Value=function(){return this._val},f},E.registerElement("htmlslider",E.createHTMLSlider),{Text:E.Text,createText:E.createText,createHTMLSlider:E.createHTMLSlider}}),define("utils/uuid",["jxg"],function(E){"use strict";var I="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return E.Util=E.Util||{},E.Util.genUUID=function(T){var S,w,g=[],m=0;for(""!==(T=T||"")&&"-"!==T.substr(T.length-1)&&(T+="-"),w=0;w<36;w++)8===w||13===w||18===w||23===w?g[w]="-":14===w?g[w]="4":(m<=2&&(m=33554432+16777216*Math.random()|0),S=15&m,m>>=4,g[w]=I[19===w?3&S|8:S]);return T+g.join("")},E.Util}),define("parser/jessiecode",["jxg","base/constants","base/text","math/math","math/ia","math/geometry","math/statistics","utils/type","utils/uuid","utils/env"],function(JXG,Const,Text,Mat,Interval,Geometry,Statistics,Type,UUID,Env){Object.create||(Object.create=function(E,I){if("object"!=typeof E&&"function"!=typeof E)throw new TypeError("Object prototype may only be an Object: "+E);if(null===E)throw new Error("This browser's implementation of Object.create is a shim and doesn't support 'null' as the first argument.");if(void 0!==I)throw new Error("This browser's implementation of Object.create is a shim and doesn't support a second argument.");function T(){}return T.prototype=E,new T});var priv={modules:{math:Mat,"math/geometry":Geometry,"math/statistics":Statistics,"math/numerics":Mat.Numerics}},r,_ccache;JXG.JessieCode=function(E,I){this.scope={id:0,hasChild:!0,args:[],locals:{},context:null,previous:null},this.scopes=[],this.scopes.push(this.scope),this.dpstack=[[]],this.pscope=0,this.propstack=[{}],this.propscope=0,this.lhs=[],this.isLHS=!1,this.warnLog="jcwarn",this.$log=[],this.builtIn=this.defineBuiltIn(),this.operands=this.getPossibleOperands(),this.board=null,this.lineToElement={},this.parCurLine=1,this.parCurColumn=0,this.line=1,this.col=1,JXG.CA&&(this.CA=new JXG.CA(this.node,this.createNode,this)),this.code="","string"==typeof E&&this.parse(E,I)},JXG.extend(JXG.JessieCode.prototype,{node:function(E,I,T){return{type:E,value:I,children:T}},createNode:function(E,I,T){var S,w=this.node(E,I,[]);for(S=2;S<arguments.length;S++)w.children.push(arguments[S]);return"node_const"==w.type&&Type.isNumber(w.value)&&(w.isMath=!0),w.line=this.parCurLine,w.col=this.parCurColumn,w},pushScope:function(E){var I={args:E,locals:{},context:null,previous:this.scope};return this.scope.hasChild=!0,this.scope=I,I.id=this.scopes.push(I)-1,I},popScope:function(){var E=this.scope.previous;return this.scope=null!==E?E:this.scope,this.scope},getElementById:function(E){return this.board.objects[E]},log:function(){this.$log.push(arguments),"object"==typeof console&&console.log&&console.log.apply(console,arguments)},creator:(_ccache={},(r=function(E){var I,T;return"function"==typeof _ccache[this.board.id+E]?I=_ccache[this.board.id+E]:(T=this,(I=function(S,w){var g;return void 0===(g=Type.exists(w)?w:{}).name&&void 0===g.id&&(g.name=0!==T.lhs[T.scope.id]?T.lhs[T.scope.id]:""),T.board.create(E,S,g)}).creator=!0,_ccache[this.board.id+E]=I),I}).clearCache=function(){_ccache={}},r),letvar:function(E,I){this.builtIn[E]&&this._warn('"'+E+'" is a predefined value.'),this.scope.locals[E]=I},isLocalVariable:function(E){for(var I=this.scope;null!==I;){if(Type.exists(I.locals[E]))return I;I=I.previous}return null},isParameter:function(E){for(var I=this.scope;null!==I;){if(Type.indexOf(I.args,E)>-1)return I;I=I.previous}return null},isCreator:function(E){return!!JXG.elements[E]},isMathMethod:function(E){return"E"!==E&&!!Math[E]},isBuiltIn:function(E){return!!this.builtIn[E]},getvar:function(E,I,T){var S;if(I=Type.def(I,!1),null!==(S=this.isLocalVariable(E)))return S.locals[E];if("$board"===E||"EULER"===E||"PI"===E)return this.builtIn[E];if(T){if(this.isBuiltIn(E))return this.builtIn[E];if(this.isMathMethod(E))return Math[E];if(this.isCreator(E))return this.creator(E)}return I||(S=this.board.select(E))===E?void 0:S},resolve:function(E){for(var I=this.scope;null!==I;){if(Type.exists(I.locals[E]))return I.locals[E];I=I.previous}},getvarJS:function(E,I,T){var S,w="";return I=Type.def(I,!1),T=Type.def(T,!1),null!==this.isParameter(E)?E:null===this.isLocalVariable(E)||T?this.isCreator(E)?"(function () { var a = Array.prototype.slice.call(arguments, 0), props = "+(T?"a.pop()":"{}")+"; return $jc$.board.create.apply($jc$.board, ['"+E+"'].concat([a, props])); })":(T&&this._error("Syntax error (attribute values are allowed with element creators only)"),this.isBuiltIn(E)?Type.isNumber(w=this.builtIn[E].src||this.builtIn[E])||w.match(/board\.select/)?w:(E=w.split(".").pop(),Type.exists(this.board.mathLib)&&null!==(S=new RegExp("^Math."+E)).exec(w)?w.replace(S,"$jc$.board.mathLib."+E):Type.exists(this.board.mathLibJXG)&&null!==(S=new RegExp("^JXG.Math.")).exec(w)?w.replace(S,"$jc$.board.mathLibJXG."):w):this.isMathMethod(E)?"$jc$.board.mathLib."+E:I?"":(Type.isId(this.board,E)?(w="$jc$.board.objects['"+E+"']","slider"===this.board.objects[E].elType&&(w+=".Value()")):Type.isName(this.board,E)?(w="$jc$.board.elementsByName['"+E+"']","slider"===this.board.elementsByName[E].elType&&(w+=".Value()")):Type.isGroup(this.board,E)&&(w="$jc$.board.groups['"+E+"']"),w)):"$jc$.resolve('"+E+"')"},makeMap:function(E){return E.isMap=!0,E},functionCodeJS:function(E){var I=E.children[0].join(", "),T="",S="";return"op_map"===E.value&&(T="{ return  ",S=" }"),"function ("+I+") {\nvar $oldscope$ = $jc$.scope;\n$jc$.scope = $jc$.scopes["+this.scope.id+"];\nvar r = (function () "+T+this.compile(E.children[1],!0)+S+")();\n$jc$.scope = $oldscope$;\nreturn r;\n}"},defineFunction:function(node){var fun,i,that=this,list=node.children[0],scope=this.pushScope(list),_that,E,I,T;if(this.board.options.jc.compile){for(this.isLHS=!1,i=0;i<list.length;i++)scope.locals[list[i]]=list[i];this.replaceNames(node.children[1]),fun=function($jc$){var fun,str="var f = "+$jc$.functionCodeJS(node)+"; f;";try{for(fun=eval(str),scope.argtypes=[],i=0;i<list.length;i++)scope.argtypes.push(that.resolveType(list[i],node));return fun}catch(E){return $jc$._warn("error compiling function\n\n"+str+"\n\n"+E.toString()),function(){}}}(this),this.popScope()}else E=list,I=this,T=scope.id,fun=function(){var S,w;for(w=I.scope,I.scope=I.scopes[T],S=0;S<E.length;S++)I.scope.locals[E[S]]=arguments[S];return S=I.execute(node.children[1]),I.scope=w,S};return fun.node=node,fun.scope=scope,fun.toJS=fun.toString,fun.toString=(_that=this,function(){return _that.compile(_that.replaceIDs(Type.deepCopy(node)))}),fun.deps={},this.collectDependencies(node.children[1],fun.deps),fun},mergeAttributes:function(E){var I,T={};for(I=0;I<arguments.length;I++)T=Type.deepCopy(T,arguments[I],!0);return T},setProp:function(E,I,T){var S,w,g={};E.elementClass!==Const.OBJECT_CLASS_POINT||"X"!==I&&"Y"!==I?E.elementClass!==Const.OBJECT_CLASS_TEXT||"X"!==I&&"Y"!==I?E.type&&E.elementClass&&E.visProp?Type.exists(E[E.methodMap[I]])&&"function"!=typeof E[E.methodMap[I]]?E[E.methodMap[I]]=T:(g[I]=T,E.setAttribute(g)):E[I]=T:("number"==typeof T?E[I]=function(){return T}:"function"==typeof T?(E.isDraggable=!1,E[I]=T):"string"==typeof T&&(E.isDraggable=!1,E[I]=Type.createFunction(T,this.board,null,!0),E[I+"jc"]=T),E[I].origin=T,this.board.update()):(I=I.toLowerCase(),E.isDraggable&&"number"==typeof T?(S="x"===I?T:E.X(),w="y"===I?T:E.Y(),E.setPosition(Const.COORDS_BY_USER,[S,w])):!E.isDraggable||"function"!=typeof T&&"string"!=typeof T?E.isDraggable||E.addConstraint([S="x"===I?T:E.XEval.origin,w="y"===I?T:E.YEval.origin]):E.addConstraint([S="x"===I?T:E.coords.usrCoords[1],w="y"===I?T:E.coords.usrCoords[2]]),this.board.update())},_genericParse:function(E,I,T,S){var w,g,m,p,a=E.replace(/\r\n/g,"\n").split("\n"),u=[];S||(this.code+=E+"\n"),Text&&(g=Text.Text.prototype.setText,Text.Text.prototype.setText=Text.Text.prototype.setTextJessieCode);try{for(Type.exists(T)||(T=!1),w=0;w<a.length;w++)T&&(a[w]=JXG.GeonextParser.geonext2JS(a[w],this.board)),u.push(a[w]);switch(E=u.join("\n"),m=parser.parse(E),this.CA&&(m=this.CA.expandDerivatives(m,null,m),m=this.CA.removeTrivialNodes(m)),I){case"parse":p=this.execute(m);break;case"manipulate":p=this.compile(m);break;case"getAst":p=m;break;default:p=!1}}catch(c){throw c}finally{Text&&(Text.Text.prototype.setText=g)}return p},parse:function(E,I,T){return this._genericParse(E,"parse",I,T)},manipulate:function(E,I,T){return this._genericParse(E,"manipulate",I,T)},getAST:function(E,I,T){return this._genericParse(E,"getAst",I,T)},snippet:function(E,I,T,S){return I=Type.def(I,!0),T=Type.def(T,""),S=Type.def(S,!1),this.parse((I?" function ("+T+") { return ":"")+E+(I?"; }":"")+";",S,!0)},replaceIDs:function(E){var I,T;if(E.replaced&&Type.exists(T=this.board.objects[E.children[1][0].value])&&""!==T.name&&(E.type="node_var",E.value=T.name,E.children.length=0,delete E.replaced),Type.isArray(E))for(I=0;I<E.length;I++)E[I]=this.replaceIDs(E[I]);if(E.children)for(I=E.children.length;I>0;I--)Type.exists(E.children[I-1])&&(E.children[I-1]=this.replaceIDs(E.children[I-1]));return E},replaceNames:function(E){var I,T;if(T=E.value,"node_op"===E.type&&"op_lhs"===T&&1===E.children.length?this.isLHS=!0:"node_var"===E.type&&(this.isLHS?this.letvar(T,!0):!Type.exists(this.getvar(T,!0))&&Type.exists(this.board.elementsByName[T])&&(E=this.createReplacementNode(E))),Type.isArray(E))for(I=0;I<E.length;I++)E[I]=this.replaceNames(E[I]);if(E.children)for(I=E.children.length;I>0;I--)Type.exists(E.children[I-1])&&(E.children[I-1]=this.replaceNames(E.children[I-1]));return"node_op"===E.type&&"op_lhs"===E.value&&1===E.children.length&&(this.isLHS=!1),E},createReplacementNode:function(E){var T=this.board.elementsByName[E.value];return(E=this.createNode("node_op","op_execfun",this.createNode("node_var","$"),[this.createNode("node_str",T.id)])).replaced=!0,E},collectDependencies:function(E,I){var T,w,g;if(Type.isArray(E))for(g=E.length,T=0;T<g;T++)this.collectDependencies(E[T],I);else if("node_var"===E.type&&(w=this.getvar(E.value))&&w.visProp&&w.type&&w.elementClass&&w.id&&(I[w.id]=w),"node_op"===E.type&&"op_execfun"===E.value&&E.children.length>1&&"$"===E.children[0].value&&E.children[1].length>0&&(I[w=E.children[1][0].value]=this.board.objects[w]),E.children)for(T=E.children.length;T>0;T--)Type.exists(E.children[T-1])&&this.collectDependencies(E.children[T-1],I)},resolveProperty:function(E,I,T){return T=Type.def(T,!1),E&&E.methodMap&&(Type.exists(E.subs)&&Type.exists(E.subs[I])?E=E.subs:Type.exists(E.methodMap[I])?I=E.methodMap[I]:(E=E.visProp,I=I.toLowerCase())),Type.isFunction(E)&&this._error("Accessing function properties is not allowed."),Type.exists(E)||this._error(E+" is not an object"),Type.exists(E[I])||this._error("unknown property "+I),T&&"function"==typeof E[I]?function(){return E[I].apply(E,arguments)}:E[I]},resolveType:function(E,I){var T,S;if(Type.isArray(I))for(T=0;T<I.length;T++)if("any"!==(S=this.resolveType(E,I[T])))return S;if("node_op"===I.type&&"op_execfun"===I.value&&"node_var"===I.children[0].type&&I.children[0].value===E)return"function";if("node_op"===I.type){for(T=0;T<I.children.length;T++)if("node_var"===I.children[0].type&&I.children[0].value===E&&("op_add"===I.value||"op_sub"===I.value||"op_mul"===I.value||"op_div"===I.value||"op_mod"===I.value||"op_exp"===I.value||"op_neg"===I.value))return"any";for(T=0;T<I.children.length;T++)if("any"!==(S=this.resolveType(E,I.children[T])))return S}return"any"},getLHS:function(E){var I;if("node_var"===E.type)I={o:this.scope.locals,what:E.value};else if("node_op"===E.type&&"op_property"===E.value)I={o:this.execute(E.children[0]),what:E.children[1]};else{if("node_op"!==E.type||"op_extvalue"!==E.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");I={o:this.execute(E.children[0]),what:this.execute(E.children[1])}}return I},getLHSCompiler:function(E,I){var T;if("node_var"===E.type)T=E.value;else if("node_op"===E.type&&"op_property"===E.value)T=[this.compile(E.children[0],I),"'"+E.children[1]+"'"];else{if("node_op"!==E.type||"op_extvalue"!==E.value)throw new Error("Syntax error: Invalid left-hand side of assignment.");T=[this.compile(E.children[0],I),"node_const"===E.children[1].type?E.children[1].value:this.compile(E.children[1],I)]}return T},execute:function(E){var I,T,S,w,g,m,p,a,u,c,l=[];if(I=0,!E)return I;switch(this.line=E.line,this.col=E.col,E.type){case"node_op":switch(E.value){case"op_none":E.children[0]&&this.execute(E.children[0]),E.children[1]&&(I=this.execute(E.children[1]));break;case"op_assign":T=this.getLHS(E.children[0]),this.lhs[this.scope.id]=T.what,T.o.type&&T.o.elementClass&&T.o.methodMap&&"label"===T.what&&this._error("Left-hand side of assignment is read-only."),I=this.execute(E.children[1]),T.o!==this.scope.locals||Type.isArray(T.o)&&"number"==typeof T.what?this.setProp(T.o,T.what,I):this.letvar(T.what,I),this.lhs[this.scope.id]=0;break;case"op_if":this.execute(E.children[0])&&(I=this.execute(E.children[1]));break;case"op_conditional":case"op_if_else":I=this.execute(E.children[0])?this.execute(E.children[1]):this.execute(E.children[2]);break;case"op_while":for(;this.execute(E.children[0]);)this.execute(E.children[1]);break;case"op_do":do{this.execute(E.children[0])}while(this.execute(E.children[1]));break;case"op_for":for(this.execute(E.children[0]);this.execute(E.children[1]);this.execute(E.children[2]))this.execute(E.children[3]);break;case"op_proplst":E.children[0]&&this.execute(E.children[0]),E.children[1]&&this.execute(E.children[1]);break;case"op_emptyobject":I={};break;case"op_proplst_val":this.propstack.push({}),this.propscope++,this.execute(E.children[0]),I=this.propstack[this.propscope],this.propstack.pop(),this.propscope--;break;case"op_prop":this.propstack[this.propscope][E.children[0]]=this.execute(E.children[1]);break;case"op_array":for(I=[],g=E.children[0].length,S=0;S<g;S++)I.push(this.execute(E.children[0][S]));break;case"op_extvalue":I=this.execute(E.children[0]),I="number"==typeof(S=this.execute(E.children[1]))&&Math.abs(Math.round(S)-S)<Mat.eps?I[S]:void 0;break;case"op_return":if(0!==this.scope)return this.execute(E.children[0]);this._error("Unexpected return.");break;case"op_map":E.children[1].isMath||"node_var"===E.children[1].type||this._error("execute: In a map only function calls and mathematical expressions are allowed."),(a=this.defineFunction(E)).isMap=!0,I=a;break;case"op_function":(a=this.defineFunction(E)).isMap=!1,I=a;break;case"op_execfun":if(this.dpstack.push([]),this.pscope++,m=E.children[1],Type.exists(E.children[2]))if(E.children[3])for(p=E.children[2],u={},S=0;S<p.length;S++)u=Type.deepCopy(u,this.execute(p[S]),!0);else u=this.execute(E.children[2]);for(E.children[0]._isFunctionName=!0,a=this.execute(E.children[0]),delete E.children[0]._isFunctionName,c=a&&a.sc?a.sc:this,!a.creator&&Type.exists(E.children[2])&&this._error("Unexpected value. Only element creators are allowed to have a value after the function call."),S=0;S<m.length;S++)Type.exists(a.scope)&&Type.exists(a.scope.argtypes)&&"function"===a.scope.argtypes[S]?(m[S]._isFunctionName=!0,l[S]=this.execute(m[S]),delete m[S]._isFunctionName):l[S]=this.execute(m[S]),this.dpstack[this.pscope].push({line:E.children[1][S].line,col:E.children[1][S].ecol});if("function"!=typeof a||a.creator)if("function"==typeof a&&a.creator){w=this.line;try{for((I=a(l,u)).jcLineStart=w,I.jcLineEnd=E.eline,S=w;S<=E.line;S++)this.lineToElement[S]=I;I.debugParents=this.dpstack[this.pscope]}catch(f){this._error(f.toString())}}else this._error("Function '"+a+"' is undefined.");else I=a.apply(c,l);this.dpstack.pop(),this.pscope--;break;case"op_property":w=this.execute(E.children[0]),I=this.resolveProperty(w,T=E.children[1],!1),Type.exists(I)&&(I.sc=w);break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),this.use(E.children[0].toString());break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),T=this.getvar(E.children[0]),I=this.del(T);break;case"op_eq":I=this.execute(E.children[0])==this.execute(E.children[1]);break;case"op_neq":I=this.execute(E.children[0])!=this.execute(E.children[1]);break;case"op_approx":I=Math.abs(this.execute(E.children[0])-this.execute(E.children[1]))<Mat.eps;break;case"op_gt":I=this.execute(E.children[0])>this.execute(E.children[1]);break;case"op_lt":I=this.execute(E.children[0])<this.execute(E.children[1]);break;case"op_geq":I=this.execute(E.children[0])>=this.execute(E.children[1]);break;case"op_leq":I=this.execute(E.children[0])<=this.execute(E.children[1]);break;case"op_or":I=this.execute(E.children[0])||this.execute(E.children[1]);break;case"op_and":I=this.execute(E.children[0])&&this.execute(E.children[1]);break;case"op_not":I=!this.execute(E.children[0]);break;case"op_add":I=this.add(this.execute(E.children[0]),this.execute(E.children[1]));break;case"op_sub":I=this.sub(this.execute(E.children[0]),this.execute(E.children[1]));break;case"op_div":I=this.div(this.execute(E.children[0]),this.execute(E.children[1]));break;case"op_mod":I=this.mod(this.execute(E.children[0]),this.execute(E.children[1]),!0);break;case"op_mul":I=this.mul(this.execute(E.children[0]),this.execute(E.children[1]));break;case"op_exp":I=this.pow(this.execute(E.children[0]),this.execute(E.children[1]));break;case"op_neg":I=this.neg(this.execute(E.children[0]))}break;case"node_var":I=this.getvar(E.value,!1,E._isFunctionName);break;case"node_const":I=null===E.value?null:Number(E.value);break;case"node_const_bool":I=E.value;break;case"node_str":I=E.value.replace(/\\(.)/g,"$1")}return I},compile:function(E,I){var T,S,w,g="";if(Type.exists(I)||(I=!1),!E)return g;switch(E.type){case"node_op":switch(E.value){case"op_none":E.children[0]&&(g=this.compile(E.children[0],I)),E.children[1]&&(g+=this.compile(E.children[1],I));break;case"op_assign":I?(T=this.getLHSCompiler(E.children[0],I),Type.isArray(T)?g="$jc$.setProp("+T[0]+", "+T[1]+", "+this.compile(E.children[1],I)+");\n":(this.isLocalVariable(T)!==this.scope&&(this.scope.locals[T]=!0),g="$jc$.scopes["+this.scope.id+"].locals['"+T+"'] = "+this.compile(E.children[1],I)+";\n")):g=(T=this.compile(E.children[0]))+" = "+this.compile(E.children[1],I)+";\n";break;case"op_if":g=" if ("+this.compile(E.children[0],I)+") "+this.compile(E.children[1],I);break;case"op_if_else":g=" if ("+this.compile(E.children[0],I)+")"+this.compile(E.children[1],I),g+=" else "+this.compile(E.children[2],I);break;case"op_conditional":g="(("+this.compile(E.children[0],I)+")?("+this.compile(E.children[1],I),g+="):("+this.compile(E.children[2],I)+"))";break;case"op_while":g=" while ("+this.compile(E.children[0],I)+") {\n"+this.compile(E.children[1],I)+"}\n";break;case"op_do":g=" do {\n"+this.compile(E.children[0],I)+"} while ("+this.compile(E.children[1],I)+");\n";break;case"op_for":g=" for ("+this.compile(E.children[0],I)+this.compile(E.children[1],I)+"; "+this.compile(E.children[2],I).slice(0,-2)+") {\n"+this.compile(E.children[3],I)+"\n}\n";break;case"op_proplst":E.children[0]&&(g=this.compile(E.children[0],I)+", "),g+=this.compile(E.children[1],I);break;case"op_prop":g=E.children[0]+": "+this.compile(E.children[1],I);break;case"op_emptyobject":g=I?"{}":"<< >>";break;case"op_proplst_val":g=this.compile(E.children[0],I);break;case"op_array":for(w=[],S=0;S<E.children[0].length;S++)w.push(this.compile(E.children[0][S],I));g="["+w.join(", ")+"]";break;case"op_extvalue":g=this.compile(E.children[0],I)+"["+this.compile(E.children[1],I)+"]";break;case"op_return":g=" return "+this.compile(E.children[0],I)+";\n";break;case"op_map":E.children[1].isMath||"node_var"===E.children[1].type||this._error("compile: In a map only function calls and mathematical expressions are allowed."),w=E.children[0],g=I?" $jc$.makeMap(function ("+w.join(", ")+") { return "+this.compile(E.children[1],I)+"; })":"map ("+w.join(", ")+") -> "+this.compile(E.children[1],I);break;case"op_function":this.pushScope(w=E.children[0]),g=I?this.functionCodeJS(E):" function ("+w.join(", ")+") "+this.compile(E.children[1],I),this.popScope();break;case"op_execfunmath":console.log("op_execfunmath: TODO"),g="-1";break;case"op_execfun":if(E.children[2]){for(w=[],S=0;S<E.children[2].length;S++)w.push(this.compile(E.children[2][S],I));T=I?"$jc$.mergeAttributes("+w.join(", ")+")":w.join(", ")}for(E.children[0].withProps=!!E.children[2],w=[],S=0;S<E.children[1].length;S++)w.push(this.compile(E.children[1][S],I));g=this.compile(E.children[0],I)+"("+w.join(", ")+(E.children[2]&&I?", "+T:"")+")"+(E.children[2]&&!I?" "+T:""),I&&(g+="\n"),I&&"$"===E.children[0].value&&(g="$jc$.board.objects["+this.compile(E.children[1][0],I)+"]");break;case"op_property":g=I&&"X"!==E.children[1]&&"Y"!==E.children[1]?"$jc$.resolveProperty("+this.compile(E.children[0],I)+", '"+E.children[1]+"', true)":this.compile(E.children[0],I)+"."+E.children[1];break;case"op_use":this._warn("Use of the 'use' operator is deprecated."),g=I?"$jc$.use('":"use('",g+=E.children[0].toString()+"');";break;case"op_delete":this._warn("Use of the 'delete' operator is deprecated. Please use the remove() function."),g=I?"$jc$.del(":"remove(",g+=this.compile(E.children[0],I)+")";break;case"op_eq":g="("+this.compile(E.children[0],I)+" === "+this.compile(E.children[1],I)+")";break;case"op_neq":g="("+this.compile(E.children[0],I)+" !== "+this.compile(E.children[1],I)+")";break;case"op_approx":g="("+this.compile(E.children[0],I)+" ~= "+this.compile(E.children[1],I)+")";break;case"op_gt":g=I?"$jc$.gt("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" > "+this.compile(E.children[1],I)+")";break;case"op_lt":g=I?"$jc$.lt("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" < "+this.compile(E.children[1],I)+")";break;case"op_geq":g=I?"$jc$.geq("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" >= "+this.compile(E.children[1],I)+")";break;case"op_leq":g=I?"$jc$.leq("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" <= "+this.compile(E.children[1],I)+")";break;case"op_or":g="("+this.compile(E.children[0],I)+" || "+this.compile(E.children[1],I)+")";break;case"op_and":g="("+this.compile(E.children[0],I)+" && "+this.compile(E.children[1],I)+")";break;case"op_not":g="!("+this.compile(E.children[0],I)+")";break;case"op_add":g=I?"$jc$.add("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" + "+this.compile(E.children[1],I)+")";break;case"op_sub":g=I?"$jc$.sub("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" - "+this.compile(E.children[1],I)+")";break;case"op_div":g=I?"$jc$.div("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" / "+this.compile(E.children[1],I)+")";break;case"op_mod":g=I?"$jc$.mod("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+", true)":"("+this.compile(E.children[0],I)+" % "+this.compile(E.children[1],I)+")";break;case"op_mul":g=I?"$jc$.mul("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+" * "+this.compile(E.children[1],I)+")";break;case"op_exp":g=I?"$jc$.pow("+this.compile(E.children[0],I)+", "+this.compile(E.children[1],I)+")":"("+this.compile(E.children[0],I)+"^"+this.compile(E.children[1],I)+")";break;case"op_neg":g=I?"$jc$.neg("+this.compile(E.children[0],I)+")":"(-"+this.compile(E.children[0],I)+")"}break;case"node_var":g=I?this.getvarJS(E.value,!1,E.withProps):E.value;break;case"node_const":case"node_const_bool":g=E.value;break;case"node_str":g="'"+E.value+"'"}return E.needsBrackets&&(g=I?"{\n"+g+"\n}\n":"<< "+g+" >>"),g},getName:function(E,I){var T="";return Type.exists(E)&&Type.exists(E.getName)?(T=E.getName(),Type.exists(T)&&""!==T||!I||(T=E.id)):I&&(T=E.id),T},X:function(E){return E.X()},Y:function(E){return E.Y()},V:function(E){return E.Value()},L:function(E){return E.L()},area:function(E){return Type.exists(E)&&Type.exists(E.Area)||this._error("Error: Can't calculate area."),E.Area()},dist:function(E,I){return Type.exists(E)&&Type.exists(E.Dist)||this._error("Error: Can't calculate distance."),E.Dist(I)},radius:function(E){return Type.exists(E)&&Type.exists(E.Radius)||this._error("Error: Can't calculate radius."),E.Radius()},add:function(E,I){var T,S,w;if(E=Type.evalSlider(E),I=Type.evalSlider(I),Interval.isInterval(E)||Interval.isInterval(I))w=Interval.add(E,I);else if(Type.isArray(E)&&Type.isArray(I))for(S=Math.min(E.length,I.length),w=[],T=0;T<S;T++)w[T]=E[T]+I[T];else Type.isNumber(E)&&Type.isNumber(I)?w=E+I:Type.isString(E)||Type.isString(I)?w=E.toString()+I.toString():this._error("Operation + not defined on operands "+typeof E+" and "+typeof I);return w},sub:function(E,I){var T,S,w;if(E=Type.evalSlider(E),I=Type.evalSlider(I),Interval.isInterval(E)||Interval.isInterval(I))w=Interval.sub(E,I);else if(Type.isArray(E)&&Type.isArray(I))for(S=Math.min(E.length,I.length),w=[],T=0;T<S;T++)w[T]=E[T]-I[T];else Type.isNumber(E)&&Type.isNumber(I)?w=E-I:this._error("Operation - not defined on operands "+typeof E+" and "+typeof I);return w},neg:function(E){var I,T,S;if(E=Type.evalSlider(E),Interval.isInterval(E))S=Interval.negative(E);else if(Type.isArray(E))for(T=E.length,S=[],I=0;I<T;I++)S[I]=-E[I];else Type.isNumber(E)?S=-E:this._error("Unary operation - not defined on operand "+typeof E);return S},mul:function(E,I){var T,S,w;if(E=Type.evalSlider(E),I=Type.evalSlider(I),Type.isArray(E)&&Type.isNumber(I)&&(T=E,I=E=I),Interval.isInterval(E)||Interval.isInterval(I))w=Interval.mul(E,I);else if(Type.isArray(E)&&Type.isArray(I))S=Math.min(E.length,I.length),w=Mat.innerProduct(E,I,S);else if(Type.isNumber(E)&&Type.isArray(I))for(S=I.length,w=[],T=0;T<S;T++)w[T]=E*I[T];else Type.isNumber(E)&&Type.isNumber(I)?w=E*I:this._error("Operation * not defined on operands "+typeof E+" and "+typeof I);return w},div:function(E,I){var T,S,w;if(E=Type.evalSlider(E),I=Type.evalSlider(I),Interval.isInterval(E)||Interval.isInterval(I))w=Interval.div(E,I);else if(Type.isArray(E)&&Type.isNumber(I))for(S=E.length,w=[],T=0;T<S;T++)w[T]=E[T]/I;else Type.isNumber(E)&&Type.isNumber(I)?w=E/I:this._error("Operation * not defined on operands "+typeof E+" and "+typeof I);return w},mod:function(E,I){var T,S,w;if(E=Type.evalSlider(E),I=Type.evalSlider(I),Interval.isInterval(E)||Interval.isInterval(I))return Interval.fmod(E,I);if(Type.isArray(E)&&Type.isNumber(I))for(S=E.length,w=[],T=0;T<S;T++)w[T]=Mat.mod(E[T],I,!0);else Type.isNumber(E)&&Type.isNumber(I)?w=Mat.mod(E,I,!0):this._error("Operation * not defined on operands "+typeof E+" and "+typeof I);return w},pow:function(E,I){return E=Type.evalSlider(E),I=Type.evalSlider(I),Interval.isInterval(E)||Interval.isInterval(I)?Interval.pow(E,I):Mat.pow(E,I)},lt:function(E,I){return Interval.isInterval(E)||Interval.isInterval(I)?Interval.lt(E,I):E<I},leq:function(E,I){return Interval.isInterval(E)||Interval.isInterval(I)?Interval.leq(E,I):E<=I},gt:function(E,I){return Interval.isInterval(E)||Interval.isInterval(I)?Interval.gt(E,I):E>I},geq:function(E,I){return Interval.isInterval(E)||Interval.isInterval(I)?Intervalt.geq(E,I):E>=I},randint:function(E,I,T){return Type.exists(T)||(T=1),Math.round(Math.random()*(I-E)/T)*T+E},DDD:function(E){console.log("Dummy derivative function. This should never appear!")},ifthen:function(E,I,T){return E?I:T},del:function(E){"object"==typeof E&&JXG.exists(E.type)&&JXG.exists(E.elementClass)&&this.board.removeObject(E)},use:function(E){var I,T,S=!1;if("string"==typeof E){for(I in JXG.boards)if(JXG.boards.hasOwnProperty(I)&&JXG.boards[I].container===E){T=JXG.boards[I],S=!0;break}}else T=E,S=!0;S?(this.board=T,this.builtIn.$board=T,this.builtIn.$board.src="$jc$.board"):this._error("Board '"+E+"' not found!")},findSymbol:function(E,I){var T,S;for(S=-1===(I=Type.def(I,-1))?this.scope:this.scopes[I];null!==S;){for(T in S.locals)if(S.locals.hasOwnProperty(T)&&S.locals[T]===E)return[T,S];S=S.previous}return[]},importModule:function(E){return priv.modules[E.toLowerCase()]},defineBuiltIn:function(){var E=this,I={PI:Math.PI,EULER:Math.E,D:E.DDD,X:E.X,Y:E.Y,V:E.V,L:E.L,acosh:Mat.acosh,acot:Mat.acot,asinh:Mat.asinh,binomial:Mat.binomial,cbrt:Mat.cbrt,cosh:Mat.cosh,cot:Mat.cot,deg:Geometry.trueAngle,A:E.area,area:E.area,dist:E.dist,R:E.radius,radius:E.radius,erf:Mat.erf,erfc:Mat.erfc,erfi:Mat.erfi,factorial:Mat.factorial,gcd:Mat.gcd,lb:Mat.log2,lcm:Mat.lcm,ld:Mat.log2,lg:Mat.log10,ln:Math.log,log:Mat.log,log10:Mat.log10,log2:Mat.log2,ndtr:Mat.ndtr,ndtri:Mat.ndtri,nthroot:Mat.nthroot,pow:Mat.pow,rad:Geometry.rad,ratpow:Mat.ratpow,trunc:Type.trunc,sinh:Mat.sinh,randint:E.randint,IfThen:E.ifthen,import:E.importModule,use:E.use,remove:E.del,$:E.getElementById,getName:E.getName,name:E.getName,$board:E.board,$log:E.log};return I.rad.sc=Geometry,I.deg.sc=Geometry,I.factorial.sc=Mat,I.X.src="$jc$.X",I.Y.src="$jc$.Y",I.V.src="$jc$.V",I.L.src="$jc$.L",I.acosh.src="JXG.Math.acosh",I.acot.src="JXG.Math.acot",I.asinh.src="JXG.Math.asinh",I.binomial.src="JXG.Math.binomial",I.cbrt.src="JXG.Math.cbrt",I.cot.src="JXG.Math.cot",I.cosh.src="JXG.Math.cosh",I.deg.src="JXG.Math.Geometry.trueAngle",I.erf.src="JXG.Math.erf",I.erfc.src="JXG.Math.erfc",I.erfi.src="JXG.Math.erfi",I.A.src="$jc$.area",I.area.src="$jc$.area",I.dist.src="$jc$.dist",I.R.src="$jc$.radius",I.radius.src="$jc$.radius",I.factorial.src="JXG.Math.factorial",I.gcd.src="JXG.Math.gcd",I.lb.src="JXG.Math.log2",I.lcm.src="JXG.Math.lcm",I.ld.src="JXG.Math.log2",I.lg.src="JXG.Math.log10",I.ln.src="Math.log",I.log.src="JXG.Math.log",I.log10.src="JXG.Math.log10",I.log2.src="JXG.Math.log2",I.ndtr.src="JXG.Math.ndtr",I.ndtri.src="JXG.Math.ndtri",I.nthroot.src="JXG.Math.nthroot",I.pow.src="JXG.Math.pow",I.rad.src="JXG.Math.Geometry.rad",I.ratpow.src="JXG.Math.ratpow",I.trunc.src="JXG.trunc",I.sinh.src="JXG.Math.sinh",I.randint.src="$jc$.randint",I.import.src="$jc$.importModule",I.use.src="$jc$.use",I.remove.src="$jc$.del",I.IfThen.src="$jc$.ifthen",I.$.src="(function (n) { return $jc$.board.select(n); })",I.getName.src="$jc$.getName",I.name.src="$jc$.getName",I.$board&&(I.$board.src="$jc$.board"),I.$log.src="$jc$.log",I},getPossibleOperands:function(){var E,I,T,S,w,g,m,p,a,u,c,l,f,v,_=["E"],h=this.defineBuiltIn(),y=Math;for(f=function(b,x){return b.toLowerCase().localeCompare(x.toLowerCase())},v=function(b,x){var D=null;if("jc"===x)D=h[b];else{if("Math"!==x)return;D=y[b]}if(!_.includes(b))return JXG.isFunction(D)?{name:b,type:"function",numParams:D.length,origin:x}:JXG.isNumber(D)?{name:b,type:"constant",value:D,origin:x}:void(void 0!==D&&console.error("undefined type",D))},E=Object.getOwnPropertyNames(h).sort(f),I=Object.getOwnPropertyNames(y).sort(f),T=[],S=0,w=0;S<E.length||w<I.length;)E[S]===I[w]?(g=v(I[w],"Math"),JXG.exists(g)&&T.push(g),S++,w++):!JXG.exists(I[w])||E[S].toLowerCase().localeCompare(I[w].toLowerCase())<0?(g=v(E[S],"jc"),JXG.exists(g)&&T.push(g),S++):(g=v(I[w],"Math"),JXG.exists(g)&&T.push(g),w++);for(a=[],u=[],c=[],l={},m=T.length,S=0;S<m;S++){switch((p=T[S]).type){case"function":a.push(p.name),"jc"===p.origin&&u.push(p.name);break;case"constant":c.push(p.name)}l[p.name]=p}return{all:l,list:T,functions:a,functions_jessiecode:u,constants:c}},_debug:function(E){"object"==typeof console?console.log(E):Env.isBrowser&&document&&null!==document.getElementById("debug")&&(document.getElementById("debug").innerHTML+=E+"<br />")},_error:function(E){var I=new Error("Error("+this.line+"): "+E);throw I.line=this.line,I},_warn:function(E){"object"==typeof console?console.log("Warning("+this.line+"): "+E):Env.isBrowser&&document&&null!==document.getElementById(this.warnLog)&&(document.getElementById(this.warnLog).innerHTML+="Warning("+this.line+"): "+E+"<br />")},_log:function(E){"object"!=typeof window&&"object"==typeof self&&self.postMessage?self.postMessage({type:"log",msg:"Log: "+E.toString()}):console.log("Log: ",arguments)}});var parser=function(){var E=function(Nt,Ie,ze,_t){for(ze=ze||{},_t=Nt.length;_t--;ze[Nt[_t]]=Ie);return ze},I=[2,14],T=[1,13],S=[1,37],w=[1,14],g=[1,15],m=[1,21],p=[1,16],a=[1,17],u=[1,33],c=[1,18],l=[1,19],f=[1,12],v=[1,59],_=[1,60],h=[1,58],y=[1,46],b=[1,48],x=[1,49],D=[1,50],M=[1,51],O=[1,52],A=[1,53],N=[1,54],L=[1,45],B=[1,38],V=[1,39],U=[5,7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],j=[5,7,8,12,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],z=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],$=[2,48],X=[1,72],Z=[10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,66,83,86],W=[1,78],ee=[8,10,16,32,34,35,37,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],ie=[1,82],re=[8,10,16,32,34,35,37,39,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],Me=[1,83],Pe=[1,84],Oe=[1,85],Se=[8,10,16,32,34,35,37,39,41,42,43,50,51,53,54,55,57,64,65,66,83,86],me=[1,89],_e=[1,90],ye=[1,91],le=[1,92],be=[1,97],Ce=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,53,54,55,57,64,65,66,83,86],He=[1,103],bt=[1,104],dt=[8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,57,64,65,66,83,86],gt=[1,105],Xe=[1,106],De=[1,107],Et=[1,126],Je=[1,139],Tn=[83,86],rn=[1,150],hi=[10,66,86],ti=[8,10,16,20,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,82,83,86],Rt=[1,167],ir=[10,86],Pr={trace:function(){},yy:{},symbols_:{error:2,Program:3,StatementList:4,EOF:5,IfStatement:6,IF:7,"(":8,Expression:9,")":10,Statement:11,ELSE:12,LoopStatement:13,WHILE:14,FOR:15,";":16,DO:17,UnaryStatement:18,USE:19,IDENTIFIER:20,DELETE:21,ReturnStatement:22,RETURN:23,EmptyStatement:24,StatementBlock:25,"{":26,"}":27,ExpressionStatement:28,AssignmentExpression:29,ConditionalExpression:30,LeftHandSideExpression:31,"=":32,LogicalORExpression:33,"?":34,":":35,LogicalANDExpression:36,"||":37,EqualityExpression:38,"&&":39,RelationalExpression:40,"==":41,"!=":42,"~=":43,AdditiveExpression:44,"<":45,">":46,"<=":47,">=":48,MultiplicativeExpression:49,"+":50,"-":51,UnaryExpression:52,"*":53,"/":54,"%":55,ExponentExpression:56,"^":57,"!":58,MemberExpression:59,CallExpression:60,PrimaryExpression:61,FunctionExpression:62,MapExpression:63,".":64,"[":65,"]":66,BasicLiteral:67,ObjectLiteral:68,ArrayLiteral:69,NullLiteral:70,BooleanLiteral:71,StringLiteral:72,NumberLiteral:73,NULL:74,TRUE:75,FALSE:76,STRING:77,NUMBER:78,NAN:79,INFINITY:80,ElementList:81,"<<":82,">>":83,PropertyList:84,Property:85,",":86,PropertyName:87,Arguments:88,AttributeList:89,Attribute:90,FUNCTION:91,ParameterDefinitionList:92,MAP:93,"->":94,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",7:"IF",8:"(",10:")",12:"ELSE",14:"WHILE",15:"FOR",16:";",17:"DO",19:"USE",20:"IDENTIFIER",21:"DELETE",23:"RETURN",26:"{",27:"}",32:"=",34:"?",35:":",37:"||",39:"&&",41:"==",42:"!=",43:"~=",45:"<",46:">",47:"<=",48:">=",50:"+",51:"-",53:"*",54:"/",55:"%",57:"^",58:"!",64:".",65:"[",66:"]",74:"NULL",75:"TRUE",76:"FALSE",77:"STRING",78:"NUMBER",79:"NAN",80:"INFINITY",82:"<<",83:">>",86:",",91:"FUNCTION",93:"MAP",94:"->"},productions_:[0,[3,2],[6,5],[6,7],[13,5],[13,9],[13,7],[18,2],[18,2],[22,2],[22,3],[24,1],[25,3],[4,2],[4,0],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[11,1],[28,2],[9,1],[29,1],[29,3],[30,1],[30,5],[33,1],[33,3],[36,1],[36,3],[38,1],[38,3],[38,3],[38,3],[40,1],[40,3],[40,3],[40,3],[40,3],[44,1],[44,3],[44,3],[49,1],[49,3],[49,3],[49,3],[56,1],[56,3],[52,1],[52,2],[52,2],[52,2],[31,1],[31,1],[59,1],[59,1],[59,1],[59,3],[59,4],[61,1],[61,1],[61,1],[61,1],[61,3],[67,1],[67,1],[67,1],[67,1],[70,1],[71,1],[71,1],[72,1],[73,1],[73,1],[73,1],[69,2],[69,3],[68,2],[68,3],[84,1],[84,3],[85,3],[87,1],[87,1],[87,1],[60,2],[60,3],[60,2],[60,4],[60,3],[88,2],[88,3],[89,1],[89,3],[90,1],[90,1],[81,1],[81,3],[62,4],[62,5],[63,5],[63,6],[92,1],[92,3]],performAction:function(Nt,Ie,ze,_t,$e,ve,Be){var ce=ve.length-1;switch($e){case 1:return ve[ce-1];case 2:this.$=Ue.createNode(Fe(Be[ce-4]),"node_op","op_if",ve[ce-2],ve[ce]);break;case 3:this.$=Ue.createNode(Fe(Be[ce-6]),"node_op","op_if_else",ve[ce-4],ve[ce-2],ve[ce]);break;case 4:this.$=Ue.createNode(Fe(Be[ce-4]),"node_op","op_while",ve[ce-2],ve[ce]);break;case 5:this.$=Ue.createNode(Fe(Be[ce-8]),"node_op","op_for",ve[ce-6],ve[ce-4],ve[ce-2],ve[ce]);break;case 6:this.$=Ue.createNode(Fe(Be[ce-6]),"node_op","op_do",ve[ce-5],ve[ce-2]);break;case 7:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_use",ve[ce]);break;case 8:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_delete",ve[ce]);break;case 9:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_return",void 0);break;case 10:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_return",ve[ce-1]);break;case 11:case 14:this.$=Ue.createNode(Fe(Be[ce]),"node_op","op_none");break;case 12:this.$=ve[ce-1],this.$.needsBrackets=!0;break;case 13:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_none",ve[ce-1],ve[ce]);break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 23:case 24:case 26:case 28:case 30:case 32:case 36:case 41:case 44:case 48:case 50:case 52:case 54:case 55:case 56:case 58:case 62:case 81:case 84:case 85:case 86:this.$=ve[ce];break;case 22:case 65:case 93:this.$=ve[ce-1];break;case 25:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_assign",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 27:this.$=Ue.createNode(Fe(Be[ce-4]),"node_op","op_conditional",ve[ce-4],ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 29:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_or",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 31:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_and",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 33:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_eq",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 34:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_neq",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 35:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_approx",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 37:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_lt",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 38:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_gt",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 39:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_leq",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 40:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_geq",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 42:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_add",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 43:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_sub",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 45:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_mul",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 46:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_div",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 47:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_mod",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 49:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_exp",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 51:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_not",ve[ce]),this.$.isMath=!1;break;case 53:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_neg",ve[ce]),this.$.isMath=!0;break;case 57:case 63:case 64:case 66:case 67:case 68:case 97:this.$=ve[ce],this.$.isMath=!1;break;case 59:case 91:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_property",ve[ce-2],ve[ce]),this.$.isMath=!0;break;case 60:case 90:this.$=Ue.createNode(Fe(Be[ce-3]),"node_op","op_extvalue",ve[ce-3],ve[ce-1]),this.$.isMath=!0;break;case 61:this.$=Ue.createNode(Fe(Be[ce]),"node_var",ve[ce]);break;case 69:this.$=ve[ce],this.$.isMath=!0;break;case 70:this.$=Ue.createNode(Fe(Be[ce]),"node_const",null);break;case 71:this.$=Ue.createNode(Fe(Be[ce]),"node_const_bool",!0);break;case 72:this.$=Ue.createNode(Fe(Be[ce]),"node_const_bool",!1);break;case 73:this.$=Ue.createNode(Fe(Be[ce]),"node_str",ve[ce].substring(1,ve[ce].length-1));break;case 74:this.$=Ue.createNode(Fe(Be[ce]),"node_const",parseFloat(ve[ce]));break;case 75:this.$=Ue.createNode(Fe(Be[ce]),"node_const",NaN);break;case 76:this.$=Ue.createNode(Fe(Be[ce]),"node_const",1/0);break;case 77:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_array",[]);break;case 78:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_array",ve[ce-1]);break;case 79:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_emptyobject",{}),this.$.needsBrackets=!0;break;case 80:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_proplst_val",ve[ce-1]),this.$.needsBrackets=!0;break;case 82:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_proplst",ve[ce-2],ve[ce]);break;case 83:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_prop",ve[ce-2],ve[ce]);break;case 87:case 89:this.$=Ue.createNode(Fe(Be[ce-1]),"node_op","op_execfun",ve[ce-1],ve[ce]),this.$.isMath=!0;break;case 88:this.$=Ue.createNode(Fe(Be[ce-2]),"node_op","op_execfun",ve[ce-2],ve[ce-1],ve[ce],!0),this.$.isMath=!1;break;case 92:this.$=[];break;case 94:case 98:case 104:this.$=[ve[ce]];break;case 95:case 99:case 105:this.$=ve[ce-2].concat(ve[ce]);break;case 96:this.$=Ue.createNode(Fe(Be[ce]),"node_var",ve[ce]),this.$.isMath=!0;break;case 100:this.$=Ue.createNode(Fe(Be[ce-3]),"node_op","op_function",[],ve[ce]),this.$.isMath=!1;break;case 101:this.$=Ue.createNode(Fe(Be[ce-4]),"node_op","op_function",ve[ce-2],ve[ce]),this.$.isMath=!1;break;case 102:this.$=Ue.createNode(Fe(Be[ce-4]),"node_op","op_map",[],ve[ce]);break;case 103:this.$=Ue.createNode(Fe(Be[ce-5]),"node_op","op_map",ve[ce-3],ve[ce])}},table:[E([5,7,8,14,15,16,17,19,20,21,23,26,50,51,58,65,74,75,76,77,78,79,80,82,91,93],I,{3:1,4:2}),{1:[3]},{5:[1,3],6:6,7:T,8:S,9:20,11:4,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{1:[2,1]},E(U,[2,13]),E(j,[2,15]),E(j,[2,16]),E(j,[2,17]),E(j,[2,18]),E(j,[2,19]),E(j,[2,20]),E(j,[2,21]),E([7,8,14,15,16,17,19,20,21,23,26,27,50,51,58,65,74,75,76,77,78,79,80,82,91,93],I,{4:61}),{8:[1,62]},{8:[1,63]},{8:[1,64]},{6:6,7:T,8:S,9:20,11:65,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{20:[1,66]},{20:[1,67]},{8:S,9:69,16:[1,68],20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{16:[1,70]},E(j,[2,11]),E(z,[2,23]),E(z,[2,24]),E([8,10,16,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],$,{32:[1,71],57:X}),E([8,10,16,32,35,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83,86],[2,26],{34:[1,73],37:[1,74]}),E(Z,[2,54],{88:77,8:W,64:[1,75],65:[1,76]}),E(Z,[2,55],{88:79,8:W,64:[1,81],65:[1,80]}),E(ee,[2,28],{39:ie}),E(z,[2,56]),E(z,[2,57]),E(z,[2,58]),E(re,[2,30],{41:Me,42:Pe,43:Oe}),E(z,[2,61]),E(z,[2,62]),E(z,[2,63]),E(z,[2,64]),{8:S,9:86,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:[1,87]},{8:[1,88]},E(Se,[2,32],{45:me,46:_e,47:ye,48:le}),E(z,[2,66]),E(z,[2,67]),E(z,[2,68]),E(z,[2,69]),{20:be,72:98,73:99,77:M,78:O,79:A,80:N,83:[1,93],84:94,85:95,87:96},{8:S,20:u,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,66:[1,100],67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,81:101,82:L,91:B,93:V},E(Ce,[2,36],{50:He,51:bt}),E(z,[2,70]),E(z,[2,71]),E(z,[2,72]),E(z,[2,73]),E(z,[2,74]),E(z,[2,75]),E(z,[2,76]),E(dt,[2,41],{53:gt,54:Xe,55:De}),E(z,[2,44]),E(z,[2,50]),{8:S,20:u,31:109,50:v,51:_,52:108,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,50:v,51:_,52:110,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,50:v,51:_,52:111,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{6:6,7:T,8:S,9:20,11:4,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,27:[1,112],28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,9:113,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,9:114,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,9:115,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{14:[1,116]},E(j,[2,7]),E(j,[2,8]),E(j,[2,9]),{16:[1,117]},E(j,[2,22]),{8:S,20:u,29:118,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,50:v,51:_,52:119,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,29:120,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,36:121,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{20:[1,122]},{8:S,9:123,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(z,[2,87],{89:124,90:125,68:127,20:Et,82:L}),{8:S,10:[1,128],20:u,29:102,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,81:129,82:L,91:B,93:V},E(z,[2,89]),{8:S,9:130,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{20:[1,131]},{8:S,20:u,31:109,38:132,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,40:133,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,40:134,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,40:135,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{10:[1,136]},{10:[1,137],20:Je,92:138},{10:[1,140],20:Je,92:141},{8:S,20:u,31:109,44:142,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,44:143,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,44:144,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,44:145,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(z,[2,79]),{83:[1,146],86:[1,147]},E(Tn,[2,81]),{35:[1,148]},{35:[2,84]},{35:[2,85]},{35:[2,86]},E(z,[2,77]),{66:[1,149],86:rn},E(hi,[2,98]),{8:S,20:u,31:109,49:151,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,49:152,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,50:v,51:_,52:153,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,50:v,51:_,52:154,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,31:109,50:v,51:_,52:155,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(z,[2,51]),E([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,64,65,66,83,86],$,{57:X}),E(z,[2,52]),E(z,[2,53]),E([5,7,8,10,12,14,15,16,17,19,20,21,23,26,27,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,58,64,65,66,74,75,76,77,78,79,80,82,83,86,91,93],[2,12]),{10:[1,156]},{10:[1,157]},{16:[1,158]},{8:[1,159]},E(j,[2,10]),E(z,[2,25]),E(z,[2,49]),{35:[1,160]},E(ee,[2,29],{39:ie}),E(z,[2,59]),{66:[1,161]},E([8,10,16,32,34,35,37,39,41,42,43,45,46,47,48,50,51,53,54,55,57,64,65,66,83],[2,88],{86:[1,162]}),E(z,[2,94]),E(z,[2,96]),E(z,[2,97]),E(ti,[2,92]),{10:[1,163],86:rn},{66:[1,164]},E(z,[2,91]),E(re,[2,31],{41:Me,42:Pe,43:Oe}),E(Se,[2,33],{45:me,46:_e,47:ye,48:le}),E(Se,[2,34],{45:me,46:_e,47:ye,48:le}),E(Se,[2,35],{45:me,46:_e,47:ye,48:le}),E(z,[2,65]),{25:165,26:f},{10:[1,166],86:Rt},E(ir,[2,104]),{94:[1,168]},{10:[1,169],86:Rt},E(Ce,[2,37],{50:He,51:bt}),E(Ce,[2,38],{50:He,51:bt}),E(Ce,[2,39],{50:He,51:bt}),E(Ce,[2,40],{50:He,51:bt}),E(z,[2,80]),{20:be,72:98,73:99,77:M,78:O,79:A,80:N,85:170,87:96},{8:S,20:u,29:171,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(z,[2,78]),{8:S,20:u,29:172,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(dt,[2,42],{53:gt,54:Xe,55:De}),E(dt,[2,43],{53:gt,54:Xe,55:De}),E(z,[2,45]),E(z,[2,46]),E(z,[2,47]),{6:6,7:T,8:S,9:20,11:173,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{6:6,7:T,8:S,9:20,11:174,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,9:175,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,9:176,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,20:u,29:177,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(z,[2,60]),{20:Et,68:127,82:L,90:178},E(ti,[2,93]),E(z,[2,90]),E(z,[2,100]),{25:179,26:f},{20:[1,180]},{8:S,9:181,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{94:[1,182]},E(Tn,[2,82]),E(Tn,[2,83]),E(hi,[2,99]),E(U,[2,2],{12:[1,183]}),E(j,[2,4]),{16:[1,184]},{10:[1,185]},E(z,[2,27]),E(z,[2,95]),E(z,[2,101]),E(ir,[2,105]),E(z,[2,102]),{8:S,9:186,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{6:6,7:T,8:S,9:20,11:187,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{8:S,9:188,20:u,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},{16:[1,189]},E(z,[2,103]),E(j,[2,3]),{10:[1,190]},E(j,[2,6]),{6:6,7:T,8:S,9:20,11:191,13:7,14:w,15:g,16:m,17:p,18:8,19:a,20:u,21:c,22:9,23:l,24:11,25:5,26:f,28:10,29:22,30:23,31:24,33:25,36:28,38:32,40:40,44:47,49:55,50:v,51:_,52:56,56:57,58:h,59:26,60:27,61:29,62:30,63:31,65:y,67:34,68:35,69:36,70:41,71:42,72:43,73:44,74:b,75:x,76:D,77:M,78:O,79:A,80:N,82:L,91:B,93:V},E(j,[2,5])],defaultActions:{3:[2,1],97:[2,84],98:[2,85],99:[2,86]},parseError:function(Nt,Ie){if(!Ie.recoverable){var ze=new Error(Nt);throw ze.hash=Ie,ze}this.trace(Nt)},parse:function(Nt){var Ie=this,ze=[0],_t=[null],$e=[],ve=this.table,Be="",ce=0,Do=0,Po=0,cl=2,Mo=1,ul=$e.slice.call(arguments,1),cn=Object.create(this.lexer),Yi={yy:{}};for(var ws in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ws)&&(Yi.yy[ws]=this.yy[ws]);cn.setInput(Nt,Yi.yy),Yi.yy.lexer=cn,Yi.yy.parser=this,void 0===cn.yylloc&&(cn.yylloc={});var Es=cn.yylloc;$e.push(Es);var dl=cn.options&&cn.options.ranges;this.parseError="function"==typeof Yi.yy.parseError?Yi.yy.parseError:Object.getPrototypeOf(this).parseError;for(var Ht,Oo,rr,Wn,hl,Kr,xi,qn,Bu=function(){var Vn;return"number"!=typeof(Vn=cn.lex()||Mo)&&(Vn=Ie.symbols_[Vn]||Vn),Vn},Xt={};;){if(this.defaultActions[rr=ze[ze.length-1]]?Wn=this.defaultActions[rr]:(null==Ht&&(Ht=Bu()),Wn=ve[rr]&&ve[rr][Ht]),void 0===Wn||!Wn.length||!Wn[0]){var sr="";for(Kr in qn=[],ve[rr])this.terminals_[Kr]&&Kr>cl&&qn.push("'"+this.terminals_[Kr]+"'");sr=cn.showPosition?"Parse error on line "+(ce+1)+":\n"+cn.showPosition()+"\nExpecting "+qn.join(", ")+", got '"+(this.terminals_[Ht]||Ht)+"'":"Parse error on line "+(ce+1)+": Unexpected "+(Ht==Mo?"end of input":"'"+(this.terminals_[Ht]||Ht)+"'"),this.parseError(sr,{text:cn.match,token:this.terminals_[Ht]||Ht,line:cn.yylineno,loc:Es,expected:qn})}if(Wn[0]instanceof Array&&Wn.length>1)throw new Error("Parse Error: multiple actions possible at state: "+rr+", token: "+Ht);switch(Wn[0]){case 1:ze.push(Ht),_t.push(cn.yytext),$e.push(cn.yylloc),ze.push(Wn[1]),Ht=null,Oo?(Ht=Oo,Oo=null):(Do=cn.yyleng,Be=cn.yytext,ce=cn.yylineno,Es=cn.yylloc,Po>0&&Po--);break;case 2:if(Xt.$=_t[_t.length-(xi=this.productions_[Wn[1]][1])],Xt._$={first_line:$e[$e.length-(xi||1)].first_line,last_line:$e[$e.length-1].last_line,first_column:$e[$e.length-(xi||1)].first_column,last_column:$e[$e.length-1].last_column},dl&&(Xt._$.range=[$e[$e.length-(xi||1)].range[0],$e[$e.length-1].range[1]]),void 0!==(hl=this.performAction.apply(Xt,[Be,Do,ce,Yi.yy,Wn[1],_t,$e].concat(ul))))return hl;xi&&(ze=ze.slice(0,-1*xi*2),_t=_t.slice(0,-1*xi),$e=$e.slice(0,-1*xi)),ze.push(this.productions_[Wn[1]][0]),_t.push(Xt.$),$e.push(Xt._$),ze.push(ve[ze[ze.length-2]][ze[ze.length-1]]);break;case 3:return!0}}return!0}},Ue={node:function(Nt,Ie,ze){return{type:Nt,value:Ie,children:ze}},createNode:function(Nt,Ie,ze,_t){var $e,ve=this.node(Ie,ze,[]);for($e=3;$e<arguments.length;$e++)ve.children.push(arguments[$e]);return ve.line=Nt[0],ve.col=Nt[1],ve.eline=Nt[2],ve.ecol=Nt[3],ve}},Fe=function(Nt){return[Nt.first_line,Nt.first_column,Nt.last_line,Nt.last_column]};function qr(){this.yy={}}return Pr.lexer={EOF:1,parseError:function(Ie,ze){if(!this.yy.parser)throw new Error(Ie);this.yy.parser.parseError(Ie,ze)},setInput:function(Ie,ze){return this.yy=ze||this.yy||{},this._input=Ie,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Ie=this._input[0];return this.yytext+=Ie,this.yyleng++,this.offset++,this.match+=Ie,this.matched+=Ie,Ie.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Ie},unput:function(Ie){var ze=Ie.length,_t=Ie.split(/(?:\r\n?|\n)/g);this._input=Ie+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ze),this.offset-=ze;var $e=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),_t.length-1&&(this.yylineno-=_t.length-1);var ve=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:_t?(_t.length===$e.length?this.yylloc.first_column:0)+$e[$e.length-_t.length].length-_t[0].length:this.yylloc.first_column-ze},this.options.ranges&&(this.yylloc.range=[ve[0],ve[0]+this.yyleng-ze]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(Ie){this.unput(this.match.slice(Ie))},pastInput:function(){var Ie=this.matched.substr(0,this.matched.length-this.match.length);return(Ie.length>20?"...":"")+Ie.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Ie=this.match;return Ie.length<20&&(Ie+=this._input.substr(0,20-Ie.length)),(Ie.substr(0,20)+(Ie.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Ie=this.pastInput(),ze=new Array(Ie.length+1).join("-");return Ie+this.upcomingInput()+"\n"+ze+"^"},test_match:function(Ie,ze){var _t,$e,ve;if(this.options.backtrack_lexer&&(ve={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(ve.yylloc.range=this.yylloc.range.slice(0))),($e=Ie[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=$e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:$e?$e[$e.length-1].length-$e[$e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Ie[0].length},this.yytext+=Ie[0],this.match+=Ie[0],this.matches=Ie,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Ie[0].length),this.matched+=Ie[0],_t=this.performAction.call(this,this.yy,this,ze,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),_t)return _t;if(this._backtrack){for(var Be in ve)this[Be]=ve[Be];return!1}return!1},next:function(){if(this.done)return this.EOF;var Ie,ze,_t,$e;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var ve=this._currentRules(),Be=0;Be<ve.length;Be++)if((_t=this._input.match(this.rules[ve[Be]]))&&(!ze||_t[0].length>ze[0].length)){if(ze=_t,$e=Be,this.options.backtrack_lexer){if(!1!==(Ie=this.test_match(_t,ve[Be])))return Ie;if(this._backtrack){ze=!1;continue}return!1}if(!this.options.flex)break}return ze?!1!==(Ie=this.test_match(ze,ve[$e]))&&Ie:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){return this.next()||this.lex()},begin:function(Ie){this.conditionStack.push(Ie)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Ie){return(Ie=this.conditionStack.length-1-Math.abs(Ie||0))>=0?this.conditionStack[Ie]:"INITIAL"},pushState:function(Ie){this.begin(Ie)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(Ie,ze,_t,$e){switch(_t){case 0:case 5:case 6:break;case 1:case 2:return 78;case 3:case 4:return 77;case 7:return 7;case 8:return 12;case 9:return 14;case 10:return 17;case 11:return 15;case 12:return 91;case 13:return 93;case 14:return 19;case 15:return 23;case 16:return 21;case 17:return 75;case 18:return 76;case 19:return 74;case 20:return 80;case 21:case 22:return 94;case 23:return 82;case 24:return 83;case 25:return 26;case 26:return 27;case 27:return 16;case 28:return"#";case 29:return 34;case 30:return 35;case 31:return 79;case 32:return 64;case 33:return 65;case 34:return 66;case 35:return 8;case 36:return 10;case 37:return 58;case 38:return 57;case 39:return 53;case 40:return 54;case 41:return 55;case 42:return 50;case 43:return 51;case 44:return 47;case 45:return 45;case 46:return 48;case 47:return 46;case 48:return 41;case 49:return 43;case 50:return 42;case 51:return 39;case 52:return 37;case 53:return 32;case 54:return 86;case 55:return 5;case 56:return 20;case 57:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+\.[0-9]*|[0-9]*\.[0-9]+\b)/,/^(?:[0-9]+)/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:\/\/.*)/,/^(?:\/\*(.|\n|\r)*?\*\/)/,/^(?:if\b)/,/^(?:else\b)/,/^(?:while\b)/,/^(?:do\b)/,/^(?:for\b)/,/^(?:function\b)/,/^(?:map\b)/,/^(?:use\b)/,/^(?:return\b)/,/^(?:delete\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:Infinity\b)/,/^(?:->)/,/^(?:=>)/,/^(?:<<)/,/^(?:>>)/,/^(?:\{)/,/^(?:\})/,/^(?:;)/,/^(?:#)/,/^(?:\?)/,/^(?::)/,/^(?:NaN\b)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\()/,/^(?:\))/,/^(?:!)/,/^(?:\^)/,/^(?:\*)/,/^(?:\/)/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:~=)/,/^(?:!=)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:=)/,/^(?:,)/,/^(?:$)/,/^(?:[A-Za-z_\$][A-Za-z0-9_]*)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57],inclusive:!0}}},qr.prototype=Pr,Pr.Parser=qr,new qr}();return void 0!==require&&typeof exports<"u"&&(exports.parser=parser,exports.Parser=parser.Parser,exports.parse=function(){return parser.parse.apply(parser,arguments)},exports.main=function(E){E[1]||(console.log("Usage: "+E[0]+" FILE"),process.exit(1));var I=require("fs").readFileSync(require("path").normalize(E[1]),"utf8");return exports.parser.parse(I)},require.main===module&&exports.main(process.argv.slice(1))),parser.yy.parseError=parser.parseError,JXG.JessieCode}),define("base/composition",["jxg","utils/type"],function(E,I){"use strict";return E.Composition=function(T){var S,w=this,g=["setAttribute","setParents","prepareUpdate","updateRenderer","update","fullUpdate","highlight","noHighlight"],m=function(p){return function(){var a;for(a in w.elements)w.elements.hasOwnProperty(a)&&I.exists(w.elements[a][p])&&w.elements[a][p].apply(w.elements[a],arguments);return w}};for(S=0;S<g.length;S++)this[g[S]]=m(g[S]);for(S in this.elements={},this.objects=this.elements,this.elementsByName={},this.objectsList=[],this.groups={},this.methodMap={setAttribute:"setAttribute",setProperty:"setAttribute",setParents:"setParents",add:"add",remove:"remove",select:"select"},T)T.hasOwnProperty(S)&&this.add(S,T[S]);this.dump=!0,this.subs={}},E.extend(E.Composition.prototype,{add:function(T,S){return!(I.exists(this[T])||!I.exists(S)||(I.exists(S.id)?this.elements[S.id]=S:this.elements[T]=S,I.exists(S.name)&&(this.elementsByName[S.name]=S),S.on("attribute:name",this.nameListener,this),this.objectsList.push(S),this[T]=S,this.methodMap[T]=S,0))},remove:function(T){var S,w=!1;for(S in this.elements)if(this.elements.hasOwnProperty(S)&&this.elements[S].id===this[T].id){w=!0;break}return w&&(delete this.elements[this[T].id],delete this[T]),w},nameListener:function(T,S,w){delete this.elementsByName[T],this.elementsByName[S]=w},select:function(T){return I.exists(E.Board)?E.Board.prototype.select.call(this,T):new E.Composition},getParents:function(){return this.parents},getType:function(){return this.elType},getAttributes:function(){var T,S={};for(T in this.subs)this.subs.hasOwnProperty(T)&&(S[T]=this.subs[T].visProp);return this.attr}}),E.Composition}),define("base/board",["jxg","base/constants","base/coords","options","math/numerics","math/math","math/geometry","math/complex","math/statistics","parser/jessiecode","utils/color","utils/type","utils/event","utils/env","base/composition"],function(E,I,T,S,w,g,m,p,a,u,c,l,f,v,_){"use strict";return E.Board=function(h,y,b,x,D,M,O,A,N,L,B){if(this.BOARD_MODE_NONE=0,this.BOARD_MODE_DRAG=1,this.BOARD_MODE_MOVE_ORIGIN=2,this.BOARD_MODE_ZOOM=17,this.BOARD_QUALITY_LOW=1,this.BOARD_QUALITY_HIGH=2,l.exists(B.document)&&!1!==B.document?this.document=B.document:void 0!==document&&l.isObject(document)&&(this.document=document),this.container=h,this.containerObj=v.isBrowser?this.document.getElementById(this.container):null,v.isBrowser&&"no"!==y.type&&null===this.containerObj)throw new Error("\nJSXGraph: HTML container element '"+h+"' not found.");this.renderer=y,this.grids=[],this.options=l.deepCopy(S),this.attr=B,this.dimension=2,this.jc=new u,this.jc.use(this),this.origin={},this.origin.usrCoords=[1,0,0],this.origin.scrCoords=[1,x[0],x[1]],this.zoomX=D,this.zoomY=M,this.unitX=O*this.zoomX,this.unitY=A*this.zoomY,this.keepaspectratio=!1,this.canvasWidth=N,this.canvasHeight=L,this.id=l.exists(b)&&""!==b&&v.isBrowser&&!l.exists(this.document.getElementById(b))?b:this.generateId(),f.eventify(this),this.hooks=[],this.dependentBoards=[],this.inUpdate=!1,this.objects={},this.objectsList=[],this.groups={},this.animationObjects={},this.highlightedObjects={},this.numObjects=0,this.elementsByName={},this.mode=this.BOARD_MODE_NONE,this.updateQuality=this.BOARD_QUALITY_HIGH,this.isSuspendedRedraw=!1,this.calculateSnapSizes(),this.drag_dx=0,this.drag_dy=0,this.drag_position=[0,0],this.mouse={},this.touches=[],this.xmlString="",this.cPos=[],this.touchMoveLast=0,this.touchMoveLastId=1/0,this.positionAccessLast=0,this.downObjects=[],this.attr.showcopyright&&this.renderer.displayCopyright(I.licenseText,parseInt(this.options.text.fontSize,10)),this.needsFullUpdate=!1,this.reducedUpdate=!1,this.currentCBDef="none",this.geonextCompatibilityMode=!1,this.options.text.useASCIIMathML&&translateASCIIMath?init():this.options.text.useASCIIMathML=!1,this.hasMouseHandlers=!1,this.hasTouchHandlers=!1,this.hasPointerHandlers=!1,this.hasMouseUp=!1,this.hasTouchEnd=!1,this.hasPointerUp=!1,this._drag_offset=[0,0],this._inputDevice="mouse",this._board_touches=[],this.selectingMode=!1,this.isSelecting=!1,this._isScrolling=!1,this._isResizing=!1,this.selectingBox=[[0,0],[0,0]],this.mathLib=Math,this.mathLibJXG=E.Math,this.attr.registerevents&&this.addEventHandlers(),this.methodMap={update:"update",fullUpdate:"fullUpdate",on:"on",off:"off",trigger:"trigger",setView:"setBoundingBox",setBoundingBox:"setBoundingBox",migratePoint:"migratePoint",colorblind:"emulateColorblindness",suspendUpdate:"suspendUpdate",unsuspendUpdate:"unsuspendUpdate",clearTraces:"clearTraces",left:"clickLeftArrow",right:"clickRightArrow",up:"clickUpArrow",down:"clickDownArrow",zoomIn:"zoomIn",zoomOut:"zoomOut",zoom100:"zoom100",zoomElements:"zoomElements",remove:"removeObject",removeObject:"removeObject"}},E.extend(E.Board.prototype,{generateName:function(h){var y,b,x=this.attr.maxnamelength,D="",M="",O=[],A="";if(h.type===I.OBJECT_TYPE_TICKS)return"";for(y=l.isPoint(h)?["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]:h.type===I.OBJECT_TYPE_ANGLE?["","&alpha;","&beta;","&gamma;","&delta;","&epsilon;","&zeta;","&eta;","&theta;","&iota;","&kappa;","&lambda;","&mu;","&nu;","&xi;","&omicron;","&pi;","&rho;","&sigma;","&tau;","&upsilon;","&phi;","&chi;","&psi;","&omega;"]:["","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],l.isPoint(h)||h.elementClass===I.OBJECT_CLASS_LINE||h.type===I.OBJECT_TYPE_ANGLE||(D=h.type===I.OBJECT_TYPE_POLYGON?"P_{":h.elementClass===I.OBJECT_CLASS_CIRCLE?"k_{":h.elementClass===I.OBJECT_CLASS_TEXT?"t_{":"s_{",M="}"),b=0;b<x;b++)O[b]=0;for(;O[x-1]<y.length;){for(O[0]=1;O[0]<y.length;O[0]++){for(A=D,b=x;b>0;b--)A+=y[O[b-1]];if(!l.exists(this.elementsByName[A+M]))return A+M}for(O[0]=y.length,b=1;b<x;b++)O[b-1]===y.length&&(O[b-1]=1,O[b]+=1)}return""},generateId:function(){for(var h=1;l.exists(E.boards["jxgBoard"+h]);)h=Math.round(65535*Math.random());return"jxgBoard"+h},setId:function(h,y){var b,x=this.numObjects,D=h.id;if(this.numObjects+=1,""===D||!l.exists(D))for(D=this.id+y+x;l.exists(this.objects[D]);)b=Math.round(65535*Math.random()),D=this.id+y+x+"-"+b;return h.id=D,this.objects[D]=h,h._pos=this.objectsList.length,this.objectsList[this.objectsList.length]=h,D},finalizeAdding:function(h){!1===l.evaluate(h.visProp.visible)&&this.renderer.display(h,!1)},finalizeLabel:function(h){h.hasLabel&&!l.evaluate(h.label.visProp.islabel)&&!1===l.evaluate(h.label.visProp.visible)&&this.renderer.display(h.label,!1)},checkFrameRate:function(h){var y=!1,b=(new Date).getTime();return l.exists(h.pointerId)&&this.touchMoveLastId!==h.pointerId&&(y=!0,this.touchMoveLastId=h.pointerId),!y&&(b-this.touchMoveLast)*this.attr.maxframerate>=1e3&&(y=!0),y&&(this.touchMoveLast=b),y},getCoordsTopLeftCorner:function(){var h,b,x,D,M=this.document.ownerDocument||this.document,O=M.documentElement||this.document.body.parentNode,A=M.body,N=this.containerObj;if(this.cPos.length>0&&(this.mode===this.BOARD_MODE_DRAG||this.mode===this.BOARD_MODE_MOVE_ORIGIN||(new Date).getTime()-this.positionAccessLast<1e3))return this.cPos;if(this.positionAccessLast=(new Date).getTime(),N.getBoundingClientRect){for(b=N.getBoundingClientRect(),x=1,D=N;D&&l.exists(D.parentNode);)l.exists(D.style)&&l.exists(D.style.zoom)&&""!==D.style.zoom&&(x*=parseFloat(D.style.zoom)),D=D.parentNode;return(h=[b.left*x,b.top*x])[0]+=v.getProp(N,"border-left-width"),h[1]+=v.getProp(N,"border-top-width"),"vml"!==this.renderer.type&&(h[0]+=v.getProp(N,"padding-left"),h[1]+=v.getProp(N,"padding-top")),this.cPos=h.slice(),this.cPos}return h=v.getOffset(N),!this.containerObj.currentStyle&&this.document.documentElement.ownerDocument.defaultView&&(h[0]+=v.getProp(O,"margin-left"),h[1]+=v.getProp(O,"margin-top"),h[0]+=v.getProp(O,"border-left-width"),h[1]+=v.getProp(O,"border-top-width"),h[0]+=v.getProp(O,"padding-left"),h[1]+=v.getProp(O,"padding-top")),A&&(h[0]+=v.getProp(A,"left"),h[1]+=v.getProp(A,"top")),"object"==typeof google&&google.translate&&(h[0]+=10,h[1]+=25),h[0]+=v.getProp(N,"border-left-width"),h[1]+=v.getProp(N,"border-top-width"),"vml"!==this.renderer.type&&(h[0]+=v.getProp(N,"padding-left"),h[1]+=v.getProp(N,"padding-top")),h[0]+=this.attr.offsetx,h[1]+=this.attr.offsety,this.cPos=h.slice(),this.cPos},getMousePosition:function(h,y){var b,x,D=this.getCoordsTopLeftCorner();return b=v.getPosition(h,y,this.document),l.exists(this.cssTransMat)||this.updateCSSTransforms(),(x=g.matVecMult(this.cssTransMat,x=[1,b[0]-D[0],b[1]-D[1]]))[1]/=x[0],x[2]/=x[0],[x[1],x[2]]},initMoveOrigin:function(h,y){this.drag_dx=h-this.origin.scrCoords[1],this.drag_dy=y-this.origin.scrCoords[2],this.mode=this.BOARD_MODE_MOVE_ORIGIN,this.updateQuality=this.BOARD_QUALITY_LOW},initMoveObject:function(h,y,b,x){var D,M,O,A=[],N=[],L=this.objectsList.length,B={visProp:{layer:-1e4}};for(M=0;M<L;M++)O=(D=this.objectsList[M]).hasPoint&&D.hasPoint(h,y),D.visPropCalc.visible&&O&&(D.triggerEventHandlers([x+"down","down"],[b]),this.downObjects.push(D)),O&&D.isDraggable&&D.visPropCalc.visible&&(this.geonextCompatibilityMode&&(l.isPoint(D)||D.elementClass===I.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!l.evaluate(D.visProp.fixed)&&(D.visProp.layer>B.visProp.layer||D.visProp.layer===B.visProp.layer&&D.lastDragTime.getTime()>=B.lastDragTime.getTime())&&(this.attr.ignorelabels&&l.exists(B.label)&&D===B.label||(A.push(B=D),l.exists(B.coords)?N.push(a.subtract(B.coords.scrCoords.slice(1),[h,y])):N.push([0,0])));return this.attr.drag.enabled&&A.length>0&&(this.mode=this.BOARD_MODE_DRAG),this.attr.takefirst?(A.length=1,this._drag_offset=N[0]):(A=A.slice(-1),this._drag_offset=N[N.length-1]),this._drag_offset||(this._drag_offset=[0,0]),"svg"===this.renderer.type&&l.exists(A[0])&&l.evaluate(A[0].visProp.dragtotopoflayer)&&1===A.length&&l.exists(A[0].rendNode)&&A[0].rendNode.parentNode.appendChild(A[0].rendNode),this.previousRotation=0,this.previousScale=1,A.length>=1&&(A[0].highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[b,A[0]])),A},moveObject:function(h,y,b,x,D){var M,O,A,N=new T(I.COORDS_BY_SCREEN,this.getScrCoordsOfMouse(h,y),this);b&&b.obj&&((M=b.obj).coords&&(O=M.coords.scrCoords.slice()),this.drag_position=[N.scrCoords[1],N.scrCoords[2]],this.drag_position=a.add(this.drag_position,this._drag_offset),l.exists(M.coords)?M.setPositionDirectly(I.COORDS_BY_SCREEN,this.drag_position):(this.displayInfobox(!1),isNaN(b.targets[0].Xprev+b.targets[0].Yprev)||M.setPositionDirectly(I.COORDS_BY_SCREEN,[N.scrCoords[1],N.scrCoords[2]],[b.targets[0].Xprev,b.targets[0].Yprev]),b.targets[0].Xprev=N.scrCoords[1],b.targets[0].Yprev=N.scrCoords[2]),l.exists(M.coords)&&(M.prepareUpdate().update(!1).updateRenderer(),this.updateInfobox(M),M.prepareUpdate().update(!0).updateRenderer()),M.coords&&(A=M.coords.scrCoords),M.coords&&O[1]===A[1]&&O[2]===A[2]||(M.triggerEventHandlers([D+"drag","drag"],[x]),this.update()),M.highlight(!0),this.triggerEventHandlers(["mousehit","hit"],[x,M]),M.lastDragTime=new Date)},twoFingerMove:function(h,y,b){var x;l.exists(h)&&l.exists(h.obj)&&((x=h.obj).elementClass===I.OBJECT_CLASS_LINE||x.type===I.OBJECT_TYPE_POLYGON?this.twoFingerTouchObject(h.targets,x,y):x.elementClass===I.OBJECT_CLASS_CIRCLE&&this.twoFingerTouchCircle(h.targets,x,y),b&&x.triggerEventHandlers(["touchdrag","drag"],[b]))},twoFingerTouchObject:function(h,y,b){var x,D,M,O,A,N,L,B,V,U,j,z,$,X,Z,W,ee=0;if(l.exists(h[0])&&l.exists(h[1])&&!isNaN(h[0].Xprev+h[0].Yprev+h[1].Xprev+h[1].Yprev)){if(b===h[0].num?(X=h[1],Z=h[0]):(X=h[0],Z=h[1]),W=new T(I.COORDS_BY_SCREEN,[X.Xprev,X.Yprev],this).usrCoords,D=new T(I.COORDS_BY_SCREEN,[Z.Xprev,Z.Yprev],this).usrCoords,x=new T(I.COORDS_BY_SCREEN,[Z.X,Z.Y],this).usrCoords,O=g.crossProduct(W,D),M=g.crossProduct(W,x),N=g.crossProduct(O,M),Math.abs(N[0])<g.eps)return;if(l.evaluate(y.visProp.rotatable)&&(ee=m.rad(D.slice(1),W.slice(1),x.slice(1))),(L=this.create("transform",[ee,[W[1],W[2]]],{type:"rotate"})).update(),l.evaluate(y.visProp.scalable)&&(A=m.distance(x,W)/m.distance(D,W),B=this.create("transform",[-W[1],-W[2]],{type:"translate"}),V=this.create("transform",[A,A],{type:"scale"}),U=this.create("transform",[W[1],W[2]],{type:"translate"}),L.melt(B).melt(V).melt(U)),y.elementClass===I.OBJECT_CLASS_LINE)j=[],y.point1.draggable()&&j.push(y.point1),y.point2.draggable()&&j.push(y.point2),L.applyOnce(j);else if(y.type===I.OBJECT_TYPE_POLYGON){for(j=[],$=y.vertices.length-1,z=0;z<$;++z)y.vertices[z].draggable()&&j.push(y.vertices[z]);L.applyOnce(j)}this.update(),y.highlight(!0)}},twoFingerTouchCircle:function(h,y,b){var x,D,M,O,A,N,L,B,V,U,j;"pointCircle"!==y.method&&"pointLine"!==y.method&&l.exists(h[0])&&l.exists(h[1])&&!isNaN(h[0].Xprev+h[0].Yprev+h[1].Xprev+h[1].Yprev)&&(b===h[0].num?(x=h[1],D=h[0]):(x=h[0],D=h[1]),A=new T(I.COORDS_BY_SCREEN,[x.Xprev,x.Yprev],this).usrCoords,O=new T(I.COORDS_BY_SCREEN,[D.Xprev,D.Yprev],this).usrCoords,M=new T(I.COORDS_BY_SCREEN,[D.X,D.Y],this).usrCoords,L=m.rad(O.slice(1),A.slice(1),M.slice(1)),B=this.create("transform",[-A[1],-A[2]],{type:"translate"}),V=this.create("transform",[L],{type:"rotate"}),B.melt(V),l.evaluate(y.visProp.scalable)&&(N=m.distance(A,M)/m.distance(A,O),U=this.create("transform",[N,N],{type:"scale"}),B.melt(U)),j=this.create("transform",[A[1],A[2]],{type:"translate"}),B.melt(j),y.center.draggable()&&B.applyOnce([y.center]),"twoPoints"===y.method?y.point2.draggable()&&B.applyOnce([y.point2]):"pointRadius"===y.method&&l.isNumber(y.updateRadius.origin)&&y.setRadius(y.radius*N),this.update(y.center),y.highlight(!0))},highlightElements:function(h,y,b,x){var D,M,O,A={},N=this.objectsList.length;for(D=0;D<N;D++)O=(M=this.objectsList[D]).id,l.exists(M.hasPoint)&&M.visPropCalc.visible&&M.hasPoint(h,y)&&(this.updateInfobox(M),l.exists(this.highlightedObjects[O])||(A[O]=M,M.highlight(),this.triggerEventHandlers(["mousehit","hit"],[b,M,x])),M.mouseover?M.triggerEventHandlers(["mousemove","move"],[b]):(M.triggerEventHandlers(["mouseover","over"],[b]),M.mouseover=!0));for(D=0;D<N;D++)O=(M=this.objectsList[D]).id,M.mouseover&&(A[O]||(M.triggerEventHandlers(["mouseout","out"],[b]),M.mouseover=!1))},saveStartPos:function(h,y){var b,x,D=[];if(h.type===I.OBJECT_TYPE_TICKS)D.push([1,NaN,NaN]);else if(h.elementClass===I.OBJECT_CLASS_LINE)D.push(h.point1.coords.usrCoords),D.push(h.point2.coords.usrCoords);else if(h.elementClass===I.OBJECT_CLASS_CIRCLE)D.push(h.center.coords.usrCoords),"twoPoints"===h.method&&D.push(h.point2.coords.usrCoords);else if(h.type===I.OBJECT_TYPE_POLYGON)for(x=h.vertices.length-1,b=0;b<x;b++)D.push(h.vertices[b].coords.usrCoords);else if(h.type===I.OBJECT_TYPE_SECTOR)D.push(h.point1.coords.usrCoords),D.push(h.point2.coords.usrCoords),D.push(h.point3.coords.usrCoords);else if(l.isPoint(h)||h.type===I.OBJECT_TYPE_GLIDER)D.push(h.coords.usrCoords);else if(h.elementClass===I.OBJECT_CLASS_CURVE)h.points.length>0&&D.push(h.points[0].usrCoords);else try{D.push(h.coords.usrCoords)}catch(M){E.debug("JSXGraph+ saveStartPos: obj.coords.usrCoords not available: "+M)}for(x=D.length,b=0;b<x;b++)y.Zstart.push(D[b][0]),y.Xstart.push(D[b][1]),y.Ystart.push(D[b][2])},mouseOriginMoveStart:function(h){var y,b;return(y=this._isRequiredKeyPressed(h,"pan"))&&(b=this.getMousePosition(h),this.initMoveOrigin(b[0],b[1])),y},mouseOriginMove:function(h){var y,b=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return b&&(y=this.getMousePosition(h),this.moveOrigin(y[0],y[1],!0)),b},touchStartMoveOriginOneFinger:function(h){var y,b;return(y=this.attr.pan.enabled&&!this.attr.pan.needtwofingers&&1===h[E.touchProperty].length)&&(b=this.getMousePosition(h,0),this.initMoveOrigin(b[0],b[1])),y},touchOriginMove:function(h){var y,b=this.mode===this.BOARD_MODE_MOVE_ORIGIN;return b&&(y=this.getMousePosition(h,0),this.moveOrigin(y[0],y[1],!0)),b},originMoveEnd:function(){this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE},addEventHandlers:function(){if(v.supportsPointerEvents()?this.addPointerEventHandlers():(this.addMouseEventHandlers(),this.addTouchEventHandlers()),null!==this.containerObj&&(this.containerObj.oncontextmenu=function(h){return l.exists(h)&&h.preventDefault(),!1}),this.addFullscreenEventHandlers(),this.addKeyboardEventHandlers(),v.isBrowser){try{this.startResizeObserver()}catch{v.addEvent(window,"resize",this.resizeListener,this),this.startIntersectionObserver()}v.addEvent(window,"scroll",this.scrollListener,this)}},removeEventHandlers:function(){this.removeMouseEventHandlers(),this.removeTouchEventHandlers(),this.removePointerEventHandlers(),this.removeFullscreenEventHandlers(),this.removeKeyboardEventHandlers(),v.isBrowser&&(l.exists(this.resizeObserver)?this.stopResizeObserver():(v.removeEvent(window,"resize",this.resizeListener,this),this.stopIntersectionObserver()),v.removeEvent(window,"scroll",this.scrollListener,this))},addPointerEventHandlers:function(){if(!this.hasPointerHandlers&&v.isBrowser){var h=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(v.addEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),v.addEvent(h,"MSPointerMove",this.pointerMoveListener,this)):(v.addEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),v.addEvent(h,"pointermove",this.pointerMoveListener,this)),v.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),v.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),null!==this.containerObj&&(this.containerObj.style.touchAction="none"),this.hasPointerHandlers=!0}},addMouseEventHandlers:function(){if(!this.hasMouseHandlers&&v.isBrowser){var h=this.attr.movetarget||this.containerObj;v.addEvent(this.containerObj,"mousedown",this.mouseDownListener,this),v.addEvent(h,"mousemove",this.mouseMoveListener,this),v.addEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),v.addEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!0}},addTouchEventHandlers:function(h){if(!this.hasTouchHandlers&&v.isBrowser){var y=this.attr.movetarget||this.containerObj;v.addEvent(this.containerObj,"touchstart",this.touchStartListener,this),v.addEvent(y,"touchmove",this.touchMoveListener,this),this.hasTouchHandlers=!0}},addFullscreenEventHandlers:function(){var h,y=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],b=y.length;if(!this.hasFullsceenEventHandlers&&v.isBrowser){for(h=0;h<b;h++)v.addEvent(this.document,y[h],this.fullscreenListener,this);this.hasFullsceenEventHandlers=!0}},addKeyboardEventHandlers:function(){this.attr.keyboard.enabled&&!this.hasKeyboardHandlers&&v.isBrowser&&(v.addEvent(this.containerObj,"keydown",this.keyDownListener,this),v.addEvent(this.containerObj,"focusin",this.keyFocusInListener,this),v.addEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!0)},removeKeyboardEventHandlers:function(){this.hasKeyboardHandlers&&v.isBrowser&&(v.removeEvent(this.containerObj,"keydown",this.keyDownListener,this),v.removeEvent(this.containerObj,"focusin",this.keyFocusInListener,this),v.removeEvent(this.containerObj,"focusout",this.keyFocusOutListener,this),this.hasKeyboardHandlers=!1)},removeFullscreenEventHandlers:function(){var h,y=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],b=y.length;if(this.hasFullsceenEventHandlers&&v.isBrowser){for(h=0;h<b;h++)v.removeEvent(this.document,y[h],this.fullscreenListener,this);this.hasFullsceenEventHandlers=!1}},removePointerEventHandlers:function(){if(this.hasPointerHandlers&&v.isBrowser){var h=this.attr.movetarget||this.containerObj;window.navigator.msPointerEnabled?(v.removeEvent(this.containerObj,"MSPointerDown",this.pointerDownListener,this),v.removeEvent(h,"MSPointerMove",this.pointerMoveListener,this)):(v.removeEvent(this.containerObj,"pointerdown",this.pointerDownListener,this),v.removeEvent(h,"pointermove",this.pointerMoveListener,this)),v.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),v.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasPointerUp&&(window.navigator.msPointerEnabled?v.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(v.removeEvent(this.document,"pointerup",this.pointerUpListener,this),v.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),this.hasPointerHandlers=!1}},removeMouseEventHandlers:function(){if(this.hasMouseHandlers&&v.isBrowser){var h=this.attr.movetarget||this.containerObj;v.removeEvent(this.containerObj,"mousedown",this.mouseDownListener,this),v.removeEvent(h,"mousemove",this.mouseMoveListener,this),this.hasMouseUp&&(v.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),v.removeEvent(this.containerObj,"mousewheel",this.mouseWheelListener,this),v.removeEvent(this.containerObj,"DOMMouseScroll",this.mouseWheelListener,this),this.hasMouseHandlers=!1}},removeTouchEventHandlers:function(){if(this.hasTouchHandlers&&v.isBrowser){var h=this.attr.movetarget||this.containerObj;v.removeEvent(this.containerObj,"touchstart",this.touchStartListener,this),v.removeEvent(h,"touchmove",this.touchMoveListener,this),this.hasTouchEnd&&(v.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.hasTouchHandlers=!1}},clickLeftArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]+.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickRightArrow:function(){return this.moveOrigin(this.origin.scrCoords[1]-.1*this.canvasWidth,this.origin.scrCoords[2]),this},clickUpArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]-.1*this.canvasHeight),this},clickDownArrow:function(){return this.moveOrigin(this.origin.scrCoords[1],this.origin.scrCoords[2]+.1*this.canvasHeight),this},gestureChangeListener:function(h){var y,b,x,D,M,O,A,N,L,B,V,U,j=!1,z=this.attr.zoom.factorx,$=this.attr.zoom.factory;return this.mode!==this.BOARD_MODE_ZOOM||(h.preventDefault(),O=m.distance([h.touches[0].clientX,h.touches[0].clientY],[h.touches[1].clientX,h.touches[1].clientY],2),void 0===h.scale&&(h.scale=O/this.prevDist),!!l.exists(this.prevCoords)&&(x=[h.touches[1].clientX-this.prevCoords[1][0],h.touches[1].clientY-this.prevCoords[1][1]],(b=[h.touches[0].clientX-this.prevCoords[0][0],h.touches[0].clientY-this.prevCoords[0][1]])[0]*b[0]+b[1]*b[1]<100&&x[0]*x[0]+x[1]*x[1]<100||(D=m.rad(b,[0,0],x),"pan"!==this.isPreviousGesture&&Math.abs(D)>.2*Math.PI&&Math.abs(D)<1.8*Math.PI&&(j=!0),"pan"===this.isPreviousGesture||j||(Math.abs(h.scale)<.77||Math.abs(h.scale)>1.3)&&(j=!0),M=h.scale/this.prevScale,this.prevScale=h.scale,this.prevCoords=[[h.touches[0].clientX,h.touches[0].clientY],[h.touches[1].clientX,h.touches[1].clientY]],y=new T(I.COORDS_BY_SCREEN,this.getMousePosition(h,0),this),this.attr.pan.enabled&&this.attr.pan.needtwofingers&&!j?(this.isPreviousGesture="pan",this.moveOrigin(y.scrCoords[1],y.scrCoords[2],!0)):this.attr.zoom.enabled&&Math.abs(M-1)<.5&&((this.attr.zoom.pinchhorizontal||this.attr.zoom.pinchvertical)&&(A=Math.abs(h.touches[0].clientX-h.touches[1].clientX),N=Math.abs(h.touches[0].clientY-h.touches[1].clientY),L=Math.abs(Math.atan2(N,A)),U=Math.PI*this.attr.zoom.pinchsensitivity/90),this.attr.zoom.pinchhorizontal&&L<U?(this.attr.zoom.factorx=M,this.attr.zoom.factory=1,B=0,V=0):this.attr.zoom.pinchvertical&&Math.abs(L-.5*Math.PI)<U?(this.attr.zoom.factorx=1,this.attr.zoom.factory=M,B=0,V=0):(this.attr.zoom.factorx=M,this.attr.zoom.factory=M,B=y.usrCoords[1],V=y.usrCoords[2]),this.zoomIn(B,V),this.attr.zoom.factorx=z,this.attr.zoom.factory=$)),!1))},gestureStartListener:function(h){var y;return h.preventDefault(),this.prevScale=1,this.prevDist=m.distance([h.touches[0].clientX,h.touches[0].clientY],[h.touches[1].clientX,h.touches[1].clientY],2),this.prevCoords=[[h.touches[0].clientX,h.touches[0].clientY],[h.touches[1].clientX,h.touches[1].clientY]],this.isPreviousGesture="none",y=this.getMousePosition(h,0),this.initMoveOrigin(y[0],y[1]),this.mode=this.BOARD_MODE_ZOOM,!1},_isRequiredKeyPressed:function(h,y){var b=this.attr[y];return!!b.enabled&&!(!(b.needshift&&h.shiftKey||!b.needshift&&!h.shiftKey)||!(b.needctrl&&h.ctrlKey||!b.needctrl&&!h.ctrlKey))},_isPointerRegistered:function(h){var y,b=this._board_touches.length;for(y=0;y<b;y++)if(this._board_touches[y].pointerId===h.pointerId)return!0;return!1},_pointerStorePosition:function(h){var y,b;for(y=0,b=!1;y<this._board_touches.length;y++)if(this._board_touches[y].pointerId===h.pointerId){this._board_touches[y].clientX=h.clientX,this._board_touches[y].clientY=h.clientY,b=!0;break}return!b&&this._board_touches.length<2&&this._board_touches.push({pointerId:h.pointerId,clientX:h.clientX,clientY:h.clientY}),this},_pointerRemoveTouches:function(h){var y;for(y=0;y<this._board_touches.length;y++)if(this._board_touches[y].pointerId===h.pointerId){this._board_touches.splice(y,1);break}return this},_pointerClearTouches:function(){this._board_touches.length>0&&this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode=this.BOARD_MODE_NONE,this._board_touches=[],this.touches=[]},_getPointerInputDevice:function(h){if(v.isBrowser){if("touch"===h.pointerType||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>1)return"touch";if("mouse"===h.pointerType)return"mouse";if("pen"===h.pointerType)return"pen"}return"mouse"},pointerDownListener:function(h,y){var b,x,D,M,O,A,N,L,B,V;if(!y&&this._isPointerRegistered(h))return!1;if(!y&&h.isPrimary&&this._pointerClearTouches(),this.hasPointerUp||(window.navigator.msPointerEnabled?v.addEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(v.addEvent(this.document,"pointerup",this.pointerUpListener,this),v.addEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!0),this.hasMouseHandlers&&this.removeMouseEventHandlers(),this.hasTouchHandlers&&this.removeTouchEventHandlers(),this.document.selection&&l.isFunction(this.document.selection.empty))this.document.selection.empty();else if(window.getSelection&&(A=window.getSelection()).removeAllRanges)try{A.removeAllRanges()}catch{}if(this._inputDevice=this._getPointerInputDevice(h),this.options.precision.hasPoint=this.options.precision[L=this._inputDevice],M=this.getMousePosition(h),this._testForSelection(h),this.selectingMode)return this._startSelecting(M),void this.triggerEventHandlers(["touchstartselecting","pointerstartselecting","startselecting"],[h]);if(this.attr.drag.enabled&&y?(O=[y],this.mode=this.BOARD_MODE_DRAG):O=this.initMoveObject(M[0],M[1],h,L),N={num:h.pointerId,X:M[0],Y:M[1],Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},O.length>0){for(V=O[O.length-1],B=!1,b=0;b<this.touches.length;b++)if(this.touches[b].obj===V){x=b,D=this.touches[b].targets.push(N)-1,B=!0;break}B||(D=0,x=this.touches.push({obj:V,targets:[N]})-1),this.dehighlightAll(),V.highlight(!0),this.saveStartPos(V,this.touches[x].targets[D]),h&&h.preventDefault?h.preventDefault():window.event&&(window.event.returnValue=!1)}return this.touches.length>0&&(h.preventDefault(),h.stopPropagation()),!!v.isBrowser&&("touch"!==this._getPointerInputDevice(h)?this.mode===this.BOARD_MODE_NONE&&this.mouseOriginMoveStart(h):(this._pointerStorePosition(h),h.touches=this._board_touches,1===h.touches.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(h)||2!==h.touches.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(h))),this.triggerEventHandlers(["touchstart","down","pointerdown","MSPointerDown"],[h]),!1)},pointerMoveListener:function(h){var y,b,x,D,M;if("touch"===this._getPointerInputDevice(h)&&!this._isPointerRegistered(h))return this.BOARD_MODE_NONE;if(!this.checkFrameRate(h))return!1;if(this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.mode!==this.BOARD_MODE_NONE&&(h.preventDefault(),h.stopPropagation()),this.updateQuality=this.BOARD_QUALITY_LOW,this._inputDevice=this._getPointerInputDevice(h),this.options.precision.hasPoint=this.options.precision[M=this._inputDevice],this.selectingMode)x=this.getMousePosition(h),this._moveSelecting(x),this.triggerEventHandlers(["touchmoveselecting","moveselecting","pointermoveselecting"],[h,this.mode]);else if(!this.mouseOriginMove(h))if(this.mode===this.BOARD_MODE_DRAG){for(y=0;y<this.touches.length;y++)for(D=this.touches[y].targets,b=0;b<D.length;b++)if(D[b].num===h.pointerId){x=this.getMousePosition(h),D[b].X=x[0],D[b].Y=x[1],1===D.length?this.moveObject(x[0],x[1],this.touches[y],h,M):2===D.length&&(this.twoFingerMove(this.touches[y],h.pointerId,h),D[b].Xprev=x[0],D[b].Yprev=x[1]);break}}else"touch"===this._getPointerInputDevice(h)&&(this._pointerStorePosition(h),2===this._board_touches.length&&(h.touches=this._board_touches,this.gestureChangeListener(h))),x=this.getMousePosition(h),this.highlightElements(x[0],x[1],h,-1);return this.triggerEventHandlers(["touchmove","move","pointermove","MSPointerMove"],[h,this.mode]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},pointerUpListener:function(h){var y,b,x,D,M=!1;if(this.triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[h]),this.displayInfobox(!1),h)for(y=0;y<this.touches.length;y++)for(D=this.touches[y].targets,b=0;b<D.length;b++)if(D[b].num===h.pointerId){D.splice(b,1),0===D.length&&this.touches.splice(y,1);break}if(this.originMoveEnd(),this.update(),this.selectingMode)this._stopSelecting(h),this.triggerEventHandlers(["touchstopselecting","pointerstopselecting","stopselecting"],[h]),this.stopSelectionMode();else for(y=this.downObjects.length-1;y>-1;y--){for(x=!1,b=0;b<this.touches.length;b++)this.touches[b].obj.id===this.downObjects[y].id&&(x=!0);x||(this.downObjects[y].triggerEventHandlers(["touchend","up","pointerup","MSPointerUp"],[h]),l.exists(this.downObjects[y].coords)||(this.downObjects[y].snapToGrid(),this.downObjects[y].snapToPoints(),M=!0),this.downObjects.splice(y,1))}return this.hasPointerUp&&(window.navigator.msPointerEnabled?v.removeEvent(this.document,"MSPointerUp",this.pointerUpListener,this):(v.removeEvent(this.document,"pointerup",this.pointerUpListener,this),v.removeEvent(this.document,"pointercancel",this.pointerUpListener,this)),this.hasPointerUp=!1),M&&this.update(),this._pointerClearTouches(),!0},touchStartListener:function(h){var y,b,x,D,M,O,A,N,L,B,V=this.options.precision.touch,U=h[E.touchProperty];for(this.hasTouchEnd||(v.addEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!0),this.document.selection&&l.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,y=0;y<U.length;y++)U[y].jxg_isused=!1;for(y=0;y<this.touches.length;y++)for(B=this.touches[y].targets,D=0;D<B.length;D++){B[D].num=-1,V=this.options.precision.touch;do{for(M=0;M<U.length;M++)if(Math.abs(Math.pow(U[M].screenX-B[D].X,2)+Math.pow(U[M].screenY-B[D].Y,2))<V*V){B[D].num=M,B[D].X=U[M].screenX,B[D].Y=U[M].screenY,U[M].jxg_isused=!0;break}V*=2}while(-1===B[D].num&&V<this.options.precision.touchMax);-1===B[D].num&&(E.debug("i couldn't find a targettouches for target no "+D+" on "+this.touches[y].obj.name+" ("+this.touches[y].obj.id+"). Removed the target."),E.debug("eps = "+V+", touchMax = "+S.precision.touchMax),B.splice(y,1))}for(y=0;y<U.length;y++)if(!U[y].jxg_isused){if(b=this.getMousePosition(h,y),this.selectingMode)return this._startSelecting(b),this.triggerEventHandlers(["touchstartselecting","startselecting"],[h]),h.preventDefault(),h.stopPropagation(),this.options.precision.hasPoint=this.options.precision.mouse,this.touches.length>0;if(0!==(x=this.initMoveObject(b[0],b[1],h,"touch")).length)if(L={num:y,X:U[y].screenX,Y:U[y].screenY,Xprev:NaN,Yprev:NaN,Xstart:[],Ystart:[],Zstart:[]},l.isPoint(O=x[x.length-1])||O.elementClass===I.OBJECT_CLASS_TEXT||O.type===I.OBJECT_TYPE_TICKS||O.type===I.OBJECT_TYPE_IMAGE)this.saveStartPos(O,(N=[L])[0]),this.touches.push({obj:O,targets:N}),O.highlight(!0);else if(O.elementClass===I.OBJECT_CLASS_LINE||O.elementClass===I.OBJECT_CLASS_CIRCLE||O.elementClass===I.OBJECT_CLASS_CURVE||O.type===I.OBJECT_TYPE_POLYGON){for(A=!1,D=0;D<this.touches.length;D++)O.id===this.touches[D].obj.id&&(A=!0,1===this.touches[D].targets.length&&(this.saveStartPos(O,L),this.touches[D].targets.push(L)),U[y].jxg_isused=!0);A||(this.saveStartPos(O,(N=[L])[0]),this.touches.push({obj:O,targets:N}),O.highlight(!0))}U[y].jxg_isused=!0}return this.touches.length>0&&(h.preventDefault(),h.stopPropagation()),1===U.length&&this.mode===this.BOARD_MODE_NONE&&this.touchStartMoveOriginOneFinger(h)||2!==U.length||this.mode!==this.BOARD_MODE_NONE&&this.mode!==this.BOARD_MODE_MOVE_ORIGIN||(this.mode===this.BOARD_MODE_MOVE_ORIGIN&&this.originMoveEnd(),this.gestureStartListener(h)),this.options.precision.hasPoint=this.options.precision.mouse,this.triggerEventHandlers(["touchstart","down"],[h]),!1},touchMoveListener:function(h){var y,b,x,D,M=h[E.touchProperty];if(!this.checkFrameRate(h))return!1;if(this.mode!==this.BOARD_MODE_NONE&&(h.preventDefault(),h.stopPropagation()),this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this._inputDevice="touch",this.options.precision.hasPoint=this.options.precision.touch,this.updateQuality=this.BOARD_QUALITY_LOW,this.selectingMode){for(y=0;y<M.length;y++)if(!M[y].jxg_isused){b=this.getMousePosition(h,y),this._moveSelecting(b),this.triggerEventHandlers(["touchmoves","moveselecting"],[h,this.mode]);break}}else if(!this.touchOriginMove(h))if(this.mode===this.BOARD_MODE_DRAG){for(y=0;y<this.touches.length;y++)if(1===(D=this.touches[y].targets).length){if(M[D[0].num]){if((b=this.getMousePosition(h,D[0].num))[0]<0||b[0]>this.canvasWidth||b[1]<0||b[1]>this.canvasHeight)return;D[0].X=b[0],D[0].Y=b[1],this.moveObject(b[0],b[1],this.touches[y],h,"touch")}}else if(2===D.length&&D[0].num>-1&&D[1].num>-1&&M[D[0].num]&&M[D[1].num]){if(b=this.getMousePosition(h,D[0].num),x=this.getMousePosition(h,D[1].num),b[0]<0||b[0]>this.canvasWidth||b[1]<0||b[1]>this.canvasHeight||x[0]<0||x[0]>this.canvasWidth||x[1]<0||x[1]>this.canvasHeight)return;D[0].X=b[0],D[0].Y=b[1],D[1].X=x[0],D[1].Y=x[1],this.twoFingerMove(this.touches[y],D[0].num,h),this.twoFingerMove(this.touches[y],D[1].num),D[0].Xprev=b[0],D[0].Yprev=b[1],D[1].Xprev=x[0],D[1].Yprev=x[1]}}else 2===M.length&&this.gestureChangeListener(h),b=this.getMousePosition(h,0),this.highlightElements(b[0],b[1],h,-1);return this.mode!==this.BOARD_MODE_DRAG&&this.displayInfobox(!1),this.triggerEventHandlers(["touchmove","move"],[h,this.mode]),this.options.precision.hasPoint=this.options.precision.mouse,this.updateQuality=this.BOARD_QUALITY_HIGH,this.mode===this.BOARD_MODE_NONE},touchEndListener:function(h){var y,b,x,D,M,O,A=this.options.precision.touch,N=[],L=h&&h[E.touchProperty],B=!1;if(this.triggerEventHandlers(["touchend","up"],[h]),this.displayInfobox(!1),this.selectingMode)this._stopSelecting(h),this.triggerEventHandlers(["touchstopselecting","stopselecting"],[h]),this.stopSelectionMode();else if(L&&L.length>0){for(y=0;y<this.touches.length;y++)N[y]=this.touches[y];for(this.touches.length=0,y=0;y<L.length;y++)L[y].jxg_isused=!1;for(y=0;y<N.length;y++){for(D=!1,M=0,O=N[y].targets,b=0;b<O.length;b++)for(O[b].found=!1,x=0;x<L.length;x++)if(Math.abs(Math.pow(L[x].screenX-O[b].X,2)+Math.pow(L[x].screenY-O[b].Y,2))<A*A){O[b].found=!0,O[b].num=x,O[b].X=L[x].screenX,O[b].Y=L[x].screenY,M+=1;break}if(l.isPoint(N[y].obj)?D=O[0]&&O[0].found:N[y].obj.elementClass===I.OBJECT_CLASS_LINE?D=O[0]&&O[0].found||O[1]&&O[1].found:N[y].obj.elementClass===I.OBJECT_CLASS_CIRCLE&&(D=1===M||3===M),D)for(this.touches.push({obj:N[y].obj,targets:[]}),b=0;b<O.length;b++)O[b].found&&this.touches[this.touches.length-1].targets.push({num:O[b].num,X:O[b].screenX,Y:O[b].screenY,Xprev:NaN,Yprev:NaN,Xstart:O[b].Xstart,Ystart:O[b].Ystart,Zstart:O[b].Zstart});else N[y].obj.noHighlight()}}else this.touches.length=0;for(y=this.downObjects.length-1;y>-1;y--){for(D=!1,b=0;b<this.touches.length;b++)this.touches[b].obj.id===this.downObjects[y].id&&(D=!0);D||(this.downObjects[y].triggerEventHandlers(["touchup","up"],[h]),l.exists(this.downObjects[y].coords)||(this.downObjects[y].snapToGrid(),this.downObjects[y].snapToPoints(),B=!0),this.downObjects.splice(y,1))}return L&&0!==L.length||(this.hasTouchEnd&&(v.removeEvent(this.document,"touchend",this.touchEndListener,this),this.hasTouchEnd=!1),this.dehighlightAll(),this.updateQuality=this.BOARD_QUALITY_HIGH,this.originMoveEnd(),B&&this.update()),!0},mouseDownListener:function(h){var y,b,x;if(this.document.selection&&l.isFunction(this.document.selection.empty)?this.document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!this.hasMouseUp)return v.addEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!0,this._inputDevice="mouse",this.options.precision.hasPoint=this.options.precision.mouse,y=this.getMousePosition(h),this._testForSelection(h),this.selectingMode?(this._startSelecting(y),void this.triggerEventHandlers(["mousestartselecting","startselecting"],[h])):(0===(b=this.initMoveObject(y[0],y[1],h,"mouse")).length?(this.mode=this.BOARD_MODE_NONE,x=!0):(this.mouse={obj:null,targets:[{X:y[0],Y:y[1],Xprev:NaN,Yprev:NaN}]},this.mouse.obj=b[b.length-1],this.dehighlightAll(),this.mouse.obj.highlight(!0),this.mouse.targets[0].Xstart=[],this.mouse.targets[0].Ystart=[],this.mouse.targets[0].Zstart=[],this.saveStartPos(this.mouse.obj,this.mouse.targets[0]),h&&h.preventDefault?h.preventDefault():window.event&&(window.event.returnValue=!1)),this.mode===this.BOARD_MODE_NONE&&(x=this.mouseOriginMoveStart(h)),this.triggerEventHandlers(["mousedown","down"],[h]),x)},mouseMoveListener:function(h){var y;if(!this.checkFrameRate(h))return!1;y=this.getMousePosition(h),this.updateQuality=this.BOARD_QUALITY_LOW,this.mode!==this.BOARD_MODE_DRAG&&(this.dehighlightAll(),this.displayInfobox(!1)),this.selectingMode?(this._moveSelecting(y),this.triggerEventHandlers(["mousemoveselecting","moveselecting"],[h,this.mode])):this.mouseOriginMove(h)||(this.mode===this.BOARD_MODE_DRAG?this.moveObject(y[0],y[1],this.mouse,h,"mouse"):this.highlightElements(y[0],y[1],h,-1),this.triggerEventHandlers(["mousemove","move"],[h,this.mode])),this.updateQuality=this.BOARD_QUALITY_HIGH},mouseUpListener:function(h){var y;if(!1===this.selectingMode&&this.triggerEventHandlers(["mouseup","up"],[h]),this.updateQuality=this.BOARD_QUALITY_HIGH,this.mouse&&this.mouse.obj&&(l.exists(this.mouse.obj.coords)||(this.mouse.obj.snapToGrid(this.mouse.targets[0]),this.mouse.obj.snapToPoints())),this.originMoveEnd(),this.dehighlightAll(),this.update(),this.selectingMode)this._stopSelecting(h),this.triggerEventHandlers(["mousestopselecting","stopselecting"],[h]),this.stopSelectionMode();else for(y=0;y<this.downObjects.length;y++)this.downObjects[y].triggerEventHandlers(["mouseup","up"],[h]);this.downObjects.length=0,this.hasMouseUp&&(v.removeEvent(this.document,"mouseup",this.mouseUpListener,this),this.hasMouseUp=!1),this.mouse=null},mouseWheelListener:function(h){if(!this.attr.zoom.wheel||!this._isRequiredKeyPressed(h,"zoom"))return!0;var y=(h=h||window.event).detail?-h.detail:h.wheelDelta/40,b=new T(I.COORDS_BY_SCREEN,this.getMousePosition(h),this);return y>0?this.zoomIn(b.usrCoords[1],b.usrCoords[2]):this.zoomOut(b.usrCoords[1],b.usrCoords[2]),this.triggerEventHandlers(["mousewheel"],[h]),h.preventDefault(),!1},keyDownListener:function(h){var y,b,x,D,M,O,A=h.target.id,N=0,L=0,B=l.evaluate(this.attr.keyboard.dx)/this.unitX,V=l.evaluate(this.attr.keyboard.dy)/this.unitY,U=!1,j=!0;return!(!this.attr.keyboard.enabled||""===A)&&(!(D=this.containerObj.shadowRoot||document).activeElement||"INPUT"!==(b=D.activeElement).tagName&&"textarea"!==b.tagName)&&(y=A.replace(this.containerObj.id+"_",""),b=this.select(y),l.exists(b.coords)&&(O=b.coords.usrCoords.slice(1)),l.evaluate(this.attr.keyboard.panshift)&&h.shiftKey||l.evaluate(this.attr.keyboard.panctrl)&&h.ctrlKey?(!0===l.evaluate(this.attr.zoom.enabled)&&(U=!0),38===h.keyCode?this.clickUpArrow():40===h.keyCode?this.clickDownArrow():37===h.keyCode?this.clickLeftArrow():39===h.keyCode?this.clickRightArrow():U&&171===h.keyCode?this.zoomIn():U&&173===h.keyCode?this.zoomOut():U&&79===h.keyCode?this.zoom100():j=!1):(l.exists(b.visProp)&&(l.exists(b.visProp.snaptogrid)&&b.visProp.snaptogrid&&l.evaluate(b.visProp.snapsizex)&&l.evaluate(b.visProp.snapsizey)?(N=(x=b.getSnapSizes())[0],L=x[1],B=Math.max(N,B),V=Math.max(L,V)):l.exists(b.visProp.attracttogrid)&&b.visProp.attracttogrid&&l.evaluate(b.visProp.attractordistance)&&l.evaluate(b.visProp.attractorunit)&&(L=N=1.1*l.evaluate(b.visProp.attractordistance),"screen"===l.evaluate(b.visProp.attractorunit)&&(N/=this.unitX,L/=this.unitX),B=Math.max(N,B),V=Math.max(L,V))),38===h.keyCode?M=[0,V]:40===h.keyCode?M=[0,-V]:37===h.keyCode?M=[-B,0]:39===h.keyCode?M=[B,0]:j=!1,M&&b.isDraggable&&b.visPropCalc.visible&&(this.geonextCompatibilityMode&&(l.isPoint(b)||b.elementClass===I.OBJECT_CLASS_TEXT)||!this.geonextCompatibilityMode)&&!l.evaluate(b.visProp.fixed)&&(l.exists(b.coords)&&(M[0]+=O[0],M[1]+=O[1]),b.setPosition(E.COORDS_BY_USER,M),l.exists(b.coords)&&this.updateInfobox(b),this.triggerEventHandlers(["hit"],[h,b]))),this.update(),j&&l.exists(h.preventDefault)&&h.preventDefault(),j)},keyFocusInListener:function(h){var y,b,x=h.target.id;if(!this.attr.keyboard.enabled||""===x)return!1;y=x.replace(this.containerObj.id+"_",""),b=this.select(y),l.exists(b.highlight)&&b.highlight(!0),l.exists(b.coords)&&this.updateInfobox(b),this.triggerEventHandlers(["hit"],[h,b])},keyFocusOutListener:function(h){if(!this.attr.keyboard.enabled)return!1;this.dehighlightAll(),this.displayInfobox(!1)},updateContainerDims:function(){var h,y,b,x;h=(b=this.containerObj.getBoundingClientRect()).width,y=b.height,window&&window.getComputedStyle&&(x=window.getComputedStyle(this.containerObj,null),h-=parseFloat(x.getPropertyValue("border-left-width"))+parseFloat(x.getPropertyValue("border-right-width")),y-=parseFloat(x.getPropertyValue("border-top-width"))+parseFloat(x.getPropertyValue("border-bottom-width"))),h<=0||y<=0||isNaN(h)||isNaN(y)||(isNaN(this.getBoundingBox()[0])&&this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"keep"),l.exists(this._prevDim)&&this._prevDim.w===h&&this._prevDim.h===y||(this.resizeContainer(h,y,!0),this._prevDim={w:h,h:y}))},startResizeObserver:function(){var h=this;v.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this.resizeObserver=new ResizeObserver(function(y){h._isResizing||(h._isResizing=!0,window.setTimeout(function(){try{h.updateContainerDims()}catch{h.stopResizeObserver()}finally{h._isResizing=!1}},h.attr.resize.throttle))}),this.resizeObserver.observe(this.containerObj))},stopResizeObserver:function(){v.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&l.exists(this.resizeObserver)&&this.resizeObserver.unobserve(this.containerObj)},resizeListener:function(){var h=this;v.isBrowser&&this.attr.resize&&this.attr.resize.enabled&&(this._isScrolling||this._isResizing||(this._isResizing=!0,window.setTimeout(function(){h.updateContainerDims(),h._isResizing=!1},this.attr.resize.throttle)))},scrollListener:function(h){var y=this;v.isBrowser&&(this._isScrolling||(this._isScrolling=!0,window.setTimeout(function(){y._isScrolling=!1},66)))},startIntersectionObserver:function(){var h=this;try{this.intersectionObserver=new IntersectionObserver(function(y){isNaN(h.getBoundingBox()[0])&&h.updateContainerDims()},{root:null,rootMargin:"0px",threshold:.8}),this.intersectionObserver.observe(h.containerObj)}catch{console.log("JSXGraph: IntersectionObserver not available in this browser.")}},stopIntersectionObserver:function(){l.exists(this.intersectionObserver)&&this.intersectionObserver.unobserve(this.containerObj)},initInfobox:function(){var h=l.copyAttributes({},this.options,"infobox");return h.id=this.id+"_infobox",this.infobox=this.create("text",[0,0,"0,0"],h),this.infobox.distanceX=-20,this.infobox.distanceY=25,this.infobox.dump=!1,this.displayInfobox(!1),this},updateInfobox:function(h){var y,b,x,D,M,O=l.evaluate(h.visProp.showinfobox);return!l.evaluate(this.attr.showinfobox)&&"inherit"===O||!O||l.isPoint(h)&&(x=h.coords.usrCoords[1],D=h.coords.usrCoords[2],M=l.evaluate(h.visProp.infoboxdigits),this.infobox.setCoords(x+this.infobox.distanceX/this.unitX,D+this.infobox.distanceY/this.unitY),"string"!=typeof h.infoboxText?("auto"===M?(y=l.autoDigits(x),b=l.autoDigits(D)):l.isNumber(M)?(y=l.toFixed(x,M),b=l.toFixed(D,M)):(y=x,b=D),this.highlightInfobox(y,b,h)):this.highlightCustomInfobox(h.infoboxText,h),this.displayInfobox(!0)),this},displayInfobox:function(h){return this.infobox.hiddenByParent===h&&(this.infobox.hiddenByParent=!h,this.infobox.prepareUpdate().updateVisibility(h).updateRenderer()),this},showInfobox:function(h){return this.displayInfobox(h)},highlightInfobox:function(h,y,b){return this.highlightCustomInfobox("("+h+", "+y+")",b),this},highlightCustomInfobox:function(h,y){return this.infobox.setText(h),this},dehighlightAll:function(){var h,b=!1;for(h in this.highlightedObjects)this.highlightedObjects.hasOwnProperty(h)&&((this.hasMouseHandlers||this.hasPointerHandlers)&&this.highlightedObjects[h].noHighlight(),b=!0);return this.highlightedObjects={},"canvas"===this.renderer.type&&b&&(this.prepareUpdate(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw()),this},getScrCoordsOfMouse:function(h,y){return[h,y]},getUsrCoordsOfMouse:function(h){var y=this.getCoordsTopLeftCorner(),b=v.getPosition(h,null,this.document);return new T(I.COORDS_BY_SCREEN,[b[0]-y[0],b[1]-y[1]],this).usrCoords.slice(1)},getAllUnderMouse:function(h){var y=this.getAllObjectsUnderMouse(h);return y.push(this.getUsrCoordsOfMouse(h)),y},getAllObjectsUnderMouse:function(h){var y,b,x=this.getCoordsTopLeftCorner(),D=v.getPosition(h,null,this.document),M=D[0]-x[0],O=D[1]-x[1],A=[],N=this.objectsList.length;for(y=0;y<N;y++)(b=this.objectsList[y]).visPropCalc.visible&&b.hasPoint&&b.hasPoint(M,O)&&(A[A.length]=b);return A},updateCoords:function(){var h,y,b=this.objectsList.length;for(y=0;y<b;y++)l.exists((h=this.objectsList[y]).coords)&&(l.evaluate(h.visProp.frozen)?h.coords.screen2usr():h.coords.usr2screen());return this},moveOrigin:function(h,y,b){var x,D,M,O;return l.exists(h)&&l.exists(y)&&(x=this.origin.scrCoords[1],D=this.origin.scrCoords[2],this.origin.scrCoords[1]=h,this.origin.scrCoords[2]=y,b&&(this.origin.scrCoords[1]-=this.drag_dx,this.origin.scrCoords[2]-=this.drag_dy),M=new T(I.COORDS_BY_SCREEN,[0,0],this).usrCoords,O=new T(I.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords,(M[1]<this.maxboundingbox[0]||M[2]>this.maxboundingbox[1]||O[1]>this.maxboundingbox[2]||O[2]<this.maxboundingbox[3])&&(this.origin.scrCoords[1]=x,this.origin.scrCoords[2]=D)),this.updateCoords().clearTraces().fullUpdate(),this.triggerEventHandlers(["boundingbox"]),this},addConditions:function(h){var y,b,x,D,M,O,A,N=[],L=h.indexOf("<data>"),B=h.indexOf("</data>"),V=function(X,Z,W,ee){return function(){var ie,re;re=(ie=X.select(Z.id)).coords.usrCoords[ee],ie.setPositionDirectly(I.COORDS_BY_USER,2===ee?[W(),re]:[re,W()]),ie.prepareUpdate().update()}},U=function(X,Z,W){return function(){var ee,ie;ee=X.select(Z.id),ie=W(),ee.setAttribute({visible:ie})}},j=function(X,Z,W,ee){return function(){var ie,re;ie=X.select(Z.id),re=W(),"strokewidth"===ee?ie.visProp.strokewidth=re:(re=c.rgba2rgbo(re),ie.visProp[ee+"color"]=re[0],ie.visProp[ee+"opacity"]=re[1])}},z=function(X,Z,W){return function(){X.select(Z.id).position=W()}},$=function(X,Z,W){return function(){X.select(Z.id).setStyle(W())}};if(!(L<0)){for(;L>=0;){if(b=(y=h.slice(L+6,B)).indexOf("="),x=y.slice(0,b),D=y.slice(b+1),b=x.indexOf("."),M=x.slice(0,b),O=this.elementsByName[l.unescapeHTML(M)],A=x.slice(b+1).replace(/\s+/g,"").toLowerCase(),D=l.createFunction(D,this,"",!0),l.exists(this.elementsByName[M]))switch(A){case"x":N.push(V(this,O,D,2));break;case"y":N.push(V(this,O,D,1));break;case"visible":N.push(U(this,O,D));break;case"position":N.push(z(this,O,D));break;case"stroke":N.push(j(this,O,D,"stroke"));break;case"style":N.push($(this,O,D));break;case"strokewidth":N.push(j(this,O,D,"strokewidth"));break;case"fill":N.push(j(this,O,D,"fill"));break;case"label":break;default:E.debug("property '"+A+"' in conditions not yet implemented:"+D)}else E.debug("debug conditions: |"+M+"| undefined");L=(h=h.slice(B+7)).indexOf("<data>"),B=h.indexOf("</data>")}this.updateConditions=function(){var X;for(X=0;X<N.length;X++)N[X]();return this.prepareUpdate().updateElements(),!0},this.updateConditions()}},updateConditions:function(){return!1},calculateSnapSizes:function(){var h=new T(I.COORDS_BY_USER,[0,0],this),y=new T(I.COORDS_BY_USER,[this.options.grid.gridX,this.options.grid.gridY],this),b=h.scrCoords[1]-y.scrCoords[1],x=h.scrCoords[2]-y.scrCoords[2];for(this.options.grid.snapSizeX=this.options.grid.gridX;Math.abs(b)>25;)this.options.grid.snapSizeX*=2,b/=2;for(this.options.grid.snapSizeY=this.options.grid.gridY;Math.abs(x)>25;)this.options.grid.snapSizeY*=2,x/=2;return this},applyZoom:function(){return this.updateCoords().calculateSnapSizes().clearTraces().fullUpdate(),this},zoomIn:function(h,y){var b=this.getBoundingBox(),x=this.attr.zoom.factorx,D=this.attr.zoom.factory,M=(b[2]-b[0])*(1-1/x),O=(b[1]-b[3])*(1-1/D),A=.5,N=.5,L=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX>this.attr.zoom.max&&x>1||this.zoomY>this.attr.zoom.max&&D>1||this.zoomX<L&&x<1||this.zoomY<L&&D<1?this:(l.isNumber(h)&&l.isNumber(y)&&(A=(h-b[0])/(b[2]-b[0]),N=(b[1]-y)/(b[1]-b[3])),this.setBoundingBox([b[0]+M*A,b[1]-O*N,b[2]-M*(1-A),b[3]+O*(1-N)],this.keepaspectratio,"update"),this.applyZoom())},zoomOut:function(h,y){var b=this.getBoundingBox(),M=(b[2]-b[0])*(1-this.attr.zoom.factorx),O=(b[1]-b[3])*(1-this.attr.zoom.factory),A=.5,N=.5,L=this.attr.zoom.eps||this.attr.zoom.min||.001;return this.zoomX<L||this.zoomY<L?this:(l.isNumber(h)&&l.isNumber(y)&&(A=(h-b[0])/(b[2]-b[0]),N=(b[1]-y)/(b[1]-b[3])),this.setBoundingBox([b[0]+M*A,b[1]-O*N,b[2]-M*(1-A),b[3]+O*(1-N)],this.keepaspectratio,"update"),this.applyZoom())},zoom100:function(){var h,y,b;return l.exists(this.attr.boundingbox)?this.setBoundingBox(this.attr.boundingbox,this.keepaspectratio,"reset"):(y=((h=this.getBoundingBox())[2]-h[0])*(1-this.zoomX)*.5,this.setBoundingBox([h[0]+y,h[1]-(b=(h[1]-h[3])*(1-this.zoomY)*.5),h[2]-y,h[3]+b],this.keepaspectratio,"reset")),this.applyZoom()},zoomAllPoints:function(){var h,y,b,x,D=0,M=0,O=0,A=0,N=this.objectsList.length;for(h=0;h<N;h++)l.isPoint(x=this.objectsList[h])&&x.visPropCalc.visible&&(x.coords.usrCoords[1]<D?D=x.coords.usrCoords[1]:x.coords.usrCoords[1]>M&&(M=x.coords.usrCoords[1]),x.coords.usrCoords[2]>A?A=x.coords.usrCoords[2]:x.coords.usrCoords[2]<O&&(O=x.coords.usrCoords[2]));return this.setBoundingBox([D-(y=50/this.unitX),A+(b=50/this.unitY),M+y,O-b],this.keepaspectratio,"update"),this.applyZoom()},zoomElements:function(h){var y,b,x,D,A,N=[1/0,-1/0,-1/0,1/0];if(!l.isArray(h)||0===h.length)return this;for(y=0;y<h.length;y++)b=this.select(h[y]).bounds(),l.isArray(b)&&(b[0]<N[0]&&(N[0]=b[0]),b[1]>N[1]&&(N[1]=b[1]),b[2]>N[2]&&(N[2]=b[2]),b[3]<N[3]&&(N[3]=b[3]));return l.isArray(N)&&(x=.5*(N[0]+N[2]),D=.5*(N[1]+N[3]),A=Math.max(1.5*(N[2]-N[0])*.5,1.5*(N[1]-N[3])*.5),this.setBoundingBox([x-A,D+A,x+A,D-A],this.keepaspectratio,"update")),this},setZoom:function(h,y){var b=this.attr.zoom.factorx,x=this.attr.zoom.factory;return this.attr.zoom.factorx=h/this.zoomX,this.attr.zoom.factory=y/this.zoomY,this.zoomIn(),this.attr.zoom.factorx=b,this.attr.zoom.factory=x,this},removeObject:function(h,y){var b,x;if(l.isArray(h)){for(x=0;x<h.length;x++)this.removeObject(h[x]);return this}if(h=this.select(h),!l.exists(h)||l.isString(h))return this;try{for(b in h.childElements)h.childElements.hasOwnProperty(b)&&h.childElements[b].board.removeObject(h.childElements[b]);for(b in h.objects)h.objects.hasOwnProperty(b)&&h.objects[b].board.removeObject(h.objects[b]);if(y)for(b in this.objects)this.objects.hasOwnProperty(b)&&l.exists(this.objects[b].childElements)&&l.exists(this.objects[b].childElements.hasOwnProperty(h.id))&&(delete this.objects[b].childElements[h.id],delete this.objects[b].descendants[h.id]);else if(l.exists(h.ancestors))for(b in h.ancestors)h.ancestors.hasOwnProperty(b)&&l.exists(h.ancestors[b].childElements)&&l.exists(h.ancestors[b].childElements.hasOwnProperty(h.id))&&(delete h.ancestors[b].childElements[h.id],delete h.ancestors[b].descendants[h.id]);if(h._pos>-1)for(this.objectsList.splice(h._pos,1),b=h._pos;b<this.objectsList.length;b++)this.objectsList[b]._pos--;else h.type!==I.OBJECT_TYPE_TURTLE&&E.debug("Board.removeObject: object "+h.id+" not found in list.");delete this.objects[h.id],delete this.elementsByName[h.name],h.visProp&&l.evaluate(h.visProp.trace)&&h.clearTrace(),l.exists(h.remove)&&h.remove()}catch(D){E.debug(h.id+": Could not be removed: "+D)}return this.update(),this},removeAncestors:function(h){var y;for(y in h.ancestors)h.ancestors.hasOwnProperty(y)&&this.removeAncestors(h.ancestors[y]);return this.removeObject(h),this},initGeonextBoard:function(){var h,y,b;return h=this.create("point",[0,0],{id:this.id+"g00e0",name:"Ursprung",withLabel:!1,visible:!1,fixed:!0}),y=this.create("point",[1,0],{id:this.id+"gX0e0",name:"Punkt_1_0",withLabel:!1,visible:!1,fixed:!0}),b=this.create("point",[0,1],{id:this.id+"gY0e0",name:"Punkt_0_1",withLabel:!1,visible:!1,fixed:!0}),this.create("line",[h,y],{id:this.id+"gXLe0",name:"X-Achse",withLabel:!1,visible:!1}),this.create("line",[h,b],{id:this.id+"gYLe0",name:"Y-Achse",withLabel:!1,visible:!1}),this},resizeContainer:function(h,y,b,x){var D;return x||(D=this.getBoundingBox()),this.canvasWidth=parseFloat(h),this.canvasHeight=parseFloat(y),b||(this.containerObj.style.width=this.canvasWidth+"px",this.containerObj.style.height=this.canvasHeight+"px"),this.renderer.resize(this.canvasWidth,this.canvasHeight),x||this.setBoundingBox(D,this.keepaspectratio,"keep"),this},showDependencies:function(){var h,y,b,x,D;for(h in y="<p>\n",this.objects)if(this.objects.hasOwnProperty(h)){for(b in D=0,this.objects[h].childElements)this.objects[h].childElements.hasOwnProperty(b)&&(D+=1);for(b in D>=0&&(y+="<strong>"+this.objects[h].id+":</strong> "),this.objects[h].childElements)this.objects[h].childElements.hasOwnProperty(b)&&(y+=this.objects[h].childElements[b].id+"("+this.objects[h].childElements[b].name+"), ");y+="<p>\n"}return y+="</p>\n",(x=window.open()).document.open(),x.document.write(y),x.document.close(),this},showXML:function(){var h=window.open("");return h.document.open(),h.document.write("<pre>"+l.escapeHTML(this.xmlString)+"</pre>"),h.document.close(),this},prepareUpdate:function(){var h,y,b=this.objectsList.length;for(h=0;h<b;h++)(y=this.objectsList[h]).needsUpdate=y.needsRegularUpdate||this.needsFullUpdate;for(h in this.groups)this.groups.hasOwnProperty(h)&&((y=this.groups[h]).needsUpdate=y.needsRegularUpdate||this.needsFullUpdate);return this},updateElements:function(h){var y,b;for(h=this.select(h),y=0;y<this.objectsList.length;y++)b=this.objectsList[y],this.needsFullUpdate&&b.elementClass===I.OBJECT_CLASS_TEXT&&b.updateSize(),b.update(!l.exists(h)||b.id!==h.id).updateVisibility();for(y in this.groups)this.groups.hasOwnProperty(y)&&this.groups[y].update(h);return this},updateRenderer:function(){var h,y=this.objectsList.length;if("canvas"===this.renderer.type)this.updateRendererCanvas();else for(h=0;h<y;h++)this.objectsList[h].updateRenderer();return this},updateRendererCanvas:function(){var h,y,b,x,D,M=this.objectsList.length,O=this.options.layer,A=this.options.layer.numlayers,N=Number.NEGATIVE_INFINITY;for(b=0;b<A;b++){for(D in x=Number.POSITIVE_INFINITY,O)O.hasOwnProperty(D)&&O[D]>N&&O[D]<x&&(x=O[D]);for(N=x,h=0;h<M;h++)(y=this.objectsList[h]).visProp.layer===x&&y.prepareUpdate().updateRenderer()}return this},addHook:function(h,y,b){return E.deprecated("Board.addHook()","Board.on()"),y=l.def(y,"update"),b=l.def(b,this),this.hooks.push([y,h]),this.on(y,h,b),this.hooks.length-1},addEvent:E.shortcut(E.Board.prototype,"on"),removeHook:function(h){return E.deprecated("Board.removeHook()","Board.off()"),this.hooks[h]&&(this.off(this.hooks[h][0],this.hooks[h][1]),this.hooks[h]=null),this},removeEvent:E.shortcut(E.Board.prototype,"off"),updateHooks:function(h){var y=Array.prototype.slice.call(arguments,0);return E.deprecated("Board.updateHooks()","Board.triggerEventHandlers()"),y[0]=l.def(y[0],"update"),this.triggerEventHandlers([y[0]],arguments),this},addChild:function(h){return l.exists(h)&&l.exists(h.containerObj)&&(this.dependentBoards.push(h),this.update()),this},removeChild:function(h){var y;for(y=this.dependentBoards.length-1;y>=0;y--)this.dependentBoards[y]===h&&this.dependentBoards.splice(y,1);return this},update:function(h){var y,b,x,D,M;if(this.inUpdate||this.isSuspendedUpdate)return this;for(this.inUpdate=!0,"all"===this.attr.minimizereflow&&this.containerObj&&"vml"!==this.renderer.type&&(M=this.document.activeElement,D=this.renderer.removeToInsertLater(this.containerObj)),"svg"===this.attr.minimizereflow&&"svg"===this.renderer.type&&(M=this.document.activeElement,D=this.renderer.removeToInsertLater(this.renderer.svgRoot)),this.prepareUpdate().updateElements(h).updateConditions(),this.renderer.suspendRedraw(this),this.updateRenderer(),this.renderer.unsuspendRedraw(),this.triggerEventHandlers(["update"],[]),D&&(D(),M.focus()),b=this.dependentBoards.length,y=0;y<b;y++)l.exists(x=this.dependentBoards[y])&&x!==this&&(x.updateQuality=this.updateQuality,x.prepareUpdate().updateElements().updateConditions(),x.renderer.suspendRedraw(),x.updateRenderer(),x.renderer.unsuspendRedraw(),x.triggerEventHandlers(["update"],[]));return this.inUpdate=!1,this},fullUpdate:function(){return this.needsFullUpdate=!0,this.update(),this.needsFullUpdate=!1,this},addGrid:function(){return this.create("grid",[]),this},removeGrids:function(){var h;for(h=0;h<this.grids.length;h++)this.removeObject(this.grids[h]);return this.grids.length=0,this.update(),this},create:function(h,y,b){var x,D;for(h=h.toLowerCase(),l.exists(y)||(y=[]),l.exists(b)||(b={}),D=0;D<y.length;D++)!l.isString(y[D])||"text"===h&&2===D||"solidofrevolution3d"===h&&2===D||!("input"!==h&&"checkbox"!==h&&"button"!==h||2!==D&&3!==D)||"curve"===h&&D>0||(y[D]=this.select(y[D]));if(!l.isFunction(E.elements[h]))throw new Error("JSXGraph: create: Unknown element type given: "+h);return x=E.elements[h](this,y,b),l.exists(x)?(x.prepareUpdate&&x.update&&x.updateRenderer&&x.fullUpdate(),x):(E.debug("JSXGraph: create: failure creating "+h),x)},createElement:function(){return E.deprecated("Board.createElement()","Board.create()"),this.create.apply(this,arguments)},clearTraces:function(){var h;for(h=0;h<this.objectsList.length;h++)this.objectsList[h].clearTrace();return this.numTraces=0,this},suspendUpdate:function(){return this.inUpdate||(this.isSuspendedUpdate=!0),this},unsuspendUpdate:function(){return this.isSuspendedUpdate&&(this.isSuspendedUpdate=!1,this.fullUpdate()),this},setBoundingBox:function(h,y,b){var x,D,M,O,A=0,N=0,L=v.getDimensions(this.container,this.document);return l.isArray(h)?(h[0]<this.maxboundingbox[0]||h[1]>this.maxboundingbox[1]||h[2]>this.maxboundingbox[2]||h[3]<this.maxboundingbox[3]||(l.exists(b)||(b="reset"),M=this.unitX,O=this.unitY,this.canvasWidth=parseInt(L.width,10),this.canvasHeight=parseInt(L.height,10),D=this.canvasWidth,x=this.canvasHeight,y?(this.unitX=D/(h[2]-h[0]),this.unitY=x/(h[1]-h[3]),Math.abs(this.unitX)<Math.abs(this.unitY)?(this.unitY=Math.abs(this.unitX)*this.unitY/Math.abs(this.unitY),N=.5*(x/this.unitY-(h[1]-h[3]))):(this.unitX=Math.abs(this.unitY)*this.unitX/Math.abs(this.unitX),A=.5*(D/this.unitX-(h[2]-h[0]))),this.keepaspectratio=!0):(this.unitX=D/(h[2]-h[0]),this.unitY=x/(h[1]-h[3]),this.keepaspectratio=!1),this.moveOrigin(-this.unitX*(h[0]-A),this.unitY*(h[1]+N)),"update"===b?(this.zoomX*=this.unitX/M,this.zoomY*=this.unitY/O):"reset"===b&&(this.zoomX=l.exists(this.attr.zoomx)?this.attr.zoomx:1,this.zoomY=l.exists(this.attr.zoomy)?this.attr.zoomy:1)),this):this},getBoundingBox:function(){var h=new T(I.COORDS_BY_SCREEN,[0,0],this).usrCoords,y=new T(I.COORDS_BY_SCREEN,[this.canvasWidth,this.canvasHeight],this).usrCoords;return[h[1],h[2],y[1],y[2]]},addAnimation:function(h){var y=this;return this.animationObjects[h.id]=h,this.animationIntervalCode||(this.animationIntervalCode=window.setInterval(function(){y.animate()},h.board.attr.animationdelay)),this},stopAllAnimation:function(){var h;for(h in this.animationObjects)this.animationObjects.hasOwnProperty(h)&&l.exists(this.animationObjects[h])&&(this.animationObjects[h]=null,delete this.animationObjects[h]);return window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode,this},animate:function(){var h,y,b,x,D,M,O,A,N=0,L=null;for(y in this.animationObjects)if(this.animationObjects.hasOwnProperty(y)&&l.exists(this.animationObjects[y])){if(N+=1,(b=this.animationObjects[y]).animationPath&&(x=l.isFunction(b.animationPath)?b.animationPath((new Date).getTime()-b.animationStart):b.animationPath.pop(),!l.exists(x)||!l.isArray(x)&&isNaN(x)?delete b.animationPath:(b.setPositionDirectly(I.COORDS_BY_USER,x),b.fullUpdate(),L=b)),b.animationData){for(D in O=0,b.animationData)b.animationData.hasOwnProperty(D)&&(M=b.animationData[D].pop(),l.exists(M)?(O+=1,(h={})[D]=M,b.setAttribute(h)):delete b.animationData[M]);0===O&&delete b.animationData}l.exists(b.animationData)||l.exists(b.animationPath)||(this.animationObjects[y]=null,delete this.animationObjects[y],l.exists(b.animationCallback)&&(A=b.animationCallback,b.animationCallback=null,A()))}return 0===N?(window.clearInterval(this.animationIntervalCode),delete this.animationIntervalCode):this.update(L),this},migratePoint:function(h,y,b){var x,D,M,O,A,N,L=!1;for(D in h=this.select(h),y=this.select(y),l.exists(h.label)&&(N=h.label.id,L=!0,this.removeObject(h.label)),h.childElements)if(h.childElements.hasOwnProperty(D)){for(M in O=!1,x=h.childElements[D])x.hasOwnProperty(M)&&x[M]===h&&(x[M]=y,O=!0);for(O&&delete h.childElements[D],A=0;A<x.parents.length;A++)x.parents[A]===h.id&&(x.parents[A]=y.id);y.addChild(x)}return b&&(L&&(delete y.childElements[N],delete y.descendants[N]),y.label&&this.removeObject(y.label),delete this.elementsByName[y.name],y.name=h.name,L&&y.createLabel()),this.removeObject(h),l.exists(y.name)&&""!==y.name&&(this.elementsByName[y.name]=y),this.fullUpdate(),this},emulateColorblindness:function(h){var y,b;if(l.exists(h)||(h="none"),this.currentCBDef===h)return this;for(y in this.objects)this.objects.hasOwnProperty(y)&&(b=this.objects[y],"none"!==h?("none"===this.currentCBDef&&(b.visPropOriginal={strokecolor:b.visProp.strokecolor,fillcolor:b.visProp.fillcolor,highlightstrokecolor:b.visProp.highlightstrokecolor,highlightfillcolor:b.visProp.highlightfillcolor}),b.setAttribute({strokecolor:c.rgb2cb(l.evaluate(b.visPropOriginal.strokecolor),h),fillcolor:c.rgb2cb(l.evaluate(b.visPropOriginal.fillcolor),h),highlightstrokecolor:c.rgb2cb(l.evaluate(b.visPropOriginal.highlightstrokecolor),h),highlightfillcolor:c.rgb2cb(l.evaluate(b.visPropOriginal.highlightfillcolor),h)})):l.exists(b.visPropOriginal)&&E.extend(b.visProp,b.visPropOriginal));return this.currentCBDef=h,this.update(),this},select:function(h,y){var b,x,D,M,O=h;if(null===O)return O;if(l.isString(O)&&""!==O)l.exists(this.objects[O])?O=this.objects[O]:l.exists(this.elementsByName[O])?O=this.elementsByName[O]:l.exists(this.groups[O])&&(O=this.groups[O]);else if(!y&&(l.isFunction(O)||l.isObject(O)&&!l.isFunction(O.setAttribute))){for(x={},M=(b=l.filterElements(this.objectsList,O)).length,D=0;D<M;D++)x[b[D].id]=b[D];O=new _(x)}else l.isObject(O)&&l.exists(O.id)&&!l.exists(this.objects[O.id])&&(O=null);return O},hasPoint:function(h,y){var b=h,x=y,D=this.getBoundingBox();return l.exists(h)&&l.isArray(h.usrCoords)&&(b=h.usrCoords[1],x=h.usrCoords[2]),!!(l.isNumber(b)&&l.isNumber(x)&&D[0]<b&&b<D[2]&&D[1]>x&&x>D[3])},updateCSSTransforms:function(){var h=this.containerObj;for(this.cssTransMat=v.getCSSTransformMatrix(h),h=h.parentNode===h.getRootNode()?h.parentNode.host:h.parentNode;h;)this.cssTransMat=g.matMatMult(v.getCSSTransformMatrix(h),this.cssTransMat),h=h.parentNode===h.getRootNode()?h.parentNode.host:h.parentNode;return this.cssTransMat=g.inverse(this.cssTransMat),this},startSelectionMode:function(){this.selectingMode=!0,this.selectionPolygon.setAttribute({visible:!0}),this.selectingBox=[[0,0],[0,0]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate()},stopSelectionMode:function(){return this.selectingMode=!1,this.selectionPolygon.setAttribute({visible:!1}),[this.selectionPolygon.vertices[0].coords,this.selectionPolygon.vertices[2].coords]},_startSelecting:function(h){this.isSelecting=!0,this.selectingBox=[[h[0],h[1]],[h[0],h[1]]],this._setSelectionPolygonFromBox()},_moveSelecting:function(h){this.isSelecting&&(this.selectingBox[1]=[h[0],h[1]],this._setSelectionPolygonFromBox(),this.selectionPolygon.fullUpdate())},_stopSelecting:function(h){var y=this.getMousePosition(h);this.isSelecting=!1,this.selectingBox[1]=[y[0],y[1]],this._setSelectionPolygonFromBox()},_setSelectionPolygonFromBox:function(){var h=this.selectingBox[0],y=this.selectingBox[1];this.selectionPolygon.vertices[0].setPositionDirectly(E.COORDS_BY_SCREEN,[h[0],h[1]]),this.selectionPolygon.vertices[1].setPositionDirectly(E.COORDS_BY_SCREEN,[h[0],y[1]]),this.selectionPolygon.vertices[2].setPositionDirectly(E.COORDS_BY_SCREEN,[y[0],y[1]]),this.selectionPolygon.vertices[3].setPositionDirectly(E.COORDS_BY_SCREEN,[y[0],h[1]])},_testForSelection:function(h){this._isRequiredKeyPressed(h,"selection")&&(l.exists(this.selectionPolygon)||this._createSelectionPolygon(this.attr),this.startSelectionMode())},_createSelectionPolygon:function(h){var y;return l.exists(this.selectionPolygon)||!0===(y=l.copyAttributes(h,S,"board","selection")).enabled&&(this.selectionPolygon=this.create("polygon",[[0,0],[0,0],[0,0],[0,0]],y)),this},__evt__down:function(h){},__evt__mousedown:function(h){},__evt__pendown:function(h){},__evt__pointerdown:function(h){},__evt__touchstart:function(h){},__evt__up:function(h){},__evt__mouseup:function(h){},__evt__pointerup:function(h){},__evt__touchend:function(h){},__evt__move:function(h,y){},__evt__mousemove:function(h,y){},__evt__penmove:function(h,y){},__evt__pointermove:function(h,y){},__evt__touchmove:function(h,y){},__evt__hit:function(h,y,b){},__evt__mousehit:function(h,y,b){},__evt__update:function(){},__evt__boundingbox:function(){},__evt__startselecting:function(){},__evt__mousestartselecting:function(){},__evt__pointerstartselecting:function(){},__evt__touchstartselecting:function(){},__evt__stopselecting:function(){},__evt__mousestopselecting:function(){},__evt__pointerstopselecting:function(){},__evt__touchstopselecting:function(){},__evt__moveselecting:function(){},__evt__mousemoveselecting:function(){},__evt__pointermoveselecting:function(){},__evt__touchmoveselecting:function(){},__evt:function(){},toFullscreen:function(h){var y,b,x,D=this.document;return this._fullscreen_inner_id=h=h||this.container,x=D.getElementById(h),D.getElementById(y="fullscreenwrap_"+h)?b=D.getElementById(y):((b=document.createElement("div")).classList.add("JXG_wrap_private"),b.setAttribute("id",y),x.parentNode.insertBefore(b,x),b.appendChild(x)),b.requestFullscreen=b.requestFullscreen||b.webkitRequestFullscreen||b.mozRequestFullScreen||b.msRequestFullscreen,null===(void 0!==D.fullscreenElement?D.fullscreenElement:void 0!==D.webkitFullscreenElement?D.webkitFullscreenElement:D.msFullscreenElement)?b.requestFullscreen&&b.requestFullscreen():l.exists(document.exitFullscreen)?document.exitFullscreen():l.exists(document.webkitExitFullscreen)&&document.webkitExitFullscreen(),this},fullscreenListener:function(h){var y,b,x,D=this.document;if(l.exists(y=this._fullscreen_inner_id)){if(x=void 0!==D.fullscreenElement?D.fullscreenElement:void 0!==D.webkitFullscreenElement?D.webkitFullscreenElement:D.msFullscreenElement,b=D.getElementById(y),x)b._cssFullscreenStore={id:x.id,isFullscreen:!0,margin:b.style.margin},b.style.margin="",v.scaleJSXGraphDiv(x.id,y,D),x=null;else if(l.exists(b._cssFullscreenStore)){try{D.styleSheets[D.styleSheets.length-1].deleteRule(0)}catch{console.log("JSXGraph: Could not remove CSS rules for full screen mode")}b._cssFullscreenStore.isFullscreen=!1,b.style.margin=b._cssFullscreenStore.margin}this.updateCSSTransforms()}},createRoulette:function(h,y,b,x,D,M,O){var A=this;return new function(){var N,L=0,B=0,V=0,U=b,j=w.root(function(Oe){var Se=h.X(U),me=h.Y(U),_e=y.X(Oe),ye=y.Y(Oe);return(Se-_e)*(Se-_e)+(me-ye)*(me-ye)},[0,2*Math.PI]),z=0,$=0,X=A.create("transform",[function(){return L}],{type:"rotate"}),Z=A.create("transform",[function(){return L},function(){return h.X(U)},function(){return h.Y(U)}],{type:"rotate"}),W=A.create("transform",[function(){return B},function(){return V}],{type:"translate"}),ee=function(Oe,Se,me){var _e=w.D(Oe.X)(Se),ye=w.D(Oe.Y)(Se),le=w.D(Oe.X)(me),be=w.D(Oe.Y)(me),Ce=w.D(Oe.X)(.5*(Se+me)),He=w.D(Oe.Y)(.5*(Se+me)),bt=Math.sqrt(_e*_e+ye*ye),dt=Math.sqrt(le*le+be*be);return(bt+4*Math.sqrt(Ce*Ce+He*He)+dt)*(me-Se)/6},ie=function(Oe){return N-ee(y,j,Oe)},re=Math.PI/18,Me=9*re,Pe=null;return this.rolling=function(){var Oe,Se,me,_e,ye;N=ee(h,U,z=U+D*x),$=w.root(ie,j),Oe=new p(h.X(z),h.Y(z)),Se=new p(y.X($),y.Y($)),me=new p(w.D(h.X)(z),w.D(h.Y)(z)),_e=new p(w.D(y.X)($),w.D(y.Y)($)),ye=p.C.div(me,_e),L=Math.atan2(ye.imaginary,ye.real),ye.div(p.C.abs(ye)),ye.mult(Se),B=Oe.real-ye.real,V=Oe.imaginary-ye.imaginary,L<-re&&L>-Me?(L=-re,Z.applyOnce(O)):L>re&&L<Me?(L=re,Z.applyOnce(O)):(X.applyOnce(O),W.applyOnce(O),U=z,j=$),A.update()},this.start=function(){return M>0&&(Pe=window.setInterval(this.rolling,M)),this},this.stop=function(){return window.clearInterval(Pe),this},this}}}),E.Board}),define("renderer/svg",["jxg","options","renderer/abstract","base/constants","utils/type","utils/color","utils/base64","math/numerics"],function(E,I,T,S,w,g,m,p){"use strict";return E.SVGRenderer=function(a,u){var c;for(this.type="svg",this.isIE=-1!==navigator.appVersion.indexOf("MSIE")||navigator.userAgent.match(/Trident\//),this.svgRoot=null,this.svgNamespace="http://www.w3.org/2000/svg",this.xlinkNamespace="http://www.w3.org/1999/xlink",this.container=a,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.svgRoot=this.container.ownerDocument.createElementNS(this.svgNamespace,"svg"),this.svgRoot.style.overflow="hidden",this.svgRoot.style.display="block",this.resize(u.width,u.height),this.container.appendChild(this.svgRoot),this.defs=this.container.ownerDocument.createElementNS(this.svgNamespace,"defs"),this.svgRoot.appendChild(this.defs),this.filter=this.container.ownerDocument.createElementNS(this.svgNamespace,"filter"),this.filter.setAttributeNS(null,"id",this.container.id+"_f1"),this.filter.setAttributeNS(null,"width","300%"),this.filter.setAttributeNS(null,"height","300%"),this.filter.setAttributeNS(null,"filterUnits","userSpaceOnUse"),this.feOffset=this.container.ownerDocument.createElementNS(this.svgNamespace,"feOffset"),this.feOffset.setAttributeNS(null,"in","SourceAlpha"),this.feOffset.setAttributeNS(null,"result","offOut"),this.feOffset.setAttributeNS(null,"dx","5"),this.feOffset.setAttributeNS(null,"dy","5"),this.filter.appendChild(this.feOffset),this.feGaussianBlur=this.container.ownerDocument.createElementNS(this.svgNamespace,"feGaussianBlur"),this.feGaussianBlur.setAttributeNS(null,"in","offOut"),this.feGaussianBlur.setAttributeNS(null,"result","blurOut"),this.feGaussianBlur.setAttributeNS(null,"stdDeviation","3"),this.filter.appendChild(this.feGaussianBlur),this.feBlend=this.container.ownerDocument.createElementNS(this.svgNamespace,"feBlend"),this.feBlend.setAttributeNS(null,"in","SourceGraphic"),this.feBlend.setAttributeNS(null,"in2","blurOut"),this.feBlend.setAttributeNS(null,"mode","normal"),this.filter.appendChild(this.feBlend),this.defs.appendChild(this.filter),this.layer=[],c=0;c<I.layer.numlayers;c++)this.layer[c]=this.container.ownerDocument.createElementNS(this.svgNamespace,"g"),this.svgRoot.appendChild(this.layer[c]);this.supportsForeignObject=document.implementation.hasFeature("http://w3.org/TR/SVG11/feature#Extensibility","1.1"),this.supportsForeignObject&&(this.foreignObjLayer=this.container.ownerDocument.createElementNS(this.svgNamespace,"foreignObject"),this.foreignObjLayer.setAttribute("display","none"),this.foreignObjLayer.setAttribute("x",0),this.foreignObjLayer.setAttribute("y",0),this.foreignObjLayer.setAttribute("width","100%"),this.foreignObjLayer.setAttribute("height","100%"),this.foreignObjLayer.setAttribute("id",this.container.id+"_foreignObj"),this.svgRoot.appendChild(this.foreignObjLayer)),this.dashArray=["2, 2","5, 5","10, 10","20, 20","20, 10, 10, 10","20, 5, 10, 5"]},E.SVGRenderer.prototype=new T,E.extend(E.SVGRenderer.prototype,{_createArrowHead:function(a,u,c){var l,f,v,_,h=a.id+"Triangle";return w.exists(u)&&(h+=u),(l=this.createPrim("marker",h)).setAttributeNS(null,"stroke",w.evaluate(a.visProp.strokecolor)),l.setAttributeNS(null,"stroke-opacity",w.evaluate(a.visProp.strokeopacity)),l.setAttributeNS(null,"fill",w.evaluate(a.visProp.strokecolor)),l.setAttributeNS(null,"fill-opacity",w.evaluate(a.visProp.strokeopacity)),l.setAttributeNS(null,"stroke-width",0),l.setAttributeNS(null,"orient","auto"),l.setAttributeNS(null,"markerUnits","strokeWidth"),f=this.container.ownerDocument.createElementNS(this.svgNamespace,"path"),_=5,"End"===u?(v=0,2===c?f.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 L 5,5 z"):3===c?f.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z"):4===c?(_=3.31,f.setAttributeNS(null,"d","M 0.00,3.31 C 3.53,3.84 7.13,4.50 10.00,6.63 C 9.33,5.52 8.67,4.42 8.00,3.31 C 8.67,2.21 9.33,1.10 10.00,0.00 C 7.13,2.13 3.53,2.79 0.00,3.31")):5===c?(_=3.28,f.setAttributeNS(null,"d","M 0.00,3.28 C 3.39,4.19 6.81,5.07 10.00,6.55 C 9.38,5.56 9.00,4.44 9.00,3.28 C 9.00,2.11 9.38,0.99 10.00,0.00 C 6.81,1.49 3.39,2.37 0.00,3.28")):6===c?(_=2.84,f.setAttributeNS(null,"d","M 0.00,2.84 C 3.39,3.59 6.79,4.35 10.00,5.68 C 9.67,4.73 9.33,3.78 9.00,2.84 C 9.33,1.89 9.67,0.95 10.00,0.00 C 6.79,1.33 3.39,2.09 0.00,2.84")):7===c?(_=5.2,f.setAttributeNS(null,"d","M 0.00,5.20 C 4.04,5.20 7.99,6.92 10.00,10.39 M 10.00,0.00 C 7.99,3.47 4.04,5.20 0.00,5.20")):f.setAttributeNS(null,"d","M 10,0 L 0,5 L 10,10 z"),a.elementClass===S.OBJECT_CLASS_LINE&&(v=2===c?4.9:3===c?3.3:4===c||5===c||6===c?6.66:7===c?0:10)):(v=10,2===c?f.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 L 5,5 z"):3===c?(v=3.3,f.setAttributeNS(null,"d","M 0,0 L 3.33,0 L 3.33,10 L 0,10 z")):4===c?(_=3.31,f.setAttributeNS(null,"d","M 10.00,3.31 C 6.47,3.84 2.87,4.50 0.00,6.63 C 0.67,5.52 1.33,4.42 2.00,3.31 C 1.33,2.21 0.67,1.10 0.00,0.00 C 2.87,2.13 6.47,2.79 10.00,3.31")):5===c?(_=3.28,f.setAttributeNS(null,"d","M 10.00,3.28 C 6.61,4.19 3.19,5.07 0.00,6.55 C 0.62,5.56 1.00,4.44 1.00,3.28 C 1.00,2.11 0.62,0.99 0.00,0.00 C 3.19,1.49 6.61,2.37 10.00,3.28")):6===c?(_=2.84,f.setAttributeNS(null,"d","M 10.00,2.84 C 6.61,3.59 3.21,4.35 0.00,5.68 C 0.33,4.73 0.67,3.78 1.00,2.84 C 0.67,1.89 0.33,0.95 0.00,0.00 C 3.21,1.33 6.61,2.09 10.00,2.84")):7===c?(_=5.2,f.setAttributeNS(null,"d","M 10.00,5.20 C 5.96,5.20 2.01,6.92 0.00,10.39 M 0.00,0.00 C 2.01,3.47 5.96,5.20 10.00,5.20")):f.setAttributeNS(null,"d","M 0,0 L 10,5 L 0,10 z"),a.elementClass===S.OBJECT_CLASS_LINE&&(v=2===c?5.1:3===c?.02:4===c||5===c||6===c?3.33:7===c?10:.05)),7===c&&(l.setAttributeNS(null,"fill","none"),l.setAttributeNS(null,"stroke-width",1)),l.setAttributeNS(null,"refY",_),l.setAttributeNS(null,"refX",v),l.appendChild(f),l},_setArrowColor:function(a,u,c,l,f){a&&(w.isString(u)&&this._setAttribute(7!==f?function(){a.setAttributeNS(null,"stroke",u),a.setAttributeNS(null,"fill",u),a.setAttributeNS(null,"stroke-opacity",c),a.setAttributeNS(null,"fill-opacity",c)}:function(){a.setAttributeNS(null,"fill","none"),a.setAttributeNS(null,"stroke",u),a.setAttributeNS(null,"stroke-opacity",c)},l.visPropOld.fillcolor),this.isIE&&l.rendNode.parentNode.insertBefore(l.rendNode,l.rendNode))},_setArrowWidth:function(a,u,c,l){var f,v;a&&(v=(f=u)*l,a.setAttributeNS(null,"viewBox","0 0 "+10*f+" "+10*f),a.setAttributeNS(null,"markerHeight",v),a.setAttributeNS(null,"markerWidth",v),a.setAttributeNS(null,"display","inherit"),this.isIE&&c.parentNode.insertBefore(c,c))},updateTicks:function(a){var u,c,l,f,v,_,h,y,b="",x=a.ticks.length,D=!0;for(u=0;u<x;u++){for(h=(v=(l=a.ticks[u])[0]).length,y=" M "+v[0]+" "+(_=l[1])[0],w.isNumber(v[0])||(D=!1),c=1;D&&c<h;++c)w.isNumber(v[c])?y+=" L "+v[c]+" "+_[c]:D=!1;D&&(b+=y)}w.exists(f=a.rendNode)||(f=this.createPrim("path",a.id),this.appendChildPrim(f,w.evaluate(a.visProp.layer)),a.rendNode=f),f.setAttributeNS(null,"stroke",w.evaluate(a.visProp.strokecolor)),f.setAttributeNS(null,"fill","none"),f.setAttributeNS(null,"stroke-opacity",w.evaluate(a.visProp.strokeopacity)),f.setAttributeNS(null,"stroke-width",w.evaluate(a.visProp.strokewidth)),this.updatePathPrim(f,b,a.board)},displayCopyright:function(a,u){var c,l=this.createPrim("text","licenseText");l.setAttributeNS(null,"x","20px"),l.setAttributeNS(null,"y",2+u+"px"),l.setAttributeNS(null,"style","font-family:Arial,Helvetica,sans-serif; font-size:"+u+"px; fill:#356AA0;  opacity:0.3;"),c=this.container.ownerDocument.createTextNode(a),l.appendChild(c),this.appendChildPrim(l,0)},drawInternalText:function(a){var u=this.createPrim("text",a.id);return u.style.whiteSpace="nowrap",a.rendNodeText=this.container.ownerDocument.createTextNode(""),u.appendChild(a.rendNodeText),this.appendChildPrim(u,w.evaluate(a.visProp.layer)),u},updateInternalText:function(a){var u,c=a.plaintext,l=a.getAnchorX(),f=a.getAnchorY();a.rendNode.getAttributeNS(null,"class")!==a.visProp.cssclass&&(a.rendNode.setAttributeNS(null,"class",w.evaluate(a.visProp.cssclass)),a.needsSizeUpdate=!0),isNaN(a.coords.scrCoords[1]+a.coords.scrCoords[2])||(a.visPropOld.left!==l+(u=a.coords.scrCoords[1])&&(a.rendNode.setAttributeNS(null,"x",u+"px"),"left"===l?a.rendNode.setAttributeNS(null,"text-anchor","start"):"right"===l?a.rendNode.setAttributeNS(null,"text-anchor","end"):"middle"===l&&a.rendNode.setAttributeNS(null,"text-anchor","middle"),a.visPropOld.left=l+u),a.visPropOld.top!==f+(u=a.coords.scrCoords[2])&&(a.rendNode.setAttributeNS(null,"y",u+.5*this.vOffsetText+"px"),"bottom"===f?a.rendNode.setAttributeNS(null,"dominant-baseline","text-after-edge"):"top"===f?a.rendNode.setAttributeNS(null,"dy","1.6ex"):"middle"===f&&a.rendNode.setAttributeNS(null,"dy","0.6ex"),a.visPropOld.top=f+u)),a.htmlStr!==c&&(a.rendNodeText.data=c,a.htmlStr=c),this.transformImage(a,a.transformations)},updateInternalTextStyle:function(a,u,c,l){this.setObjectFillColor(a,u,c)},drawImage:function(a){var u=this.createPrim("image",a.id);u.setAttributeNS(null,"preserveAspectRatio","none"),this.appendChildPrim(u,w.evaluate(a.visProp.layer)),a.rendNode=u,this.updateImage(a)},transformImage:function(a,u){var c,l=a.rendNode,f="";u.length>0&&(f+=" matrix("+[(c=this.joinTransforms(a,u))[1][1],c[2][1],c[1][2],c[2][2],c[1][0],c[2][0]].join(",")+") ",l.setAttributeNS(null,"transform",f))},updateImageURL:function(a){var u=w.evaluate(a.url);return a._src!==u&&(a.imgIsLoaded=!1,a.rendNode.setAttributeNS(this.xlinkNamespace,"xlink:href",u),a._src=u,!0)},updateImageStyle:function(a,u){var c=w.evaluate(u?a.visProp.highlightcssclass:a.visProp.cssclass);a.rendNode.setAttributeNS(null,"class",c)},drawForeignObject:function(a){a.rendNode=this.appendChildPrim(this.createPrim("foreignObject",a.id),w.evaluate(a.visProp.layer)),this.appendNodesToElement(a,"foreignObject"),this.updateForeignObject(a)},updateForeignObject:function(a){a.rendNode.style.overflow=a._useUserSize?"hidden":"visible",this.updateRectPrim(a.rendNode,a.coords.scrCoords[1],a.coords.scrCoords[2]-a.size[1],a.size[0],a.size[1]),a.rendNode.innerHTML=a.content,this._updateVisual(a,{stroke:!0,dash:!0},!0)},appendChildPrim:function(a,u){return w.exists(u)?u>=I.layer.numlayers&&(u=I.layer.numlayers-1):u=0,this.layer[u].appendChild(a),a},createPrim:function(a,u){var c=this.container.ownerDocument.createElementNS(this.svgNamespace,a);return c.setAttributeNS(null,"id",this.container.id+"_"+u),c.style.position="absolute","path"===a&&(c.setAttributeNS(null,"stroke-linecap","round"),c.setAttributeNS(null,"stroke-linejoin","round"),c.setAttributeNS(null,"fill-rule","evenodd")),c},remove:function(a){w.exists(a)&&w.exists(a.parentNode)&&a.parentNode.removeChild(a)},setLayer:function(a,u){w.exists(u)?u>=I.layer.numlayers&&(u=I.layer.numlayers-1):u=0,this.layer[u].appendChild(a.rendNode)},makeArrows:function(a,u){var c,l=u.evFirst,f=u.evLast;a.visPropOld.firstarrow!==l||a.visPropOld.lastarrow!==f?(l?w.exists(c=a.rendNodeTriangleStart)?this.defs.appendChild(c):(c=this._createArrowHead(a,"End",u.typeFirst),this.defs.appendChild(c),a.rendNodeTriangleStart=c,a.rendNode.setAttributeNS(null,"marker-start","url(#"+this.container.id+"_"+a.id+"TriangleEnd)")):w.exists(c=a.rendNodeTriangleStart)&&this.remove(c),f?w.exists(c=a.rendNodeTriangleEnd)?this.defs.appendChild(c):(c=this._createArrowHead(a,"Start",u.typeLast),this.defs.appendChild(c),a.rendNodeTriangleEnd=c,a.rendNode.setAttributeNS(null,"marker-end","url(#"+this.container.id+"_"+a.id+"TriangleStart)")):w.exists(c=a.rendNodeTriangleEnd)&&this.remove(c),a.visPropOld.firstarrow=l,a.visPropOld.lastarrow=f):this.isIE&&a.visPropCalc.visible&&(l||f)&&a.rendNode.parentNode.insertBefore(a.rendNode,a.rendNode)},updateEllipsePrim:function(a,u,c,l,f){var v;v=2e5,u=Math.abs(u)<v?u:v*u/Math.abs(u),c=Math.abs(c)<v?c:v*c/Math.abs(c),l=Math.abs(l)<v?l:v*l/Math.abs(l),f=Math.abs(f)<v?f:v*f/Math.abs(f),a.setAttributeNS(null,"cx",u),a.setAttributeNS(null,"cy",c),a.setAttributeNS(null,"rx",Math.abs(l)),a.setAttributeNS(null,"ry",Math.abs(f))},updateLinePrim:function(a,u,c,l,f){var v;v=2e5,isNaN(u+c+l+f)||(u=Math.abs(u)<v?u:v*u/Math.abs(u),c=Math.abs(c)<v?c:v*c/Math.abs(c),l=Math.abs(l)<v?l:v*l/Math.abs(l),f=Math.abs(f)<v?f:v*f/Math.abs(f),a.setAttributeNS(null,"x1",u),a.setAttributeNS(null,"y1",c),a.setAttributeNS(null,"x2",l),a.setAttributeNS(null,"y2",f))},updatePathPrim:function(a,u){""===u&&(u="M 0 0"),a.setAttributeNS(null,"d",u)},updatePathStringPoint:function(a,u,c){var l="",f=a.coords.scrCoords,v=u*Math.sqrt(3)*.5,_=.5*u;return"x"===c?l=" M "+(f[1]-u)+" "+(f[2]-u)+" L "+(f[1]+u)+" "+(f[2]+u)+" M "+(f[1]+u)+" "+(f[2]-u)+" L "+(f[1]-u)+" "+(f[2]+u):"+"===c?l=" M "+(f[1]-u)+" "+f[2]+" L "+(f[1]+u)+" "+f[2]+" M "+f[1]+" "+(f[2]-u)+" L "+f[1]+" "+(f[2]+u):"<>"===c?l=" M "+(f[1]-u)+" "+f[2]+" L "+f[1]+" "+(f[2]+u)+" L "+(f[1]+u)+" "+f[2]+" L "+f[1]+" "+(f[2]-u)+" Z ":"^"===c?l=" M "+f[1]+" "+(f[2]-u)+" L "+(f[1]-v)+" "+(f[2]+_)+" L "+(f[1]+v)+" "+(f[2]+_)+" Z ":"v"===c?l=" M "+f[1]+" "+(f[2]+u)+" L "+(f[1]-v)+" "+(f[2]-_)+" L "+(f[1]+v)+" "+(f[2]-_)+" Z ":">"===c?l=" M "+(f[1]+u)+" "+f[2]+" L "+(f[1]-_)+" "+(f[2]-v)+" L "+(f[1]-_)+" "+(f[2]+v)+" Z ":"<"===c&&(l=" M "+(f[1]-u)+" "+f[2]+" L "+(f[1]+_)+" "+(f[2]-v)+" L "+(f[1]+_)+" "+(f[2]+v)+" Z "),l},updatePathStringPrim:function(a){var u,c,l,f=" M ",v=f,h="";if(a.numberPoints<=0)return"";if(l=Math.min(a.points.length,a.numberPoints),1===a.bezierDegree)for(u=0;u<l;u++)c=a.points[u].scrCoords,isNaN(c[1])||isNaN(c[2])?v=f:(c[1]=Math.max(Math.min(c[1],5e3),-5e3),c[2]=Math.max(Math.min(c[2],5e3),-5e3),h+=v+c[1]+" "+c[2],v=" L ");else if(3===a.bezierDegree)for(u=0;u<l;)c=a.points[u].scrCoords,isNaN(c[1])||isNaN(c[2])?v=f:(h+=v+c[1]+" "+c[2]," C "===v&&(h+=" "+(c=a.points[u+=1].scrCoords)[1]+" "+c[2],h+=" "+(c=a.points[u+=1].scrCoords)[1]+" "+c[2]),v=" C "),u+=1;return h},updatePathStringBezierPrim:function(a){var u,c,l,f,v,_,h,y=" M ",b=y,D="",M=w.evaluate(a.visProp.strokewidth),O="plot"!==w.evaluate(a.visProp.curvetype);if(a.numberPoints<=0)return"";for(O&&a.board.options.curve.RDPsmoothing&&(a.points=p.RamerDouglasPeucker(a.points,.5)),h=Math.min(a.points.length,a.numberPoints),c=1;c<3;c++)for(b=y,u=0;u<h;u++)f=a.points[u].scrCoords,isNaN(f[1])||isNaN(f[2])?b=y:(f[1]=Math.max(Math.min(f[1],5e3),-5e3),f[2]=Math.max(Math.min(f[2],5e3),-5e3),D+=b===y?b+f[1]+" "+f[2]:[b,v+.333*(f[1]-v)+M*((l=2*c)*Math.random()-c)," ",_+.333*(f[2]-_)+M*(l*Math.random()-c)," ",v+.666*(f[1]-v)+M*(l*Math.random()-c)," ",_+.666*(f[2]-_)+M*(l*Math.random()-c)," ",f[1]," ",f[2]].join(""),b=" C ",v=f[1],_=f[2]);return D},updatePolygonPrim:function(a,u){var c,l,f="",v=u.vertices.length;for(a.setAttributeNS(null,"stroke","none"),a.setAttributeNS(null,"fill-rule","evenodd"),"polygonalchain"===u.elType&&v++,c=0;c<v-1;c++){if(!u.vertices[c].isReal)return void a.setAttributeNS(null,"points","");f=f+(l=u.vertices[c].coords.scrCoords)[1]+","+l[2],c<v-2&&(f+=" ")}-1===f.indexOf("NaN")&&a.setAttributeNS(null,"points",f)},updateRectPrim:function(a,u,c,l,f){a.setAttributeNS(null,"x",u),a.setAttributeNS(null,"y",c),a.setAttributeNS(null,"width",l),a.setAttributeNS(null,"height",f)},setPropertyPrim:function(a,u,c){"stroked"!==u&&a.setAttributeNS(null,u,c)},display:function(a,u){var c;a&&a.rendNode&&(a.visPropOld.visible=u,c=a.rendNode,u?(c.setAttributeNS(null,"display","inline"),c.style.visibility="inherit"):(c.setAttributeNS(null,"display","none"),c.style.visibility="hidden"))},show:function(a){E.deprecated("Board.renderer.show()","Board.renderer.display()"),this.display(a,!0)},hide:function(a){E.deprecated("Board.renderer.hide()","Board.renderer.display()"),this.display(a,!1)},setBuffering:function(a,u){a.rendNode.setAttribute("buffered-rendering",u)},setDashStyle:function(a){var u=w.evaluate(a.visProp.dash),c=a.rendNode;u>0?c.setAttributeNS(null,"stroke-dasharray",this.dashArray[u-1]):c.hasAttributeNS(null,"stroke-dasharray")&&c.removeAttributeNS(null,"stroke-dasharray")},setGradient:function(a){var u,c,l,f=a.rendNode,v=w.evaluate(a.visProp.gradient);"linear"===v||"radial"===v?(u=this.createPrim(v+"Gradient",a.id+"_gradient"),c=this.createPrim("stop",a.id+"_gradient1"),l=this.createPrim("stop",a.id+"_gradient2"),u.appendChild(c),u.appendChild(l),this.defs.appendChild(u),f.setAttributeNS(null,"style","fill:url(#"+this.container.id+"_"+a.id+"_gradient)"),a.gradNode1=c,a.gradNode2=l,a.gradNode=u):f.removeAttributeNS(null,"style")},updateGradientAngle:function(a,u){var c=1,l=Math.cos(u),f=Math.sin(u);Math.abs(l)>Math.abs(f)?c/=Math.abs(l):c/=Math.abs(f),l>=0?(a.setAttributeNS(null,"x1",0),a.setAttributeNS(null,"x2",l*c)):(a.setAttributeNS(null,"x1",-l*c),a.setAttributeNS(null,"x2",0)),f>=0?(a.setAttributeNS(null,"y1",0),a.setAttributeNS(null,"y2",f*c)):(a.setAttributeNS(null,"y1",-f*c),a.setAttributeNS(null,"y2",0))},updateGradientCircle:function(a,u,c,l,f,v,_){a.setAttributeNS(null,"cx",100*u+"%"),a.setAttributeNS(null,"cy",100*c+"%"),a.setAttributeNS(null,"r",100*l+"%"),a.setAttributeNS(null,"fx",100*f+"%"),a.setAttributeNS(null,"fy",100*v+"%"),a.setAttributeNS(null,"fr",100*_+"%")},updateGradient:function(a){var u,c,l=a.gradNode1,f=a.gradNode2,v=w.evaluate(a.visProp.gradient);w.exists(l)&&w.exists(f)&&(c=(c=w.evaluate(a.visProp.fillopacity))>0?c:0,u=w.evaluate(a.visProp.fillcolor),l.setAttributeNS(null,"style","stop-color:"+u+";stop-opacity:"+c),f.setAttributeNS(null,"style","stop-color:"+w.evaluate(a.visProp.gradientsecondcolor)+";stop-opacity:"+w.evaluate(a.visProp.gradientsecondopacity)),l.setAttributeNS(null,"offset",100*w.evaluate(a.visProp.gradientstartoffset)+"%"),f.setAttributeNS(null,"offset",100*w.evaluate(a.visProp.gradientendoffset)+"%"),"linear"===v?this.updateGradientAngle(a.gradNode,w.evaluate(a.visProp.gradientangle)):"radial"===v&&this.updateGradientCircle(a.gradNode,w.evaluate(a.visProp.gradientcx),w.evaluate(a.visProp.gradientcy),w.evaluate(a.visProp.gradientr),w.evaluate(a.visProp.gradientfx),w.evaluate(a.visProp.gradientfy),w.evaluate(a.visProp.gradientfr)))},setObjectTransition:function(a,u){var c,l,f,v=["rendNode","rendNodeTriangleStart","rendNodeTriangleEnd"];if(void 0===u&&(u=w.evaluate(a.visProp.transitionduration)),u!==a.visPropOld.transitionduration){for(c=a.elementClass===S.OBJECT_CLASS_TEXT&&"html"===w.evaluate(a.visProp.display)?" color "+u+"ms, opacity "+u+"ms":" fill "+u+"ms, fill-opacity "+u+"ms, stroke "+u+"ms, stroke-opacity "+u+"ms",f=v.length,l=0;l<f;++l)a[v[l]]&&(a[v[l]].style.transition=c);a.visPropOld.transitionduration=u}},_setAttribute:function(a,u){""===u?a():window.setTimeout(a,1)},setObjectFillColor:function(a,u,c,l){var f,v,_,h,y=w.evaluate(u),b=w.evaluate(c),x=w.evaluate(a.visProp.gradient);b=b>0?b:0,a.visPropOld.fillcolor===y&&a.visPropOld.fillopacity===b&&null===x||(w.exists(y)&&!1!==y&&(9!==y.length?(v=y,h=b):(_=g.rgba2rgbo(y),v=_[0],h=b*_[1]),f=void 0===l?a.rendNode:l,"none"!==v&&this._setAttribute(function(){f.setAttributeNS(null,"fill",v)},a.visPropOld.fillcolor),a.type===E.OBJECT_TYPE_IMAGE?this._setAttribute(function(){f.setAttributeNS(null,"opacity",h)},a.visPropOld.fillopacity):("none"===v?(h=0,f.setAttributeNS(null,"pointer-events","visibleStroke")):f.setAttributeNS(null,"pointer-events","visiblePainted"),this._setAttribute(function(){f.setAttributeNS(null,"fill-opacity",h)},a.visPropOld.fillopacity)),"linear"!==x&&"radial"!==x||this.updateGradient(a)),a.visPropOld.fillcolor=y,a.visPropOld.fillopacity=b)},setObjectStrokeColor:function(a,u,c){var l,f,v,_,h=w.evaluate(u),y=w.evaluate(c);y=y>0?y:0,a.visPropOld.strokecolor===h&&a.visPropOld.strokeopacity===y||(w.exists(h)&&!1!==h&&(9!==h.length?(l=h,v=y):(f=g.rgba2rgbo(h),l=f[0],v=y*f[1]),_=a.rendNode,a.elementClass===S.OBJECT_CLASS_TEXT?"html"===w.evaluate(a.visProp.display)?this._setAttribute(function(){_.style.color=l,_.style.opacity=v},a.visPropOld.strokecolor):this._setAttribute(function(){_.setAttributeNS(null,"style","fill:"+l),_.setAttributeNS(null,"style","fill-opacity:"+v)},a.visPropOld.strokecolor):this._setAttribute(function(){_.setAttributeNS(null,"stroke",l),_.setAttributeNS(null,"stroke-opacity",v)},a.visPropOld.strokecolor),a.elementClass!==S.OBJECT_CLASS_CURVE&&a.elementClass!==S.OBJECT_CLASS_LINE||(w.evaluate(a.visProp.firstarrow)&&this._setArrowColor(a.rendNodeTriangleStart,l,v,a,a.visPropCalc.typeFirst),w.evaluate(a.visProp.lastarrow)&&this._setArrowColor(a.rendNodeTriangleEnd,l,v,a,a.visPropCalc.typeLast))),a.visPropOld.strokecolor=h,a.visPropOld.strokeopacity=y)},setObjectStrokeWidth:function(a,u){var c,l=w.evaluate(u);isNaN(l)||a.visPropOld.strokewidth===l||(this.setPropertyPrim(c=a.rendNode,"stroked","true"),w.exists(l)&&this.setPropertyPrim(c,"stroke-width",l+"px"),a.visPropOld.strokewidth=l)},setLineCap:function(a){var u=w.evaluate(a.visProp.linecap);void 0!==u&&""!==u&&a.visPropOld.linecap!==u&&w.exists(a.rendNode)&&(this.setPropertyPrim(a.rendNode,"stroke-linecap",u),a.visPropOld.linecap=u)},setShadow:function(a){var u=w.evaluate(a.visProp.shadow);a.visPropOld.shadow!==u&&(w.exists(a.rendNode)&&(u?a.rendNode.setAttributeNS(null,"filter","url(#"+this.container.id+"_f1)"):a.rendNode.removeAttributeNS(null,"filter")),a.visPropOld.shadow=u)},suspendRedraw:function(){},unsuspendRedraw:function(){},resize:function(a,u){this.svgRoot.setAttribute("width",parseFloat(a)),this.svgRoot.setAttribute("height",parseFloat(u))},createTouchpoints:function(a){var u,f;for(this.touchpoints=[],u=0;u<a;u++)f=this.createPrim("path","touchpoint1_"+u),this.appendChildPrim(f,19),f.setAttributeNS(null,"d","M 0 0"),this.touchpoints.push(f),this.setPropertyPrim(f,"stroked","true"),this.setPropertyPrim(f,"stroke-width","1px"),f.setAttributeNS(null,"stroke","#000000"),f.setAttributeNS(null,"stroke-opacity",1),f.setAttributeNS(null,"display","none"),f=this.createPrim("ellipse","touchpoint2_"+u),this.appendChildPrim(f,19),this.updateEllipsePrim(f,0,0,0,0),this.touchpoints.push(f),this.setPropertyPrim(f,"stroked","true"),this.setPropertyPrim(f,"stroke-width","1px"),f.setAttributeNS(null,"stroke","#000000"),f.setAttributeNS(null,"stroke-opacity",1),f.setAttributeNS(null,"fill","#ffffff"),f.setAttributeNS(null,"fill-opacity",0),f.setAttributeNS(null,"display","none")},showTouchpoint:function(a){this.touchpoints&&a>=0&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"display","inline"),this.touchpoints[2*a+1].setAttributeNS(null,"display","inline"))},hideTouchpoint:function(a){this.touchpoints&&a>=0&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"display","none"),this.touchpoints[2*a+1].setAttributeNS(null,"display","none"))},updateTouchpoint:function(a,u){var c,l;this.touchpoints&&a>=0&&2*a<this.touchpoints.length&&(this.touchpoints[2*a].setAttributeNS(null,"d","M "+((c=u[0])-37)+" "+(l=u[1])+" L "+(c+37)+" "+l+" M "+c+" "+(l-37)+" L "+c+" "+(l+37)),this.updateEllipsePrim(this.touchpoints[2*a+1],u[0],u[1],25,25))},_getValuesOfDOMElements:function(a){var u=[];if(1===a.nodeType)for(a=a.firstChild;a;)void 0!==a.id&&void 0!==a.value&&u.push([a.id,a.value]),u=u.concat(this._getValuesOfDOMElements(a)),a=a.nextSibling;return u},_getDataUri:function(a,u){var c=new Image;c.onload=function(){var l=document.createElement("canvas");l.width=this.naturalWidth,l.height=this.naturalHeight,l.getContext("2d").drawImage(this,0,0),u(l.toDataURL("image/png")),l.remove()},c.src=a},_getImgDataURL:function(a){var u,c,l,f,v,_;if((c=(u=a.getElementsByTagName("image")).length)>0)for(l=document.createElement("canvas"),_=0;_<c;_++){u[_].setAttribute("crossorigin","anonymous"),f=l.getContext("2d"),l.width=u[_].getAttribute("width"),l.height=u[_].getAttribute("height");try{f.drawImage(u[_],0,0,l.width,l.height),v=l.toDataURL(),u[_].setAttribute("xlink:href",v)}catch(h){console.log("CORS problem! Image can not be used",h)}}return!0},dumpToDataURI:function(a){var u,c,l,f=this.svgRoot,v=window.btoa||m.encode,_=[];if(this.container.hasChildNodes()&&w.exists(this.foreignObjLayer))for(a||this.foreignObjLayer.setAttribute("display","inline");f.nextSibling;)_=_.concat(this._getValuesOfDOMElements(f.nextSibling)),this.foreignObjLayer.appendChild(f.nextSibling);if(this._getImgDataURL(f),f.setAttribute("xmlns","http://www.w3.org/2000/svg"),u=(new XMLSerializer).serializeToString(f),!0!==a)for(l=_.length,c=0;c<l;c++)u=u.replace('id="'+_[c][0]+'"','id="'+_[c][0]+'" value="'+_[c][1]+'"');if((u.match(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g)||[]).length>1&&(u=u.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,"")),u=u.replace(/&nbsp;/g," "),w.exists(this.foreignObjLayer)&&this.foreignObjLayer.hasChildNodes()){for(;this.foreignObjLayer.firstChild;)this.container.appendChild(this.foreignObjLayer.firstChild);this.foreignObjLayer.setAttribute("display","none")}return"data:image/svg+xml;base64,"+v(unescape(encodeURIComponent(u)))},dumpToCanvas:function(a,u,c,l){var f,v,_,h;return(_=this.container.ownerDocument.getElementById(a)).width=_.width,h=_.getContext("2d"),void 0!==u&&void 0!==c&&(_.style.width=parseFloat(u)+"px",_.style.height=parseFloat(c)+"px",_.setAttribute("width",parseFloat(u)),_.setAttribute("height",parseFloat(c))),v=new Image,f=this.dumpToDataURI(l),v.src=f,"Promise"in window?new Promise(function(y,b){try{v.onload=function(){h.drawImage(v,0,0,u,c),y()}}catch(x){b(x)}}):(v.onload=function(){window.setTimeout(function(){try{h.drawImage(v,0,0,u,c)}catch{console.log("screenshots not longer supported on IE")}},200)},this)},screenshot:function(a,u,c){var l,f,v,_,h,y,b,x,D,M,O,A=this.container.ownerDocument,N=this.container.parentNode,L=a.attr.screenshot,B=!1;return"no"===this.type||(b=L.scale*this.container.getBoundingClientRect().width,x=L.scale*this.container.getBoundingClientRect().height,void 0===u||""===u?(B=!0,(_=new Image).style.width=b+"px",_.style.height=x+"px"):(B=!1,_=A.getElementById(u)),B&&((l=A.createElement("div")).style.cssText=L.css,l.style.width=b+"px",l.style.height=x+"px",l.style.zIndex=this.container.style.zIndex+120,l.style.position="absolute",l.style.top=this.container.offsetTop+"px",l.style.left=this.container.offsetLeft+"px"),f=A.createElement("canvas"),v=Math.random().toString(36).substr(2,5),f.setAttribute("id",v),f.setAttribute("width",b),f.setAttribute("height",x),f.style.width=b+"px",f.style.height=b+"px",f.style.display="none",N.appendChild(f),B&&(h=A.createElement("span"),y=A.createTextNode("\u2716"),h.style.cssText=L.cssButton,h.appendChild(y),h.onclick=function(){l.parentNode.removeChild(l)},l.appendChild(_),l.appendChild(h),N.insertBefore(l,this.container.nextSibling)),D=A.getElementById(this.container.id+"_navigationbar"),w.exists(D)&&(M=D.style.display,D.style.display="none"),O=function(){_.src=f.toDataURL("image/png"),N.removeChild(f)},"Promise"in window?this.dumpToCanvas(v,b,x,c).then(O):(this.dumpToCanvas(v,b,x,c),window.setTimeout(O,200)),w.exists(D)&&(D.style.display=M)),this}}),E.SVGRenderer}),define("renderer/vml",["jxg","renderer/abstract","base/constants","utils/type","utils/color","math/math","math/numerics"],function(E,I,T,S,w,g,m){"use strict";return E.VMLRenderer=function(p){this.type="vml",this.container=p,this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.onselectstart=function(){return!1},this.resolution=10,S.exists(E.vmlStylesheet)||(p.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),E.vmlStylesheet=this.container.ownerDocument.createStyleSheet(),E.vmlStylesheet.addRule(".jxgvml","behavior:url(#default#VML)"));try{p.ownerDocument.namespaces.jxgvml||p.ownerDocument.namespaces.add("jxgvml","urn:schemas-microsoft-com:vml"),this.createNode=function(a){return p.ownerDocument.createElement("<jxgvml:"+a+' class="jxgvml">')}}catch{this.createNode=function(u){return p.ownerDocument.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="jxgvml">')}}this.dashArray=["Solid","1 1","ShortDash","Dash","LongDash","ShortDashDot","LongDashDot"]},E.VMLRenderer.prototype=new I,E.extend(E.VMLRenderer.prototype,{_setAttr:function(p,a,u,c){try{8===this.container.ownerDocument.documentMode?p[a]=u:p.setAttribute(a,u,c)}catch{E.debug("_setAttr: "+a+" "+u+"<br>\n")}},updateTicks:function(p){var a,u,c,l,f,v=this.resolution,_=[];for(u=p.ticks.length,a=0;a<u;a++)l=(c=p.ticks[a])[0],f=c[1],S.isNumber(l[0])&&S.isNumber(l[1])&&_.push(" m "+Math.round(v*l[0])+", "+Math.round(v*f[0])+" l "+Math.round(v*l[1])+", "+Math.round(v*f[1])+" ");S.exists(p.rendNode)||(p.rendNode=this.createPrim("path",p.id),this.appendChildPrim(p.rendNode,S.evaluate(p.visProp.layer))),this._setAttr(p.rendNode,"stroked","true"),this._setAttr(p.rendNode,"strokecolor",S.evaluate(p.visProp.strokecolor),1),this._setAttr(p.rendNode,"strokeweight",S.evaluate(p.visProp.strokewidth)),this._setAttr(p.rendNodeStroke,"opacity",100*S.evaluate(p.visProp.strokeopacity)+"%"),this.updatePathPrim(p.rendNode,_,p.board)},displayCopyright:function(p,a){var u,c;(u=this.createNode("textbox")).style.position="absolute",this._setAttr(u,"id",this.container.id+"_licenseText"),u.style.left=20,u.style.top=2,u.style.fontSize=a,u.style.color="#356AA0",u.style.fontFamily="Arial,Helvetica,sans-serif",this._setAttr(u,"opacity","30%"),u.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 30, enabled = true)",c=this.container.ownerDocument.createTextNode(p),u.appendChild(c),this.appendChildPrim(u,0)},drawInternalText:function(p){var a;return(a=this.createNode("textbox")).style.position="absolute",p.rendNodeText=this.container.ownerDocument.createTextNode(""),a.appendChild(p.rendNodeText),this.appendChildPrim(a,9),a.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand', enabled = false) progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",a},updateInternalText:function(p){var a,u,c,l,f,v,_=p.plaintext,h=this.joinTransforms(p,p.transformations),y=[0,0],b=p.rendNode,x=[],D=p.getAnchorX(),M=p.getAnchorY();if(!isNaN(p.coords.scrCoords[1]+p.coords.scrCoords[2])){for("right"===D?y[0]=1:"middle"===D&&(y[0]=.5),"bottom"===M?y[1]=1:"middle"===M&&(y[1]=.5),x[0]=g.matVecMult(h,[1,p.coords.scrCoords[1]-y[0]*p.size[0],p.coords.scrCoords[2]+(1-y[1])*p.size[1]+this.vOffsetText]),x[0][1]/=x[0][0],x[0][2]/=x[0][0],x[1]=g.matVecMult(h,[1,p.coords.scrCoords[1]+(1-y[0])*p.size[0],p.coords.scrCoords[2]+(1-y[1])*p.size[1]+this.vOffsetText]),x[1][1]/=x[1][0],x[1][2]/=x[1][0],x[2]=g.matVecMult(h,[1,p.coords.scrCoords[1]+(1-y[0])*p.size[0],p.coords.scrCoords[2]-y[1]*p.size[1]+this.vOffsetText]),x[2][1]/=x[2][0],x[2][2]/=x[2][0],x[3]=g.matVecMult(h,[1,p.coords.scrCoords[1]-y[0]*p.size[0],p.coords.scrCoords[2]-y[1]*p.size[1]+this.vOffsetText]),x[3][1]/=x[3][0],x[3][2]/=x[3][0],u=x[0][1],l=x[0][1],c=x[0][2],f=x[0][2],v=1;v<4;v++)u=Math.max(u,x[v][1]),l=Math.min(l,x[v][1]),c=Math.max(c,x[v][2]),f=Math.min(f,x[v][2]);a=1===y[0]?Math.floor(p.board.canvasWidth-u):Math.floor(l),p.visPropOld.left!==D+a&&(1===y[0]?(p.rendNode.style.right=a+"px",p.rendNode.style.left="auto"):(p.rendNode.style.left=a+"px",p.rendNode.style.right="auto"),p.visPropOld.left=D+a),a=1===y[1]?Math.floor(p.board.canvasHeight-c):Math.floor(f),p.visPropOld.top!==M+a&&(1===y[1]?(p.rendNode.style.bottom=a+"px",p.rendNode.style.top="auto"):(p.rendNode.style.top=a+"px",p.rendNode.style.bottom="auto"),p.visPropOld.top=M+a)}p.htmlStr!==_&&(p.rendNodeText.data=_,p.htmlStr=_),b.filters.item(0).M11=h[1][1],b.filters.item(0).M12=h[1][2],b.filters.item(0).M21=h[2][1],b.filters.item(0).M22=h[2][2],b.filters.item(0).enabled=!0},drawImage:function(p){var a;(a=this.container.ownerDocument.createElement("img")).style.position="absolute",this._setAttr(a,"id",this.container.id+"_"+p.id),this.container.appendChild(a),this.appendChildPrim(a,S.evaluate(p.visProp.layer)),a.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11='1.0', sizingMethod='auto expand') progid:DXImageTransform.Microsoft.Alpha(opacity = 100, enabled = false)",p.rendNode=a,this.updateImage(p)},transformImage:function(p,a){var u,c,l,f,v,_,h=p.rendNode,y=[];if(a.length>0){for(u=this.joinTransforms(p,a),y[0]=g.matVecMult(u,p.coords.scrCoords),y[0][1]/=y[0][0],y[0][2]/=y[0][0],y[1]=g.matVecMult(u,[1,p.coords.scrCoords[1]+p.size[0],p.coords.scrCoords[2]]),y[1][1]/=y[1][0],y[1][2]/=y[1][0],y[2]=g.matVecMult(u,[1,p.coords.scrCoords[1]+p.size[0],p.coords.scrCoords[2]-p.size[1]]),y[2][1]/=y[2][0],y[2][2]/=y[2][0],y[3]=g.matVecMult(u,[1,p.coords.scrCoords[1],p.coords.scrCoords[2]-p.size[1]]),y[3][1]/=y[3][0],y[3][2]/=y[3][0],c=y[0][1],f=y[0][1],l=y[0][2],v=y[0][2],_=1;_<4;_++)c=Math.max(c,y[_][1]),f=Math.min(f,y[_][1]),l=Math.max(l,y[_][2]),v=Math.min(v,y[_][2]);h.style.left=Math.floor(f)+"px",h.style.top=Math.floor(v)+"px",h.filters.item(0).M11=u[1][1],h.filters.item(0).M12=u[1][2],h.filters.item(0).M21=u[2][1],h.filters.item(0).M22=u[2][2],h.filters.item(0).enabled=!0}},updateImageURL:function(p){var a=S.evaluate(p.url);this._setAttr(p.rendNode,"src",a)},appendChildPrim:function(p,a){return S.exists(a)||(a=0),p.style.zIndex=a,this.container.appendChild(p),p},appendNodesToElement:function(p,a){"shape"!==a&&"path"!==a&&"polygon"!==a||(p.rendNodePath=this.getElementById(p.id+"_path")),p.rendNodeFill=this.getElementById(p.id+"_fill"),p.rendNodeStroke=this.getElementById(p.id+"_stroke"),p.rendNodeShadow=this.getElementById(p.id+"_shadow"),p.rendNode=this.getElementById(p.id)},createPrim:function(p,a){var u,c,l=this.createNode("fill"),f=this.createNode("stroke"),v=this.createNode("shadow");return this._setAttr(l,"id",this.container.id+"_"+a+"_fill"),this._setAttr(f,"id",this.container.id+"_"+a+"_stroke"),this._setAttr(v,"id",this.container.id+"_"+a+"_shadow"),"circle"===p||"ellipse"===p?((u=this.createNode("oval")).appendChild(l),u.appendChild(f),u.appendChild(v)):"polygon"===p||"path"===p||"shape"===p||"line"===p?((u=this.createNode("shape")).appendChild(l),u.appendChild(f),u.appendChild(v),c=this.createNode("path"),this._setAttr(c,"id",this.container.id+"_"+a+"_path"),u.appendChild(c)):((u=this.createNode(p)).appendChild(l),u.appendChild(f),u.appendChild(v)),u.style.position="absolute",u.style.left="0px",u.style.top="0px",this._setAttr(u,"id",this.container.id+"_"+a),u},remove:function(p){S.exists(p)&&p.removeNode(!0)},makeArrows:function(p){var a,u=S.evaluate(p.visProp.firstarrow),c=S.evaluate(p.visProp.lastarrow);p.visPropOld.firstarrow===u&&p.visPropOld.lastarrow===c||(u?(this._setAttr(a=p.rendNodeStroke,"startarrow","block"),this._setAttr(a,"startarrowlength","long")):S.exists(a=p.rendNodeStroke)&&this._setAttr(a,"startarrow","none"),c?(this._setAttr(a=p.rendNodeStroke,"id",this.container.id+"_"+p.id+"stroke"),this._setAttr(a,"endarrow","block"),this._setAttr(a,"endarrowlength","long")):S.exists(a=p.rendNodeStroke)&&this._setAttr(a,"endarrow","none"),p.visPropOld.firstarrow=u,p.visPropOld.lastarrow=c)},updateEllipsePrim:function(p,a,u,c,l){p.style.left=Math.floor(a-c)+"px",p.style.top=Math.floor(u-l)+"px",p.style.width=Math.floor(2*Math.abs(c))+"px",p.style.height=Math.floor(2*Math.abs(l))+"px"},updateLinePrim:function(p,a,u,c,l,f){var v,_=this.resolution;isNaN(a+u+c+l)||(v=["m ",Math.floor(_*a),", ",Math.floor(_*u)," l ",Math.floor(_*c),", ",Math.floor(_*l)],this.updatePathPrim(p,v,f))},updatePathPrim:function(p,a,u){var c=u.canvasWidth,l=u.canvasHeight;a.length<=0&&(a=["m 0,0"]),p.style.width=c,p.style.height=l,this._setAttr(p,"coordsize",[Math.floor(this.resolution*c),Math.floor(this.resolution*l)].join(",")),this._setAttr(p,"path",a.join(""))},updatePathStringPoint:function(p,a,u){var c=[],l=Math.round,f=p.coords.scrCoords,v=a*Math.sqrt(3)*.5,_=.5*a,h=this.resolution;return"x"===u?c.push([" m ",l(h*(f[1]-a)),", ",l(h*(f[2]-a))," l ",l(h*(f[1]+a)),", ",l(h*(f[2]+a))," m ",l(h*(f[1]+a)),", ",l(h*(f[2]-a))," l ",l(h*(f[1]-a)),", ",l(h*(f[2]+a))].join("")):"+"===u?c.push([" m ",l(h*(f[1]-a)),", ",l(h*f[2])," l ",l(h*(f[1]+a)),", ",l(h*f[2])," m ",l(h*f[1]),", ",l(h*(f[2]-a))," l ",l(h*f[1]),", ",l(h*(f[2]+a))].join("")):"<>"===u?c.push([" m ",l(h*(f[1]-a)),", ",l(h*f[2])," l ",l(h*f[1]),", ",l(h*(f[2]+a))," l ",l(h*(f[1]+a)),", ",l(h*f[2])," l ",l(h*f[1]),", ",l(h*(f[2]-a))," x e "].join("")):"^"===u?c.push([" m ",l(h*f[1]),", ",l(h*(f[2]-a))," l ",l(h*(f[1]-v)),", ",l(h*(f[2]+_))," l ",l(h*(f[1]+v)),", ",l(h*(f[2]+_))," x e "].join("")):"v"===u?c.push([" m ",l(h*f[1]),", ",l(h*(f[2]+a))," l ",l(h*(f[1]-v)),", ",l(h*(f[2]-_))," l ",l(h*(f[1]+v)),", ",l(h*(f[2]-_))," x e "].join("")):">"===u?c.push([" m ",l(h*(f[1]+a)),", ",l(h*f[2])," l ",l(h*(f[1]-_)),", ",l(h*(f[2]-v))," l ",l(h*(f[1]-_)),", ",l(h*(f[2]+v))," l ",l(h*(f[1]+a)),", ",l(h*f[2])].join("")):"<"===u&&c.push([" m ",l(h*(f[1]-a)),", ",l(h*f[2])," l ",l(h*(f[1]+_)),", ",l(h*(f[2]-v))," l ",l(h*(f[1]+_)),", ",l(h*(f[2]+v))," x e "].join("")),c},updatePathStringPrim:function(p){var a,u,c=[],l=this.resolution,f=Math.round,v=" m ",_=v,h=Math.min(p.numberPoints,8192);if(p.numberPoints<=0)return"";if(h=Math.min(h,p.points.length),1===p.bezierDegree)for(a=0;a<h;a++)u=p.points[a].scrCoords,isNaN(u[1])||isNaN(u[2])?_=v:(u[1]>2e4?u[1]=2e4:u[1]<-2e4&&(u[1]=-2e4),u[2]>2e4?u[2]=2e4:u[2]<-2e4&&(u[2]=-2e4),c.push([_,f(l*u[1]),", ",f(l*u[2])].join("")),_=" l ");else if(3===p.bezierDegree)for(a=0;a<h;)u=p.points[a].scrCoords,isNaN(u[1])||isNaN(u[2])?_=v:(c.push([_,f(l*u[1]),", ",f(l*u[2])].join(""))," c "===_&&(c.push([" ",f(l*(u=p.points[a+=1].scrCoords)[1]),", ",f(l*u[2])].join("")),c.push([" ",f(l*(u=p.points[a+=1].scrCoords)[1]),", ",f(l*u[2])].join(""))),_=" c "),a+=1;return c.push(" e"),c},updatePathStringBezierPrim:function(p){var a,u,c,l,f,v,_=[],h=S.evaluate(p.visProp.strokewidth),y=this.resolution,b=Math.round,x=" m ",D=x,M="plot"!==S.evaluate(p.visProp.curvetype),O=Math.min(p.numberPoints,8192);if(p.numberPoints<=0)return"";for(M&&p.board.options.curve.RDPsmoothing&&(p.points=m.RamerDouglasPeucker(p.points,1)),O=Math.min(O,p.points.length),u=1;u<3;u++)for(D=x,a=0;a<O;a++)l=p.points[a].scrCoords,isNaN(l[1])||isNaN(l[2])?D=x:(l[1]>2e4?l[1]=2e4:l[1]<-2e4&&(l[1]=-2e4),l[2]>2e4?l[2]=2e4:l[2]<-2e4&&(l[2]=-2e4),_.push(D===x?[D,b(y*l[1])," ",b(y*l[2])].join(""):[D,b(y*(f+.333*(l[1]-f)+h*((c=2*u)*Math.random()-u)))," ",b(y*(v+.333*(l[2]-v)+h*(c*Math.random()-u)))," ",b(y*(f+.666*(l[1]-f)+h*(c*Math.random()-u)))," ",b(y*(v+.666*(l[2]-v)+h*(c*Math.random()-u)))," ",b(y*l[1])," ",b(y*l[2])].join("")),D=" c ",f=l[1],v=l[2]);return _.push(" e"),_},updatePolygonPrim:function(p,a){var u,c,l=a.vertices.length,f=this.resolution,v=[];if(this._setAttr(p,"stroked","false"),c=a.vertices[0].coords.scrCoords,!isNaN(c[1]+c[2])){for(v.push(["m ",Math.floor(f*c[1]),",",Math.floor(f*c[2])," l "].join("")),u=1;u<l-1;u++){if(!a.vertices[u].isReal)return void this.updatePathPrim(p,"",a.board);if(c=a.vertices[u].coords.scrCoords,isNaN(c[1]+c[2]))return;v.push(Math.floor(f*c[1])+","+Math.floor(f*c[2])),u<l-2&&v.push(", ")}v.push(" x e"),this.updatePathPrim(p,v,a.board)}},updateRectPrim:function(p,a,u,c,l){p.style.left=Math.floor(a)+"px",p.style.top=Math.floor(u)+"px",c>=0&&(p.style.width=c+"px"),l>=0&&(p.style.height=l+"px")},setPropertyPrim:function(p,a,u){var c,l="";switch(a){case"stroke":l="strokecolor";break;case"stroke-width":l="strokeweight";break;case"stroke-dasharray":l="dashstyle"}""!==l&&(c=S.evaluate(u),this._setAttr(p,l,c))},display:function(p,a){p&&p.rendNode&&(p.visPropOld.visible=a,p.rendNode.style.visibility=a?"inherit":"hidden")},show:function(p){E.deprecated("Board.renderer.show()","Board.renderer.display()"),p&&p.rendNode&&(p.rendNode.style.visibility="inherit")},hide:function(p){E.deprecated("Board.renderer.hide()","Board.renderer.display()"),p&&p.rendNode&&(p.rendNode.style.visibility="hidden")},setDashStyle:function(p,a){a.dash>=0&&this._setAttr(p.rendNodeStroke,"dashstyle",this.dashArray[a.dash])},setGradient:function(p){var a=p.rendNodeFill,u=S.evaluate(p.visProp.gradient);"linear"===u?(this._setAttr(a,"type","gradient"),this._setAttr(a,"color2",S.evaluate(p.visProp.gradientsecondcolor)),this._setAttr(a,"opacity2",S.evaluate(p.visProp.gradientsecondopacity)),this._setAttr(a,"angle",S.evaluate(p.visProp.gradientangle))):"radial"===u?(this._setAttr(a,"type","gradientradial"),this._setAttr(a,"color2",S.evaluate(p.visProp.gradientsecondcolor)),this._setAttr(a,"opacity2",S.evaluate(p.visProp.gradientsecondopacity)),this._setAttr(a,"focusposition",100*S.evaluate(p.visProp.gradientpositionx)+"%,"+100*S.evaluate(p.visProp.gradientpositiony)+"%"),this._setAttr(a,"focussize","0,0")):this._setAttr(a,"type","solid")},setObjectFillColor:function(p,a,u){var c,l,f,v=S.evaluate(a),_=S.evaluate(u),h=p.rendNode;_=_>0?_:0,p.visPropOld.fillcolor===v&&p.visPropOld.fillopacity===_||(S.exists(v)&&!1!==v&&(9!==v.length?(c=v,f=_):(c=(l=w.rgba2rgbo(v))[0],f=_*l[1]),"none"===c||!1===c?this._setAttr(p.rendNode,"filled","false"):(this._setAttr(p.rendNode,"filled","true"),this._setAttr(p.rendNode,"fillcolor",c),S.exists(f)&&p.rendNodeFill&&this._setAttr(p.rendNodeFill,"opacity",100*f+"%")),p.type===T.OBJECT_TYPE_IMAGE&&h.filters.length>1&&(h.filters.item(1).opacity=Math.round(100*f),h.filters.item(1).enabled=!0)),p.visPropOld.fillcolor=v,p.visPropOld.fillopacity=_)},setObjectStrokeColor:function(p,a,u){var c,l,f,v,_=S.evaluate(a),h=S.evaluate(u),y=p.rendNode;h=h>0?h:0,p.visPropOld.strokecolor===_&&p.visPropOld.strokeopacity===h||(S.exists(_)&&!1!==_&&(9!==_.length?(c=_,f=h):(c=(l=a.rgba2rgbo(_))[0],f=h*l[1]),p.elementClass===T.OBJECT_CLASS_TEXT?(y.filters.length>1&&(y.filters.item(1).opacity=Math.round(100*f),y.filters.item(1).enabled=!0),y.style.color=c):(!1!==c&&(this._setAttr(y,"stroked","true"),this._setAttr(y,"strokecolor",c)),v=p.rendNodeStroke,S.exists(f)&&p.type!==T.OBJECT_TYPE_IMAGE&&this._setAttr(v,"opacity",100*f+"%"))),p.visPropOld.strokecolor=_,p.visPropOld.strokeopacity=h)},setObjectStrokeWidth:function(p,a){var u,c=S.evaluate(a);isNaN(c)||p.visPropOld.strokewidth===c||(this.setPropertyPrim(u=p.rendNode,"stroked","true"),S.exists(c)&&(this.setPropertyPrim(u,"stroke-width",c),0===c&&S.exists(p.rendNodeStroke)&&this._setAttr(u,"stroked","false")),p.visPropOld.strokewidth=c)},setShadow:function(p){var a=p.rendNodeShadow,u=S.evaluate(p.visProp.shadow);a&&p.visPropOld.shadow!==u&&(u?(this._setAttr(a,"On","True"),this._setAttr(a,"Offset","3pt,3pt"),this._setAttr(a,"Opacity","60%"),this._setAttr(a,"Color","#aaaaaa")):this._setAttr(a,"On","False"),p.visPropOld.shadow=u)},suspendRedraw:function(){this.container.style.display="none"},unsuspendRedraw:function(){this.container.style.display=""}}),E.VMLRenderer}),define("renderer/canvas",["jxg","renderer/abstract","base/constants","utils/env","utils/type","utils/uuid","utils/color","base/coords","math/math","math/geometry","math/numerics"],function(E,I,T,S,w,g,m,p,a,u,c){"use strict";return E.CanvasRenderer=function(l,f){if(this.type="canvas",this.canvasRoot=null,this.suspendHandle=null,this.canvasId=g.genUUID(),this.canvasNamespace=null,S.isBrowser)this.container=l,this.container.style.MozUserSelect="none",this.container.style.userSelect="none",this.container.style.overflow="hidden",""===this.container.style.position&&(this.container.style.position="relative"),this.container.innerHTML=['<canvas id="',this.canvasId,'" width="',f.width,'px" height="',f.height,'px"><',"/canvas>"].join(""),this.canvasRoot=this.container.ownerDocument.getElementById(this.canvasId),this.canvasRoot.style.display="block",this.context=this.canvasRoot.getContext("2d");else if(S.isNode())try{this.canvasId=__webpack_require__(Object(function(){var _=new Error("Cannot find module 'canvas'");throw _.code="MODULE_NOT_FOUND",_}())),this.canvasRoot=new this.canvasId(500,500),this.context=this.canvasRoot.getContext("2d")}catch{console.log("Warning: 'canvas' not found. You might need to call 'npm install canvas'")}this.dashArray=[[2,2],[5,5],[10,10],[20,20],[20,10,10,10],[20,5,10,5]]},E.CanvasRenderer.prototype=new I,E.extend(E.CanvasRenderer.prototype,{_drawPolygon:function(l,f,v){var _,h=l.length,y=this.context;if(h>0){if(v&&(y.lineWidth=0),y.beginPath(),y.moveTo(l[0][0],l[0][1]),1===f)for(_=1;_<h;_++)y.lineTo(l[_][0],l[_][1]);else for(_=1;_<h;_+=3)y.bezierCurveTo(l[_][0],l[_][1],l[_+1][0],l[_+1][1],l[_+2][0],l[_+2][1]);v?(y.lineTo(l[0][0],l[0][1]),y.closePath(),y.fill("evenodd")):y.stroke()}},_fill:function(l){var f=this.context;f.save(),this._setColor(l,"fill")&&f.fill("evenodd"),f.restore()},_rotatePoint:function(l,f,v){return[f*Math.cos(l)-v*Math.sin(l),f*Math.sin(l)+v*Math.cos(l)]},_rotateShape:function(l,f){var v,_=[],h=l.length;if(h<=0)return l;for(v=0;v<h;v++)_.push(this._rotatePoint(f,l[v][0],l[v][1]));return _},updateGradientAngle:function(l,f){var v,_,h,y,b,x,N,L,B=1,V=Math.cos(-f),U=Math.sin(-f),j=l.getBoundingBox();return Math.abs(V)>Math.abs(U)?B/=Math.abs(V):B/=Math.abs(U),V>=0?(h=0,y=V*B):(h=-V*B,y=0),U>=0?(b=0,x=U*B):(b=-U*B,x=0),v=new p(T.COORDS_BY_USER,[j[0],j[1]],l.board),N=(_=new p(T.COORDS_BY_USER,[j[2],j[3]],l.board)).scrCoords[1]-v.scrCoords[1],this.context.createLinearGradient(v.scrCoords[1]+N*h,v.scrCoords[2]+(L=_.scrCoords[2]-v.scrCoords[2])*b,v.scrCoords[1]+N*y,v.scrCoords[2]+L*x)},updateGradientCircle:function(l,f,v,_,h,y,b){var x,D,V,U,j=l.getBoundingBox();return x=new p(T.COORDS_BY_USER,[j[0],j[1]],l.board),V=(D=new p(T.COORDS_BY_USER,[j[2],j[3]],l.board)).scrCoords[1]-x.scrCoords[1],this.context.createRadialGradient(x.scrCoords[1]+V*h,D.scrCoords[2]+(U=x.scrCoords[2]-D.scrCoords[2])*y,b*(V+U)*.5,x.scrCoords[1]+V*f,D.scrCoords[2]+U*v,_*(V+U)*.5)},updateGradient:function(l){var f,v,_,h=w.evaluate(l.visProp.gradient);return v=(v=w.evaluate(l.visProp.fillopacity))>0?v:0,f=w.evaluate(l.visProp.fillcolor),"linear"===h?_=this.updateGradientAngle(l,w.evaluate(l.visProp.gradientangle)):"radial"===h&&(_=this.updateGradientCircle(l,w.evaluate(l.visProp.gradientcx),w.evaluate(l.visProp.gradientcy),w.evaluate(l.visProp.gradientr),w.evaluate(l.visProp.gradientfx),w.evaluate(l.visProp.gradientfy),w.evaluate(l.visProp.gradientfr))),_.addColorStop(w.evaluate(l.visProp.gradientstartoffset),f),_.addColorStop(w.evaluate(l.visProp.gradientendoffset),w.evaluate(l.visProp.gradientsecondcolor)),_},_setColor:function(l,f,v){var _,h,y,b,x,D,M,O,A=!0,N=l.visProp;return f=f||"stroke",v=v||f,_=this._getHighlighted(l),"linear"===(O=w.evaluate(l.visProp.gradient))||"radial"===O?(this.context[v+"Style"]=this.updateGradient(l),A):("none"!==(y=w.evaluate(N[_+f+"color"]))&&!1!==y?(D=(D=w.evaluate(N[_+f+"opacity"]))>0?D:0,9!==y.length?(x=y,M=D):(x=(b=m.rgba2rgbo(y))[0],M=D*b[1]),this.context.globalAlpha=M,this.context[v+"Style"]=x):A=!1,h=parseFloat(w.evaluate(N[_+"strokewidth"])),"stroke"!==f||isNaN(h)||(0===h?this.context.globalAlpha=0:this.context.lineWidth=h),"stroke"===f&&void 0!==N.linecap&&""!==N.linecap&&(this.context.lineCap=N.linecap),A)},_stroke:function(l){var f=this.context,v=w.evaluate(l.visProp.dash);f.save(),v>0?f.setLineDash&&f.setLineDash(this.dashArray[v]):this.context.lineDashArray=[],this._setColor(l,"stroke")&&f.stroke(),f.restore()},_translateShape:function(l,f,v){var _,h=[],y=l.length;if(y<=0)return l;for(_=0;_<y;_++)h.push([l[_][0]+f,l[_][1]+v]);return h},drawPoint:function(l){var f=w.evaluate(l.visProp.face),v=w.evaluate(l.visProp.size),_=l.coords.scrCoords,h=v*Math.sqrt(3)*.5,y=.5*v,b=parseFloat(w.evaluate(l.visProp.strokewidth))/2,x=this.context;if(l.visPropCalc.visible)switch(f){case"cross":case"x":x.beginPath(),x.moveTo(_[1]-v,_[2]-v),x.lineTo(_[1]+v,_[2]+v),x.moveTo(_[1]+v,_[2]-v),x.lineTo(_[1]-v,_[2]+v),x.lineCap="round",x.lineJoin="round",x.closePath(),this._stroke(l);break;case"circle":case"o":x.beginPath(),x.arc(_[1],_[2],v+1+b,0,2*Math.PI,!1),x.closePath(),this._fill(l),this._stroke(l);break;case"square":case"[]":if(v<=0)break;x.save(),this._setColor(l,"stroke","fill")&&x.fillRect(_[1]-v-b,_[2]-v-b,2*v+3*b,2*v+3*b),x.restore(),x.save(),this._setColor(l,"fill"),x.fillRect(_[1]-v+b,_[2]-v+b,2*v-b,2*v-b),x.restore();break;case"plus":case"+":x.beginPath(),x.moveTo(_[1]-v,_[2]),x.lineTo(_[1]+v,_[2]),x.moveTo(_[1],_[2]-v),x.lineTo(_[1],_[2]+v),x.lineCap="round",x.lineJoin="round",x.closePath(),this._stroke(l);break;case"diamond":case"<>":x.beginPath(),x.moveTo(_[1]-v,_[2]),x.lineTo(_[1],_[2]+v),x.lineTo(_[1]+v,_[2]),x.lineTo(_[1],_[2]-v),x.closePath(),this._fill(l),this._stroke(l);break;case"triangleup":case"a":case"^":x.beginPath(),x.moveTo(_[1],_[2]-v),x.lineTo(_[1]-h,_[2]+y),x.lineTo(_[1]+h,_[2]+y),x.closePath(),this._fill(l),this._stroke(l);break;case"triangledown":case"v":x.beginPath(),x.moveTo(_[1],_[2]+v),x.lineTo(_[1]-h,_[2]-y),x.lineTo(_[1]+h,_[2]-y),x.closePath(),this._fill(l),this._stroke(l);break;case"triangleleft":case"<":x.beginPath(),x.moveTo(_[1]-v,_[2]),x.lineTo(_[1]+y,_[2]-h),x.lineTo(_[1]+y,_[2]+h),x.closePath(),this._fill(l),this._stroke(l);break;case"triangleright":case">":x.beginPath(),x.moveTo(_[1]+v,_[2]),x.lineTo(_[1]-y,_[2]-h),x.lineTo(_[1]-y,_[2]+h),x.closePath(),this._fill(l),this._stroke(l)}},updatePoint:function(l){this.drawPoint(l)},drawArrows:function(l,f,v,_,h){var y,b,x,D,M,O,A,N,L,B,V,U,j,X,Z,W,ee,ie,re=this.context,Me=1,Pe=1,Oe=1,Se=h.evFirst,me=h.evLast;if("none"!==w.evaluate(l.visProp.strokecolor)&&(Se||me)){if(l.elementClass===T.OBJECT_CLASS_LINE)y=f.scrCoords[1],b=f.scrCoords[2],x=v.scrCoords[1],D=v.scrCoords[2],ee=ie=Math.atan2(D-b,x-y);else{if(y=l.points[0].scrCoords[1],b=l.points[0].scrCoords[2],(W=l.points.length-1)<1)return;x=l.points[l.points.length-1].scrCoords[1],D=l.points[l.points.length-1].scrCoords[2],X=l.points[W].scrCoords[1]-l.points[W-1].scrCoords[1],Z=l.points[W].scrCoords[2]-l.points[W-1].scrCoords[2],Se&&(ee=Math.atan2(l.points[1].scrCoords[2]-l.points[0].scrCoords[2],l.points[1].scrCoords[1]-l.points[0].scrCoords[1])),me&&(ie=Math.atan2(Z,X))}if(M=w.evaluate(l.visProp[_+"strokewidth"]),Se)if(O=M*h.sizeFirst,L=Me=h.typeFirst,2===Me)N=[[O,.5*-O],[0,0],[O,.5*O],[.5*O,0]];else if(3===Me)N=[[O/3,.5*-O],[0,.5*-O],[0,.5*O],[O/3,.5*O]];else if(4===Me)for(O/=10,Pe=3,j=(N=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,U=0;U<j;U++)N[U][0]*=-O,N[U][1]*=O,N[U][0]+=10*O,N[U][1]-=3.31*O;else if(5===Me)for(O/=10,Pe=3,j=(N=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,U=0;U<j;U++)N[U][0]*=-O,N[U][1]*=O,N[U][0]+=10*O,N[U][1]-=3.28*O;else if(6===Me)for(O/=10,Pe=3,j=(N=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,U=0;U<j;U++)N[U][0]*=-O,N[U][1]*=O,N[U][0]+=10*O,N[U][1]-=2.84*O;else if(7===Me)for(O=M,Pe=3,j=(N=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,U=0;U<j;U++)N[U][0]*=-O,N[U][1]*=O,N[U][0]+=10*O,N[U][1]-=5.2*O;else N=[[O,.5*-O],[0,0],[O,.5*O]];if(me)if(O=M*h.sizeLast,B=Me=h.typeLast,2===Me)A=[[-O,.5*-O],[0,0],[-O,.5*O],[.5*-O,0]];else if(3===Me)A=[[-O/3,.5*-O],[0,.5*-O],[0,.5*O],[-O/3,.5*O]];else if(4===Me)for(O/=10,Oe=3,j=(A=[[10,3.31],[6.47,3.84],[2.87,4.5],[0,6.63],[.67,5.52],[1.33,4.42],[2,3.31],[1.33,2.21],[.67,1.1],[0,0],[2.87,2.13],[6.47,2.79],[10,3.31]]).length,U=0;U<j;U++)A[U][0]*=O,A[U][1]*=O,A[U][0]-=10*O,A[U][1]-=3.31*O;else if(5===Me)for(O/=10,Oe=3,j=(A=[[10,3.28],[6.61,4.19],[3.19,5.07],[0,6.55],[.62,5.56],[1,4.44],[1,3.28],[1,2.11],[.62,.99],[0,0],[3.19,1.49],[6.61,2.37],[10,3.28]]).length,U=0;U<j;U++)A[U][0]*=O,A[U][1]*=O,A[U][0]-=10*O,A[U][1]-=3.28*O;else if(6===Me)for(O/=10,Oe=3,j=(A=[[10,2.84],[6.61,3.59],[3.21,4.35],[0,5.68],[.33,4.73],[.67,3.78],[1,2.84],[.67,1.89],[.33,.95],[0,0],[3.21,1.33],[6.61,2.09],[10,2.84]]).length,U=0;U<j;U++)A[U][0]*=O,A[U][1]*=O,A[U][0]-=10*O,A[U][1]-=2.84*O;else if(7===Me)for(O=M,Oe=3,j=(A=[[0,10.39],[2.01,6.92],[5.96,5.2],[10,5.2],[5.96,5.2],[2.01,3.47],[0,0]]).length,U=0;U<j;U++)A[U][0]*=O,A[U][1]*=O,A[U][0]-=10*O,A[U][1]-=5.2*O;else A=[[-O,.5*-O],[0,0],[-O,.5*O]];re.save(),this._setColor(l,"stroke","fill")&&(this._setColor(l,"stroke"),Se&&(V=7!==L,this._drawPolygon(this._translateShape(this._rotateShape(N,ee),y,b),Pe,V)),me&&(V=7!==B,this._drawPolygon(this._translateShape(this._rotateShape(A,ie),x,D),Oe,V))),re.restore()}},drawLine:function(l){var f,v,_,h,y,b=new p(T.COORDS_BY_USER,l.point1.coords.usrCoords,l.board),x=new p(T.COORDS_BY_USER,l.point2.coords.usrCoords,l.board),D=null;l.visPropCalc.visible&&(_=this._getHighlighted(l),h=w.evaluate(l.visProp[_+"strokewidth"]),((y=this.getArrowHeadData(l,h,_)).evFirst||y.evLast)&&(D=-4),u.calcStraight(l,b,x,D),this.handleTouchpoints(l,b,x,y),f=new p(T.COORDS_BY_USER,b.usrCoords,l.board),v=new p(T.COORDS_BY_USER,x.usrCoords,l.board),this.getPositionArrowHead(l,b,x,y),this.context.beginPath(),this.context.moveTo(b.scrCoords[1],b.scrCoords[2]),this.context.lineTo(x.scrCoords[1],x.scrCoords[2]),this._stroke(l),(y.evFirst||y.evLast)&&this.drawArrows(l,f,v,_,y))},updateLine:function(l){this.drawLine(l)},drawTicks:function(){},updateTicks:function(l){var f,v,_,h,y,b,x=l.ticks.length,D=this.context;for(D.beginPath(),f=0;f<x;f++)for(y=(_=(v=l.ticks[f])[0]).length,D.moveTo(_[0],(h=v[1])[0]),b=1;b<y;++b)D.lineTo(_[b],h[b]);D.lineCap="round",this._stroke(l)},drawCurve:function(l){var f,v,_;w.evaluate(l.visProp.handdrawing)?this.updatePathStringBezierPrim(l):this.updatePathStringPrim(l),l.numberPoints>1&&(f=this._getHighlighted(l),v=w.evaluate(l.visProp[f+"strokewidth"]),((_=this.getArrowHeadData(l,v,f)).evFirst||_.evLast)&&this.drawArrows(l,null,null,f,_))},updateCurve:function(l){this.drawCurve(l)},drawEllipse:function(l){var f=l.center.coords.scrCoords[1],v=l.center.coords.scrCoords[2],_=l.board.unitX,h=l.board.unitY,y=2*l.Radius(),b=2*l.Radius(),x=y*_,D=b*h,M=f-x/2,O=v-D/2,A=x/2*.5522848,N=D/2*.5522848,L=M+x,B=O+D,V=M+x/2,U=O+D/2,j=this.context;y>0&&b>0&&!isNaN(f+v)&&(j.beginPath(),j.moveTo(M,U),j.bezierCurveTo(M,U-N,V-A,O,V,O),j.bezierCurveTo(V+A,O,L,U-N,L,U),j.bezierCurveTo(L,U+N,V+A,B,V,B),j.bezierCurveTo(V-A,B,M,U+N,M,U),j.closePath(),this._fill(l),this._stroke(l))},updateEllipse:function(l){return this.drawEllipse(l)},displayCopyright:function(l,f){var v=this.context;v.save(),v.font=f+"px Arial",v.fillStyle="#aaa",v.lineWidth=.5,v.fillText(l,10,2+f),v.restore()},drawInternalText:function(l){var f=w.evaluate(l.visProp.fontsize),v=w.evaluate(l.visProp.fontunit),_=l.getAnchorX(),h=l.getAnchorY(),y=this.context;return y.save(),this._setColor(l,"stroke","fill")&&!isNaN(l.coords.scrCoords[1]+l.coords.scrCoords[2])&&(y.font=(f>0?f:0)+v+" Arial",this.transformImage(l,l.transformations),"left"===_?y.textAlign="left":"right"===_?y.textAlign="right":"middle"===_&&(y.textAlign="center"),"bottom"===h?y.textBaseline="bottom":"top"===h?y.textBaseline="top":"middle"===h&&(y.textBaseline="middle"),y.fillText(l.plaintext,l.coords.scrCoords[1],l.coords.scrCoords[2])),y.restore(),null},updateInternalText:function(l){this.drawInternalText(l)},setObjectStrokeColor:function(l,f,v){var _,h,y,b,x=w.evaluate(f),D=w.evaluate(v);D=D>0?D:0,l.visPropOld.strokecolor===x&&l.visPropOld.strokeopacity===D||(w.exists(x)&&!1!==x&&(9!==x.length?(_=x,y=D):(_=(h=m.rgba2rgbo(x))[0],y=D*h[1]),b=l.rendNode,l.elementClass===T.OBJECT_CLASS_TEXT&&"html"===w.evaluate(l.visProp.display)&&(b.style.color=_,b.style.opacity=y)),l.visPropOld.strokecolor=x,l.visPropOld.strokeopacity=D)},drawImage:function(l){l.rendNode=new Image,l._src="",this.updateImage(l)},updateImage:function(l){var f=this.context,v=w.evaluate(l.visProp.fillopacity),_=w.bind(function(){l.imgIsLoaded=!0,l.size[0]<=0||l.size[1]<=0||(f.save(),f.globalAlpha=v,this.transformImage(l,l.transformations),f.drawImage(l.rendNode,l.coords.scrCoords[1],l.coords.scrCoords[2]-l.size[1],l.size[0],l.size[1]),f.restore())},this);this.updateImageURL(l)?l.rendNode.onload=_:l.imgIsLoaded&&_()},transformImage:function(l,f){var v,h=this.context;f.length>0&&(v=this.joinTransforms(l,f),Math.abs(c.det(v))>=a.eps&&h.transform(v[1][1],v[2][1],v[1][2],v[2][2],v[1][0],v[2][0]))},updateImageURL:function(l){var f;return f=w.evaluate(l.url),l._src!==f&&(l.imgIsLoaded=!1,l.rendNode.src=f,l._src=f,!0)},remove:function(l){w.exists(l)&&w.exists(l.parentNode)&&l.parentNode.removeChild(l)},updatePathStringPrim:function(l){var f,v,_,h,y,b="M",x=b,D=5e3,M=this.context;if(!(l.numberPoints<=0)){if(y=Math.min(l.points.length,l.numberPoints),M.beginPath(),1===l.bezierDegree)for(f=0;f<y;f++)v=l.points[f].scrCoords,isNaN(v[1])||isNaN(v[2])?x=b:(v[1]>D?v[1]=D:v[1]<-5e3&&(v[1]=-5e3),v[2]>D?v[2]=D:v[2]<-5e3&&(v[2]=-5e3),x===b?M.moveTo(v[1],v[2]):M.lineTo(v[1],v[2]),x="L");else if(3===l.bezierDegree)for(f=0;f<y;)v=l.points[f].scrCoords,isNaN(v[1])||isNaN(v[2])?x=b:(x===b?M.moveTo(v[1],v[2]):M.bezierCurveTo(v[1],v[2],(_=l.points[f+=1].scrCoords)[1],_[2],(h=l.points[f+=1].scrCoords)[1],h[2]),x="C"),f+=1;M.lineCap="round",this._fill(l),this._stroke(l)}},updatePathStringBezierPrim:function(l){var f,v,_,h,y,b,x,D="M",M=D,O=5e3,A=w.evaluate(l.visProp.strokewidth),N="plot"!==w.evaluate(l.visProp.curvetype),L=this.context;if(!(l.numberPoints<=0)){for(N&&l.board.options.curve.RDPsmoothing&&(l.points=c.RamerDouglasPeucker(l.points,.5)),x=Math.min(l.points.length,l.numberPoints),L.beginPath(),v=1;v<3;v++)for(M=D,f=0;f<x;f++)h=l.points[f].scrCoords,isNaN(h[1])||isNaN(h[2])?M=D:(h[1]>O?h[1]=O:h[1]<-5e3&&(h[1]=-5e3),h[2]>O?h[2]=O:h[2]<-5e3&&(h[2]=-5e3),M===D?L.moveTo(h[1],h[2]):L.bezierCurveTo(y+.333*(h[1]-y)+A*((_=2*v)*Math.random()-v),b+.333*(h[2]-b)+A*(_*Math.random()-v),y+.666*(h[1]-y)+A*(_*Math.random()-v),b+.666*(h[2]-b)+A*(_*Math.random()-v),h[1],h[2]),M="C",y=h[1],b=h[2]);L.lineCap="round",this._fill(l),this._stroke(l)}},updatePolygonPrim:function(l,f){var v,_,h,y=f.vertices.length,b=this.context,x=!0;if(!(y<=0)&&f.visPropCalc.visible){for("polygonalchain"===f.elType&&y++,b.beginPath(),_=0;!f.vertices[_].isReal&&_<y-1;)_++,x=!1;for(b.moveTo((v=f.vertices[_].coords.scrCoords)[1],v[2]),h=_;h<y-1;h++)f.vertices[h].isReal||(x=!1),b.lineTo((v=f.vertices[h].coords.scrCoords)[1],v[2]);b.closePath(),x&&this._fill(f)}},display:function(l,f){l&&l.rendNode&&(l.visPropOld.visible=f,l.rendNode.style.visibility=f?"inherit":"hidden")},show:function(l){E.deprecated("Board.renderer.show()","Board.renderer.display()"),w.exists(l.rendNode)&&(l.rendNode.style.visibility="inherit")},hide:function(l){E.deprecated("Board.renderer.hide()","Board.renderer.display()"),w.exists(l.rendNode)&&(l.rendNode.style.visibility="hidden")},setGradient:function(l){var f;f=(f=w.evaluate(l.visProp.fillopacity))>0?f:0},setShadow:function(l){l.visPropOld.shadow!==l.visProp.shadow&&(l.visPropOld.shadow=l.visProp.shadow)},highlight:function(l){return l.elementClass===T.OBJECT_CLASS_TEXT&&"html"===w.evaluate(l.visProp.display)?this.updateTextStyle(l,!0):(l.board.prepareUpdate(),l.board.renderer.suspendRedraw(l.board),l.board.updateRenderer(),l.board.renderer.unsuspendRedraw()),this},noHighlight:function(l){return l.elementClass===T.OBJECT_CLASS_TEXT&&"html"===w.evaluate(l.visProp.display)?this.updateTextStyle(l,!1):(l.board.prepareUpdate(),l.board.renderer.suspendRedraw(l.board),l.board.updateRenderer(),l.board.renderer.unsuspendRedraw()),this},suspendRedraw:function(l){this.context.save(),this.context.clearRect(0,0,this.canvasRoot.width,this.canvasRoot.height),l&&l.attr.showcopyright&&this.displayCopyright(E.licenseText,12)},unsuspendRedraw:function(){this.context.restore()},resize:function(l,f){this.container?(this.canvasRoot.style.width=parseFloat(l)+"px",this.canvasRoot.style.height=parseFloat(f)+"px",this.canvasRoot.setAttribute("width",2*parseFloat(l)+"px"),this.canvasRoot.setAttribute("height",2*parseFloat(f)+"px")):(this.canvasRoot.width=2*parseFloat(l),this.canvasRoot.height=2*parseFloat(f)),this.context=this.canvasRoot.getContext("2d"),this.context.scale(2,2)},removeToInsertLater:function(){return function(){}}}),E.CanvasRenderer}),define("renderer/no",["jxg","renderer/abstract"],function(E,I){"use strict";return E.NoRenderer=function(){this.enhancedRendering=!1,this.type="no"},E.extend(E.NoRenderer.prototype,{drawPoint:function(T){},updatePoint:function(T){},changePointStyle:function(T){},drawLine:function(T){},updateLine:function(T){},drawTicks:function(T){},updateTicks:function(T){},drawCurve:function(T){},updateCurve:function(T){},drawEllipse:function(T){},updateEllipse:function(T){},drawPolygon:function(T){},updatePolygon:function(T){},displayCopyright:function(T,S){},drawInternalText:function(T){},updateInternalText:function(T){},drawText:function(T){},updateText:function(T){},updateTextStyle:function(T,S){},updateInternalTextStyle:function(T,S,w){},drawImage:function(T){},updateImage:function(T){},transformImage:function(T,S){},updateImageURL:function(T){},appendChildPrim:function(T,S){},appendNodesToElement:function(T,S){},createPrim:function(T,S){return null},remove:function(T){},makeArrows:function(T){},updateEllipsePrim:function(T,S,w,g,m){},updateLinePrim:function(T,S,w,g,m,p){},updatePathPrim:function(T,S,w){},updatePathStringPoint:function(T,S,w){},updatePathStringPrim:function(T){},updatePathStringBezierPrim:function(T){},updatePolygonPrim:function(T,S){},updateRectPrim:function(T,S,w,g,m){},setPropertyPrim:function(T,S,w){},display:function(T,S){T&&(T.visPropOld.visible=S)},show:function(T){},hide:function(T){},setBuffering:function(T,S){},setDashStyle:function(T){},setDraft:function(T){},removeDraft:function(T){},setGradient:function(T){},updateGradient:function(T){},setObjectTransition:function(T,S){},setObjectFillColor:function(T,S,w){},setObjectStrokeColor:function(T,S,w){},setObjectStrokeWidth:function(T,S){},setShadow:function(T){},highlight:function(T){},noHighlight:function(T){},suspendRedraw:function(){},unsuspendRedraw:function(){},drawZoomBar:function(T){},getElementById:function(T){return null},resize:function(T,S){},removeToInsertLater:function(){return function(){}}}),E.NoRenderer.prototype=new I,E.NoRenderer}),define("jsxgraph",["jxg","utils/env","utils/type","base/board","reader/file","options","renderer/svg","renderer/vml","renderer/canvas","renderer/no"],function(E,I,T,S,w,g,m,p,a,u){"use strict";return E.JSXGraph={rendererType:(g.board.renderer="no",I.supportsVML()&&(g.board.renderer="vml",document.onmousemove=function(){var c;return document.body&&(c=document.body.scrollLeft,c+=document.body.scrollTop),c}),I.supportsCanvas()&&(g.board.renderer="canvas"),I.supportsSVG()&&(g.board.renderer="svg"),I.isNode()&&I.supportsCanvas()&&(g.board.renderer="canvas"),(I.isNode()||"no"===g.renderer)&&(g.text.display="internal",g.infobox.display="internal"),g.board.renderer),initRenderer:function(c,l,f,v){var _;if(T.exists(f)&&!1!==f||"object"!=typeof document||(f=document),"object"==typeof f&&null!==c)for(_=f.getElementById(c);_.firstChild;)_.removeChild(_.firstChild);else _=c;return void 0!==v&&"auto"!==v||(v=this.rendererType),"svg"===v?new m(_,l):"vml"===v?new p(_):"canvas"===v?new a(_,l):new u},_setAttributes:function(c){var l=T.copyAttributes(c,g,"board");return l.zoom=T.copyAttributes(l,g,"board","zoom"),l.pan=T.copyAttributes(l,g,"board","pan"),l.drag=T.copyAttributes(l,g,"board","drag"),l.keyboard=T.copyAttributes(l,g,"board","keyboard"),l.selection=T.copyAttributes(l,g,"board","selection"),l.navbar=T.copyAttributes(l.navbar,g,"navbar"),l.screenshot=T.copyAttributes(l,g,"board","screenshot"),l.resize=T.copyAttributes(l,g,"board","resize"),l.fullscreen=T.copyAttributes(l,g,"board","fullscreen"),l.movetarget=c.moveTarget||c.movetarget||g.board.moveTarget,l},_fillBoard:function(c,l,f){c.initInfobox(),c.maxboundingbox=l.maxboundingbox,c.resizeContainer(f.width,f.height,!0,!0),c._createSelectionPolygon(l),c.renderer.drawZoomBar(c,l.navbar),E.boards[c.id]=c},_setARIA:function(c,l){var f,v,_,h,y,b,x=l.document||document;"object"==typeof x&&(f=(v=x.getElementById(c)).ownerDocument,h=v.parentNode,y=c+"_ARIAlabel",b=c+"_ARIAdescription",(_=f.createElement("div")).innerHTML=l.title,_.setAttribute("id",y),_.style.display="none",h.insertBefore(_,v),(_=f.createElement("div")).innerHTML=l.description,_.setAttribute("id",b),_.style.display="none",h.insertBefore(_,v),v.setAttribute("aria-labelledby",y),v.setAttribute("aria-describedby",b))},_removeARIANodes:function(c){var l,f,v;"object"==typeof(v=c.document||document)&&(f=c.containerObj.getAttribute("aria-labelledby"),(l=v.getElementById(f))&&l.parentNode&&l.parentNode.removeChild(l),f=c.containerObj.getAttribute("aria-describedby"),(l=v.getElementById(f))&&l.parentNode&&l.parentNode.removeChild(l))},initBoard:function(c,l){var f,v,_,h,y,b,x,D,M,O,A,N,L,B,V=0,U=0;return O=this._setAttributes(l=l||{}),D=I.getDimensions(c,O.document),O.unitx||O.unity?(f=T.def(O.originx,150),v=T.def(O.originy,150),_=T.def(O.unitx,50),h=T.def(O.unity,50)):((M=O.boundingbox)[0]<O.maxboundingbox[0]&&(M[0]=O.maxboundingbox[0]),M[1]>O.maxboundingbox[1]&&(M[1]=O.maxboundingbox[1]),M[2]>O.maxboundingbox[2]&&(M[2]=O.maxboundingbox[2]),M[3]<O.maxboundingbox[3]&&(M[3]=O.maxboundingbox[3]),b=parseInt(D.width,10),x=parseInt(D.height,10),T.exists(M)&&O.keepaspectratio?(_=b/(M[2]-M[0]),h=x/(M[1]-M[3]),Math.abs(_)<Math.abs(h)?U=.5*(x/(h=Math.abs(_)*h/Math.abs(h))-(M[1]-M[3])):V=.5*(b/(_=Math.abs(h)*_/Math.abs(_))-(M[2]-M[0]))):(_=b/(M[2]-M[0]),h=x/(M[1]-M[3])),f=-_*(M[0]-V),v=h*(M[1]+U)),y=this.initRenderer(c,D,O.document,O.renderer),this._setARIA(c,O),(B=new S(c,y,O.id,[f,v],O.zoomfactor*O.zoomx,O.zoomfactor*O.zoomy,_,h,D.width,D.height,O)).keepaspectratio=O.keepaspectratio,this._fillBoard(B,O,D),B.suspendUpdate(),O.axis&&(N=T.deepCopy(g.board.defaultAxes.x,A="object"==typeof O.axis?O.axis:{}),L=T.deepCopy(g.board.defaultAxes.y,A),O.defaultaxes.x&&(N=T.deepCopy(N,O.defaultaxes.x)),O.defaultaxes.y&&(L=T.deepCopy(L,O.defaultaxes.y)),B.defaultAxes={},B.defaultAxes.x=B.create("axis",[[0,0],[1,0]],N),B.defaultAxes.y=B.create("axis",[[0,0],[0,1]],L)),O.grid&&B.create("grid",[],"object"==typeof O.grid?O.grid:{}),B.unsuspendUpdate(),B},loadBoardFromFile:function(c,l,f,v,_){var h,y,b,x;return h=this._setAttributes(v=v||{}),x=I.getDimensions(c,h.document),y=this.initRenderer(c,x,h.document,h.renderer),this._setARIA(c,h),b=new S(c,y,"",[150,150],1,1,50,50,x.width,x.height,h),this._fillBoard(b,h,x),w.parseFileContent(l,b,f,!0,h.encoding||"iso-8859-1",_),b},loadBoardFromString:function(c,l,f,v,_){var h,y,b,x;return h=this._setAttributes(v=v||{}),x=I.getDimensions(c,h.document),y=this.initRenderer(c,x,h.document),this._setARIA(c,h),b=new S(c,y,"",[150,150],1,1,50,50,x.width,x.height,h),this._fillBoard(b,h,x),w.parseString(l,b,f,!0,_),b},freeBoard:function(c){var l;for(l in"string"==typeof c&&(c=E.boards[c]),this._removeARIANodes(c),c.removeEventHandlers(),c.suspendUpdate(),c.objects)c.objects.hasOwnProperty(l)&&c.objects[l].remove();for(;c.containerObj.firstChild;)c.containerObj.removeChild(c.containerObj.firstChild);for(l in c.objects)c.objects.hasOwnProperty(l)&&delete c.objects[l];delete c.renderer,c.jc.creator.clearCache(),delete c.jc,delete E.boards[c.id]},registerElement:function(c,l){E.deprecated("JXG.JSXGraph.registerElement()","JXG.registerElement()"),E.registerElement(c,l)}},I.isBrowser&&"object"==typeof window&&"object"==typeof document&&I.addEvent(window,"load",function(){var c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j=!1,z=document.getElementsByTagName("script"),$=function(Z,W,ee){var ie=E.JSXGraph.initBoard(_,{boundingbox:ee,keepaspectratio:!0,grid:L,axis:N,showReload:!0});if(W.toLowerCase().indexOf("script")>-1)ie.construct(Z);else try{ie.jc.parse(Z)}catch(re){E.debug(re)}return ie},X=function(Z,W,ee,ie){return function(){var re;E.JSXGraph.freeBoard(Z),(re=$(W,ee,ie)).reload=X(re,W,ee,ie)}};for(l=0;l<z.length;l++)if(c=z[l].getAttribute("type",!1),T.exists(c)&&("text/jessiescript"===c.toLowerCase()||"jessiescript"===c.toLowerCase()||"text/jessiecode"===c.toLowerCase()||"jessiecode"===c.toLowerCase())){if(O=z[l].getAttribute("class",!1)||"",b=z[l].getAttribute("width",!1)||"",x=z[l].getAttribute("height",!1)||"",D=z[l].getAttribute("maxwidth",!1)||"100%",M=z[l].getAttribute("aspectratio",!1)||"1/1",A=z[l].getAttribute("boundingbox",!1)||"-5, 5, 5, -5",_=z[l].getAttribute("container",!1),V=z[l].getAttribute("src",!1),4!==(A=A.split(",")).length)A=[-5,5,5,-5];else for(f=0;f<A.length;f++)A[f]=parseFloat(A[f]);if(N=T.str2Bool(z[l].getAttribute("axis",!1)||"false"),L=T.str2Bool(z[l].getAttribute("grid",!1)||"false"),T.exists(_))v=document.getElementById(_);else{_="jessiescript_autgen_jxg_"+l,(v=document.createElement("div")).setAttribute("id",_),y=""!==b?"width:"+b+";":"",y+=""!==x?"height:"+x+";":"",y+=""!==D?"max-width:"+D+";":"",v.setAttribute("style",y+=""!==M?"aspect-ratio:"+M+";":""),v.setAttribute("class","jxgbox "+O);try{document.body.insertBefore(v,z[l])}catch{"object"==typeof jQuery&&jQuery(v).insertBefore(z[l])}}B="",T.exists(V)?(j=!0,(U=new XMLHttpRequest).open("GET",V),U.overrideMimeType("text/plain; charset=x-user-defined"),U.addEventListener("load",function(){if(!(this.status<400))throw new Error("\nJSXGraph: failed to load file",V,":",this.responseText);(h=$(B=this.responseText+"\n"+B,c,A)).reload=X(h,B,c,A)}),U.addEventListener("error",function(Z){throw new Error("\nJSXGraph: failed to load file",V,":",Z)}),U.send()):j=!1,document.getElementById(_)?(B=(B=z[l].innerHTML).replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,""),z[l].innerHTML=B,j||((h=$(B,c,A)).reload=X(h,B,c,A))):E.debug("JSXGraph: Apparently the div injection failed. Can't create a board, sorry.")}},window),E.JSXGraph}),define("base/point",["jxg","options","math/math","math/geometry","base/constants","base/element","utils/type","base/coordselement"],function(E,I,T,S,w,g,m,p){"use strict";return E.Point=function(a,u,c){this.constructor(a,c,w.OBJECT_TYPE_POINT,w.OBJECT_CLASS_POINT),this.element=this.board.select(c.anchor),this.coordsConstructor(u),this.elType="point",this.id=this.board.setId(this,"P"),this.board.renderer.drawPoint(this),this.board.finalizeAdding(this),this.createGradient(),this.createLabel()},E.Point.prototype=new g,m.copyPrototypeMethods(E.Point,p,"coordsConstructor"),E.extend(E.Point.prototype,{hasPoint:function(a,u){var c,l,v=this.coords.scrCoords,_=m.evaluate(this.visProp.sizeunit);return l=m.isObject(m.evaluate(this.visProp.precision))?m.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,c=parseFloat(m.evaluate(this.visProp.size)),"user"===_&&(c*=Math.sqrt(this.board.unitX*this.board.unitY)),(c+=.5*parseFloat(m.evaluate(this.visProp.strokewidth)))<l&&(c=l),Math.abs(v[1]-a)<c+2&&Math.abs(v[2]-u)<c+2},update:function(a){return this.needsUpdate?(this.updateCoords(a),m.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateTransform:function(a){var u,c;if(0===this.transformations.length||null===this.baseElement)return this;for(this===this.baseElement?(u=this.transformations[0].apply(this.baseElement,"self"),this.coords.setCoordinates(w.COORDS_BY_USER,u)):u=this.transformations[0].apply(this.baseElement),this.coords.setCoordinates(w.COORDS_BY_USER,u),c=1;c<this.transformations.length;c++)this.coords.setCoordinates(w.COORDS_BY_USER,this.transformations[c].apply(this));return this},updateRenderer:function(){return this.updateRendererGeneric("updatePoint"),this},bounds:function(){return this.coords.usrCoords.slice(1).concat(this.coords.usrCoords.slice(1))},makeIntersection:function(a,u,c,l){var f;a=this.board.select(a),u=this.board.select(u),f=S.intersectionFunction(this.board,a,u,c,l,m.evaluate(this.visProp.alwaysintersect)),this.addConstraint([f]);try{a.addChild(this),u.addChild(this)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof a+"' and '"+typeof u+"'.")}this.type=w.OBJECT_TYPE_INTERSECTION,this.elType="intersection",this.parents=[a.id,u.id,c,l],this.generatePolynomial=function(){var v=a.generatePolynomial(this),_=u.generatePolynomial(this);return 0===v.length||0===_.length?[]:[v[0],_[0]]},this.prepareUpdate().update()},setStyle:function(a){return this.visProp.face=["cross","cross","cross","circle","circle","circle","circle","square","square","square","plus","plus","plus"][a],this.visProp.size=[2,3,4,1,2,3,4,2,3,4,2,3,4][a],this.board.renderer.changePointStyle(this),this},normalizeFace:function(a){return E.deprecated("Point.normalizeFace()","JXG.normalizePointFace()"),I.normalizePointFace(a)},face:function(a){E.deprecated("Point.face()","Point.setAttribute()"),this.setAttribute({face:a})},size:function(a){E.deprecated("Point.size()","Point.setAttribute()"),this.setAttribute({size:a})},isOn:function(a,u){var c,l;return u=u||T.eps,m.isPoint(a)?this.Dist(a)<u:a.elementClass===w.OBJECT_CLASS_LINE?("segment"!==a.elType||m.evaluate(this.visProp.alwaysintersect)||(c=E.Math.Geometry.projectCoordsToSegment(this.coords.usrCoords,a.point1.coords.usrCoords,a.point2.coords.usrCoords))[1]>=0&&c[1]<=1)&&S.distPointLine(this.coords.usrCoords,a.stdform)<u:a.elementClass===w.OBJECT_CLASS_CIRCLE?m.evaluate(a.visProp.hasinnerpoints)?this.Dist(a.center)<a.Radius()+u:Math.abs(this.Dist(a.center)-a.Radius())<u:a.elementClass===w.OBJECT_CLASS_CURVE?(l=S.projectPointToCurve(this,a,this.board)[0],S.distance(this.coords.usrCoords,l.usrCoords,3)<u):a.type===w.OBJECT_TYPE_POLYGON?!(!m.evaluate(a.visProp.hasinnerpoints)||!a.pnpoly(this.coords.usrCoords[1],this.coords.usrCoords[2],E.COORDS_BY_USER))||(c=S.projectCoordsToPolygon(this.coords.usrCoords,a),S.distance(this.coords.usrCoords,c,3)<u):a.type===w.OBJECT_TYPE_TURTLE&&(l=S.projectPointToTurtle(this,a,this.board),S.distance(this.coords.usrCoords,l.usrCoords,3)<u)},cloneToBackground:function(){var a={};return a.id=this.id+"T"+this.numTraces,this.numTraces+=1,a.coords=this.coords,a.visProp=m.deepCopy(this.visProp,this.visProp.traceattributes,!0),a.visProp.layer=this.board.options.layer.trace,a.elementClass=w.OBJECT_CLASS_POINT,a.board=this.board,m.clearVisPropOld(a),a.visPropCalc={visible:m.evaluate(a.visProp.visible)},this.board.renderer.drawPoint(a),this.traces[a.id]=a.rendNode,this}}),E.createPoint=function(a,u,c){var l,f;if(f=m.copyAttributes(c,a.options,"point"),!(l=p.create(E.Point,a,u,f)))throw new Error("JSXGraph: Can't create point with parent types '"+typeof u[0]+"' and '"+typeof u[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return l},E.createGlider=function(a,u,c){var l,f,v=m.copyAttributes(c,a.options,"glider");return f=1===u.length?[0,0]:u.slice(0,2),(l=a.create("point",f,v)).makeGlider(u[u.length-1]),l},E.createIntersectionPoint=function(a,u,c){var l,f,v,_,h,y,b=m.copyAttributes(c,a.options,"intersection");u.push(0,0),f=a.select(u[0]),v=a.select(u[1]),h=u[2]||0,y=u[3]||0,l=a.create("point",[0,0,0],b),_=S.intersectionFunction(a,f,v,h,y,l.visProp.alwaysintersect),l.addConstraint([_]);try{f.addChild(l),v.addChild(l)}catch{throw new Error("JSXGraph: Can't create 'intersection' with parent types '"+typeof u[0]+"' and '"+typeof u[1]+"'.")}return l.type=w.OBJECT_TYPE_INTERSECTION,l.elType="intersection",l.setParents([f.id,v.id]),l.intersectionNumbers=[h,y],l.getParents=function(){return this.parents.concat(this.intersectionNumbers)},l.generatePolynomial=function(){var x=f.generatePolynomial(l),D=v.generatePolynomial(l);return 0===x.length||0===D.length?[]:[x[0],D[0]]},l},E.createOtherIntersectionPoint=function(a,u,c){var l,f,v,_;if(3!==u.length||!m.isPoint(u[2])||u[0].elementClass!==w.OBJECT_CLASS_LINE&&u[0].elementClass!==w.OBJECT_CLASS_CIRCLE||u[1].elementClass!==w.OBJECT_CLASS_LINE&&u[1].elementClass!==w.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'other intersection point' with parent types '"+typeof u[0]+"',  '"+typeof u[1]+"'and  '"+typeof u[2]+"'.\nPossible parent types: [circle|line,circle|line,point]");return f=a.select(u[0]),v=a.select(u[1]),_=a.select(u[2]),(l=a.create("point",[function(){var h=S.meet(f.stdform,v.stdform,0,f.board);return Math.abs(_.X()-h.usrCoords[1])>T.eps||Math.abs(_.Y()-h.usrCoords[2])>T.eps||Math.abs(_.Z()-h.usrCoords[0])>T.eps?h:S.meet(f.stdform,v.stdform,1,f.board)}],c)).type=w.OBJECT_TYPE_INTERSECTION,l.elType="otherintersection",l.setParents([f.id,v.id,_]),f.addChild(l),v.addChild(l),l.generatePolynomial=function(){var h=f.generatePolynomial(l),y=v.generatePolynomial(l);return 0===h.length||0===y.length?[]:[h[0],y[0]]},l},E.createPolePoint=function(a,u,c){var l,f,v,_,h,y,b;if(u.length>1&&(_=u[0].type===w.OBJECT_TYPE_CONIC||u[0].elementClass===w.OBJECT_CLASS_CIRCLE,h=u[1].type===w.OBJECT_TYPE_CONIC||u[1].elementClass===w.OBJECT_CLASS_CIRCLE,y=u[0].elementClass===w.OBJECT_CLASS_LINE,b=u[1].elementClass===w.OBJECT_CLASS_LINE),2!==u.length||!(_&&b||y&&h))throw new Error("JSXGraph: Can't create 'pole point' with parent types '"+typeof u[0]+"' and '"+typeof u[1]+"'.\nPossible parent type: [conic|circle,line], [line,conic|circle]");return b?(f=a.select(u[0]),v=a.select(u[1])):(f=a.select(u[1]),v=a.select(u[0])),(l=a.create("point",[function(){var x=f.quadraticform,D=v.stdform.slice(0,3);return[E.Math.Numerics.det([D,x[1],x[2]]),E.Math.Numerics.det([x[0],D,x[2]]),E.Math.Numerics.det([x[0],x[1],D])]}],c)).elType="polepoint",l.setParents([f.id,v.id]),f.addChild(l),v.addChild(l),l},E.registerElement("point",E.createPoint),E.registerElement("glider",E.createGlider),E.registerElement("intersection",E.createIntersectionPoint),E.registerElement("otherintersection",E.createOtherIntersectionPoint),E.registerElement("polepoint",E.createPolePoint),{Point:E.Point,createPoint:E.createPoint,createGlider:E.createGlider,createIntersection:E.createIntersectionPoint,createOtherIntersection:E.createOtherIntersectionPoint,createPolePoint:E.createPolePoint}}),define("base/line",["jxg","math/math","math/geometry","math/numerics","math/statistics","base/constants","base/coords","base/element","utils/type","base/point"],function(E,I,T,S,w,g,m,p,a,u){"use strict";return E.Line=function(c,l,f,v){this.constructor(c,v,g.OBJECT_TYPE_LINE,g.OBJECT_CLASS_LINE),this.point1=this.board.select(l),this.point2=this.board.select(f),this.ticks=[],this.defaultTicks=null,this.parentPolygon=null,this.id=this.board.setId(this,"L"),this.board.renderer.drawLine(this),this.board.finalizeAdding(this),this.elType="line",this.point1._is_new?(this.addChild(this.point1),delete this.point1._is_new):this.point1.addChild(this),this.point2._is_new?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this),this.inherits.push(this.point1,this.point2),this.updateStdform(),this.createLabel(),this.methodMap=E.deepCopy(this.methodMap,{point1:"point1",point2:"point2",getSlope:"getSlope",getRise:"getRise",getYIntersect:"getRise",getAngle:"getAngle",L:"L",length:"L"})},E.Line.prototype=new p,E.extend(E.Line.prototype,{hasPoint:function(c,l){var f,v,_,h,y,b,x,D,O=[],A=[1,c,l],N=a.evaluate(this.visProp.strokewidth);return D=a.isObject(a.evaluate(this.visProp.precision))?a.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,D+=.5*N,O[0]=this.stdform[0]-this.stdform[1]*this.board.origin.scrCoords[1]/this.board.unitX+this.stdform[2]*this.board.origin.scrCoords[2]/this.board.unitY,O[1]=this.stdform[1]/this.board.unitX,O[2]=this.stdform[2]/-this.board.unitY,f=T.distPointLine(A,O),!(isNaN(f)||f>D||(!a.evaluate(this.visProp.straightfirst)||!a.evaluate(this.visProp.straightlast))&&(_=this.point1.coords,h=this.point2.coords,v=[0,O[1],O[2]],v=I.crossProduct(v,A),(v=I.crossProduct(v,O))[1]/=v[0],v[2]/=v[0],v[0]=1,v=new m(g.COORDS_BY_SCREEN,v.slice(1),this.board).usrCoords,y=_.distance(g.COORDS_BY_USER,h),_=_.usrCoords.slice(0),h=h.usrCoords.slice(0),y<I.eps?b=0:(y===Number.POSITIVE_INFINITY&&(y=1/I.eps,Math.abs(h[0])<I.eps?(y/=T.distance([0,0,0],h),h=[1,_[1]+h[1]*y,_[2]+h[2]*y]):(y/=T.distance([0,0,0],_),_=[1,h[1]+_[1]*y,h[2]+_[2]*y])),y=h[x=1]-_[x],Math.abs(y)<I.eps&&(y=h[x=2]-_[x]),b=(v[x]-_[x])/y),!a.evaluate(this.visProp.straightfirst)&&b<0||!a.evaluate(this.visProp.straightlast)&&b>1))},update:function(){var c;return this.needsUpdate?(this.constrained&&(a.isFunction(this.funps)?(c=this.funps())&&c.length&&2===c.length&&(this.point1=c[0],this.point2=c[1]):(a.isFunction(this.funp1)&&(c=this.funp1(),a.isPoint(c)?this.point1=c:c&&c.length&&2===c.length&&this.point1.setPositionDirectly(g.COORDS_BY_USER,c)),a.isFunction(this.funp2)&&(c=this.funp2(),a.isPoint(c)?this.point2=c:c&&c.length&&2===c.length&&this.point2.setPositionDirectly(g.COORDS_BY_USER,c)))),this.updateSegmentFixedLength(),this.updateStdform(),a.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this):this},updateSegmentFixedLength:function(){var c,l,f,v,_,h,y,b;return this.hasFixedLength?(c=this.point1.Dist(this.point2),l=this.fixedLength(),f=this.fixedLengthOldCoords[0].distance(g.COORDS_BY_USER,this.point1.coords),v=this.fixedLengthOldCoords[1].distance(g.COORDS_BY_USER,this.point2.coords),(f>I.eps||v>I.eps||c!==l)&&(_=this.point1.isDraggable&&this.point1.type!==g.OBJECT_TYPE_GLIDER&&!a.evaluate(this.point1.visProp.fixed),h=this.point2.isDraggable&&this.point2.type!==g.OBJECT_TYPE_GLIDER&&!a.evaluate(this.point2.visProp.fixed),c>I.eps?f>v&&h||f<=v&&h&&!_?(this.point2.setPositionDirectly(g.COORDS_BY_USER,[this.point1.X()+(this.point2.X()-this.point1.X())*l/c,this.point1.Y()+(this.point2.Y()-this.point1.Y())*l/c]),this.point2.fullUpdate()):(f<=v&&_||f>v&&_&&!h)&&(this.point1.setPositionDirectly(g.COORDS_BY_USER,[this.point2.X()+(this.point1.X()-this.point2.X())*l/c,this.point2.Y()+(this.point1.Y()-this.point2.Y())*l/c]),this.point1.fullUpdate()):(y=Math.random()-.5,b=Math.random()-.5,c=Math.sqrt(y*y+b*b),h?(this.point2.setPositionDirectly(g.COORDS_BY_USER,[this.point1.X()+y*l/c,this.point1.Y()+b*l/c]),this.point2.fullUpdate()):_&&(this.point1.setPositionDirectly(g.COORDS_BY_USER,[this.point2.X()+y*l/c,this.point2.Y()+b*l/c]),this.point1.fullUpdate())),this.fixedLengthOldCoords[0].setCoordinates(g.COORDS_BY_USER,this.point1.coords.usrCoords),this.fixedLengthOldCoords[1].setCoordinates(g.COORDS_BY_USER,this.point2.coords.usrCoords)),this):this},updateStdform:function(){var c=I.crossProduct(this.point1.coords.usrCoords,this.point2.coords.usrCoords);this.stdform[0]=c[0],this.stdform[1]=c[1],this.stdform[2]=c[2],this.stdform[3]=0,this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.point1.coords.usrCoords[1]+this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[1]+this.point2.coords.usrCoords[2])&&I.innerProduct(this.stdform,this.stdform,3)>=I.eps*I.eps,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateLine(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},generatePolynomial:function(c){var l=this.point1.symbolic.x,f=this.point1.symbolic.y,v=this.point2.symbolic.x,_=this.point2.symbolic.y,h=c.symbolic.x,y=c.symbolic.y;return[["(",f,")*(",h,")-(",f,")*(",v,")+(",y,")*(",v,")-(",l,")*(",y,")+(",l,")*(",_,")-(",h,")*(",_,")"].join("")]},getRise:function(){return Math.abs(this.stdform[2])>=I.eps?-this.stdform[0]/this.stdform[2]:1/0},getSlope:function(){return Math.abs(this.stdform[2])>=I.eps?-this.stdform[1]/this.stdform[2]:1/0},getAngle:function(){return Math.atan2(-this.stdform[1],this.stdform[2])},setStraight:function(c,l){return this.visProp.straightfirst=c,this.visProp.straightlast=l,this.board.renderer.updateLine(this),this},getTextAnchor:function(){return new m(g.COORDS_BY_USER,[.5*(this.point2.X()+this.point1.X()),.5*(this.point2.Y()+this.point1.Y())],this.board)},setLabelRelativeCoords:function(c){a.exists(this.label)&&(this.label.relativeCoords=new m(g.COORDS_BY_SCREEN,[c[0],-c[1]],this.board))},getLabelAnchor:function(){var c,l,f=0,v=new m(g.COORDS_BY_USER,this.point1.coords.usrCoords,this.board),_=new m(g.COORDS_BY_USER,this.point2.coords.usrCoords,this.board),h=a.evaluate(this.visProp.straightfirst),y=a.evaluate(this.visProp.straightlast);if((h||y)&&T.calcStraight(this,v,_,0),v=v.scrCoords,_=_.scrCoords,!a.exists(this.label))return new m(g.COORDS_BY_SCREEN,[NaN,NaN],this.board);switch(a.evaluate(this.label.visProp.position)){case"lft":case"llft":case"ulft":v[1]<=_[1]?(c=v[1],l=v[2]):(c=_[1],l=_[2]);break;case"rt":case"lrt":case"urt":v[1]>_[1]?(c=v[1],l=v[2]):(c=_[1],l=_[2]);break;default:c=.5*(v[1]+_[1]),l=.5*(v[2]+_[2])}return(h||y)&&(a.exists(this.label)&&(f=a.evaluate(this.label.visProp.fontsize)),Math.abs(c)<I.eps?c=f:this.board.canvasWidth+I.eps>c&&c>this.board.canvasWidth-f-I.eps&&(c=this.board.canvasWidth-f),I.eps+f>l&&l>-I.eps?l=f:this.board.canvasHeight+I.eps>l&&l>this.board.canvasHeight-f-I.eps&&(l=this.board.canvasHeight-f)),new m(g.COORDS_BY_SCREEN,[c,l],this.board)},cloneToBackground:function(){var c,l,f,v={};return v.id=this.id+"T"+this.numTraces,v.elementClass=g.OBJECT_CLASS_LINE,this.numTraces++,v.point1=this.point1,v.point2=this.point2,v.stdform=this.stdform,v.board=this.board,v.visProp=a.deepCopy(this.visProp,this.visProp.traceattributes,!0),v.visProp.layer=this.board.options.layer.trace,a.clearVisPropOld(v),v.visPropCalc={visible:a.evaluate(v.visProp.visible)},l=this.getSlope(),c=this.getRise(),v.getSlope=function(){return l},v.getRise=function(){return c},f=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawLine(v),this.board.renderer.enhancedRendering=f,this.traces[v.id]=v.rendNode,this},addTransform:function(c){var l,f=a.isArray(c)?c:[c],v=f.length;for(l=0;l<v;l++)this.point1.transformations.push(f[l]),this.point2.transformations.push(f[l]);return this},snapToGrid:function(c){var l,f,v,_,h,y,b,x;return a.evaluate(this.visProp.snaptogrid)?this.parents.length<3?(this.point1.handleSnapToGrid(!0,!0),this.point2.handleSnapToGrid(!0,!0)):a.exists(c)&&(b=a.evaluate(this.visProp.snapsizex),x=a.evaluate(this.visProp.snapsizey),h=(l=new m(g.COORDS_BY_SCREEN,[c.Xprev,c.Yprev],this.board)).usrCoords[1],y=l.usrCoords[2],b<=0&&this.board.defaultAxes&&this.board.defaultAxes.x.defaultTicks&&(b=(_=this.board.defaultAxes.x.defaultTicks).ticksDelta*(a.evaluate(_.visProp.minorticks)+1)),x<=0&&this.board.defaultAxes&&this.board.defaultAxes.y.defaultTicks&&(x=(_=this.board.defaultAxes.y.defaultTicks).ticksDelta*(a.evaluate(_.visProp.minorticks)+1)),b>0&&x>0&&(f=T.projectPointToLine({coords:l},this,this.board),v=w.subtract([1,Math.round(h/b)*b,Math.round(y/x)*x],f.usrCoords),this.board.create("transform",v.slice(1),{type:"translate"}).applyOnce([this.point1,this.point2]))):(this.point1.handleSnapToGrid(!1,!0),this.point2.handleSnapToGrid(!1,!0)),this},snapToPoints:function(){var c=a.evaluate(this.visProp.snaptopoints);return this.parents.length<3&&(this.point1.handleSnapToPoints(c),this.point2.handleSnapToPoints(c)),this},X:function(c){var l,f=this.stdform[2];return l=Math.abs(this.point1.coords.usrCoords[0])>I.eps?this.point1.coords.usrCoords[1]:this.point2.coords.usrCoords[1],c=2*(c-.5),(1-Math.abs(c))*l-c*f},Y:function(c){var l,f=this.stdform[1];return l=Math.abs(this.point1.coords.usrCoords[0])>I.eps?this.point1.coords.usrCoords[2]:this.point2.coords.usrCoords[2],c=2*(c-.5),(1-Math.abs(c))*l+c*f},Z:function(c){var l=Math.abs(this.point1.coords.usrCoords[0])>I.eps?this.point1.coords.usrCoords[0]:this.point2.coords.usrCoords[0];return c=2*(c-.5),(1-Math.abs(c))*l},L:function(){return this.point1.Dist(this.point2)},minX:function(){return 0},maxX:function(){return 1},bounds:function(){var c=this.point1.coords.usrCoords,l=this.point2.coords.usrCoords;return[Math.min(c[1],l[1]),Math.max(c[2],l[2]),Math.max(c[1],l[1]),Math.min(c[2],l[2])]},remove:function(){this.removeAllTicks(),p.prototype.remove.call(this)}}),E.createLine=function(c,l,f){var v,_,h,y,b,x,D,M=[],O=!1,A=!1;if(2===l.length){if(a.isArray(l[0])&&l[0].length>1)x=a.copyAttributes(f,c.options,"line","point1"),h=c.create("point",l[0],x);else if(a.isString(l[0])||a.isPoint(l[0]))h=c.select(l[0]);else if(a.isFunction(l[0])&&a.isPoint(l[0]()))h=l[0](),A=!0;else if(a.isFunction(l[0])&&l[0]().length&&l[0]().length>=2)x=a.copyAttributes(f,c.options,"line","point1"),h=u.createPoint(c,l[0](),x),A=!0;else{if(!a.isObject(l[0])||!a.isTransformationOrArray(l[1]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");O=!0,x=a.copyAttributes(f,c.options,"line","point1"),h=c.create("point",[l[0].point1,l[1]],x)}if(O)x=a.copyAttributes(f,c.options,"line","point2"),y=c.create("point",[l[0].point2,l[1]],x);else if(a.isArray(l[1])&&l[1].length>1)x=a.copyAttributes(f,c.options,"line","point2"),y=c.create("point",l[1],x);else if(a.isString(l[1])||a.isPoint(l[1]))y=c.select(l[1]);else if(a.isFunction(l[1])&&a.isPoint(l[1]()))y=l[1](),A=!0;else{if(!(a.isFunction(l[1])&&l[1]().length&&l[1]().length>=2))throw new Error("JSXGraph: Can't create line with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");x=a.copyAttributes(f,c.options,"line","point2"),y=u.createPoint(c,l[1](),x),A=!0}x=a.copyAttributes(f,c.options,"line"),_=new E.Line(c,h,y,x),A?(_.constrained=!0,_.funp1=l[0],_.funp2=l[1]):O||(_.isDraggable=!0),_.setParents([h.id,y.id])}else if(3===l.length){for(D=!0,b=0;b<3;b++)if(a.isNumber(l[b]))M[b]=a.createFunction(l[b]);else{if(!a.isFunction(l[b]))throw new Error("JSXGraph: Can't create line with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"' and '"+typeof l[2]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");M[b]=l[b],D=!1}x=a.copyAttributes(f,c.options,"line","point1"),h=c.create("point",D?[M[2]()*M[2]()+M[1]()*M[1](),M[2]()-M[1]()*M[0]()+M[2](),-M[1]()-M[2]()*M[0]()-M[1]()]:[function(){return.5*(M[2]()*M[2]()+M[1]()*M[1]())},function(){return.5*(M[2]()-M[1]()*M[0]()+M[2]())},function(){return.5*(-M[1]()-M[2]()*M[0]()-M[1]())}],x),x=a.copyAttributes(f,c.options,"line","point2"),y=c.create("point",D?[M[2]()*M[2]()+M[1]()*M[1](),-M[1]()*M[0]()+M[2](),-M[2]()*M[0]()-M[1]()]:[function(){return M[2]()*M[2]()+M[1]()*M[1]()},function(){return-M[1]()*M[0]()+M[2]()},function(){return-M[2]()*M[0]()-M[1]()}],x),h.prepareUpdate().update(),y.prepareUpdate().update(),x=a.copyAttributes(f,c.options,"line"),(_=new E.Line(c,h,y,x)).isDraggable=D,_.setParents([h,y])}else if(1===l.length&&a.isFunction(l[0])&&2===l[0]().length&&a.isPoint(l[0]()[0])&&a.isPoint(l[0]()[1]))v=l[0](),x=a.copyAttributes(f,c.options,"line"),(_=new E.Line(c,v[0],v[1],x)).constrained=!0,_.funps=l[0],_.setParents(v);else{if(!(1===l.length&&a.isFunction(l[0])&&3===l[0]().length&&a.isNumber(l[0]()[0])&&a.isNumber(l[0]()[1])&&a.isNumber(l[0]()[2])))throw new Error("JSXGraph: Can't create line with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]], [a,b,c]");v=l[0],x=a.copyAttributes(f,c.options,"line","point1"),h=c.create("point",[function(){var N=v();return[.5*(N[2]*N[2]+N[1]*N[1]),.5*(N[2]-N[1]*N[0]+N[2]),.5*(-N[1]-N[2]*N[0]-N[1])]}],x),x=a.copyAttributes(f,c.options,"line","point2"),y=c.create("point",[function(){var N=v();return[N[2]*N[2]+N[1]*N[1],-N[1]*N[0]+N[2],-N[2]*N[0]-N[1]]}],x),x=a.copyAttributes(f,c.options,"line"),(_=new E.Line(c,h,y,x)).constrained=!0,_.funps=l[0],_.setParents([h,y])}return _},E.registerElement("line",E.createLine),E.createSegment=function(c,l,f){var v,_;if(f.straightFirst=!1,f.straightLast=!1,_=a.copyAttributes(f,c.options,"segment"),v=c.create("line",l.slice(0,2),_),3===l.length){if(v.hasFixedLength=!0,a.isNumber(l[2]))v.fixedLength=function(){return l[2]};else{if(!a.isFunction(l[2]))throw new Error("JSXGraph: Can't create segment with third parent type '"+typeof l[2]+"'.\nPossible third parent types: number or function");v.fixedLength=l[2]}v.getParents=function(){return this.parents.concat(this.fixedLength())},v.fixedLengthOldCoords=[],v.fixedLengthOldCoords[0]=new m(g.COORDS_BY_USER,v.point1.coords.usrCoords.slice(1,3),c),v.fixedLengthOldCoords[1]=new m(g.COORDS_BY_USER,v.point2.coords.usrCoords.slice(1,3),c)}return v.elType="segment",v},E.registerElement("segment",E.createSegment),E.createArrow=function(c,l,f){var v,_;return f.straightFirst=!1,f.straightLast=!1,_=a.copyAttributes(f,c.options,"arrow"),(v=c.create("line",l,_)).type=g.OBJECT_TYPE_VECTOR,v.elType="arrow",v},E.registerElement("arrow",E.createArrow),E.createAxis=function(c,l,f){var v,_,h,y,b;if(!a.isArray(l[0])&&!a.isPoint(l[0])||!a.isArray(l[1])&&!a.isPoint(l[1]))throw new Error("JSXGraph: Can't create axis with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");for(y in v=a.copyAttributes(f,c.options,"axis"),(h=c.create("line",l,v)).type=g.OBJECT_TYPE_AXIS,h.isDraggable=!1,h.point1.isDraggable=!1,h.point2.isDraggable=!1,h.ancestors)h.ancestors.hasOwnProperty(y)&&(h.ancestors[y].type=g.OBJECT_TYPE_AXISPOINT);return _=a.copyAttributes(f,c.options,"axis","ticks"),b=a.exists(_.ticksdistance)?_.ticksdistance:a.isArray(_.ticks)?_.ticks:1,h.defaultTicks=c.create("ticks",[h,b],_),h.defaultTicks.dump=!1,h.elType="axis",h.subs={ticks:h.defaultTicks},h.inherits.push(h.defaultTicks),h},E.registerElement("axis",E.createAxis),E.createTangent=function(c,l,f){var v,_,h,y,b;if(1===l.length)_=(v=l[0]).slideObject;else{if(2!==l.length)throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");if(a.isPoint(l[0]))v=l[0],_=l[1];else{if(!a.isPoint(l[1]))throw new Error("JSXGraph: Can't create tangent with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent types: [glider], [point,line|curve|circle|conic]");_=l[0],v=l[1]}}if(_.elementClass===g.OBJECT_CLASS_LINE?(b=c.create("line",[_.point1,_.point2],f)).glider=v:_.elementClass===g.OBJECT_CLASS_CURVE&&_.type!==g.OBJECT_TYPE_CONIC?"plot"!==a.evaluate(_.visProp.curvetype)?(b=c.create("line",[function(){var x=_.X,D=_.Y;return-v.X()*S.D(D)(v.position)+v.Y()*S.D(x)(v.position)},function(){return S.D(_.Y)(v.position)},function(){return-S.D(_.X)(v.position)}],f),v.addChild(b),b.glider=v):(b=c.create("line",[function(){var x,D,M,O,A,N,L,B,V,U,j=Math.floor(v.position);if(1===_.bezierDegree)j===_.numberPoints-1&&j--;else{if(3!==_.bezierDegree)return 0;j=3*Math.floor(v.position*(_.numberPoints-1)/3),M=(v.position*(_.numberPoints-1)-j)/3,j>=_.numberPoints-1&&(j=_.numberPoints-4,M=1)}return j<0?1:(1===_.bezierDegree?(x=_.points[j].usrCoords,D=_.points[j+1].usrCoords):(B=(1-M)*(1-M)*((A=_.points[j+1].usrCoords)[1]-(O=_.points[j].usrCoords)[1])+2*(1-M)*M*((N=_.points[j+2].usrCoords)[1]-A[1])+M*M*((L=_.points[j+3].usrCoords)[1]-N[1]),V=(1-M)*(1-M)*(A[2]-O[2])+2*(1-M)*M*(N[2]-A[2])+M*M*(L[2]-N[2]),B/=U=Math.sqrt(B*B+V*V),D=[1,(x=v.coords.usrCoords)[1]+B,x[2]+(V/=U)]),x[2]*D[1]-x[1]*D[2])},function(){var x,D,M,O,A,N,L,B,V,U,j=Math.floor(v.position);if(1===_.bezierDegree)j===_.numberPoints-1&&j--;else{if(3!==_.bezierDegree)return 0;j=3*Math.floor(v.position*(_.numberPoints-1)/3),M=(v.position*(_.numberPoints-1)-j)/3,j>=_.numberPoints-1&&(j=_.numberPoints-4,M=1)}return j<0?0:(1===_.bezierDegree?(x=_.points[j].usrCoords,D=_.points[j+1].usrCoords):(B=(1-M)*(1-M)*((A=_.points[j+1].usrCoords)[1]-(O=_.points[j].usrCoords)[1])+2*(1-M)*M*((N=_.points[j+2].usrCoords)[1]-A[1])+M*M*((L=_.points[j+3].usrCoords)[1]-N[1]),V=(1-M)*(1-M)*(A[2]-O[2])+2*(1-M)*M*(N[2]-A[2])+M*M*(L[2]-N[2]),B/=U=Math.sqrt(B*B+V*V),D=[1,(x=v.coords.usrCoords)[1]+B,x[2]+(V/=U)]),D[2]-x[2])},function(){var x,D,M,O,A,N,L,B,V,U,j=Math.floor(v.position);if(1===_.bezierDegree)j===_.numberPoints-1&&j--;else{if(3!==_.bezierDegree)return 0;j=3*Math.floor(v.position*(_.numberPoints-1)/3),M=(v.position*(_.numberPoints-1)-j)/3,j>=_.numberPoints-1&&(j=_.numberPoints-4,M=1)}return j<0?0:(1===_.bezierDegree?(x=_.points[j].usrCoords,D=_.points[j+1].usrCoords):(B=(1-M)*(1-M)*((A=_.points[j+1].usrCoords)[1]-(O=_.points[j].usrCoords)[1])+2*(1-M)*M*((N=_.points[j+2].usrCoords)[1]-A[1])+M*M*((L=_.points[j+3].usrCoords)[1]-N[1]),V=(1-M)*(1-M)*(A[2]-O[2])+2*(1-M)*M*(N[2]-A[2])+M*M*(L[2]-N[2]),B/=U=Math.sqrt(B*B+V*V),D=[1,(x=v.coords.usrCoords)[1]+B,x[2]+(V/=U)]),x[1]-D[1])}],f),v.addChild(b),b.glider=v):_.type===g.OBJECT_TYPE_TURTLE?(b=c.create("line",[function(){var x=Math.floor(v.position);for(h=0;h<_.objects.length;h++)if((y=_.objects[h]).type===g.OBJECT_TYPE_CURVE){if(x<y.numberPoints)break;x-=y.numberPoints}return x===y.numberPoints-1&&x--,x<0?1:y.Y(x)*y.X(x+1)-y.X(x)*y.Y(x+1)},function(){var x=Math.floor(v.position);for(h=0;h<_.objects.length;h++)if((y=_.objects[h]).type===g.OBJECT_TYPE_CURVE){if(x<y.numberPoints)break;x-=y.numberPoints}return x===y.numberPoints-1&&x--,x<0?0:y.Y(x+1)-y.Y(x)},function(){var x=Math.floor(v.position);for(h=0;h<_.objects.length;h++)if((y=_.objects[h]).type===g.OBJECT_TYPE_CURVE){if(x<y.numberPoints)break;x-=y.numberPoints}return x===y.numberPoints-1&&x--,x<0?0:y.X(x)-y.X(x+1)}],f),v.addChild(b),b.glider=v):_.elementClass!==g.OBJECT_CLASS_CIRCLE&&_.type!==g.OBJECT_TYPE_CONIC||(b=c.create("line",[function(){return I.matVecMult(_.quadraticform,v.coords.usrCoords)[0]},function(){return I.matVecMult(_.quadraticform,v.coords.usrCoords)[1]},function(){return I.matVecMult(_.quadraticform,v.coords.usrCoords)[2]}],f),v.addChild(b),b.glider=v),!a.exists(b))throw new Error("JSXGraph: Couldn't create tangent with the given parents.");return b.elType="tangent",b.type=g.OBJECT_TYPE_TANGENT,b.setParents(l),b},E.createRadicalAxis=function(c,l,f){var v,_,h;if(2!==l.length||l[0].elementClass!==g.OBJECT_CLASS_CIRCLE||l[1].elementClass!==g.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create 'radical axis' with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent type: [circle,circle]");return _=c.select(l[0]),h=c.select(l[1]),(v=c.create("line",[function(){var y=_.stdform,b=h.stdform;return I.matVecMult(I.transpose([y.slice(0,3),b.slice(0,3)]),[b[3],-y[3]])}],f)).elType="radicalaxis",v.setParents([_.id,h.id]),_.addChild(v),h.addChild(v),v},E.createPolarLine=function(c,l,f){var v,_,h,y,b,x,D;if(l.length>1&&(y=l[0].type===g.OBJECT_TYPE_CONIC||l[0].elementClass===g.OBJECT_CLASS_CIRCLE,b=l[1].type===g.OBJECT_TYPE_CONIC||l[1].elementClass===g.OBJECT_CLASS_CIRCLE,x=a.isPoint(l[0]),D=a.isPoint(l[1])),2!==l.length||!(y&&D||x&&b))throw new Error("JSXGraph: Can't create 'polar line' with parent types '"+typeof l[0]+"' and '"+typeof l[1]+"'.\nPossible parent type: [conic|circle,point], [point,conic|circle]");return D?(_=c.select(l[0]),h=c.select(l[1])):(_=c.select(l[1]),h=c.select(l[0])),(v=c.create("tangent",[_,h],f)).elType="polarline",v},E.registerElement("tangent",E.createTangent),E.registerElement("polar",E.createTangent),E.registerElement("radicalaxis",E.createRadicalAxis),E.registerElement("polarline",E.createPolarLine),{Line:E.Line,createLine:E.createLine,createTangent:E.createTangent,createPolar:E.createTangent,createSegment:E.createSegment,createAxis:E.createAxis,createArrow:E.createArrow,createRadicalAxis:E.createRadicalAxis,createPolarLine:E.createPolarLine}}),define("base/group",["jxg","base/constants","math/math","math/geometry","utils/type"],function(E,I,T,S,w){"use strict";return E.Group=function(g,m,p,a,u){var c,l,f,v;for(this.board=g,this.objects={},c=this.board.numObjects,this.board.numObjects+=1,this.id=""!==m&&w.exists(m)?m:this.board.id+"Group"+c,this.board.groups[this.id]=this,this.type=I.OBJECT_TYPE_POINT,this.elementClass=I.OBJECT_CLASS_POINT,this.name=""!==p&&w.exists(p)?p:"group_"+this.board.generateName(this),delete this.type,this.coords={},this.needsRegularUpdate=u.needsregularupdate,this.rotationCenter="centroid",this.scaleCenter=null,this.rotationPoints=[],this.translationPoints=[],this.scalePoints=[],this.scaleDirections={},this.parents=[],l=w.isArray(a)?a:Array.prototype.slice.call(arguments,3),f=0;f<l.length;f++)v=this.board.select(l[f]),!w.evaluate(v.visProp.fixed)&&w.exists(v.coords)&&this.addPoint(v);this.methodMap={ungroup:"ungroup",add:"addPoint",addPoint:"addPoint",addPoints:"addPoints",addGroup:"addGroup",remove:"removePoint",removePoint:"removePoint",setAttribute:"setAttribute",setProperty:"setAttribute"}},E.extend(E.Group.prototype,{ungroup:function(){var g,m,p;for(g in this.objects)this.objects.hasOwnProperty(g)&&w.isArray((m=this.objects[g].point).groups)&&(p=w.indexOf(m.groups,this.id))>=0&&delete m.groups[p];return this.objects={},this},addParents:function(g){var m,p,a;for(p=(a=w.isArray(g)?g:arguments).length,m=0;m<p;++m)w.isId(this.board,a[m])?this.parents.push(a[m]):w.exists(a[m].id)&&this.parents.push(a[m].id);this.parents=w.uniqueArray(this.parents)},setParents:function(g){return this.parents=[],this.addParents(g),this},getParents:function(){return w.isArray(this.parents)?this.parents:[]},_updateCoordsCache:function(g){var m;""!==g&&w.exists(this.objects[g])&&(this.coords[(m=this.objects[g].point).id]={usrCoords:m.coords.usrCoords.slice(0)})},update:function(){var g,m,p,a,u,c,l,f,v,_,h=null;if(!this.needsUpdate)return this;if("nothing"===(g=this._update_find_drag_type()).action)return this._updateCoordsCache(g.id),this;if(h=this.objects[g.id].point,"translation"===g.action)v=[h.coords.usrCoords[1]-this.coords[g.id].usrCoords[1],h.coords.usrCoords[2]-this.coords[g.id].usrCoords[2]];else if("rotation"===g.action||"scaling"===g.action){if(w.isPoint(this[p="rotation"===g.action?"rotationCenter":"scaleCenter"]))_=this[p].coords.usrCoords.slice(1);else if("centroid"===this[p])_=this._update_centroid_center();else if(w.isArray(this[p]))_=this[p];else{if(!w.isFunction(this[p]))return this;_=this[p]()}if("rotation"===g.action)f=S.rad(this.coords[g.id].usrCoords.slice(1),_,this.objects[g.id].point),(v=this.board.create("transform",[f,_[0],_[1]],{type:"rotate"})).update();else{if("scaling"!==g.action)return this;if(u=S.distance(this.coords[g.id].usrCoords.slice(1),_),Math.abs(u)<T.eps)return this;u=S.distance(h.coords.usrCoords.slice(1),_)/u,c=this.scaleDirections[g.id].indexOf("x")>=0?u:1,l=this.scaleDirections[g.id].indexOf("y")>=0?u:1,(v=this.board.create("transform",[1,0,0,_[0]*(1-c),c,0,_[1]*(1-l),0,l],{type:"generic"})).update()}}for(m in this._update_apply_transformation(g,v),this.needsUpdate=!1,this.objects)if(this.objects.hasOwnProperty(m))for(a in this.objects[m].descendants)this.objects[m].descendants.hasOwnProperty(a)&&(this.objects[m].descendants.needsUpdate=this.objects[m].descendants.needsRegularUpdate||this.board.needsFullUpdate);for(m in this.board.updateElements(g),this.objects)this.objects.hasOwnProperty(m)&&this._updateCoordsCache(m);return this},_update_find_drag_type:function(){var g,m,p,a="nothing",u=[];for(g in this.objects)this.objects.hasOwnProperty(g)&&(m=this.objects[g].point).coords.distance(I.COORDS_BY_USER,this.coords[g])>T.eps&&u.push(m.id);return 0===u.length?{action:a,id:"",changed:u}:(m=this.objects[p=u[0]].point,u.length>1?a="translation":w.isInArray(this.rotationPoints,m)&&w.exists(this.rotationCenter)?a="rotation":w.isInArray(this.scalePoints,m)&&w.exists(this.scaleCenter)?a="scaling":w.isInArray(this.translationPoints,m)&&(a="translation"),{action:a,id:p,changed:u})},_update_centroid_center:function(){var g,m,p;for(p in g=[0,0],m=0,this.coords)this.coords.hasOwnProperty(p)&&(g[0]+=this.coords[p].usrCoords[1],g[1]+=this.coords[p].usrCoords[2],++m);return m>0&&(g[0]/=m,g[1]/=m),g},_update_apply_transformation:function(g,m){var p,a;for(p in this.objects)this.objects.hasOwnProperty(p)&&(w.exists(this.board.objects[p])?(a=this.objects[p].point).id!==g.id?"translation"===g.action?w.isInArray(g.changed,a.id)||a.coords.setCoordinates(I.COORDS_BY_USER,[this.coords[p].usrCoords[1]+m[0],this.coords[p].usrCoords[2]+m[1]]):"rotation"!==g.action&&"scaling"!==g.action||m.applyOnce([a]):"rotation"!==g.action&&"scaling"!==g.action||a.coords.setCoordinates(I.COORDS_BY_USER,T.matVecMult(m.matrix,this.coords[a.id].usrCoords)):delete this.objects[p])},addPoint:function(g){return this.objects[g.id]={point:this.board.select(g)},this._updateCoordsCache(g.id),this.translationPoints.push(g),g.groups.push(this.id),g.groups=w.uniqueArray(g.groups),this},addPoints:function(g){var m;for(m=0;m<g.length;m++)this.addPoint(g[m]);return this},addGroup:function(g){var m;for(m in g.objects)g.objects.hasOwnProperty(m)&&this.addPoint(g.objects[m].point);return this},removePoint:function(g){return delete this.objects[g.id],this},setRotationCenter:function(g){return this.rotationCenter=g,this},setRotationPoints:function(g){return this._setActionPoints("rotation",g)},addRotationPoint:function(g){return this._addActionPoint("rotation",g)},removeRotationPoint:function(g){return this._removeActionPoint("rotation",g)},setTranslationPoints:function(g){return this._setActionPoints("translation",g)},addTranslationPoint:function(g){return this._addActionPoint("translation",g)},removeTranslationPoint:function(g){return this._removeActionPoint("translation",g)},setScaleCenter:function(g){return this.scaleCenter=g,this},setScalePoints:function(g,m){var p,a,u;for(u=(p=w.isArray(g)?g:arguments).length,a=0;a<u;++a)this.scaleDirections[this.board.select(p[a]).id]=m||"xy";return this._setActionPoints("scale",g)},addScalePoint:function(g,m){return this._addActionPoint("scale",g),this.scaleDirections[this.board.select(g).id]=m||"xy",this},removeScalePoint:function(g){return this._removeActionPoint("scale",g)},_setActionPoints:function(g,m){var p,a,u;for(u=(p=w.isArray(m)?m:arguments).length,this[g+"Points"]=[],a=0;a<u;++a)this._addActionPoint(g,p[a]);return this},_addActionPoint:function(g,m){return this[g+"Points"].push(this.board.select(m)),this},_removeActionPoint:function(g,m){var p=this[g+"Points"].indexOf(this.board.select(m));return p>-1&&this[g+"Points"].splice(p,1),this},setProperty:function(){E.deprecated("Group.setProperty","Group.setAttribute()"),this.setAttribute.apply(this,arguments)},setAttribute:function(){var g;for(g in this.objects)this.objects.hasOwnProperty(g)&&this.objects[g].point.setAttribute.apply(this.objects[g].point,arguments);return this}}),E.createGroup=function(g,m,p){var a=w.copyAttributes(p,g.options,"group"),u=new E.Group(g,a.id,a.name,m,a);return u.elType="group",u.setParents(m),u},E.registerElement("group",E.createGroup),{Group:E.Group,createGroup:E.createGroup}}),define("element/conic",["jxg","base/constants","base/coords","math/math","math/numerics","math/geometry","utils/type"],function(E,I,T,S,w,g,m){"use strict";return E.createEllipse=function(p,a,u){var c,l,f,v,_,h,y,b=[],x=m.copyAttributes(u,p.options,"conic","foci"),D=m.copyAttributes(u,p.options,"conic","center"),M=m.copyAttributes(u,p.options,"conic");for(h=0;h<2;h++)if(a[h].length>1)b[h]=p.create("point",a[h],x);else if(m.isPoint(a[h]))b[h]=p.select(a[h]);else if(m.isFunction(a[h])&&m.isPoint(a[h]()))b[h]=a[h]();else{if(!m.isString(a[h]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");b[h]=p.select(a[h])}if(m.isNumber(a[2]))_=m.createFunction(a[2],p);else if(m.isFunction(a[2])&&m.isNumber(a[2]()))_=a[2];else{if(m.isPoint(a[2]))v=p.select(a[2]);else if(a[2].length>1)v=p.create("point",a[2],x);else if(m.isFunction(a[2])&&m.isPoint(a[2]()))v=a[2]();else{if(!m.isString(a[2]))throw new Error("JSXGraph: Can't create Ellipse with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");v=p.select(a[2])}_=function(){return v.Dist(b[0])+v.Dist(b[1])}}for(m.exists(a[4])||(a[4]=2*Math.PI),m.exists(a[3])||(a[3]=0),f=p.create("point",[function(){return.5*(b[0].X()+b[1].X())},function(){return.5*(b[0].Y()+b[1].Y())}],D),(l=p.create("curve",[function(O){return 0},function(O){return 0},a[3],a[4]],M)).majorAxis=_,y=l.hasPoint,c=function(O,A){var N,L,B,V,U,j,z,$,X;A||(L=(N=_())*N,B=b[0].X(),V=b[0].Y(),z=B-(U=b[1].X()),$=V-(j=b[1].Y()),l.quadraticform=[[(X=(L-B*B-V*V+U*U+j*j)/(2*N))*X-U*U-j*j,X*z/N+U,X*$/N+j],[X*z/N+U,z*z/L-1,z*$/L],[X*$/N+j,z*$/L,$*$/L-1]])},l.X=function(O,A){var N=_(),L=b[1].Dist(b[0]),B=.5*(L*L-N*N)/(L*Math.cos(O)-N),V=Math.atan2(b[1].Y()-b[0].Y(),b[1].X()-b[0].X());return A||c(0,A),b[0].X()+Math.cos(V+O)*B},l.Y=function(O,A){var N=_(),L=b[1].Dist(b[0]),B=.5*(L*L-N*N)/(L*Math.cos(O)-N),V=Math.atan2(b[1].Y()-b[0].Y(),b[1].X()-b[0].X());return b[0].Y()+Math.sin(V+O)*B},l.midpoint=l.center=f,l.type=I.OBJECT_TYPE_CONIC,l.subs={center:l.center},l.inherits.push(l.center,b[0],b[1]),m.isPoint(v)&&l.inherits.push(v),l.hasPoint=function(O,A){var N,L,B,V;return m.evaluate(this.visProp.hasinnerpoints)?(N=b[0].coords,L=b[1].coords,B=this.majorAxis(),(V=new T(I.COORDS_BY_SCREEN,[O,A],this.board)).distance(I.COORDS_BY_USER,N)+V.distance(I.COORDS_BY_USER,L)<=B):y.apply(this,arguments)},f.addChild(l),h=0;h<2;h++)m.isPoint(b[h])&&b[h].addChild(l);return m.isPoint(v)&&v.addChild(l),l.setParents(a),l},E.createHyperbola=function(p,a,u){var c,l,f,v,_,h,y=[],b=m.copyAttributes(u,p.options,"conic","foci"),x=m.copyAttributes(u,p.options,"conic","center"),D=m.copyAttributes(u,p.options,"conic");for(h=0;h<2;h++)if(a[h].length>1)y[h]=p.create("point",a[h],b);else if(m.isPoint(a[h]))y[h]=p.select(a[h]);else if(m.isFunction(a[h])&&m.isPoint(a[h]()))y[h]=a[h]();else{if(!m.isString(a[h]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");y[h]=p.select(a[h])}if(m.isNumber(a[2]))_=m.createFunction(a[2],p);else if(m.isFunction(a[2])&&m.isNumber(a[2]()))_=a[2];else{if(m.isPoint(a[2]))v=p.select(a[2]);else if(a[2].length>1)v=p.create("point",a[2],b);else if(m.isFunction(a[2])&&m.isPoint(a[2]()))v=a[2]();else{if(!m.isString(a[2]))throw new Error("JSXGraph: Can't create Hyperbola with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point], [point,point,number|function]");v=p.select(a[2])}_=function(){return v.Dist(y[0])-v.Dist(y[1])}}for(m.exists(a[4])||(a[4]=1.0001*Math.PI),m.exists(a[3])||(a[3]=-1.0001*Math.PI),f=p.create("point",[function(){return.5*(y[0].X()+y[1].X())},function(){return.5*(y[0].Y()+y[1].Y())}],x),(l=p.create("curve",[function(M){return 0},function(M){return 0},a[3],a[4]],D)).majorAxis=_,c=function(M,O){var A,N,L,B,V,U,j,z,$;O||(N=(A=_())*A,L=y[0].X(),B=y[0].Y(),j=L-(V=y[1].X()),z=B-(U=y[1].Y()),l.quadraticform=[[($=(N-L*L-B*B+V*V+U*U)/(2*A))*$-V*V-U*U,$*j/A+V,$*z/A+U],[$*j/A+V,j*j/N-1,j*z/N],[$*z/A+U,j*z/N,z*z/N-1]])},l.X=function(M,O){var A=_(),N=y[1].Dist(y[0]),L=.5*(N*N-A*A)/(N*Math.cos(M)+A),B=Math.atan2(y[1].Y()-y[0].Y(),y[1].X()-y[0].X());return O||c(0,O),y[0].X()+Math.cos(B+M)*L},l.Y=function(M,O){var A=_(),N=y[1].Dist(y[0]),L=.5*(N*N-A*A)/(N*Math.cos(M)+A),B=Math.atan2(y[1].Y()-y[0].Y(),y[1].X()-y[0].X());return y[0].Y()+Math.sin(B+M)*L},l.midpoint=l.center=f,l.subs={center:l.center},l.inherits.push(l.center,y[0],y[1]),m.isPoint(v)&&l.inherits.push(v),l.type=I.OBJECT_TYPE_CONIC,f.addChild(l),h=0;h<2;h++)m.isPoint(y[h])&&y[h].addChild(l);return m.isPoint(v)&&v.addChild(l),l.setParents(a),l},E.createParabola=function(p,a,u){var c,l,f,v,_=a[0],h=a[1],y=m.copyAttributes(u,p.options,"conic","foci"),b=m.copyAttributes(u,p.options,"conic","center"),x=m.copyAttributes(u,p.options,"conic");if(a[0].length>1)_=p.create("point",a[0],y);else if(m.isPoint(a[0]))_=p.select(a[0]);else if(m.isFunction(a[0])&&m.isPoint(a[0]()))_=a[0]();else{if(!m.isString(a[0]))throw new Error("JSXGraph: Can't create Parabola with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,line]");_=p.select(a[0])}return m.isArray(h)&&2===h.length&&(v=m.copyAttributes(u,p.options,"conic","line"),h=p.create("line",h,v)),m.exists(a[3])||(a[3]=2*Math.PI),m.exists(a[2])||(a[2]=0),f=p.create("point",[function(){return g.projectPointToLine(_,h,p).usrCoords}],b),(l=p.create("curve",[function(D){return 0},function(D){return 0},a[2],a[3]],x)).midpoint=l.center=f,l.subs={center:l.center},l.inherits.push(l.center),c=function(D,M){var O,A,N,L,B,V;M||(N=h.stdform[0],L=(O=h.stdform[1])*O+(A=h.stdform[2])*A,B=_.X(),V=_.Y(),l.quadraticform=[[N*N-L*(B*B+V*V),N*O+L*B,N*A+L*V],[N*O+L*B,-A*A,O*A],[N*A+L*V,O*A,-O*O]])},l.X=function(D,M){var O,A=h.getAngle(),N=g.distPointLine(_.coords.usrCoords,h.stdform),L=h.point1.coords.usrCoords,B=h.point2.coords.usrCoords,V=_.coords.usrCoords;return 0===L[0]?L=[1,B[1]+h.stdform[2],B[2]-h.stdform[1]]:0===B[0]&&(B=[1,L[1]+h.stdform[2],L[2]-h.stdform[1]]),O=((B[1]-L[1])*(V[2]-L[2])-(B[2]-L[2])*(V[1]-L[1])>=0?1:-1)*N/(1-Math.sin(D)),M||c(0,M),_.X()+Math.cos(D+A)*O},l.Y=function(D,M){var O,A=h.getAngle(),N=g.distPointLine(_.coords.usrCoords,h.stdform),L=h.point1.coords.usrCoords,B=h.point2.coords.usrCoords,V=_.coords.usrCoords;return 0===L[0]?L=[1,B[1]+h.stdform[2],B[2]-h.stdform[1]]:0===B[0]&&(B=[1,L[1]+h.stdform[2],L[2]-h.stdform[1]]),O=((B[1]-L[1])*(V[2]-L[2])-(B[2]-L[2])*(V[1]-L[1])>=0?1:-1)*N/(1-Math.sin(D)),_.Y()+Math.sin(D+A)*O},l.type=I.OBJECT_TYPE_CONIC,f.addChild(l),m.isPoint(_)&&(_.addChild(l),l.inherits.push(_)),h.addChild(l),l.setParents(a),l},E.createConic=function(p,a,u){var c,l,f,v,_,h,y,b,x,D,M,O,A,N,L=[[1,0,0],[0,1,0],[0,0,1]],B=[[1,0,0],[0,1,0],[0,0,1]],V=[],U=[],j=m.copyAttributes(u,p.options,"conic","point"),z=m.copyAttributes(u,p.options,"conic","center"),$=m.copyAttributes(u,p.options,"conic");if(5===a.length)N=!0;else{if(6!==a.length)throw new Error("JSXGraph: Can't create generic Conic with "+a.length+" parameters.");N=!1}if(N)for(O=0;O<5;O++)if(a[O].length>1)V[O]=p.create("point",a[O],j);else if(m.isPoint(a[O]))V[O]=p.select(a[O]);else if(m.isFunction(a[O])&&m.isPoint(a[O]()))V[O]=a[O]();else{if(!m.isString(a[O]))throw new Error("JSXGraph: Can't create Conic section with parent types '"+typeof a[O]+"'.\nPossible parent types: [point,point,point,point,point], [a00,a11,a22,a01,a02,a12]");V[O]=p.select(a[O])}else(A=[[0,0,0],[0,0,0],[0,0,0]])[0][0]=m.isFunction(a[2])?function(){return a[2]()}:function(){return a[2]},A[0][1]=m.isFunction(a[4])?function(){return a[4]()}:function(){return a[4]},A[0][2]=m.isFunction(a[5])?function(){return a[5]()}:function(){return a[5]},A[1][1]=m.isFunction(a[0])?function(){return a[0]()}:function(){return a[0]},A[1][2]=m.isFunction(a[3])?function(){return a[3]()}:function(){return a[3]},A[2][2]=m.isFunction(a[1])?function(){return a[1]()}:function(){return a[1]};if(_=function(X){var Z,W;for(Z=0;Z<3;Z++)for(W=Z;W<3;W++)X[Z][W]+=X[W][Z];for(Z=0;Z<3;Z++)for(W=0;W<Z;W++)X[Z][W]=X[W][Z];return X},v=function(X,Z){var W,ee,ie=[[0,0,0],[0,0,0],[0,0,0]];for(W=0;W<3;W++)for(ee=0;ee<3;ee++)ie[W][ee]=X[W]*Z[ee];return _(ie)},f=function(X,Z,W){var ee,ie,re,Me,Pe,Oe=[[0,0,0],[0,0,0],[0,0,0]];for(Pe=S.matVecMult(Z,W),re=S.innerProduct(W,Pe),Pe=S.matVecMult(X,W),Me=S.innerProduct(W,Pe),ee=0;ee<3;ee++)for(ie=0;ie<3;ie++)Oe[ee][ie]=re*X[ee][ie]-Me*Z[ee][ie];return Oe},l=p.create("curve",[function(X){return 0},function(X){return 0},0,2*Math.PI],$),c=function(X,Z){var W,ee,ie,re;if(!Z){if(N){for(W=0;W<5;W++)U[W]=V[W].coords.usrCoords;D=v(S.crossProduct(U[0],U[1]),S.crossProduct(U[2],U[3])),M=v(S.crossProduct(U[0],U[2]),S.crossProduct(U[1],U[3])),B=f(D,M,U[4])}else for(W=0;W<3;W++)for(ee=W;ee<3;ee++)B[W][ee]=A[W][ee](),ee>W&&(B[ee][W]=B[W][ee]);for(l.quadraticform=B,(h=w.Jacobi(B))[0][0][0]<0&&(h[0][0][0]*=-1,h[0][1][1]*=-1,h[0][2][2]*=-1),W=0;W<3;W++){for(ie=0,ee=0;ee<3;ee++)ie+=h[1][ee][W]*h[1][ee][W];ie=Math.sqrt(ie)}L=h[1],x=Math.sqrt(Math.abs(h[0][0][0])),y=Math.sqrt(Math.abs(h[0][1][1])),b=Math.sqrt(Math.abs(h[0][2][2]))}return h[0][1][1]<=0&&h[0][2][2]<=0?re=S.matVecMult(L,[1/x,Math.cos(X)/y,Math.sin(X)/b]):h[0][1][1]<=0&&h[0][2][2]>0?re=S.matVecMult(L,[Math.cos(X)/x,1/y,Math.sin(X)/b]):h[0][2][2]<0&&(re=S.matVecMult(L,[Math.sin(X)/x,Math.cos(X)/y,1/b])),m.exists(re)?(re[1]/=re[0],re[2]/=re[0],re[0]=1):re=[1,NaN,NaN],re},l.X=function(X,Z){return c(X,Z)[1]},l.Y=function(X,Z){return c(X,Z)[2]},l.midpoint=p.create("point",[function(){var X=l.quadraticform;return[X[1][1]*X[2][2]-X[1][2]*X[1][2],X[1][2]*X[0][2]-X[2][2]*X[0][1],X[0][1]*X[1][2]-X[1][1]*X[0][2]]}],z),l.type=I.OBJECT_TYPE_CONIC,l.center=l.midpoint,l.subs={center:l.center},l.inherits.push(l.center),l.inherits=l.inherits.concat(V),N){for(O=0;O<5;O++)m.isPoint(V[O])&&V[O].addChild(l);l.setParents(a)}return l.addChild(l.center),l},E.registerElement("ellipse",E.createEllipse),E.registerElement("hyperbola",E.createHyperbola),E.registerElement("parabola",E.createParabola),E.registerElement("conic",E.createConic),{createEllipse:E.createEllipse,createHyperbola:E.createHyperbola,createParabola:E.createParabola,createConic:E.createConic}}),define("base/circle",["jxg","base/element","base/coords","base/constants","element/conic","parser/geonext","utils/type"],function(E,I,T,S,w,g,m){"use strict";return E.Circle=function(p,a,u,c,l){this.constructor(p,l,S.OBJECT_TYPE_CIRCLE,S.OBJECT_CLASS_CIRCLE),this.method=a,this.midpoint=this.board.select(u),this.center=this.board.select(u),this.point2=null,this.radius=0,this.line=null,this.circle=null,this.points=[],"twoPoints"===a?(this.point2=p.select(c),this.radius=this.Radius()):"pointRadius"===a?(this.gxtterm=c,this.updateRadius=m.createFunction(c,this.board,null,!0),this.updateRadius()):"pointLine"===a?(this.line=p.select(c),this.radius=this.line.point1.coords.distance(S.COORDS_BY_USER,this.line.point2.coords)):"pointCircle"===a&&(this.circle=p.select(c),this.radius=this.circle.Radius()),this.id=this.board.setId(this,"C"),this.board.renderer.drawEllipse(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="circle",this.createLabel(),m.exists(this.center._is_new)?(this.addChild(this.center),delete this.center._is_new):this.center.addChild(this),"pointRadius"===a?this.notifyParents(c):"pointLine"===a?this.line.addChild(this):"pointCircle"===a?this.circle.addChild(this):"twoPoints"===a&&(m.exists(this.point2._is_new)?(this.addChild(this.point2),delete this.point2._is_new):this.point2.addChild(this)),this.methodMap=m.deepCopy(this.methodMap,{setRadius:"setRadius",getRadius:"getRadius",Area:"Area",area:"Area",radius:"Radius",center:"center",line:"line",point2:"point2"})},E.Circle.prototype=new I,E.extend(E.Circle.prototype,{hasPoint:function(p,a){var u,l,f,v,_=this.center.coords.usrCoords,h=new T(S.COORDS_BY_SCREEN,[p,a],this.board),y=this.Radius();return u=m.isObject(m.evaluate(this.visProp.precision))?m.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,l=_[1]-h.usrCoords[1],f=_[2]-h.usrCoords[2],v=Math.sqrt(l*l+f*f),u+=.5*m.evaluate(this.visProp.strokewidth),u/=Math.sqrt(this.board.unitX*this.board.unitY),m.evaluate(this.visProp.hasinnerpoints)?v<y+u:Math.abs(v-y)<u},generatePolynomial:function(p){var a=this.center.symbolic.x,u=this.center.symbolic.y,c=p.symbolic.x,l=p.symbolic.y,f=this.generateRadiusSquared();return""===f?[]:["(("+c+")-("+a+"))^2 + (("+l+")-("+u+"))^2 - ("+f+")"]},generateRadiusSquared:function(){var l="";return"twoPoints"===this.method?l="(("+this.point2.symbolic.x+")-("+this.center.symbolic.x+"))^2 + (("+this.point2.symbolic.y+")-("+this.center.symbolic.y+"))^2":"pointRadius"===this.method?m.isNumber(this.radius)&&(l=(this.radius*this.radius).toString()):"pointLine"===this.method?l="(("+this.line.point1.symbolic.x+")-("+this.line.point2.symbolic.x+"))^2 + (("+this.line.point1.symbolic.y+")-("+this.line.point2.symbolic.y+"))^2":"pointCircle"===this.method&&(l=this.circle.Radius()),l},update:function(){var p,a,u,c,l,f;if(this.needsUpdate)for(m.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),"pointLine"===this.method?this.radius=this.line.point1.coords.distance(S.COORDS_BY_USER,this.line.point2.coords):"pointCircle"===this.method?this.radius=this.circle.Radius():"pointRadius"===this.method&&(this.radius=this.updateRadius()),this.updateStdform(),this.updateQuadraticform(),p=this.center.coords.usrCoords[1]/(u=this.center.coords.usrCoords[0]),a=this.center.coords.usrCoords[2]/u,u/=u,c=this.Radius(),l=.551915024494,this.numberPoints=13,this.dataX=[p+c,p+c,p+c*l,p,p-c*l,p-c,p-c,p-c,p-c*l,p,p+c*l,p+c,p+c],this.dataY=[a,a+c*l,a+c,a+c,a+c,a+c*l,a,a-c*l,a-c,a-c,a-c,a-c*l,a],this.bezierDegree=3,f=0;f<this.numberPoints;f++)this.points[f]=new T(S.COORDS_BY_USER,[this.dataX[f],this.dataY[f]],this.board);return this},updateQuadraticform:function(){var p=this.center,a=p.X(),u=p.Y(),c=this.Radius();this.quadraticform=[[a*a+u*u-c*c,-a,-u],[-a,1,0],[-u,0,1]]},updateStdform:function(){this.stdform[3]=.5,this.stdform[4]=this.Radius(),this.stdform[1]=-this.center.coords.usrCoords[1],this.stdform[2]=-this.center.coords.usrCoords[2],isFinite(this.stdform[4])||(this.stdform[0]=m.exists(this.point2)?-(this.stdform[1]*this.point2.coords.usrCoords[1]+this.stdform[2]*this.point2.coords.usrCoords[2]):0),this.normalize()},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=!isNaN(this.center.coords.usrCoords[1]+this.center.coords.usrCoords[2]+this.Radius())&&this.center.isReal,this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateEllipse(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},notifyParents:function(p){m.isString(p)&&g.findDependencies(this,p,this.board)},setRadius:function(p){return this.updateRadius=m.createFunction(p,this.board,null,!0),this.board.update(),this},Radius:function(p){return m.exists(p)?(this.setRadius(p),this.Radius()):"twoPoints"===this.method?m.cmpArrays(this.point2.coords.usrCoords,[0,0,0])||m.cmpArrays(this.center.coords.usrCoords,[0,0,0])?NaN:this.center.Dist(this.point2):"pointLine"===this.method||"pointCircle"===this.method?this.radius:"pointRadius"===this.method?this.updateRadius():NaN},getRadius:function(){return E.deprecated("Circle.getRadius()","Circle.Radius()"),this.Radius()},getTextAnchor:function(){return this.center.coords},getLabelAnchor:function(){var p,a,u=this.Radius(),c=this.center.coords.usrCoords,l=.7071067811865476;switch(m.evaluate(this.visProp.label.position)){case"lft":p=c[1]-u,a=c[2];break;case"llft":p=c[1]-l*u,a=c[2]-l*u;break;case"rt":p=c[1]+u,a=c[2];break;case"lrt":p=c[1]+l*u,a=c[2]-l*u;break;case"urt":p=c[1]+l*u,a=c[2]+l*u;break;case"top":p=c[1],a=c[2]+u;break;case"bot":p=c[1],a=c[2]-u;break;default:p=c[1]-l*u,a=c[2]+l*u}return new T(S.COORDS_BY_USER,[p,a],this.board)},cloneToBackground:function(){var p,a=this.Radius(),u={id:this.id+"T"+this.numTraces,elementClass:S.OBJECT_CLASS_CIRCLE,center:{coords:this.center.coords},Radius:function(){return a},getRadius:function(){return a},board:this.board,visProp:m.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return u.visProp.layer=this.board.options.layer.trace,this.numTraces++,m.clearVisPropOld(u),u.visPropCalc={visible:m.evaluate(u.visProp.visible)},p=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawEllipse(u),this.board.renderer.enhancedRendering=p,this.traces[u.id]=u.rendNode,this},addTransform:function(p){var a,u=m.isArray(p)?p:[p],c=u.length;for(a=0;a<c;a++)this.center.transformations.push(u[a]),"twoPoints"===this.method&&this.point2.transformations.push(u[a]);return this},snapToGrid:function(){var p=m.evaluate(this.visProp.snaptogrid);return this.center.handleSnapToGrid(p,!0),"twoPoints"===this.method&&this.point2.handleSnapToGrid(p,!0),this},snapToPoints:function(){var p=m.evaluate(this.visProp.snaptopoints);return this.center.handleSnapToPoints(p),"twoPoints"===this.method&&this.point2.handleSnapToPoints(p),this},X:function(p){return this.Radius()*Math.cos(2*p*Math.PI)+this.center.coords.usrCoords[1]},Y:function(p){return this.Radius()*Math.sin(2*p*Math.PI)+this.center.coords.usrCoords[2]},Z:function(p){return 1},minX:function(){return 0},maxX:function(){return 1},Area:function(){var p=this.Radius();return p*p*Math.PI},bounds:function(){var p=this.center.coords.usrCoords,a=this.Radius();return[p[1]-a,p[2]+a,p[1]+a,p[2]-a]},getParents:function(){return 1===this.parents.length?this.parents.concat(this.radius):this.parents}}),E.createCircle=function(p,a,u){var c,l,f,v,_,h=["center","point2"];if(l=[],_=p.select(a[0]),m.isObject(_)&&_.elementClass===S.OBJECT_CLASS_CIRCLE&&m.isTransformationOrArray(a[1]))return v=m.copyAttributes(u,p.options,"circle"),(c=w.createEllipse(p,[_.center,_.center,function(){return 2*_.Radius()}],v)).addTransform(a[1]),c;for(f=0;f<a.length;f++)if(m.isPointType(p,a[f])){if(!1===(l=l.concat(m.providePoints(p,[a[f]],u,"circle",[h[f]])))[l.length-1])throw new Error("JSXGraph: Can't create circle from this type. Please provide a point type.")}else l.push(a[f]);if(v=m.copyAttributes(u,p.options,"circle"),2===l.length&&m.isPoint(l[0])&&m.isPoint(l[1]))c=new E.Circle(p,"twoPoints",l[0],l[1],v);else if((m.isNumber(l[0])||m.isFunction(l[0])||m.isString(l[0]))&&m.isPoint(l[1]))c=new E.Circle(p,"pointRadius",l[1],l[0],v);else if((m.isNumber(l[1])||m.isFunction(l[1])||m.isString(l[1]))&&m.isPoint(l[0]))c=new E.Circle(p,"pointRadius",l[0],l[1],v);else if(l[0].elementClass===S.OBJECT_CLASS_CIRCLE&&m.isPoint(l[1]))c=new E.Circle(p,"pointCircle",l[1],l[0],v);else if(l[1].elementClass===S.OBJECT_CLASS_CIRCLE&&m.isPoint(l[0]))c=new E.Circle(p,"pointCircle",l[0],l[1],v);else if(l[0].elementClass===S.OBJECT_CLASS_LINE&&m.isPoint(l[1]))c=new E.Circle(p,"pointLine",l[1],l[0],v);else if(l[1].elementClass===S.OBJECT_CLASS_LINE&&m.isPoint(l[0]))c=new E.Circle(p,"pointLine",l[0],l[1],v);else{if(!(3===a.length&&m.isPoint(l[0])&&m.isPoint(l[1])&&m.isPoint(l[2])))throw new Error("JSXGraph: Can't create circle with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point], [point,number], [point,function], [point,circle], [point,point,point], [circle,transformation]");if(!E.elements.circumcircle)throw new Error("JSXGraph: Can't create circle with three points. Please include the circumcircle element (element/composition).");c=E.elements.circumcircle(p,l,v)}for(c.isDraggable=!0,c.setParents(l),c.elType="circle",f=0;f<l.length;f++)m.isPoint(l[f])&&c.inherits.push(l[f]);return c},E.registerElement("circle",E.createCircle),{Circle:E.Circle,createCircle:E.createCircle}}),define("base/polygon",["jxg","base/constants","base/coords","math/statistics","math/geometry","utils/type","base/element"],function(E,I,T,S,w,g,m){"use strict";return E.Polygon=function(p,a,u){this.constructor(p,u,I.OBJECT_TYPE_POLYGON,I.OBJECT_CLASS_AREA);var c,l,f,v,_,h=g.copyAttributes(u,p.options,"polygon","borders");for(this.withLines=u.withlines,this.attr_line=h,this.vertices=[],c=0;c<a.length;c++)this.vertices[c]=this.board.select(a[c]),this.vertices[c]._is_new&&(delete this.vertices[c]._is_new,this.vertices[c]._is_new_pol=!0);if(this.vertices.length>0&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.borders=[],this.withLines)for(f=this.vertices.length-1,v=0;v<f;v++)c=(v+1)%f,h.id=h.ids&&h.ids[c],h.name=h.names&&h.names[c],h.strokecolor=g.isArray(h.colors)&&h.colors[c%h.colors.length]||h.strokecolor,h.visible=g.exists(u.borders.visible)?u.borders.visible:u.visible,!1===h.strokecolor&&(h.strokecolor="none"),(l=p.create("segment",[this.vertices[c],this.vertices[c+1]],h)).dump=!1,this.borders[c]=l,l.parentPolygon=this;for(this.inherits.push(this.vertices,this.borders),this.id=this.board.setId(this,"Py"),c=0;c<this.vertices.length-1;c++)_=this.board.select(this.vertices[c]),g.exists(_._is_new_pol)?(this.addChild(_),delete _._is_new_pol):_.addChild(this);this.board.renderer.drawPolygon(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="polygon",this.createLabel(),this.methodMap=E.deepCopy(this.methodMap,{borders:"borders",vertices:"vertices",A:"Area",Area:"Area",Perimeter:"Perimeter",L:"Perimeter",Length:"Perimeter",boundingBox:"boundingBox",bounds:"bounds",addPoints:"addPoints",insertPoints:"insertPoints",removePoints:"removePoints"})},E.Polygon.prototype=new m,E.extend(E.Polygon.prototype,{pnpoly:function(p,a,u){return w.pnpoly(p,a,this.vertices,u)},hasPoint:function(p,a){var u,c;if(g.evaluate(this.visProp.hasinnerpoints)&&this.pnpoly(p,a))return!0;for(c=this.borders.length,u=0;u<c;u++)if(this.borders[u].hasPoint(p,a))return!0;return!1},updateRenderer:function(){var p,a;if(!this.needsUpdate)return this;if(this.visPropCalc.visible){for(a=this.vertices.length,this.isReal=!0,p=0;p<a;++p)if(!this.vertices[p].isReal){this.isReal=!1;break}this.isReal||this.updateVisibility(!1)}return this.visPropCalc.visible&&this.board.renderer.updatePolygon(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this},getTextAnchor:function(){var p,a,u,c,l;if(0===this.vertices.length)return new T(I.COORDS_BY_USER,[1,0,0],this.board);for(u=p=this.vertices[0].X(),c=a=this.vertices[0].Y(),l=0;l<this.vertices.length;l++)this.vertices[l].X()<p&&(p=this.vertices[l].X()),this.vertices[l].X()>u&&(u=this.vertices[l].X()),this.vertices[l].Y()>a&&(a=this.vertices[l].Y()),this.vertices[l].Y()<c&&(c=this.vertices[l].Y());return new T(I.COORDS_BY_USER,[.5*(p+u),.5*(a+c)],this.board)},getLabelAnchor:E.shortcut(E.Polygon.prototype,"getTextAnchor"),cloneToBackground:function(){var p,a={};return a.id=this.id+"T"+this.numTraces,this.numTraces++,a.vertices=this.vertices,a.visProp=g.deepCopy(this.visProp,this.visProp.traceattributes,!0),a.visProp.layer=this.board.options.layer.trace,a.board=this.board,g.clearVisPropOld(a),a.visPropCalc={visible:g.evaluate(a.visProp.visible)},p=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawPolygon(a),this.board.renderer.enhancedRendering=p,this.traces[a.id]=a.rendNode,this},hideElement:function(p){var a;if(E.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),!p)for(a=0;a<this.borders.length;a++)this.borders[a].hideElement();this.hasLabel&&g.exists(this.label)&&(this.label.hiddenByParent=!0,this.label.visPropCalc.visible&&this.label.hideElement())},showElement:function(p){var a;if(E.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!0),!p)for(a=0;a<this.borders.length;a++)this.borders[a].showElement().updateRenderer();return g.exists(this.label)&&this.hasLabel&&this.label.hiddenByParent&&(this.label.hiddenByParent=!1,this.label.visPropCalc.visible||this.label.showElement().updateRenderer()),this},Area:function(){return Math.abs(w.signedPolygon(this.vertices,!0))},Perimeter:function(){var p,a=this.vertices.length,u=0;for(p=1;p<a;++p)u+=this.vertices[p].Dist(this.vertices[p-1]);return u},boundingBox:function(){var p,a,u=[0,0,0,0],c=this.vertices.length-1;if(0===c)return u;for(u[0]=this.vertices[0].X(),u[2]=u[0],u[1]=this.vertices[0].Y(),u[3]=u[1],p=1;p<c;++p)(a=this.vertices[p].X())<u[0]?u[0]=a:a>u[2]&&(u[2]=a),(a=this.vertices[p].Y())>u[1]?u[1]=a:a<u[3]&&(u[3]=a);return u},bounds:function(){return this.boundingBox()},remove:function(){var p;for(p=0;p<this.borders.length;p++)this.board.removeObject(this.borders[p]);m.prototype.remove.call(this)},findPoint:function(p){var a;if(!g.isPoint(p))return-1;for(a=0;a<this.vertices.length;a++)if(this.vertices[a].id===p.id)return a;return-1},addPoints:function(p){var u=Array.prototype.slice.call(arguments);return this.insertPoints.apply(this,["polygonalchain"===this.elType?this.vertices.length-1:this.vertices.length-2].concat(u))},insertPoints:function(p,a){var u,c,l,f,v;if(0===arguments.length)return this;if(l=this.vertices.length-1,"polygon"===this.elType&&l--,p<-1||p>l)return this;for(c=arguments.length-1,u=1;u<c+1;u++)(v=g.providePoints(this.board,[arguments[u]],{},"polygon",["vertices"])[0])._is_new&&(this.addChild(v),delete v._is_new),this.vertices.splice(p+u,0,v);if(this.withLines)for(f=p+1,"polygon"===this.elType?p<0?(this.vertices[this.vertices.length-1]=this.vertices[0],this.borders[this.borders.length-1].point2=this.vertices[this.vertices.length-1]):this.borders[p].point2=this.vertices[f]:p>=0&&(p<this.borders.length?this.borders[p].point2=this.vertices[f]:f=p),u=f;u<f+c;u++)this.borders.splice(u,0,this.board.create("segment",[this.vertices[u],this.vertices[u+1]],this.attr_line));return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},removePoints:function(p){var a,u,c,l,f=[],v=[],_=[],h=[];for("polygon"===this.elType&&(l=this.vertices.pop()),a=0;a<arguments.length;a++)g.isPoint(c=arguments[a])&&(c=this.findPoint(c)),g.isNumber(c)&&c>-1&&c<this.vertices.length&&-1===g.indexOf(_,c)&&_.push(c);if(0===_.length)return"polygon"===this.elType&&this.vertices.push(l),this;for(a=0;a<_.length;a++)this.vertices[_[a]].removeChild(this);for(_=_.sort(),f=this.vertices.slice(),v=this.borders.slice(),this.withLines&&h.push([_[_.length-1]]),a=_.length-1;a>-1;a--)f[_[a]]=-1,this.withLines&&_.length>1&&_[a]-1>_[a-1]&&(h[h.length-1][1]=_[a],h.push([_[a-1]]));for(this.withLines&&(h[h.length-1][1]=_[0]),this.vertices=[],a=0;a<f.length;a++)g.isPoint(f[a])&&this.vertices.push(f[a]);if("polygon"===this.elType&&this.vertices.length>1&&this.vertices[this.vertices.length-1].id!==this.vertices[0].id&&this.vertices.push(this.vertices[0]),this.withLines){for(a=0;a<h.length;a++){for(u=h[a][1]-1;u<h[a][0]+1;u++)u<0?"polygon"===this.elType&&(this.board.removeObject(this.borders[v.length-1]),v[v.length-1]=-1):u<v.length&&(this.board.removeObject(this.borders[u]),v[u]=-1);0!==h[a][1]&&h[a][0]!==f.length-1&&(v[h[a][0]-1]=this.board.create("segment",[f[h[a][1]-1],f[h[a][0]+1]],this.attr_line))}for(this.borders=[],a=0;a<v.length;a++)-1!==v[a]&&this.borders.push(v[a]);"polygon"===this.elType&&this.vertices.length>2&&(h[0][1]===this.vertices.length-1||0===h[h.length-1][1])&&this.borders.push(this.board.create("segment",[this.vertices[0],this.vertices[this.vertices.length-2]],this.attr_line))}return this.inherits=[],this.inherits.push(this.vertices,this.borders),this.board.update(),this},getParents:function(){return this.setParents(this.vertices),this.parents},getAttributes:function(){var p,a=m.prototype.getAttributes.call(this);if(this.withLines)for(a.lines=a.lines||{},a.lines.ids=[],a.lines.colors=[],p=0;p<this.borders.length;p++)a.lines.ids.push(this.borders[p].id),a.lines.colors.push(this.borders[p].visProp.strokecolor);return a},snapToGrid:function(){var p,a;for(a=!!g.evaluate(this.visProp.snaptogrid),p=0;p<this.vertices.length;p++)this.vertices[p].handleSnapToGrid(a,!0)},setPositionDirectly:function(p,a,u){var c,l,f,v=new T(p,a,this.board),_=new T(p,u,this.board);for(f=this.vertices.length-1,l=0;l<f;l++)if(!this.vertices[l].draggable())return this;return c=S.subtract(v.usrCoords,_.usrCoords),this.board.create("transform",c.slice(1),{type:"translate"}).applyOnce(this.vertices.slice(0,-1)),this},sutherlandHodgman:function(p){var a,u,c,l,f,v,_,h=E.Math.Geometry.sortVertices(this.vertices),y=E.Math.Geometry.sortVertices(p.vertices),b=h.length-1,x=y.length-1,D=[],M=function(O,A,N){return(A[1]-O[1])*(N[2]-O[2])-(A[2]-O[2])*(N[1]-O[1])>=0};for(c=0;c<x;c++)D.push(y[c]);for(c=0;c<b;c++)for(u=D.slice(0),D=[],f=u[(a=u.length)-1],l=0;l<a;l++)M(h[c],h[c+1],v=u[l])?(M(h[c],h[c+1],f)||((_=E.Math.Geometry.meetSegmentSegment(f,v,h[c],h[c+1]))[0][1]/=_[0][0],_[0][2]/=_[0][0],_[0][0]=1,D.push(_[0])),D.push(v)):M(h[c],h[c+1],f)&&((_=E.Math.Geometry.meetSegmentSegment(f,v,h[c],h[c+1]))[0][1]/=_[0][0],_[0][2]/=_[0][0],_[0][0]=1,D.push(_[0])),f=v;return D},intersect:function(p){return this.sutherlandHodgman(p)}}),E.createPolygon=function(p,a,u){var c,l,f,v,_,h,y=[],b=!1;if(g.copyAttributes(u,p.options,"polygon"),null===(v=p.select(a[0]))&&(v=a[0]),g.isObject(v)&&v.type===I.OBJECT_TYPE_POLYGON&&g.isTransformationOrArray(a[1]))for(b=!0,f=v.vertices.length-1,h=g.copyAttributes(u,p.options,"polygon","vertices"),l=0;l<f;l++)h.withlabel&&(h.name=""===v.vertices[l].name?"":v.vertices[l].name+"'"),y.push(p.create("point",[v.vertices[l],a[1]],h));else if(!1===(y=g.providePoints(p,a,u,"polygon",["vertices"])))throw new Error("JSXGraph: Can't create polygon / polygonalchain with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates. Alternatively, a polygon and a transformation can be supplied");if(_=g.copyAttributes(u,p.options,"polygon"),(c=new E.Polygon(p,y,_)).isDraggable=!0,b)for(c.prepareUpdate().update().updateVisibility().updateRenderer(),f=v.vertices.length-1,l=0;l<f;l++)y[l].prepareUpdate().update().updateVisibility().updateRenderer();return c},E.createRegularPolygon=function(p,a,u){var c,l,f,v,_,h,y,b=[];if(f=a[(_=a.length)-1],g.isNumber(f)&&(3!==a.length||f<3))throw new Error("JSXGraph: A regular polygon needs two point types and a number > 2 as input.");if(g.isNumber(p.select(f))?(_--,h=!1):(f=_,h=!0),!1===(b=g.providePoints(p,a.slice(0,_),u,"regularpolygon",["vertices"])))throw new Error("JSXGraph: Can't create regular polygon with parent types other than 'point' and 'coordinate arrays' or a function returning an array of coordinates");for(y=g.copyAttributes(u,p.options,"regularpolygon","vertices"),l=2;l<f;l++)v=p.create("transform",[Math.PI*(2-(f-2)/f),b[l-1]],{type:"rotate"}),h?(b[l].addTransform(b[l-2],v),b[l].fullUpdate()):(g.isArray(y.ids)&&y.ids.length>=f-2&&(y.id=y.ids[l-2]),b[l]=p.create("point",[b[l-2],v],y),b[l].type=I.OBJECT_TYPE_CAS,b[l].isDraggable=!0,b[l].visProp.fixed=!1);return y=g.copyAttributes(u,p.options,"regularpolygon"),(c=p.create("polygon",b,y)).elType="regularpolygon",c},E.createPolygonalChain=function(p,a,u){var c,l;return c=g.copyAttributes(u,p.options,"polygonalchain"),(l=p.create("polygon",a,c)).elType="polygonalchain",l.vertices.pop(),p.removeObject(l.borders[l.borders.length-1]),l.borders.pop(),l},E.registerElement("polygon",E.createPolygon),E.registerElement("regularpolygon",E.createRegularPolygon),E.registerElement("polygonalchain",E.createPolygonalChain),{Polygon:E.Polygon,createPolygon:E.createPolygon,createRegularPolygon:E.createRegularPolygon}}),define("base/curve",["jxg","base/constants","base/coords","base/element","math/math","math/numerics","math/plot","math/geometry","parser/geonext","utils/type","math/qdt"],function(E,I,T,S,w,g,m,p,a,u,c){"use strict";return E.Curve=function(l,f,v){this.constructor(l,v,I.OBJECT_TYPE_CURVE,I.OBJECT_CLASS_CURVE),this.points=[],this.numberPoints=u.evaluate(this.visProp.numberpointshigh),this.bezierDegree=1,this.dataX=null,this.dataY=null,this.ticks=[],this.qdt=null,this.varname=u.exists(f[0])?f[0]:"x",this.xterm=f[1],this.yterm=f[2],this.generateTerm(this.varname,this.xterm,this.yterm,f[3],f[4]),this.updateCurve(),this.id=this.board.setId(this,"G"),this.board.renderer.drawCurve(this),this.board.finalizeAdding(this),this.createGradient(),this.elType="curve",this.createLabel(),u.isString(this.xterm)&&this.notifyParents(this.xterm),u.isString(this.yterm)&&this.notifyParents(this.yterm),this.methodMap=u.deepCopy(this.methodMap,{generateTerm:"generateTerm",setTerm:"generateTerm",move:"moveTo",moveTo:"moveTo"})},E.Curve.prototype=new S,E.extend(E.Curve.prototype,{minX:function(){return"polar"===u.evaluate(this.visProp.curvetype)?0:new T(I.COORDS_BY_SCREEN,[.1*-this.board.canvasWidth,0],this.board,!1).usrCoords[1]},maxX:function(){return"polar"===u.evaluate(this.visProp.curvetype)?2*Math.PI:new T(I.COORDS_BY_SCREEN,[1.1*this.board.canvasWidth,0],this.board,!1).usrCoords[1]},X:function(l){return NaN},Y:function(l){return NaN},Z:function(l){return 1},hasPoint:function(l,f,v){var _,h,y,b,x,D,M,O,A,N,L,V,U,j,z,$=[],X=u.evaluate(this.visProp.numberpointslow),Z=(this.maxX()-this.minX())/X,W=1/0;if(L=u.isObject(u.evaluate(this.visProp.precision))?u.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,l=(h=new T(I.COORDS_BY_SCREEN,[l,f],this.board,!1)).usrCoords[1],f=h.usrCoords[2],1===this.bezierDegree&&u.evaluate(this.visProp.hasinnerpoints)&&0!==p.windingNumber([1,l,f],this.points,!0))return!0;if(L+=.5*u.evaluate(this.visProp.strokewidth),L*=L,V=this.board.unitX*this.board.unitX,U=this.board.unitY*this.board.unitY,z=this.minX(),this.maxX(),u.exists(this._visibleArea)&&(Z=(this._visibleArea[1]-(z=this._visibleArea[0]))/X),"parameter"===(j=u.evaluate(this.visProp.curvetype))||"polar"===j)for(this.transformations.length>0&&(this.updateTransformMatrix(),b=w.inverse(this.transformMat),l=(x=w.matVecMult(b,[1,l,f]))[1],f=x[2]),D=0,_=z;D<X;D++){if((W=(l-(M=this.X(_,!0)))*(l-M)*V+(f-(O=this.Y(_,!0)))*(f-O)*U)<=L)return!0;_+=Z}else if("plot"===j||"functiongraph"===j){for((!u.exists(v)||v<0)&&(v=0),u.exists(this.qdt)&&u.evaluate(this.visProp.useqdt)&&3!==this.bezierDegree?y=(A=(N=this.qdt.query(new T(I.COORDS_BY_USER,[l,f],this.board))).points).length:(A=this.points,y=this.numberPoints-1),D=v;D<y;D++)if(3===this.bezierDegree?$.push(p.projectCoordsToBeziersegment([1,l,f],this,D)):N?(A[D].prev&&($=p.projectCoordsToSegment([1,l,f],A[D].prev.usrCoords,A[D].usrCoords)),A[D].next&&A[D+1]!==A[D].next&&($=p.projectCoordsToSegment([1,l,f],A[D].usrCoords,A[D].next.usrCoords))):$=p.projectCoordsToSegment([1,l,f],A[D].usrCoords,A[D+1].usrCoords),$[1]>=0&&$[1]<=1&&(l-$[0][1])*(l-$[0][1])*V+(f-$[0][2])*(f-$[0][2])*U<=L)return!0;return!1}return W<L},allocatePoints:function(){var l,f;if(f=this.numberPoints,this.points.length<this.numberPoints)for(l=this.points.length;l<f;l++)this.points[l]=new T(I.COORDS_BY_USER,[0,0],this.board,!1)},update:function(){return this.needsUpdate&&(u.evaluate(this.visProp.trace)&&this.cloneToBackground(!0),this.updateCurve()),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&(this.isReal=m.checkReal(this.points),this.isReal||this.updateVisibility(!1)),this.visPropCalc.visible&&this.board.renderer.updateCurve(this),this.hasLabel&&this.visPropCalc.visible&&this.label&&this.label.visPropCalc.visible&&this.isReal&&(this.label.update(),this.board.renderer.updateText(this.label)),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateDataArray:function(){},updateCurve:function(){var l,f,v,_,h,y,b=this.visProp.plotversion,x=!1;if(this.updateTransformMatrix(),this.updateDataArray(),f=this.minX(),v=this.maxX(),u.exists(this.dataX))for(this.numberPoints=this.dataX.length,l=this.numberPoints,this.allocatePoints(),y=0;y<l;y++)_=y,u.exists(this.dataY)?(h=y,this.points[y].setCoordinates(I.COORDS_BY_USER,[this.dataX[y],this.dataY[y]],!1)):(h=this.X(_),this.points[y].setCoordinates(I.COORDS_BY_USER,[this.dataX[y],this.Y(h,x)],!1)),this.points[y]._t=y,x=!0;else if(u.evaluate(this.visProp.doadvancedplot)?1===b||u.evaluate(this.visProp.doadvancedplotold)?m.updateParametricCurveOld(this,f,v):2===b?m.updateParametricCurve_v2(this,f,v):3===b?m.updateParametricCurve_v3(this,f,v):4===b?m.updateParametricCurve_v4(this,f,v):m.updateParametricCurve_v2(this,f,v):(this.numberPoints=u.evaluate(this.board.updateQuality===this.board.BOARD_QUALITY_HIGH?this.visProp.numberpointshigh:this.visProp.numberpointslow),this.allocatePoints(),m.updateParametricCurveNaive(this,f,v,this.numberPoints)),l=this.numberPoints,u.evaluate(this.visProp.useqdt)&&this.board.updateQuality===this.board.BOARD_QUALITY_HIGH)for(this.qdt=new c(this.board.getBoundingBox()),y=0;y<this.points.length;y++)this.qdt.insert(this.points[y]),y>0&&(this.points[y].prev=this.points[y-1]),y<l-1&&(this.points[y].next=this.points[y+1]);for("plot"!==u.evaluate(this.visProp.curvetype)&&u.evaluate(this.visProp.rdpsmoothing)&&(this.points=g.RamerDouglasPeucker(this.points,.2),this.numberPoints=this.points.length),l=this.numberPoints,y=0;y<l;y++)this.updateTransform(this.points[y]);return this},updateTransformMatrix:function(){var l,f,v=this.transformations.length;for(this.transformMat=[[1,0,0],[0,1,0],[0,0,1]],f=0;f<v;f++)(l=this.transformations[f]).update(),this.transformMat=w.matMatMult(l.matrix,this.transformMat);return this},updateTransform:function(l){var f;return this.transformations.length>0&&(f=w.matVecMult(this.transformMat,l.usrCoords),l.setCoordinates(I.COORDS_BY_USER,f,!1,!0)),l},addTransform:function(l){var f,v=u.isArray(l)?l:[l],_=v.length;for(f=0;f<_;f++)this.transformations.push(v[f]);return this},interpolationFunctionFromArray:function(l){var f="data"+l,v=this;return function(_,h){var y,b,x,D,M=v[f],O=M.length,A=[];if(isNaN(_))return NaN;if(_<0)return u.isFunction(M[0])?M[0]():M[0];if(3===v.bezierDegree){if(_>=(O-1)/3)return u.isFunction(M[M.length-1])?M[M.length-1]():M[M.length-1];for(y=3*Math.floor(_),D=1-(x=_%1),b=0;b<4;b++)A[b]=u.isFunction(M[y+b])?M[y+b]():M[y+b];return D*D*(D*A[0]+3*x*A[1])+(3*D*A[2]+x*A[3])*x*x}if((y=_>O-2?O-2:parseInt(Math.floor(_),10))===_)return u.isFunction(M[y])?M[y]():M[y];for(b=0;b<2;b++)A[b]=u.isFunction(M[y+b])?M[y+b]():M[y+b];return A[0]+(A[1]-A[0])*(_-y)}},generateTerm:function(l,f,v,_,h){var y,b;u.isArray(f)?(this.dataX=f,this.numberPoints=this.dataX.length,this.X=this.interpolationFunctionFromArray.apply(this,["X"]),this.visProp.curvetype="plot",this.isDraggable=!0):(this.X=u.createFunction(f,this.board,l),u.isString(f)?this.visProp.curvetype="functiongraph":(u.isFunction(f)||u.isNumber(f))&&(this.visProp.curvetype="parameter"),this.isDraggable=!0),u.isArray(v)?(this.dataY=v,this.Y=this.interpolationFunctionFromArray.apply(this,["Y"])):this.Y=u.createFunction(v,this.board,l),u.isFunction(f)&&u.isArray(v)&&(y=u.createFunction(v[0],this.board,""),b=u.createFunction(v[1],this.board,""),this.X=function(x){return f(x)*Math.cos(x)+y()},this.Y=function(x){return f(x)*Math.sin(x)+b()},this.visProp.curvetype="polar"),u.exists(_)&&(this.minX=u.createFunction(_,this.board,"")),u.exists(h)&&(this.maxX=u.createFunction(h,this.board,""))},notifyParents:function(l){var f,v,_,h=!1;for(f in _={xterm:1,yterm:1})if(_.hasOwnProperty(f)&&this.hasOwnProperty(f)&&this[f].origin)for(v in h=!0,this[f].origin.deps)this[f].origin.deps.hasOwnProperty(v)&&this[f].origin.deps[v].addChild(this);h||a.findDependencies(this,l,this.board)},getLabelAnchor:function(){var l,f,v,_=.05*this.board.canvasWidth,h=.05*this.board.canvasHeight,y=.95*this.board.canvasWidth,b=.95*this.board.canvasHeight;switch(u.evaluate(this.visProp.label.position)){case"ulft":f=_,v=h;break;case"llft":f=_,v=b;break;case"rt":f=y,v=.5*b;break;case"lrt":f=y,v=b;break;case"urt":f=y,v=h;break;case"top":f=.5*y,v=h;break;case"bot":f=.5*y,v=b;break;default:f=_,v=.5*b}return l=new T(I.COORDS_BY_SCREEN,[f,v],this.board,!1),p.projectCoordsToCurve(l.usrCoords[1],l.usrCoords[2],0,this,this.board)[0]},cloneToBackground:function(){var l,f={id:this.id+"T"+this.numTraces,elementClass:I.OBJECT_CLASS_CURVE,points:this.points.slice(0),bezierDegree:this.bezierDegree,numberPoints:this.numberPoints,board:this.board,visProp:u.deepCopy(this.visProp,this.visProp.traceattributes,!0)};return f.visProp.layer=this.board.options.layer.trace,f.visProp.curvetype=this.visProp.curvetype,this.numTraces++,u.clearVisPropOld(f),f.visPropCalc={visible:u.evaluate(f.visProp.visible)},l=this.board.renderer.enhancedRendering,this.board.renderer.enhancedRendering=!0,this.board.renderer.drawCurve(f),this.board.renderer.enhancedRendering=l,this.traces[f.id]=f.rendNode,this},bounds:function(){var l,f,v,_=1/0,h=-1/0,y=1/0,b=-1/0,x=this.points.length;if(3===this.bezierDegree){for(l=0;l<x;l++)this.points[l].X=u.bind(function(){return this.usrCoords[1]},this.points[l]),this.points[l].Y=u.bind(function(){return this.usrCoords[2]},this.points[l]);return v=(f=g.bezier(this.points))[3](),_=g.fminbr(function(D){return f[0](D)},[0,v]),h=g.fminbr(function(D){return-f[0](D)},[0,v]),y=g.fminbr(function(D){return f[1](D)},[0,v]),b=g.fminbr(function(D){return-f[1](D)},[0,v]),_=f[0](_),h=f[0](h),y=f[1](y),[_,b=f[1](b),h,y]}for(l=0;l<x;l++)_>this.points[l].usrCoords[1]&&(_=this.points[l].usrCoords[1]),h<this.points[l].usrCoords[1]&&(h=this.points[l].usrCoords[1]),y>this.points[l].usrCoords[2]&&(y=this.points[l].usrCoords[2]),b<this.points[l].usrCoords[2]&&(b=this.points[l].usrCoords[2]);return[_,b,h,y]},getParents:function(){var l=[this.xterm,this.yterm,this.minX(),this.maxX()];return 0!==this.parents.length&&(l=this.parents),l},moveTo:function(l){var f;return this.points.length>0&&!u.evaluate(this.visProp.fixed)&&(f=this.points[0],this.setPosition(I.COORDS_BY_USER,3===l.length?[l[0]-f.usrCoords[0],l[1]-f.usrCoords[1],l[2]-f.usrCoords[2]]:[l[0]-f.usrCoords[1],l[1]-f.usrCoords[2]])),this},getTransformationSource:function(){var l,f;return u.exists(this._transformationSource)&&(f=this._transformationSource).elementClass===I.OBJECT_CLASS_CURVE&&(l=!0),[l,f]},pnpoly:function(l,f,v){var _,h,y,b,x,D,M=this.points,O=!1;for(v===I.COORDS_BY_USER?(b=(D=new T(I.COORDS_BY_USER,[l,f],this.board)).scrCoords[1],x=D.scrCoords[2]):(b=l,x=f),_=0,h=(y=this.points.length)-2;_<y-1;h=_++)M[_].scrCoords[2]>x!=M[h].scrCoords[2]>x&&b<(M[h].scrCoords[1]-M[_].scrCoords[1])*(x-M[_].scrCoords[2])/(M[h].scrCoords[2]-M[_].scrCoords[2])+M[_].scrCoords[1]&&(O=!O);return O}}),E.createCurve=function(l,f,v){var _,h,y=u.copyAttributes(v,l.options,"curve");return _=l.select(f[0],!0),u.isTransformationOrArray(f[1])&&u.isObject(_)&&(_.type===I.OBJECT_TYPE_CURVE||_.type===I.OBJECT_TYPE_ANGLE||_.type===I.OBJECT_TYPE_ARC||_.type===I.OBJECT_TYPE_CONIC||_.type===I.OBJECT_TYPE_SECTOR)?(_.type===I.OBJECT_TYPE_SECTOR?y=u.copyAttributes(v,l.options,"sector"):_.type===I.OBJECT_TYPE_ARC?y=u.copyAttributes(v,l.options,"arc"):_.type===I.OBJECT_TYPE_ANGLE?(u.exists(v.withLabel)||(v.withLabel=!1),y=u.copyAttributes(v,l.options,"angle")):y=u.copyAttributes(v,l.options,"curve"),y=u.copyAttributes(y,l.options,"curve"),(h=new E.Curve(l,["x",[],[]],y)).updateDataArray=function(){var b,x=_.numberPoints;for(this.bezierDegree=_.bezierDegree,this.dataX=[],this.dataY=[],b=0;b<x;b++)this.dataX.push(_.points[b].usrCoords[1]),this.dataY.push(_.points[b].usrCoords[2]);return this},h.addTransform(f[1]),_.addChild(h),h.setParents([_]),h._transformationSource=_,h):(y=u.copyAttributes(v,l.options,"curve"),new E.Curve(l,["x"].concat(f),y))},E.registerElement("curve",E.createCurve),E.createFunctiongraph=function(l,f,v){var _,h=["x","x"].concat(f);return(_=u.copyAttributes(v,l.options,"curve")).curvetype="functiongraph",new E.Curve(l,h,_)},E.registerElement("functiongraph",E.createFunctiongraph),E.registerElement("plot",E.createFunctiongraph),E.createSpline=function(l,f,v){var _,h,y;return h=function(){var b,x=[],D=[];return[function(M,O){var A,N,L;if(!O){if(x=[],D=[],2===f.length&&u.isArray(f[0])&&u.isArray(f[1])&&f[0].length===f[1].length)for(A=0;A<f[0].length;A++)u.isFunction(f[0][A])?x.push(f[0][A]()):x.push(f[0][A]),u.isFunction(f[1][A])?D.push(f[1][A]()):D.push(f[1][A]);else for(A=0;A<f.length;A++)if(u.isPoint(f[A]))x.push(f[A].X()),D.push(f[A].Y());else if(u.isArray(f[A])&&2===f[A].length)for(N=0;N<f.length;N++)u.isFunction(f[N][0])?x.push(f[N][0]()):x.push(f[N][0]),u.isFunction(f[N][1])?D.push(f[N][1]()):D.push(f[N][1]);else u.isFunction(f[A])&&2===f[A]().length&&(L=f[A](),x.push(L[0]),D.push(L[1]));b=g.splineDef(x,D)}return g.splineEval(M,x,D,b)},function(){return x[0]},function(){return x[x.length-1]}]},(v=u.copyAttributes(v,l.options,"curve")).curvetype="functiongraph",y=h(),(_=new E.Curve(l,["x","x",y[0],y[1],y[2]],v)).setParents(f),_.elType="spline",_},E.registerElement("spline",E.createSpline),E.createCardinalSpline=function(l,f,v){var _,h,y,D,M,O,A,N,L="\nPossible parent types: [points:array, tau:number|function, type:string]";if(!u.exists(f[0])||!u.isArray(f[0]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 1 'points' has to be array of points or coordinate pairs"+L);if(!u.exists(f[1])||!u.isNumber(f[1])&&!u.isFunction(f[1]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 2 'tau' has to be number between [0,1] or function'"+L);if(!u.exists(f[2])||!u.isString(f[2]))throw new Error("JSXGraph: JXG.createCardinalSpline: argument 3 'type' has to be string 'uniform' or 'centripetal'"+L);if(v=u.copyAttributes(v,l.options,"curve"),(v=u.copyAttributes(v,l.options,"cardinalspline")).curvetype="parameter",D=f[0],M=[],!v.isarrayofcoordinates&&2===D.length&&u.isArray(D[0])&&u.isArray(D[1])&&D[0].length===D[1].length)for(O=0;O<D[0].length;O++)M[O]=[],u.isFunction(D[0][O])?M[O].push(D[0][O]()):M[O].push(D[0][O]),u.isFunction(D[1][O])?M[O].push(D[1][O]()):M[O].push(D[1][O]);else for(O=0;O<D.length;O++)u.isString(D[O])?M.push(l.select(D[O])):u.isPoint(D[O])?M.push(D[O]):u.isArray(D[O])&&2===D[O].length?(M[O]=[],u.isFunction(D[O][0])?M[O].push(D[O][0]()):M[O].push(D[O][0]),u.isFunction(D[O][1])?M[O].push(D[O][1]()):M[O].push(D[O][1])):u.isFunction(D[O])&&2===D[O]().length&&M.push(f[O]());if(!0===v.createpoints)y=u.providePoints(l,M,v,"cardinalspline",["points"]);else for(y=[],h=function(B){return{X:function(){return M[B][0]},Y:function(){return M[B][1]},Dist:function(V){var U=this.X()-V.X(),j=this.Y()-V.Y();return Math.sqrt(U*U+j*j)}}},O=0;O<M.length;O++)u.isPoint(M[O])?y.push(M[O]):y.push(h(O));for(N=["x"].concat(g.CardinalSpline(y,f[1],f[2])),_=new E.Curve(l,N,v),A=y.length,_.setParents(y),O=0;O<A;O++)u.isPoint(D=y[O])&&(u.exists(D._is_new)?(_.addChild(D),delete D._is_new):D.addChild(_));return _.elType="cardinalspline",_},E.registerElement("cardinalspline",E.createCardinalSpline),E.createMetapostSpline=function(l,f,v){var _,h,y,b,x,D,M,O,A="\nPossible parent types: [points:array, controls:object";if(!u.exists(f[0])||!u.isArray(f[0]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 1 'points' has to be array of points or coordinate pairs"+A);if(!u.exists(f[1])||!u.isObject(f[1]))throw new Error("JSXGraph: JXG.createMetapostSpline: argument 2 'controls' has to be a JavaScript object'"+A);if(v=u.copyAttributes(v,l.options,"curve"),(v=u.copyAttributes(v,l.options,"metapostspline")).curvetype="parameter",x=f[0],D=[],!v.isarrayofcoordinates&&2===x.length&&u.isArray(x[0])&&u.isArray(x[1])&&x[0].length===x[1].length)for(M=0;M<x[0].length;M++)D[M]=[],u.isFunction(x[0][M])?D[M].push(x[0][M]()):D[M].push(x[0][M]),u.isFunction(x[1][M])?D[M].push(x[1][M]()):D[M].push(x[1][M]);else for(M=0;M<x.length;M++)u.isString(x[M])?D.push(l.select(x[M])):u.isPoint(x[M])?D.push(x[M]):u.isArray(x[M])&&2===x[M].length?(D[M]=[],u.isFunction(x[M][0])?D[M].push(x[M][0]()):D[M].push(x[M][0]),u.isFunction(x[M][1])?D[M].push(x[M][1]()):D[M].push(x[M][1])):u.isFunction(x[M])&&2===x[M]().length&&D.push(f[M]());if(!0===v.createpoints)y=u.providePoints(l,D,v,"metapostspline",["points"]);else for(y=[],h=function(N){return{X:function(){return D[N][0]},Y:function(){return D[N][1]}}},M=0;M<D.length;M++)u.isPoint(D[M])?y.push(D[M]):y.push(h);for(b=f[1],(_=new E.Curve(l,["t",[],[],0,x.length-1],v)).updateDataArray=function(){var N,L,B=y.length,V=[];for(L=0;L<B;L++)V.push([y[L].X(),y[L].Y()]);N=E.Math.Metapost.curve(V,b),this.dataX=N[0],this.dataY=N[1]},_.bezierDegree=3,O=y.length,_.setParents(y),M=0;M<O;M++)u.isPoint(y[M])&&y[M].addChild(_);return _.elType="metapostspline",_},E.registerElement("metapostspline",E.createMetapostSpline),E.createRiemannsum=function(l,f,v){var _,h,y,b,x,D;if((D=u.copyAttributes(v,l.options,"riemannsum")).curvetype="plot",y=f[0],_=u.createFunction(f[1],l,""),!u.exists(_))throw new Error("JSXGraph: JXG.createRiemannsum: argument '2' n has to be number or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");if(h=u.createFunction(f[2],l,"",!1),!u.exists(h))throw new Error("JSXGraph: JXG.createRiemannsum: argument 3 'type' has to be string or function.\nPossible parent types: [function,n:number|function,type,start:number|function,end:number|function]");return b=[[0],[0]].concat(f.slice(3)),(x=l.create("curve",b,D)).sum=0,x.Value=function(){return this.sum},x.updateDataArray=function(){var M=g.riemann(y,_(),h(),this.minX(),this.maxX());this.dataX=M[0],this.dataY=M[1],this.sum=M[2]},x},E.registerElement("riemannsum",E.createRiemannsum),E.createTracecurve=function(l,f,v){var _,h,y,b;if(2!==f.length)throw new Error("JSXGraph: Can't create trace curve with given parent'\nPossible parent types: [glider, point]");if(h=l.select(f[0]),y=l.select(f[1]),h.type!==I.OBJECT_TYPE_GLIDER||!u.isPoint(y))throw new Error("JSXGraph: Can't create trace curve with parent types '"+typeof f[0]+"' and '"+typeof f[1]+"'.\nPossible parent types: [glider, point]");return(b=u.copyAttributes(v,l.options,"tracecurve")).curvetype="plot",(_=l.create("curve",[[0],[0]],b)).updateDataArray=function(){var x,D,M,O,A,N,L,B,V,U=b.numberpoints,j=h.position,z=h.slideObject,$=z.minX();for(D=(z.maxX()-$)/U,this.dataX=[],this.dataY=[],z.elementClass!==I.OBJECT_CLASS_CURVE&&U++,x=0;x<U;x++){for(O in N=z.X(M=$+x*D)/z.Z(M),L=z.Y(M)/z.Z(M),h.setPositionDirectly(I.COORDS_BY_USER,[N,L]),B=!1,this.board.objects)if(this.board.objects.hasOwnProperty(O)&&((A=this.board.objects[O])===h&&(B=!0),B&&A.needsRegularUpdate&&(V=A.visProp.trace,A.visProp.trace=!1,A.needsUpdate=!0,A.update(!0),A.visProp.trace=V,A===y)))break;this.dataX[x]=y.X(),this.dataY[x]=y.Y()}for(O in h.position=j,B=!1,this.board.objects)if(this.board.objects.hasOwnProperty(O)&&((A=this.board.objects[O])===h&&(B=!0),B&&A.needsRegularUpdate&&(V=A.visProp.trace,A.visProp.trace=!1,A.needsUpdate=!0,A.update(!0),A.visProp.trace=V,A===y)))break},_},E.registerElement("tracecurve",E.createTracecurve),E.createStepfunction=function(l,f,v){var _,h;if(2!==f.length)throw new Error("JSXGraph: Can't create step function with given parent'\nPossible parent types: [array, array|function]");return h=u.copyAttributes(v,l.options,"stepfunction"),(_=l.create("curve",f,h)).updateDataArray=function(){var y,b=0,x=this.xterm.length;if(this.dataX=[],this.dataY=[],0!==x)for(this.dataX[b]=this.xterm[0],this.dataY[b]=this.yterm[0],++b,y=1;y<x;++y)this.dataX[b]=this.xterm[y],this.dataY[b]=this.dataY[b-1],++b,this.dataX[b]=this.xterm[y],this.dataY[b]=this.yterm[y],++b},_},E.registerElement("stepfunction",E.createStepfunction),E.createDerivative=function(l,f,v){var _,h,y,b,x;if(1!==f.length&&f[0].class!==I.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create derivative curve with given parent'\nPossible parent types: [curve]");return x=u.copyAttributes(v,l.options,"curve"),y=g.D((h=f[0]).X),b=g.D(h.Y),(_=l.create("curve",[function(D){return h.X(D)},function(D){return b(D)/y(D)},h.minX(),h.maxX()],x)).setParents(h),_},E.registerElement("derivative",E.createDerivative),E.createCurveIntersection=function(l,f,v){var _;if(2!==f.length)throw new Error("JSXGraph: Can't create curve intersection with given parent'\nPossible parent types: [array, array|function]");return(_=l.create("curve",[[],[]],v)).updateDataArray=function(){var h=E.Math.Clip.intersection(f[0],f[1],this.board);this.dataX=h[0],this.dataY=h[1]},_},E.createCurveUnion=function(l,f,v){var _;if(2!==f.length)throw new Error("JSXGraph: Can't create curve union with given parent'\nPossible parent types: [array, array|function]");return(_=l.create("curve",[[],[]],v)).updateDataArray=function(){var h=E.Math.Clip.union(f[0],f[1],this.board);this.dataX=h[0],this.dataY=h[1]},_},E.createCurveDifference=function(l,f,v){var _;if(2!==f.length)throw new Error("JSXGraph: Can't create curve difference with given parent'\nPossible parent types: [array, array|function]");return(_=l.create("curve",[[],[]],v)).updateDataArray=function(){var h=E.Math.Clip.difference(f[0],f[1],this.board);this.dataX=h[0],this.dataY=h[1]},_},E.registerElement("curvedifference",E.createCurveDifference),E.registerElement("curveintersection",E.createCurveIntersection),E.registerElement("curveunion",E.createCurveUnion),E.createBoxPlot=function(l,f,v){var _,h,y,b=u.copyAttributes(v,l.options,"boxplot");if(3!==f.length)throw new Error("JSXGraph: Can't create box plot with given parent'\nPossible parent types: [array, number|function, number|function] containing quantiles, axis, width");if(f[0].length<5)throw new Error("JSXGraph: Can't create box plot with given parent[0]'\nparent[0] has to conatin at least 5 quantiles.");for(_=l.create("curve",[[],[]],b),y=f[0].length,_.Q=[],h=0;h<y;h++)_.Q[h]=u.createFunction(f[0][h],l,null,!0);return _.x=u.createFunction(f[1],l,null,!0),_.w=u.createFunction(f[2],l,null,!0),_.updateDataArray=function(){var x,D,M,O,A,N,L,B,V;L=u.evaluate(this.visProp.smallwidth),B=u.evaluate(this.visProp.dir),M=(V=this.x())-.5*this.w(),O=V-.5*this.w()*L,A=V+.5*this.w(),x=[V,O,N=V+.5*this.w()*L,V,V,M,M,A,A,V,NaN,M,A,NaN,V,V,O,N,V],D=[this.Q[0](),this.Q[0](),this.Q[0](),this.Q[0](),this.Q[1](),this.Q[1](),this.Q[3](),this.Q[3](),this.Q[1](),this.Q[1](),NaN,this.Q[2](),this.Q[2](),NaN,this.Q[3](),this.Q[4](),this.Q[4](),this.Q[4](),this.Q[4]()],"vertical"===B?(this.dataX=x,this.dataY=D):(this.dataX=D,this.dataY=x)},_},E.registerElement("boxplot",E.createBoxPlot),{Curve:E.Curve,createCardinalSpline:E.createCardinalSpline,createCurve:E.createCurve,createCurveDifference:E.createCurveDifference,createCurveIntersection:E.createCurveIntersection,createCurveUnion:E.createCurveUnion,createDerivative:E.createDerivative,createFunctiongraph:E.createFunctiongraph,createMetapostSpline:E.createMetapostSpline,createPlot:E.createFunctiongraph,createSpline:E.createSpline,createRiemannsum:E.createRiemannsum,createStepfunction:E.createStepfunction,createTracecurve:E.createTracecurve}}),define("element/arc",["jxg","math/geometry","math/math","base/coords","base/circle","utils/type","base/constants"],function(E,I,T,S,w,g,m){"use strict";return E.createArc=function(p,a,u){var c,l,f;if(!1===(f=g.providePoints(p,a,u,"arc",["center","radiusPoint","anglePoint"]))||f.length<3)throw new Error("JSXGraph: Can't create Arc with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point], [arc, transformation]");return l=g.copyAttributes(u,p.options,"arc"),(c=p.create("curve",[[0],[0]],l)).elType="arc",c.setParents(f),c.type=m.OBJECT_TYPE_ARC,c.center=f[0],c.radiuspoint=f[1],c.point2=c.radiuspoint,c.anglepoint=f[2],c.point3=c.anglepoint,g.exists(c.center._is_new)?(c.addChild(c.center),delete c.center._is_new):c.center.addChild(c),g.exists(c.radiuspoint._is_new)?(c.addChild(c.radiuspoint),delete c.radiuspoint._is_new):c.radiuspoint.addChild(c),g.exists(c.anglepoint._is_new)?(c.addChild(c.anglepoint),delete c.anglepoint._is_new):c.anglepoint.addChild(c),c.useDirection=l.usedirection,c.updateDataArray=function(){var v,_,h,y,b,x=1,D=this.radiuspoint,M=this.center,O=this.anglepoint,A=g.evaluate(this.visProp.selection);_=I.rad(D,M,O),("minor"===A&&_>Math.PI||"major"===A&&_<Math.PI)&&(x=-1),this.useDirection&&(((h=f[1].coords.usrCoords)[1]-(b=f[2].coords.usrCoords)[1])*(h[2]-(y=f[3].coords.usrCoords)[2])-(h[2]-b[2])*(h[1]-y[1])<0?(this.radiuspoint=f[1],this.anglepoint=f[2]):(this.radiuspoint=f[2],this.anglepoint=f[1])),v=I.bezierArc(D=D.coords.usrCoords,M=M.coords.usrCoords,O=O.coords.usrCoords,!1,x),this.dataX=v[0],this.dataY=v[1],this.bezierDegree=3,this.updateStdform(),this.updateQuadraticform()},c.Radius=function(){return this.radiuspoint.Dist(this.center)},c.getRadius=function(){return E.deprecated("Arc.getRadius()","Arc.Radius()"),this.Radius()},c.Value=function(){return this.Radius()*I.rad(this.radiuspoint,this.center,this.anglepoint)},c.hasPoint=function(v,_){var h,y,b,x,D,M,A=this.Radius();return g.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(v,_):(M=g.isObject(g.evaluate(this.visProp.precision))?g.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,M/=Math.min(this.board.unitX,this.board.unitY),y=new S(m.COORDS_BY_SCREEN,[v,_],this.board),this.transformations.length>0&&(this.updateTransformMatrix(),x=T.inverse(this.transformMat),D=T.matVecMult(x,y.usrCoords),y=new S(m.COORDS_BY_USER,D,this.board)),h=this.center.coords.distance(m.COORDS_BY_USER,y),(b=Math.abs(h-A)<M)&&(b=I.coordsOnArc(this,y)),b)},c.hasPointSector=function(v,_){var h=new S(m.COORDS_BY_SCREEN,[v,_],this.board),y=this.Radius(),b=this.center.coords.distance(m.COORDS_BY_USER,h)<y;return b&&(b=I.coordsOnArc(this,h)),b},c.getTextAnchor=function(){return this.center.coords},c.getLabelAnchor=function(){var v,_,h,y,b,x=I.rad(this.radiuspoint,this.center,this.anglepoint),D=10/this.board.unitX,M=10/this.board.unitY,O=this.point2.coords.usrCoords,A=this.center.coords.usrCoords,N=O[1]-A[1],L=O[2]-A[2],B=g.evaluate(this.visProp.selection),V=this.label?this.label.visProp:this.visProp.label;return("minor"===B&&x>Math.PI||"major"===B&&x<Math.PI)&&(x=-(2*Math.PI-x)),h=(v=new S(m.COORDS_BY_USER,[A[1]+Math.cos(.5*x)*N-Math.sin(.5*x)*L,A[2]+Math.sin(.5*x)*N+Math.cos(.5*x)*L],this.board)).usrCoords[1]-A[1],y=v.usrCoords[2]-A[2],h=h*((b=Math.sqrt(h*h+y*y))+D)/b,V.position=I.calcLabelQuadrant(I.rad([1,0],[0,0],_=[A[1]+h,A[2]+(y=y*(b+M)/b)])),new S(m.COORDS_BY_USER,_,this.board)},c.updateQuadraticform=w.Circle.prototype.updateQuadraticform,c.updateStdform=w.Circle.prototype.updateStdform,c.methodMap=E.deepCopy(c.methodMap,{getRadius:"getRadius",radius:"Radius",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",Value:"Value"}),c.prepareUpdate().update(),c},E.registerElement("arc",E.createArc),E.createSemicircle=function(p,a,u){var c,l,f,v;if(!1===(v=g.providePoints(p,a,u,"point"))||2!==v.length)throw new Error("JSXGraph: Can't create Semicircle with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [point,point]");return f=g.copyAttributes(u,p.options,"semicircle","center"),(l=p.create("midpoint",v,f)).dump=!1,f=g.copyAttributes(u,p.options,"semicircle"),(c=p.create("arc",[l,v[1],v[0]],f)).elType="semicircle",c.setParents([v[0].id,v[1].id]),c.subs={midpoint:l},c.inherits.push(l),c.midpoint=c.center=l,c},E.registerElement("semicircle",E.createSemicircle),E.createCircumcircleArc=function(p,a,u){var c,l,f,v;if(!1===(v=g.providePoints(p,a,u,"point"))||3!==v.length)throw new Error("JSXGraph: create Circumcircle Arc with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.\nPossible parent types: [point,point,point]");return f=g.copyAttributes(u,p.options,"circumcirclearc","center"),(l=p.create("circumcenter",v,f)).dump=!1,(f=g.copyAttributes(u,p.options,"circumcirclearc")).usedirection=!0,(c=p.create("arc",[l,v[0],v[2],v[1]],f)).elType="circumcirclearc",c.setParents([v[0].id,v[1].id,v[2].id]),c.subs={center:l},c.inherits.push(l),c.center=l,c},E.registerElement("circumcirclearc",E.createCircumcircleArc),E.createMinorArc=function(p,a,u){return u.selection="minor",E.createArc(p,a,u)},E.registerElement("minorarc",E.createMinorArc),E.createMajorArc=function(p,a,u){return u.selection="major",E.createArc(p,a,u)},E.registerElement("majorarc",E.createMajorArc),{createArc:E.createArc,createSemicircle:E.createSemicircle,createCircumcircleArc:E.createCircumcircleArc,createMinorArc:E.createMinorArc,createMajorArc:E.createMajorArc}}),define("element/sector",["jxg","math/geometry","math/math","math/statistics","base/coords","base/constants","utils/type"],function(E,I,T,S,w,g,m){"use strict";return E.createSector=function(p,a,u){var c,l,f,v,_,h,y="invalid";if(a[0].elementClass===g.OBJECT_CLASS_LINE&&a[1].elementClass===g.OBJECT_CLASS_LINE&&(m.isArray(a[2])||m.isNumber(a[2]))&&(m.isArray(a[3])||m.isNumber(a[3]))&&(m.isNumber(a[4])||m.isFunction(a[4])||m.isString(a[4])))y="2lines";else{if(!1===(h=m.providePoints(p,a,u,"sector",["center","radiusPoint","anglePoint"])))throw new Error("JSXGraph: Can't create Sector with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.");y="3points"}if(l=m.copyAttributes(u,p.options,"sector"),(c=p.create("curve",[[0],[0]],l)).type=g.OBJECT_TYPE_SECTOR,c.elType="sector",c.autoRadius=function(){var b=20/c.board.unitX,x=1/0,D=50/c.board.unitX;return m.isPoint(c.center)&&(x=.3333*c.center.Dist(c.point2)),Math.max(b,Math.min(x,D))},"2lines"===y)c.Radius=function(){var b=m.evaluate(a[4]);return"auto"===b?this.autoRadius():b},c.line1=p.select(a[0]),c.line2=p.select(a[1]),c.line1.addChild(c),c.line2.addChild(c),c.setParents(a),c.point1={visProp:{}},c.point2={visProp:{}},c.point3={visProp:{}},v=I.meetLineLine(c.line1.stdform,c.line2.stdform,0,p),m.isArray(a[2])?(2===a[2].length&&(a[2]=[1].concat(a[2])),_=I.projectPointToLine({coords:{usrCoords:a[2]}},c.line1,p),_=S.subtract(_.usrCoords,v.usrCoords),c.direction1=T.innerProduct(_,[0,c.line1.stdform[2],-c.line1.stdform[1]],3)>=0?1:-1):c.direction1=a[2]>=0?1:-1,m.isArray(a[3])?(2===a[3].length&&(a[3]=[1].concat(a[3])),_=I.projectPointToLine({coords:{usrCoords:a[3]}},c.line2,p),_=S.subtract(_.usrCoords,v.usrCoords),c.direction2=T.innerProduct(_,[0,c.line2.stdform[2],-c.line2.stdform[1]],3)>=0?1:-1):c.direction2=a[3]>=0?1:-1,c.updateDataArray=function(){var b,x,D,M,O,A,N=[0,0,0];if(N=T.crossProduct((x=this.line1).stdform,(D=this.line2).stdform),Math.abs(N[0])>T.eps*T.eps&&(N[1]/=N[0],N[2]/=N[0],N[0]/=N[0]),b=this.direction1*this.Radius(),M=S.add(N,[0,b*x.stdform[2],-b*x.stdform[1]]),b=this.direction2*this.Radius(),O=S.add(N,[0,b*D.stdform[2],-b*D.stdform[1]]),this.point2.coords=new w(g.COORDS_BY_USER,M,c.board),this.point1.coords=new w(g.COORDS_BY_USER,N,c.board),this.point3.coords=new w(g.COORDS_BY_USER,O,c.board),Math.abs(M[0])<T.eps||Math.abs(N[0])<T.eps||Math.abs(O[0])<T.eps)return this.dataX=[NaN],void(this.dataY=[NaN]);A=I.bezierArc(M,N,O,!0,1),this.dataX=A[0],this.dataY=A[1],this.bezierDegree=3},c.methodMap=E.deepCopy(c.methodMap,{radius:"Radius",getRadius:"Radius",setRadius:"setRadius"});else if("3points"===y){for(c.point1=h[0],c.point2=h[1],c.point3=h[2],f=0;f<3;f++)m.exists(h[f]._is_new)?(c.addChild(h[f]),delete h[f]._is_new):h[f].addChild(c);c.useDirection=u.usedirection,c.setParents(h),m.exists(h[3])&&(c.point4=h[3],c.point4.addChild(c)),c.methodMap=E.deepCopy(c.methodMap,{arc:"arc",center:"center",radiuspoint:"radiuspoint",anglepoint:"anglepoint",radius:"Radius",getRadius:"Radius",setRadius:"setRadius"}),c.updateDataArray=function(){var b,x,D,M,O,A=this.point2,N=this.point1,L=this.point3,B=1,V=m.evaluate(this.visProp.selection);if(!A.isReal||!N.isReal||!L.isReal)return this.dataX=[NaN],void(this.dataY=[NaN]);O=I.rad(A,N,L),("minor"===V&&O>Math.PI||"major"===V&&O<Math.PI)&&(B=-1),this.useDirection&&m.exists(this.point4)&&((x=this.point2.coords.usrCoords)[1]-(M=this.point3.coords.usrCoords)[1])*(x[2]-(D=this.point4.coords.usrCoords)[2])-(x[2]-M[2])*(x[1]-D[1])>=0&&(L=this.point2,A=this.point3),b=I.bezierArc(A=A.coords.usrCoords,N=N.coords.usrCoords,L=L.coords.usrCoords,!0,B),this.dataX=b[0],this.dataY=b[1],this.bezierDegree=3},c.Radius=function(){return this.point2.Dist(this.point1)},(l=m.copyAttributes(u,p.options,"sector","arc")).withLabel=!1,l.name+="_arc",c.arc=p.create("arc",[c.point1,c.point2,c.point3],l),c.addChild(c.arc)}return c.center=c.point1,c.radiuspoint=c.point2,c.anglepoint=c.point3,c.hasPointCurve=function(b,x){var D,M,O,A,L,B=new w(g.COORDS_BY_SCREEN,[b,x],this.board),V=this.Radius(),U=this.center.coords.distance(g.COORDS_BY_USER,B),j=m.evaluate(this.visProp.selection);return A=m.isObject(m.evaluate(this.visProp.precision))?m.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,A/=Math.min(this.board.unitX,this.board.unitY),(L=Math.abs(U-V)<A)&&(D=I.rad(this.point2,this.center,B.usrCoords.slice(1)),M=0,O=I.rad(this.point2,this.center,this.point3),("minor"===j&&O>Math.PI||"major"===j&&O<Math.PI)&&(M=O,O=2*Math.PI),(D<M||D>O)&&(L=!1)),L},c.hasPointSector=function(b,x){var D,M,O,A=new w(g.COORDS_BY_SCREEN,[b,x],this.board),N=this.Radius(),L=this.point1.coords.distance(g.COORDS_BY_USER,A)<N,B=m.evaluate(this.visProp.selection);return L&&(D=I.rad(this.radiuspoint,this.center,A.usrCoords.slice(1)),M=0,O=I.rad(this.radiuspoint,this.center,this.anglepoint),("minor"===B&&O>Math.PI||"major"===B&&O<Math.PI)&&(M=O,O=2*Math.PI),(D<M||D>O)&&(L=!1)),L},c.hasPoint=function(b,x){return m.evaluate(this.visProp.highlightonsector)||m.evaluate(this.visProp.hasinnerpoints)?this.hasPointSector(b,x):this.hasPointCurve(b,x)},c.getTextAnchor=function(){return this.point1.coords},c.getLabelAnchor=function(){var b,x,D,M,O,A=I.rad(this.point2,this.point1,this.point3),N=13/this.board.unitX,L=13/this.board.unitY,B=this.point2.coords.usrCoords,V=this.point1.coords.usrCoords,U=B[1]-V[1],j=B[2]-V[2],z=m.evaluate(this.visProp.selection),$=this.label?this.label.visProp:this.visProp.label;return("minor"===z&&A>Math.PI||"major"===z&&A<Math.PI)&&(A=-(2*Math.PI-A)),D=(b=new w(g.COORDS_BY_USER,[V[1]+Math.cos(.5*A)*U-Math.sin(.5*A)*j,V[2]+Math.sin(.5*A)*U+Math.cos(.5*A)*j],this.board)).usrCoords[1]-V[1],M=b.usrCoords[2]-V[2],D=D*((O=Math.sqrt(D*D+M*M))+N)/O,$.position=I.calcLabelQuadrant(I.rad([1,0],[0,0],x=[V[1]+D,V[2]+(M=M*(O+L)/O)])),new w(g.COORDS_BY_USER,x,this.board)},c.setRadius=function(b){c.Radius=function(){var x=m.evaluate(b);return"auto"===x?this.autoRadius():x}},c.getRadius=function(){return E.deprecated("Sector.getRadius()","Sector.Radius()"),this.Radius()},"3points"===y&&(c.setPositionDirectly=function(b,x,D){var M,O=new w(b,x,this.board),A=new w(b,D,this.board);return c.point1.draggable()&&c.point2.draggable()&&c.point3.draggable()?(M=S.subtract(O.usrCoords,A.usrCoords),this.board.create("transform",M.slice(1),{type:"translate"}).applyOnce([c.point1,c.point2,c.point3]),this):this}),c.prepareUpdate().update(),c},E.registerElement("sector",E.createSector),E.createCircumcircleSector=function(p,a,u){var c,l,f,v;if(!1===(v=m.providePoints(p,a,u,"point")))throw new Error("JSXGraph: Can't create circumcircle sector with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.");return(l=p.create("circumcenter",v.slice(0,3),f)).dump=!1,f=m.copyAttributes(u,p.options,"circumcirclesector"),(c=p.create("sector",[l,v[0],v[2],v[1]],f)).elType="circumcirclesector",c.setParents(v),c.center=l,c.subs={center:l},c},E.registerElement("circumcirclesector",E.createCircumcircleSector),E.createMinorSector=function(p,a,u){return u.selection="minor",E.createSector(p,a,u)},E.registerElement("minorsector",E.createMinorSector),E.createMajorSector=function(p,a,u){return u.selection="major",E.createSector(p,a,u)},E.registerElement("majorsector",E.createMajorSector),E.createAngle=function(p,a,u){var c,l,f,v,_,h,y="invalid";if(a[0].elementClass===g.OBJECT_CLASS_LINE&&a[1].elementClass===g.OBJECT_CLASS_LINE&&(m.isArray(a[2])||m.isNumber(a[2]))&&(m.isArray(a[3])||m.isNumber(a[3])))y="2lines";else{if(!1===(h=m.providePoints(p,a,u,"point")))throw new Error("JSXGraph: Can't create angle with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"' and '"+typeof a[2]+"'.");y="3points"}if(f=m.copyAttributes(u,p.options,"angle"),m.exists(f.name)&&""!==f.name||(f.name=p.generateName({type:g.OBJECT_TYPE_ANGLE})),l=m.exists(f.radius)?f.radius:0,"2lines"===y?(a.push(l),(c=p.create("sector",a,f)).updateDataArraySector=c.updateDataArray,c.setAngle=function(b){},c.free=function(b){}):((c=p.create("sector",[h[1],h[0],h[2]],f)).arc.visProp.priv=!0,c.point=c.point2=c.radiuspoint=h[0],c.pointsquare=c.point3=c.anglepoint=h[2],c.Radius=function(){var b=m.evaluate(l);return"auto"===b?c.autoRadius():b},c.updateDataArraySector=function(){var b,x,D=this.point2,M=this.point1,O=this.point3,A=this.Radius(),N=M.Dist(D),L=1,B=m.evaluate(this.visProp.selection);x=I.rad(D,M,O),("minor"===B&&x>Math.PI||"major"===B&&x<Math.PI)&&(L=-1),b=I.bezierArc(D=[1,(M=M.coords.usrCoords)[1]+((D=D.coords.usrCoords)[1]-M[1])*A/N,M[2]+(D[2]-M[2])*A/N],M,O=[1,M[1]+((O=O.coords.usrCoords)[1]-M[1])*A/N,M[2]+(O[2]-M[2])*A/N],!0,L),this.dataX=b[0],this.dataY=b[1],this.bezierDegree=3},c.setAngle=function(b){var x,D,M,O=this.anglepoint,A=this.radiuspoint;return O.draggable()&&(x=this.board.create("transform",[b,this.center],{type:"rotate"}),O.addTransform(A,x),x.update(),O.moveTo(T.matVecMult(x.matrix,A.coords.usrCoords)),M=m.isFunction(b)?function(){return 2*Math.PI-b()}:function(){return 2*Math.PI-b},D=this.board.create("transform",[M,this.center],{type:"rotate"}),O.coords.on("update",function(){D.update(),A.moveTo(T.matVecMult(D.matrix,O.coords.usrCoords))}),O.setParents(A)),this},c.free=function(){var b=this.anglepoint;return b.transformations.length>0&&(b.transformations.pop(),b.isDraggable=!0,b.parents=[],b.coords.off("update")),this},c.setParents(h)),m.exists(c.visProp.text)&&c.label.setText(m.evaluate(c.visProp.text)),c.elType="angle",c.type=g.OBJECT_TYPE_ANGLE,c.subs={},c.updateDataArraySquare=function(){var b,x,D,M,O,A,N,B=this.Radius();"2lines"===y&&this.updateDataArraySector(),D=(D=this.point3).coords.usrCoords,M=I.distance(b=(b=this.point2).coords.usrCoords,x=(x=this.point1).coords.usrCoords,3),O=I.distance(D,x,3),b=[1,x[1]+(b[1]-x[1])*B/M,x[2]+(b[2]-x[2])*B/M],A=T.crossProduct(D=[1,x[1]+(D[1]-x[1])*B/O,x[2]+(D[2]-x[2])*B/O],x),N=[-b[1]*A[1]-b[2]*A[2],b[0]*A[1],b[0]*A[2]],A=T.crossProduct(b,x),(A=T.crossProduct(N,[-D[1]*A[1]-D[2]*A[2],D[0]*A[1],D[0]*A[2]]))[1]/=A[0],A[2]/=A[0],this.dataX=[x[1],b[1],A[1],D[1],x[1]],this.dataY=[x[2],b[2],A[2],D[2],x[2]],this.bezierDegree=1},c.updateDataArrayNone=function(){this.dataX=[NaN],this.dataY=[NaN],this.bezierDegree=1},c.updateDataArray=function(){var b=m.evaluate(this.visProp.type),x=I.trueAngle(this.point2,this.point1,this.point3),D=m.evaluate(this.visProp.selection);("minor"===D&&x>180||"major"===D&&x<180)&&(x=360-x),Math.abs(x-90)<m.evaluate(this.visProp.orthosensitivity)+T.eps&&(b=m.evaluate(this.visProp.orthotype)),"none"===b?this.updateDataArrayNone():"square"===b?this.updateDataArraySquare():"sector"===b?this.updateDataArraySector():"sectordot"===b&&(this.updateDataArraySector(),this.dot.visProp.visible||this.dot.setAttribute({visible:!0})),(!this.visProp.visible||"sectordot"!==b&&this.dot.visProp.visible)&&this.dot.setAttribute({visible:!1})},v=m.copyAttributes(u,p.options,"angle","dot"),c.dot=p.create("point",[function(){var b,x,D,M,O,A,N,B;return m.exists(c.dot)&&!c.dot.visProp.visible?[0,0]:(b=c.point2.coords.usrCoords,x=c.point1.coords.usrCoords,D=c.Radius(),M=I.distance(b,x,3),O=I.rad(c.point2,c.point1,c.point3),("minor"===(B=m.evaluate(c.visProp.selection))&&O>Math.PI||"major"===B&&O<Math.PI)&&(O=-(2*Math.PI-O)),O*=.5,A=Math.cos(O),N=Math.sin(O),T.matVecMult([[1,0,0],[x[1]-.5*x[1]*A+.5*x[2]*N,.5*A,.5*-N],[x[2]-.5*x[1]*N-.5*x[2]*A,.5*N,.5*A]],b=[1,x[1]+(b[1]-x[1])*D/M,x[2]+(b[2]-x[2])*D/M]))}],v),c.dot.dump=!1,c.subs.dot=c.dot,"2lines"===y)for(_=0;_<2;_++)p.select(a[_]).addChild(c.dot);else for(_=0;_<3;_++)p.select(h[_]).addChild(c.dot);return c.getLabelAnchor=function(){var b,x,D,M,O,A,N,L,V=12,U=m.evaluate(c.visProp.selection),j=this.label?this.label.visProp:this.visProp.label;return m.exists(this.label.visProp.fontSize)&&(V=m.evaluate(this.label.visProp.fontSize)),V/=this.board.unitX,x=c.point2.coords.usrCoords,D=c.point1.coords.usrCoords,M=c.Radius(),O=I.distance(x,D,3),A=I.rad(c.point2,c.point1,c.point3),("minor"===U&&A>Math.PI||"major"===U&&A<Math.PI)&&(A=-(2*Math.PI-A)),A*=.5,N=Math.cos(A),L=Math.sin(A),(b=T.matVecMult([[1,0,0],[D[1]-.5*D[1]*N+.5*D[2]*L,.5*N,.5*-L],[D[2]-.5*D[1]*L-.5*D[2]*N,.5*L,.5*N]],x=[1,D[1]+(x[1]-D[1])*M/O,D[2]+(x[2]-D[2])*M/O]))[1]/=b[0],b[2]/=b[0],b[0]/=b[0],O=I.distance(b,D,3),j.position=I.calcLabelQuadrant(I.rad([1,0],[0,0],b=[b[0],D[1]+(b[1]-D[1])*(M+V)/O,D[2]+(b[2]-D[2])*(M+V)/O])),new w(g.COORDS_BY_USER,b,this.board)},c.Value=function(){return I.rad(this.point2,this.point1,this.point3)},c.methodMap=m.deepCopy(c.methodMap,{Value:"Value",setAngle:"setAngle",free:"free"}),c},E.registerElement("angle",E.createAngle),E.createNonreflexAngle=function(p,a,u){var c;return u.selection="minor",(c=E.createAngle(p,a,u)).Value=function(){var l=I.rad(this.point2,this.point1,this.point3);return l<Math.PI?l:2*Math.PI-l},c},E.registerElement("nonreflexangle",E.createNonreflexAngle),E.createReflexAngle=function(p,a,u){var c;return u.selection="major",(c=E.createAngle(p,a,u)).Value=function(){var l=I.rad(this.point2,this.point1,this.point3);return l>=Math.PI?l:2*Math.PI-l},c},E.registerElement("reflexangle",E.createReflexAngle),{createSector:E.createSector,createCircumcircleSector:E.createCircumcircleSector,createMinorSector:E.createMinorSector,createMajorSector:E.createMajorSector,createAngle:E.createAngle,createReflexAngle:E.createReflexAngle,createNonreflexAngle:E.createNonreflexAngle}}),define("base/transformation",["jxg","base/constants","math/math","utils/type"],function(E,I,T,S){"use strict";return E.Transformation=function(w,g,m){this.elementClass=I.OBJECT_CLASS_OTHER,this.type=I.OBJECT_TYPE_TRANSFORMATION,this.matrix=[[1,0,0],[0,1,0],[0,0,1]],this.board=w,this.isNumericMatrix=!1,this.setMatrix(w,g,m),this.methodMap={apply:"apply",applyOnce:"applyOnce",bindTo:"bindTo",bind:"bindTo",melt:"melt"}},E.Transformation.prototype={},E.extend(E.Transformation.prototype,{update:function(){return this},setMatrix:function(w,g,m){var p;for(this.isNumericMatrix=!0,p=0;p<m.length;p++)if("number"!=typeof m[p]){this.isNumericMatrix=!1;break}if("translate"===g){if(2!==m.length)throw new Error("JSXGraph: translate transformation needs 2 parameters.");this.evalParam=S.createEvalFunction(w,m,2),this.update=function(){this.matrix[1][0]=this.evalParam(0),this.matrix[2][0]=this.evalParam(1)}}else if("scale"===g){if(2!==m.length)throw new Error("JSXGraph: scale transformation needs 2 parameters.");this.evalParam=S.createEvalFunction(w,m,2),this.update=function(){this.matrix[1][1]=this.evalParam(0),this.matrix[2][2]=this.evalParam(1)}}else if("reflect"===g)m.length<4&&(m[0]=w.select(m[0])),2===m.length&&(m[1]=w.select(m[1])),4===m.length&&(this.evalParam=S.createEvalFunction(w,m,4)),this.update=function(){var a,u,c,l,f,v,_,h;1===m.length?_=m[0].stdform:2===m.length?_=T.crossProduct(m[1].coords.usrCoords,m[0].coords.usrCoords):4===m.length&&(_=T.crossProduct([1,this.evalParam(2),this.evalParam(3)],[1,this.evalParam(0),this.evalParam(1)])),v=(h=[-(c=_[0])*(a=_[1]),-c*(u=_[2]),a*a+u*u])[2],l=h[0]/h[2],f=h[1]/h[2],this.matrix[1][1]=((a=-_[2])*a-(u=_[1])*u)/v,this.matrix[1][2]=2*a*u/v,this.matrix[2][1]=this.matrix[1][2],this.matrix[2][2]=-this.matrix[1][1],this.matrix[1][0]=l*(1-this.matrix[1][1])-f*this.matrix[1][2],this.matrix[2][0]=f*(1-this.matrix[2][2])-l*this.matrix[2][1]};else if("rotate"===g)3===m.length?this.evalParam=S.createEvalFunction(w,m,3):m.length>0&&m.length<=2&&(this.evalParam=S.createEvalFunction(w,m,1),2!==m.length||S.isArray(m[1])||(m[1]=w.select(m[1]))),this.update=function(){var a,u,c=this.evalParam(0),l=Math.cos(c),f=Math.sin(c);this.matrix[1][1]=l,this.matrix[1][2]=-f,this.matrix[2][1]=f,this.matrix[2][2]=l,m.length>1&&(3===m.length?(a=this.evalParam(1),u=this.evalParam(2)):S.isArray(m[1])?(a=m[1][0],u=m[1][1]):(a=m[1].X(),u=m[1].Y()),this.matrix[1][0]=a*(1-l)+u*f,this.matrix[2][0]=u*(1-l)-a*f)};else if("shear"===g){if(2!==m.length)throw new Error("JSXGraph: shear transformation needs 2 parameters.");this.evalParam=S.createEvalFunction(w,m,2),this.update=function(){this.matrix[1][2]=this.evalParam(0),this.matrix[2][1]=this.evalParam(1)}}else if("generic"===g){if(9!==m.length)throw new Error("JSXGraph: generic transformation needs 9 parameters.");this.evalParam=S.createEvalFunction(w,m,9),this.update=function(){this.matrix[0][0]=this.evalParam(0),this.matrix[0][1]=this.evalParam(1),this.matrix[0][2]=this.evalParam(2),this.matrix[1][0]=this.evalParam(3),this.matrix[1][1]=this.evalParam(4),this.matrix[1][2]=this.evalParam(5),this.matrix[2][0]=this.evalParam(6),this.matrix[2][1]=this.evalParam(7),this.matrix[2][2]=this.evalParam(8)}}},apply:function(w,g){return this.update(),S.exists(g)?T.matVecMult(this.matrix,w.initialCoords.usrCoords):T.matVecMult(this.matrix,w.coords.usrCoords)},applyOnce:function(w){var g,m,p;for(S.isArray(w)||(w=[w]),m=w.length,p=0;p<m;p++)this.update(),g=T.matVecMult(this.matrix,w[p].coords.usrCoords),w[p].coords.setCoordinates(I.COORDS_BY_USER,g)},bindTo:function(w){var g,m;if(S.isArray(w))for(m=w.length,g=0;g<m;g++)w[g].transformations.push(this);else w.transformations.push(this)},setProperty:function(w){E.deprecated("Transformation.setProperty()","Transformation.setAttribute()")},setAttribute:function(w){},melt:function(w){var g,m,p,a,u,c,l=[];for(m=w.matrix.length,p=this.matrix[0].length,g=0;g<m;g++)l[g]=[];for(this.update(),w.update(),g=0;g<m;g++)for(c=0;c<p;c++){for(u=0,a=0;a<m;a++)u+=w.matrix[g][a]*this.matrix[a][c];l[g][c]=u}return this.update=function(){var f=this.matrix.length,v=this.matrix[0].length;for(g=0;g<f;g++)for(c=0;c<v;c++)this.matrix[g][c]=l[g][c]},this},getParents:function(){var w=[[].concat.apply([],this.matrix)];return 0!==this.parents.length&&(w=this.parents),w}}),E.createTransform=function(w,g,m){return new E.Transformation(w,m.type,g)},E.registerElement("transform",E.createTransform),{Transformation:E.Transformation,createTransform:E.createTransform}}),define("element/composition",["jxg","math/math","math/geometry","math/numerics","base/coords","utils/type","base/constants","base/point","base/line","base/circle","base/transformation","base/composition","base/curve","base/polygon"],function(E,I,T,S,w,g,m,p,a,u,c,l,f,v){"use strict";return E.createOrthogonalProjection=function(_,h,y){var b,x,D,M;if(h[0]=_.select(h[0]),h[1]=_.select(h[1]),g.isPointType(_,h[0])&&h[1].elementClass===m.OBJECT_CLASS_LINE)x=g.providePoints(_,[h[0]],y,"point")[0],b=h[1];else{if(!g.isPointType(_,h[1])||h[0].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [point,line]");x=g.providePoints(_,[h[1]],y,"point")[0],b=h[0]}return M=g.copyAttributes(y,_.options,"orthogonalprojection"),D=_.create("point",[function(){return T.projectPointToLine(x,b,_)}],M),g.exists(x._is_new)?(D.addChild(x),delete x._is_new):x.addChild(D),b.addChild(D),D.elType="orthogonalprojection",D.setParents([x.id,D.id]),D.update(),D.generatePolynomial=function(){var O=b.point1.symbolic.x,A=b.point1.symbolic.y,N=b.point2.symbolic.x,L=b.point2.symbolic.y,B=x.symbolic.x,V=x.symbolic.y,U=D.symbolic.x,j=D.symbolic.y;return["("+A+")*("+U+")-("+A+")*("+N+")+("+j+")*("+N+")-("+O+")*("+j+")+("+O+")*("+L+")-("+U+")*("+L+")","("+V+")*("+A+")-("+V+")*("+L+")-("+j+")*("+A+")+("+j+")*("+L+")+("+B+")*("+O+")-("+B+")*("+N+")-("+U+")*("+O+")+("+U+")*("+N+")"]},D},E.createPerpendicular=function(_,h,y){var b,x,D,M;if(h[0]=_.select(h[0]),h[1]=_.select(h[1]),g.isPointType(_,h[0])&&h[1].elementClass===m.OBJECT_CLASS_LINE)x=h[1],b=g.providePoints(_,[h[0]],y,"point")[0];else{if(!g.isPointType(_,h[1])||h[0].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [line,point]");x=h[0],b=g.providePoints(_,[h[1]],y,"point")[0]}return M=g.copyAttributes(y,_.options,"perpendicular"),(D=a.createLine(_,[function(){return x.stdform[2]*b.X()-x.stdform[1]*b.Y()},function(){return-x.stdform[2]*b.Z()},function(){return x.stdform[1]*b.Z()}],M)).elType="perpendicular",D.setParents([x.id,b.id]),g.exists(b._is_new)?(D.addChild(b),delete b._is_new):b.addChild(D),x.addChild(D),D},E.createPerpendicularPoint=function(_,h,y){var b,x,D;if(h[0]=_.select(h[0]),h[1]=_.select(h[1]),g.isPointType(_,h[0])&&h[1].elementClass===m.OBJECT_CLASS_LINE)x=g.providePoints(_,[h[0]],y,"point")[0],b=h[1];else{if(!g.isPointType(_,h[1])||h[0].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular point with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [point,line]");x=g.providePoints(_,[h[1]],y,"point")[0],b=h[0]}return D=_.create("point",[function(){return T.perpendicular(b,x,_)[0]}],y),g.exists(x._is_new)?(D.addChild(x),delete x._is_new):x.addChild(D),b.addChild(D),D.elType="perpendicularpoint",D.setParents([x.id,b.id]),D.update(),D.generatePolynomial=function(){var M=b.point1.symbolic.x,O=b.point1.symbolic.y,A=b.point2.symbolic.x,N=b.point2.symbolic.y,L=x.symbolic.x,B=x.symbolic.y,V=D.symbolic.x,U=D.symbolic.y;return["("+O+")*("+V+")-("+O+")*("+A+")+("+U+")*("+A+")-("+M+")*("+U+")+("+M+")*("+N+")-("+V+")*("+N+")","("+B+")*("+O+")-("+B+")*("+N+")-("+U+")*("+O+")+("+U+")*("+N+")+("+L+")*("+M+")-("+L+")*("+A+")-("+V+")*("+M+")+("+V+")*("+A+")"]},D},E.createPerpendicularSegment=function(_,h,y){var b,x,D,M,O;if(h[0]=_.select(h[0]),h[1]=_.select(h[1]),g.isPointType(_,h[0])&&h[1].elementClass===m.OBJECT_CLASS_LINE)x=h[1],b=g.providePoints(_,[h[0]],y,"point")[0];else{if(!g.isPointType(_,h[1])||h[0].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create perpendicular with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [line,point]");x=h[0],b=g.providePoints(_,[h[1]],y,"point")[0]}return O=g.copyAttributes(y,_.options,"perpendicularsegment","point"),(M=E.createPerpendicularPoint(_,[x,b],O)).dump=!1,g.exists(y.layer)||(y.layer=_.options.layer.line),O=g.copyAttributes(y,_.options,"perpendicularsegment"),(D=a.createLine(_,[function(){return T.perpendicular(x,b,_)[1]?[M,b]:[b,M]}],O)).point=M,g.exists(b._is_new)?(D.addChild(b),delete b._is_new):b.addChild(D),x.addChild(D),D.elType="perpendicularsegment",D.setParents([b.id,x.id]),D.subs={point:M},D.inherits.push(M),D},E.createMidpoint=function(_,h,y){var b,x,D,M,O;for(M=0;M<h.length;++M)h[M]=_.select(h[M]);if(2===h.length&&g.isPointType(_,h[0])&&g.isPointType(_,h[1]))h=g.providePoints(_,h,y,"point"),b=h[0],x=h[1];else{if(1!==h.length||h[0].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create midpoint.\nPossible parent types: [point,point], [line]");b=h[0].point1,x=h[0].point2}return O=g.copyAttributes(y,_.options,"midpoint"),D=_.create("point",[function(){var A=b.coords.usrCoords[1]+x.coords.usrCoords[1];return isNaN(A)||Math.abs(b.coords.usrCoords[0])<I.eps||Math.abs(x.coords.usrCoords[0])<I.eps?NaN:.5*A},function(){var A=b.coords.usrCoords[2]+x.coords.usrCoords[2];return isNaN(A)||Math.abs(b.coords.usrCoords[0])<I.eps||Math.abs(x.coords.usrCoords[0])<I.eps?NaN:.5*A}],O),g.exists(b._is_new)?(D.addChild(b),delete b._is_new):b.addChild(D),g.exists(x._is_new)?(D.addChild(x),delete x._is_new):x.addChild(D),D.elType="midpoint",D.setParents([b.id,x.id]),D.prepareUpdate().update(),D.generatePolynomial=function(){var A=b.symbolic.x,N=b.symbolic.y,L=x.symbolic.x,B=x.symbolic.y,V=D.symbolic.x,U=D.symbolic.y;return["("+N+")*("+V+")-("+N+")*("+L+")+("+U+")*("+L+")-("+A+")*("+U+")+("+A+")*("+B+")-("+V+")*("+B+")","("+A+")^2 - 2*("+A+")*("+V+")+("+N+")^2-2*("+N+")*("+U+")-("+L+")^2+2*("+L+")*("+V+")-("+B+")^2+2*("+B+")*("+U+")"]},D},E.createParallelPoint=function(_,h,y){var b,x,D,M,O;for(O=0;O<h.length;++O)h[O]=_.select(h[O]);if(3===h.length&&g.isPointType(_,h[0])&&g.isPointType(_,h[1])&&g.isPointType(_,h[2]))h=g.providePoints(_,h,y,"point"),b=h[0],x=h[1],D=h[2];else if(g.isPointType(_,h[0])&&h[1].elementClass===m.OBJECT_CLASS_LINE)D=g.providePoints(_,[h[0]],y,"point")[0],b=h[1].point1,x=h[1].point2;else{if(!g.isPointType(_,h[1])||h[0].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create parallel point with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [line,point], [point,point,point]");D=g.providePoints(_,[h[1]],y,"point")[0],b=h[0].point1,x=h[0].point2}return M=_.create("point",[function(){return D.coords.usrCoords[1]+x.coords.usrCoords[1]-b.coords.usrCoords[1]},function(){return D.coords.usrCoords[2]+x.coords.usrCoords[2]-b.coords.usrCoords[2]}],y),g.exists(b._is_new)?(M.addChild(b),delete b._is_new):b.addChild(M),g.exists(x._is_new)?(M.addChild(x),delete x._is_new):x.addChild(M),g.exists(D._is_new)?(M.addChild(D),delete D._is_new):D.addChild(M),M.elType="parallelpoint",M.setParents([b.id,x.id,D.id]),M.prepareUpdate().update(),M.generatePolynomial=function(){var A=b.symbolic.x,N=b.symbolic.y,L=x.symbolic.x,B=x.symbolic.y,V=D.symbolic.x,U=D.symbolic.y,j=M.symbolic.x,z=M.symbolic.y;return["("+B+")*("+j+")-("+B+")*("+V+")-("+N+")*("+j+")+("+N+")*("+V+")-("+z+")*("+L+")+("+z+")*("+A+")+("+U+")*("+L+")-("+U+")*("+A+")","("+z+")*("+A+")-("+z+")*("+V+")-("+B+")*("+A+")+("+B+")*("+V+")-("+j+")*("+N+")+("+j+")*("+U+")+("+L+")*("+N+")-("+L+")*("+U+")"]},M},E.createParallel=function(_,h,y){var b,x,D,M,O,A,N=1;for(O=0;O<h.length;++O)h[O]=_.select(h[O]);return b=null,3===h.length?(b=(h=g.providePoints(_,h,y,"point"))[2],N=0):g.isPointType(_,h[0])?(b=g.providePoints(_,[h[0]],y,"point")[0],M=function(){return h[1].stdform}):g.isPointType(_,h[1])&&(b=g.providePoints(_,[h[1]],y,"point")[0],M=function(){return h[0].stdform}),g.exists(y.layer)||(y.layer=_.options.layer.line),A=g.copyAttributes(y,_.options,"parallel","point"),(x=1===N?_.create("point",[function(){return I.crossProduct([1,0,0],M())}],A):_.create("parallelpoint",h,A)).isDraggable=!0,A=g.copyAttributes(y,_.options,"parallel"),(D=_.create("line",[b,x],A)).elType="parallel",D.subs={point:x},D.inherits.push(x),D.setParents([h[0].id,h[1].id]),3===h.length&&D.addParents(h[2].id),D.point=x,D},E.createArrowParallel=function(_,h,y){var b;try{return y.firstArrow=!1,y.lastArrow=!0,(b=E.createParallel(_,h,y).setAttribute({straightFirst:!1,straightLast:!1})).elType="arrowparallel",b}catch{throw new Error("JSXGraph: Can't create arrowparallel with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [line,point], [point,point,point]")}},E.createNormal=function(_,h,y){var b,x,D,M,O,A,N,L,B;for(M=0;M<h.length;++M)h[M]=_.select(h[M]);if(1===h.length)x=(b=h[0]).slideObject;else{if(2!==h.length)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");if(g.isPointType(_,h[0]))b=g.providePoints(_,[h[0]],y,"point")[0],x=h[1];else{if(!g.isPointType(_,h[1]))throw new Error("JSXGraph: Can't create normal with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");x=h[0],b=g.providePoints(_,[h[1]],y,"point")[0]}}if(N=g.copyAttributes(y,_.options,"normal"),x.elementClass===m.OBJECT_CLASS_LINE)B=g.copyAttributes(y,_.options,"normal","point"),(L=_.create("point",[function(){var V=I.crossProduct([1,0,0],x.stdform);return[V[0],-V[2],V[1]]}],B)).isDraggable=!0,(D=_.create("line",[b,L],N)).point=L,D.subs={point:L},D.inherits.push(L);else if(x.elementClass===m.OBJECT_CLASS_CIRCLE)D=_.create("line",[x.midpoint,b],N);else if(x.elementClass===m.OBJECT_CLASS_CURVE)"plot"!==g.evaluate(x.visProp.curvetype)?(O=x.X,A=x.Y,D=_.create("line",[function(){return-b.X()*S.D(O)(b.position)-b.Y()*S.D(A)(b.position)},function(){return S.D(O)(b.position)},function(){return S.D(A)(b.position)}],N)):D=_.create("line",[function(){var V,U,j,z,$,X,Z,W,ee,ie,re=Math.floor(b.position),Me=b.position-re;if(1===x.bezierdegree)re===x.numberPoints-1&&(re-=1,Me=1);else{if(3!==x.bezierDegree)return 0;re=3*Math.floor(b.position*(x.numberPoints-1)/3),j=(b.position*(x.numberPoints-1)-re)/3,re>=x.numberPoints-1&&(re=x.numberPoints-4,j=1)}return re<0?1:1===x.bezierDegree?(x.Y(re)+Me*(x.Y(re+1)-x.Y(re)))*(x.Y(re)-x.Y(re+1))-(x.X(re)+Me*(x.X(re+1)-x.X(re)))*(x.X(re+1)-x.X(re)):(W=(1-j)*(1-j)*(($=x.points[re+1].usrCoords)[1]-(z=x.points[re].usrCoords)[1])+2*(1-j)*j*((X=x.points[re+2].usrCoords)[1]-$[1])+j*j*((Z=x.points[re+3].usrCoords)[1]-X[1]),ee=(1-j)*(1-j)*($[2]-z[2])+2*(1-j)*j*(X[2]-$[2])+j*j*(Z[2]-X[2]),W/=ie=Math.sqrt(W*W+ee*ee),U=[1,(V=b.coords.usrCoords)[1]-(ee/=ie),V[2]+W],V[2]*U[1]-V[1]*U[2])},function(){var V,U,j,z,$,X,Z,W,ee,ie=Math.floor(b.position);if(1===x.bezierdegree)ie===x.numberPoints-1&&(ie-=1);else{if(3!==x.bezierDegree)return 0;ie=3*Math.floor(b.position*(x.numberPoints-1)/3),U=(b.position*(x.numberPoints-1)-ie)/3,ie>=x.numberPoints-1&&(ie=x.numberPoints-4,U=1)}return ie<0?0:1===x.bezierDegree?x.X(ie+1)-x.X(ie):(Z=(1-U)*(1-U)*((z=x.points[ie+1].usrCoords)[1]-(j=x.points[ie].usrCoords)[1])+2*(1-U)*U*(($=x.points[ie+2].usrCoords)[1]-z[1])+U*U*((X=x.points[ie+3].usrCoords)[1]-$[1]),W=(1-U)*(1-U)*(z[2]-j[2])+2*(1-U)*U*($[2]-z[2])+U*U*(X[2]-$[2]),Z/=ee=Math.sqrt(Z*Z+W*W),W/=ee,(V=b.coords.usrCoords)[2]+Z-V[2])},function(){var V,U,j,z,$,X,Z,W,ee,ie,re=Math.floor(b.position);if(1===x.bezierdegree)re===x.numberPoints-1&&(re-=1);else{if(3!==x.bezierDegree)return 0;re=3*Math.floor(b.position*(x.numberPoints-1)/3),j=(b.position*(x.numberPoints-1)-re)/3,re>=x.numberPoints-1&&(re=x.numberPoints-4,j=1)}return re<0?0:1===x.bezierDegree?x.Y(re+1)-x.Y(re):(W=(1-j)*(1-j)*(($=x.points[re+1].usrCoords)[1]-(z=x.points[re].usrCoords)[1])+2*(1-j)*j*((X=x.points[re+2].usrCoords)[1]-$[1])+j*j*((Z=x.points[re+3].usrCoords)[1]-X[1]),ee=(1-j)*(1-j)*($[2]-z[2])+2*(1-j)*j*(X[2]-$[2])+j*j*(Z[2]-X[2]),W/=ie=Math.sqrt(W*W+ee*ee),U=[1,(V=b.coords.usrCoords)[1]-(ee/=ie),V[2]+W],V[1]-U[1])}],N);else{if(x.type!==m.OBJECT_TYPE_TURTLE)throw new Error("JSXGraph: Can't create normal with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [point,line], [point,circle], [glider]");D=_.create("line",[function(){var V,U,j=Math.floor(b.position),z=b.position-j;for(U=0;U<x.objects.length;U++)if((V=x.objects[U]).type===m.OBJECT_TYPE_CURVE){if(j<V.numberPoints)break;j-=V.numberPoints}return j===V.numberPoints-1&&(j-=1,z=1),j<0?1:(V.Y(j)+z*(V.Y(j+1)-V.Y(j)))*(V.Y(j)-V.Y(j+1))-(V.X(j)+z*(V.X(j+1)-V.X(j)))*(V.X(j+1)-V.X(j))},function(){var V,U,j=Math.floor(b.position);for(U=0;U<x.objects.length;U++)if((V=x.objects[U]).type===m.OBJECT_TYPE_CURVE){if(j<V.numberPoints)break;j-=V.numberPoints}return j===V.numberPoints-1&&(j-=1),j<0?0:V.X(j+1)-V.X(j)},function(){var V,U,j=Math.floor(b.position);for(U=0;U<x.objects.length;U++)if((V=x.objects[U]).type===m.OBJECT_TYPE_CURVE){if(j<V.numberPoints)break;j-=V.numberPoints}return j===V.numberPoints-1&&(j-=1),j<0?0:V.Y(j+1)-V.Y(j)}],N)}return D.elType="normal",D.setParents(h),g.exists(b._is_new)?(D.addChild(b),delete b._is_new):b.addChild(D),x.addChild(D),D},E.createBisector=function(_,h,y){var b,x,D,M;if(h=g.providePoints(_,h,y,"point"),g.isPoint(h[0])&&g.isPoint(h[1])&&g.isPoint(h[2])){for((M=g.copyAttributes(y,_.options,"bisector","point")).snapToGrid=!1,(b=_.create("point",[function(){return T.angleBisector(h[0],h[1],h[2],_)}],M)).dump=!1,D=0;D<3;D++)g.exists(h[D]._is_new)?(b.addChild(h[D]),delete h[D]._is_new):h[D].addChild(b);return g.exists(y.layer)||(y.layer=_.options.layer.line),M=g.copyAttributes(y,_.options,"bisector"),(x=a.createLine(_,[h[1],b],M)).point=b,x.elType="bisector",x.setParents(h),x.subs={point:b},x.inherits.push(b),x}throw new Error("JSXGraph: Can't create angle bisector with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [point,point,point]")},E.createAngularBisectorsOfTwoLines=function(_,h,y){var b,x,D,M,O=_.select(h[0]),A=_.select(h[1]);if(O.elementClass!==m.OBJECT_CLASS_LINE||A.elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create angle bisectors of two lines with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [line,line]");return g.exists(y.layer)||(y.layer=_.options.layer.line),D=g.copyAttributes(y,_.options,"bisectorlines","line1"),b=_.create("line",[function(){var N=Math.sqrt(O.stdform[1]*O.stdform[1]+O.stdform[2]*O.stdform[2]),L=Math.sqrt(A.stdform[1]*A.stdform[1]+A.stdform[2]*A.stdform[2]);return O.stdform[0]/N-A.stdform[0]/L},function(){var N=Math.sqrt(O.stdform[1]*O.stdform[1]+O.stdform[2]*O.stdform[2]),L=Math.sqrt(A.stdform[1]*A.stdform[1]+A.stdform[2]*A.stdform[2]);return O.stdform[1]/N-A.stdform[1]/L},function(){var N=Math.sqrt(O.stdform[1]*O.stdform[1]+O.stdform[2]*O.stdform[2]),L=Math.sqrt(A.stdform[1]*A.stdform[1]+A.stdform[2]*A.stdform[2]);return O.stdform[2]/N-A.stdform[2]/L}],D),g.exists(y.layer)||(y.layer=_.options.layer.line),D=g.copyAttributes(y,_.options,"bisectorlines","line2"),x=_.create("line",[function(){var N=Math.sqrt(O.stdform[1]*O.stdform[1]+O.stdform[2]*O.stdform[2]),L=Math.sqrt(A.stdform[1]*A.stdform[1]+A.stdform[2]*A.stdform[2]);return O.stdform[0]/N+A.stdform[0]/L},function(){var N=Math.sqrt(O.stdform[1]*O.stdform[1]+O.stdform[2]*O.stdform[2]),L=Math.sqrt(A.stdform[1]*A.stdform[1]+A.stdform[2]*A.stdform[2]);return O.stdform[1]/N+A.stdform[1]/L},function(){var N=Math.sqrt(O.stdform[1]*O.stdform[1]+O.stdform[2]*O.stdform[2]),L=Math.sqrt(A.stdform[1]*A.stdform[1]+A.stdform[2]*A.stdform[2]);return O.stdform[2]/N+A.stdform[2]/L}],D),M=new l({line1:b,line2:x}),b.dump=!1,x.dump=!1,M.elType="bisectorlines",M.setParents([O.id,A.id]),M.subs={line1:b,line2:x},M},E.createCircumcenter=function(_,h,y){var b,x,D,M,O;if(h=g.providePoints(_,h,y,"point"),g.isPoint(h[0])&&g.isPoint(h[1])&&g.isPoint(h[2])){for(D=h[0],M=h[1],O=h[2],b=p.createPoint(_,[function(){return T.circumcenter(D,M,O,_)}],y),x=0;x<3;x++)g.exists(h[x]._is_new)?(b.addChild(h[x]),delete h[x]._is_new):h[x].addChild(b);return b.elType="circumcenter",b.setParents(h),b.generatePolynomial=function(){var A=D.symbolic.x,N=D.symbolic.y,V=O.symbolic.x,U=O.symbolic.y,j=b.symbolic.x,z=b.symbolic.y;return[["((",j,")-(",A,"))^2+((",z,")-(",N,"))^2-((",j,")-(",M.symbolic.x,"))^2-((",z,")-(",M.symbolic.y,"))^2"].join(""),["((",j,")-(",A,"))^2+((",z,")-(",N,"))^2-((",j,")-(",V,"))^2-((",z,")-(",U,"))^2"].join("")]},b}throw new Error("JSXGraph: Can't create circumcircle midpoint with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [point,point,point]")},E.createIncenter=function(_,h,y){var b,x,D,M,O;if(!((h=g.providePoints(_,h,y,"point")).length>=3&&g.isPoint(h[0])&&g.isPoint(h[1])&&g.isPoint(h[2])))throw new Error("JSXGraph: Can't create incenter with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [point,point,point]");for(x=h[0],D=h[1],M=h[2],b=_.create("point",[function(){var A,N,L;return A=Math.sqrt((D.X()-M.X())*(D.X()-M.X())+(D.Y()-M.Y())*(D.Y()-M.Y())),N=Math.sqrt((x.X()-M.X())*(x.X()-M.X())+(x.Y()-M.Y())*(x.Y()-M.Y())),L=Math.sqrt((D.X()-x.X())*(D.X()-x.X())+(D.Y()-x.Y())*(D.Y()-x.Y())),new w(m.COORDS_BY_USER,[(A*x.X()+N*D.X()+L*M.X())/(A+N+L),(A*x.Y()+N*D.Y()+L*M.Y())/(A+N+L)],_)}],y),O=0;O<3;O++)g.exists(h[O]._is_new)?(b.addChild(h[O]),delete h[O]._is_new):h[O].addChild(b);return b.elType="incenter",b.setParents(h),b},E.createCircumcircle=function(_,h,y){var b,x,D,M;if(!1===(h=g.providePoints(_,h,y,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [point,point,point]");try{for(D=g.copyAttributes(y,_.options,"circumcircle","center"),(b=E.createCircumcenter(_,h,D)).dump=!1,g.exists(y.layer)||(y.layer=_.options.layer.circle),D=g.copyAttributes(y,_.options,"circumcircle"),(x=u.createCircle(_,[b,h[0]],D)).elType="circumcircle",x.setParents(h),x.subs={center:b},x.inherits.push(x),M=0;M<3;M++)g.exists(h[M]._is_new)?(x.addChild(h[M]),delete h[M]._is_new):h[M].addChild(x)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [point,point,point]")}return x},E.createIncircle=function(_,h,y){var b,x,D,M;if(!1===(h=g.providePoints(_,h,y,"point")))throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [point,point,point]");try{for(M=g.copyAttributes(y,_.options,"incircle","center"),(x=E.createIncenter(_,h,M)).dump=!1,g.exists(y.layer)||(y.layer=_.options.layer.circle),M=g.copyAttributes(y,_.options,"incircle"),(D=u.createCircle(_,[x,function(){var O=Math.sqrt((h[1].X()-h[2].X())*(h[1].X()-h[2].X())+(h[1].Y()-h[2].Y())*(h[1].Y()-h[2].Y())),A=Math.sqrt((h[0].X()-h[2].X())*(h[0].X()-h[2].X())+(h[0].Y()-h[2].Y())*(h[0].Y()-h[2].Y())),N=Math.sqrt((h[1].X()-h[0].X())*(h[1].X()-h[0].X())+(h[1].Y()-h[0].Y())*(h[1].Y()-h[0].Y())),L=(O+A+N)/2;return Math.sqrt((L-O)*(L-A)*(L-N)/L)}],M)).elType="incircle",D.setParents(h),b=0;b<3;b++)g.exists(h[b]._is_new)?(D.addChild(h[b]),delete h[b]._is_new):h[b].addChild(D);D.center=x,D.subs={center:D.center},D.inherits.push(x)}catch{throw new Error("JSXGraph: Can't create circumcircle with parent types '"+typeof h[0]+"', '"+typeof h[1]+"' and '"+typeof h[2]+"'.\nPossible parent types: [point,point,point]")}return D},E.createReflection=function(_,h,y){var b,x,D,M,O,A,N,L,B="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, line]";for(A=0;A<h.length;++A)h[A]=_.select(h[A]);if(N=g.copyAttributes(y,_.options,"reflection"),g.isPoint(h[0]))x=g.providePoints(_,[h[0]],L)[0];else{if(h[0].elementClass!==m.OBJECT_CLASS_CURVE&&h[0].elementClass!==m.OBJECT_CLASS_LINE&&h[0].type!==m.OBJECT_TYPE_POLYGON&&h[0].elementClass!==m.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflection element with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'."+B);x=h[0]}if(h[1].elementClass!==m.OBJECT_CLASS_LINE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'."+B);if(O=c.createTransform(_,[b=h[1]],{type:"reflect"}),g.isPoint(x))D=p.createPoint(_,[x,O],N);else if(x.elementClass===m.OBJECT_CLASS_CURVE)D=f.createCurve(_,[x,O],N);else if(x.elementClass===m.OBJECT_CLASS_LINE)D=a.createLine(_,[x,O],N);else if(x.type===m.OBJECT_TYPE_POLYGON)D=v.createPolygon(_,[x,O],N);else{if(x.elementClass!==m.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create reflected element with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'."+B);"euclidean"===N.type.toLowerCase()?(L=g.copyAttributes(y,_.options,"reflection","center"),(M=p.createPoint(_,[x.center,O],L)).prepareUpdate().update().updateVisibility(g.evaluate(M.visProp.visible)).updateRenderer(),D=u.createCircle(_,[M,function(){return x.Radius()}],N)):D=u.createCircle(_,[x,O],N)}return g.exists(x._is_new)&&(D.addChild(x),delete x._is_new),b.addChild(D),D.elType="reflection",D.addParents(b),D.prepareUpdate().update(),g.isPoint(D)&&(D.generatePolynomial=function(){var V=b.point1.symbolic.x,U=b.point1.symbolic.y,$=x.symbolic.x,X=x.symbolic.y,Z=D.symbolic.x,W=D.symbolic.y;return[["((",W,")-(",X,"))*((",U,")-(",b.point2.symbolic.y,"))+((",V,")-(",b.point2.symbolic.x,"))*((",Z,")-(",$,"))"].join(""),["((",Z,")-(",V,"))^2+((",W,")-(",U,"))^2-((",$,")-(",V,"))^2-((",X,")-(",U,"))^2"].join("")]}),D},E.createMirrorElement=function(_,h,y){var b,x,D,M,O,A,N,L,B="\nPossible parent types: [point|line|curve|polygon|circle|arc|sector, point]";for(x=0;x<h.length;++x)h[x]=_.select(h[x]);if(N=g.copyAttributes(y,_.options,"mirrorelement"),g.isPoint(h[0]))b=g.providePoints(_,[h[0]],N)[0];else{if(h[0].elementClass!==m.OBJECT_CLASS_CURVE&&h[0].elementClass!==m.OBJECT_CLASS_LINE&&h[0].type!==m.OBJECT_TYPE_POLYGON&&h[0].elementClass!==m.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'."+B);b=h[0]}if(!g.isPoint(h[1]))throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'."+B);if(L=g.copyAttributes(y,_.options,"mirrorelement","point"),D=g.providePoints(_,[h[1]],L)[0],A=c.createTransform(_,[Math.PI,D],{type:"rotate"}),g.isPoint(b))M=p.createPoint(_,[b,A],N);else if(b.elementClass===m.OBJECT_CLASS_CURVE)M=f.createCurve(_,[b,A],N);else if(b.elementClass===m.OBJECT_CLASS_LINE)M=a.createLine(_,[b,A],N);else if(b.type===m.OBJECT_TYPE_POLYGON)M=v.createPolygon(_,[b,A],N);else{if(b.elementClass!==m.OBJECT_CLASS_CIRCLE)throw new Error("JSXGraph: Can't create mirror element with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'."+B);"euclidean"===N.type.toLowerCase()?(L=g.copyAttributes(y,_.options,"mirrorelement","center"),(O=p.createPoint(_,[b.center,A],L)).prepareUpdate().update().updateVisibility(g.evaluate(O.visProp.visible)).updateRenderer(),M=u.createCircle(_,[O,function(){return b.Radius()}],N)):M=u.createCircle(_,[b,A],N)}return g.exists(b._is_new)&&(M.addChild(b),delete b._is_new),D.addChild(M),M.elType="mirrorelement",M.addParents(D),M.prepareUpdate().update(),M},E.createMirrorPoint=function(_,h,y){var b=E.createMirrorElement(_,h,y);return b.elType="mirrorpoint",b},E.createIntegral=function(_,h,y){var b,x,D,M,O,A,N,L,B,V,U,j,z,$,X=null;if(g.isArray(h[0])&&h[1].elementClass===m.OBJECT_CLASS_CURVE)b=h[0],x=h[1];else{if(!g.isArray(h[1])||h[0].elementClass!==m.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create integral with parent types '"+typeof h[0]+"' and '"+typeof h[1]+"'.\nPossible parent types: [[number|function,number|function],curve]");b=h[1],x=h[0]}return(D=g.copyAttributes(y,_.options,"integral")).withLabel=!1,$=_.create("curve",[[0],[0]],D),O=b[1],g.isFunction(M=b[0])?(N=function(){return x.Y(A())},M=(A=M)()):(A=M,N=x.Y(M)),g.isFunction(O)?(B=function(){return x.Y(L())},O=(L=O)()):(L=O,B=x.Y(O)),D=g.copyAttributes(y,_.options,"integral","curveLeft"),V=_.create("glider",[A,N,x],D),g.isFunction(A)&&V.hideElement(),D=g.copyAttributes(y,_.options,"integral","baseLeft"),U=_.create("point",[function(){return"y"===g.evaluate($.visProp.axis)?0:V.X()},function(){return"y"===g.evaluate($.visProp.axis)?V.Y():0}],D),D=g.copyAttributes(y,_.options,"integral","curveRight"),j=_.create("glider",[L,B,x],D),g.isFunction(L)&&j.hideElement(),D=g.copyAttributes(y,_.options,"integral","baseRight"),z=_.create("point",[function(){return"y"===g.evaluate($.visProp.axis)?0:j.X()},function(){return"y"===g.evaluate($.visProp.axis)?j.Y():0}],D),!1!==(D=g.copyAttributes(y,_.options,"integral")).withlabel&&"y"!==D.axis&&(D=g.copyAttributes(y,_.options,"integral","label"),D=g.copyAttributes(D,_.options,"label"),(X=_.create("text",[function(){var Z=new w(m.COORDS_BY_SCREEN,[g.evaluate(this.visProp.offset[0])+this.board.origin.scrCoords[1],0],this.board,!1),W=this.board.getBoundingBox(),ee=.1*(W[2]-W[0]),ie=j.X();return ie<W[0]?ie=W[0]+ee:ie>W[2]&&(ie=W[2]-ee),ie+Z.usrCoords[1]},function(){var Z=new w(m.COORDS_BY_SCREEN,[0,g.evaluate(this.visProp.offset[1])+this.board.origin.scrCoords[2]],this.board,!1),W=this.board.getBoundingBox(),ee=.1*(W[1]-W[3]),ie=j.Y();return ie>W[1]?ie=W[1]-ee:ie<W[3]&&(ie=W[3]+ee),ie+Z.usrCoords[2]},function(){var Z=S.NewtonCotes([U.X(),z.X()],x.Y);return"&int; = "+g.toFixed(Z,4)}],D)).dump=!1,V.addChild(X),j.addChild(X)),V.dump=!1,U.dump=!1,j.dump=!1,z.dump=!1,$.elType="integral",$.setParents([x.id,b]),$.subs={curveLeft:V,baseLeft:U,curveRight:j,baseRight:z},$.inherits.push(V,U,j,z),D.withLabel&&($.subs.label=X,$.inherits.push(X)),$.Value=function(){return S.I([U.X(),z.X()],x.Y)},$.updateDataArray=function(){var Z,W,ee,ie,re,Me,Pe,Oe,Se;if("y"===g.evaluate(this.visProp.axis)){for(V.Y()<j.Y()?(Me=V.X(),Oe=V.Y(),Pe=j.X(),Se=j.Y()):(Me=j.X(),Oe=j.Y(),Pe=V.X(),Se=V.Y()),ie=Math.min(Me,Pe),re=Math.max(Me,Pe),Z=[0,Me],W=[Oe,Oe],ee=0;ee<x.numberPoints;ee++)Oe<=x.points[ee].usrCoords[2]&&ie<=x.points[ee].usrCoords[1]&&x.points[ee].usrCoords[2]<=Se&&x.points[ee].usrCoords[1]<=re&&(Z.push(x.points[ee].usrCoords[1]),W.push(x.points[ee].usrCoords[2]));Z.push(Pe),W.push(Se),Z.push(0),W.push(Se),Z.push(0),W.push(Oe)}else{for(U.X()<z.X()?(ie=U.X(),re=z.X()):(ie=z.X(),re=U.X()),Z=[ie,ie],W=[0,x.Y(ie)],ee=0;ee<x.numberPoints;ee++)ie<=x.points[ee].usrCoords[1]&&x.points[ee].usrCoords[1]<=re&&(Z.push(x.points[ee].usrCoords[1]),W.push(x.points[ee].usrCoords[2]));Z.push(re),W.push(x.Y(re)),Z.push(re),W.push(0),Z.push(ie),W.push(0)}this.dataX=Z,this.dataY=W},V.addChild($),j.addChild($),U.addChild($),z.addChild($),$.baseLeft=U,$.baseRight=z,$.curveLeft=V,$.curveRight=j,$.methodMap=E.deepCopy($.methodMap,{curveLeft:"curveLeft",baseLeft:"baseLeft",curveRight:"curveRight",baseRight:"baseRight",Value:"Value"}),$.label=X,$},E.createGrid=function(_,h,y){var b,x;return x=g.copyAttributes(y,_.options,"grid"),(b=_.create("curve",[[null],[null]],x)).elType="grid",b.type=m.OBJECT_TYPE_GRID,b.updateDataArray=function(){var D,M,O,A,N,L=g.evaluate(this.visProp.gridx),B=g.evaluate(this.visProp.gridy);for(A=g.isArray(this.visProp.topleft)?new w(g.evaluate(this.visProp.tltype)||m.COORDS_BY_USER,this.visProp.topleft,_):new w(m.COORDS_BY_SCREEN,[0,0],_),N=g.isArray(this.visProp.bottomright)?new w(g.evaluate(this.visProp.brtype)||m.COORDS_BY_USER,this.visProp.bottomright,_):new w(m.COORDS_BY_SCREEN,[_.canvasWidth,_.canvasHeight],_),_.options.grid.hasGrid=!0,b.dataX=[],b.dataY=[],D=Math.floor(A.usrCoords[2]/B)*B,M=Math.ceil(N.usrCoords[2]/B)*B,A.usrCoords[2]<N.usrCoords[2]&&(D=Math.ceil(N.usrCoords[2]/B)*B,M=Math.floor(A.usrCoords[2]/B)*B),O=D;O>M-B;O-=B)b.dataX.push(A.usrCoords[1],N.usrCoords[1],NaN),b.dataY.push(O,O,NaN);for(D=Math.ceil(A.usrCoords[1]/L)*L,M=Math.floor(N.usrCoords[1]/L)*L,A.usrCoords[1]>N.usrCoords[1]&&(D=Math.floor(N.usrCoords[1]/L)*L,M=Math.ceil(A.usrCoords[1]/L)*L),O=D;O<M+L;O+=L)b.dataX.push(O,O,NaN),b.dataY.push(A.usrCoords[2],N.usrCoords[2],NaN)},b.hasPoint=function(){return!1},_.grids.push(b),b},E.createInequality=function(_,h,y){var b,x,D;if(D=g.copyAttributes(y,_.options,"inequality"),h[0].elementClass===m.OBJECT_CLASS_LINE)(x=_.create("curve",[[],[]],D)).hasPoint=function(){return!1},x.updateDataArray=function(){var M,O,A,N=_.getBoundingBox(),L=D.inverse?-1:1,B=1.5*Math.max(N[2]-N[0],N[1]-N[3]),V={coords:{usrCoords:[1,(N[0]+N[2])/2,D.inverse?N[1]:N[3]]}},U=h[0].stdform.slice(1),j=U;A=1.5*Math.max(T.perpendicular(h[0],V,_)[0].distance(m.COORDS_BY_USER,V.coords),B),A*=L,V={coords:{usrCoords:[1,(N[0]+N[2])/2,(N[1]+N[3])/2]}},M=[1,(V=Math.abs(I.innerProduct(V.coords.usrCoords,h[0].stdform,3))>=I.eps?T.perpendicular(h[0],V,_)[0].usrCoords:V.coords.usrCoords)[1]+U[1]*B,V[2]-U[0]*B],this.dataX=[M[1],M[1]+U[0]*A,(O=[1,V[1]-j[1]*B,V[2]+j[0]*B])[1]+j[0]*A,O[1],M[1]],this.dataY=[M[2],M[2]+U[1]*A,O[2]+j[1]*A,O[2],M[2]]};else if(h[0].elementClass===m.OBJECT_CLASS_CURVE&&"functiongraph"===h[0].visProp.curvetype)(x=_.create("curve",[[],[]],D)).updateDataArray=function(){var M,O,A,N,L,B,V,U,j,z=this.board.getBoundingBox(),$=[],X=h[0].minX(),Z=h[0].maxX(),W=.3*(z[1]-z[3]);if(M=g.evaluate(this.visProp.inverse)?1:3,this.dataX=[],this.dataY=[],0!==(N=h[0].points.length))for(z[1]+=W,z[3]-=W,A=-1;A<N-1;){for(L=A+1,O=N;L<N;L++)if(h[0].points[L].isReal()){O=L;break}if(O>=N)break;for(L=O,A=N-1;L<N-1;L++)if(!h[0].points[L+1].isReal()){A=L;break}for(U=h[0].points[O].usrCoords[1],j=h[0].points[A].usrCoords[1],B=z[0]<X?X:z[0],V=z[2]>Z?Z:z[2],B=0===O?B:Math.max(B,U),V=A===N-1?V:Math.min(V,j),V=A===N-1?Z:j,($=[]).push([1,B=0===O?X:U,z[M]]),$.push([1,B,h[0].points[O].usrCoords[2]]),L=O;L<=A;L++)$.push(h[0].points[L].usrCoords);for($.push([1,V,h[0].points[A].usrCoords[2]]),$.push([1,V,z[M]]),$.push($[0]),L=0;L<$.length;L++)this.dataX.push($[L][1]),this.dataY.push($[L][2]);A<N-1&&(this.dataX.push(NaN),this.dataY.push(NaN))}},x.hasPoint=function(){return!1};else if(b=g.createFunction(h[0]),!g.exists(b))throw new Error("JSXGraph: Can't create area with the given parents.\nPossible parent types: [line], [function]");return x.addParents(h[0]),x},E.registerElement("arrowparallel",E.createArrowParallel),E.registerElement("bisector",E.createBisector),E.registerElement("bisectorlines",E.createAngularBisectorsOfTwoLines),E.registerElement("msector",E.createMsector),E.registerElement("circumcircle",E.createCircumcircle),E.registerElement("circumcirclemidpoint",E.createCircumcenter),E.registerElement("circumcenter",E.createCircumcenter),E.registerElement("incenter",E.createIncenter),E.registerElement("incircle",E.createIncircle),E.registerElement("integral",E.createIntegral),E.registerElement("midpoint",E.createMidpoint),E.registerElement("mirrorelement",E.createMirrorElement),E.registerElement("mirrorpoint",E.createMirrorPoint),E.registerElement("normal",E.createNormal),E.registerElement("orthogonalprojection",E.createOrthogonalProjection),E.registerElement("parallel",E.createParallel),E.registerElement("parallelpoint",E.createParallelPoint),E.registerElement("perpendicular",E.createPerpendicular),E.registerElement("perpendicularpoint",E.createPerpendicularPoint),E.registerElement("perpendicularsegment",E.createPerpendicularSegment),E.registerElement("reflection",E.createReflection),E.registerElement("grid",E.createGrid),E.registerElement("inequality",E.createInequality),{createArrowParallel:E.createArrowParallel,createBisector:E.createBisector,createAngularBisectorOfTwoLines:E.createAngularBisectorsOfTwoLines,createCircumcircle:E.createCircumcircle,createCircumcenter:E.createCircumcenter,createIncenter:E.createIncenter,createIncircle:E.createIncircle,createIntegral:E.createIntegral,createMidpoint:E.createMidpoint,createMirrorElement:E.createMirrorElement,createMirrorPoint:E.createMirrorPoint,createNormal:E.createNormal,createOrthogonalProjection:E.createOrthogonalProjection,createParallel:E.createParallel,createParallelPoint:E.createParallelPoint,createPerpendicular:E.createPerpendicular,createPerpendicularPoint:E.createPerpendicularPoint,createPerpendicularSegmen:E.createPerpendicularSegment,createReflection:E.createReflection,createGrid:E.createGrid,createInequality:E.createInequality}}),define("element/locus",["jxg","math/symbolic","utils/type"],function(E,I,T){"use strict";return E.createLocus=function(S,w,g){var m,p;if(!T.isArray(w)||1!==w.length||!T.isPoint(w[0]))throw new Error("JSXGraph: Can't create locus with parent of type other than point.\nPossible parent types: [point]");return p=w[0],(m=S.create("curve",[[null],[null]],g)).dontCallServer=!1,m.elType="locus",m.setParents([p.id]),m.updateDataArray=function(){var a,u,c;m.board.mode>0||(a=I.generatePolynomials(S,p,!0).join("|"))!==m.spe&&(m.spe=a,(u=function(l,f,v,_){var h;m.dataX=l,m.dataY=f,m.eq=v,m.ctime=_,m.generatePolynomial=(h=v,function(y){var b,x="("+y.symbolic.x+")",D="("+y.symbolic.y+")",M=[];for(b=0;b<h.length;b++)M[b]=h[b].replace(/\*\*/g,"^").replace(/x/g,x).replace(/y/g,D);return M})})((c=I.geometricLocusByGroebnerBase(S,p,u)).datax,c.datay,c.polynomial,c.exectime))},m},E.registerElement("locus",E.createLocus),{createLocus:E.createLocus}}),define("base/image",["jxg","base/constants","base/coords","base/element","math/math","utils/type","base/coordselement"],function(E,I,T,S,w,g,m){"use strict";return E.Image=function(p,a,u,c,l){this.constructor(p,u,I.OBJECT_TYPE_IMAGE,I.OBJECT_CLASS_OTHER),this.element=this.board.select(u.anchor),this.coordsConstructor(a),this.W=g.createFunction(l[0],this.board,""),this.H=g.createFunction(l[1],this.board,""),this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*p.unitX),Math.abs(this.usrSize[1]*p.unitY)],this.url=c,this.elType="image",this.span=[this.coords.usrCoords.slice(0),[this.coords.usrCoords[0],this.W(),0],[this.coords.usrCoords[0],0,this.H()]],this.id=this.board.setId(this,"Im"),this.board.renderer.drawImage(this),this.board.finalizeAdding(this),this.methodMap=E.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},E.Image.prototype=new S,g.copyPrototypeMethods(E.Image,m,"coordsConstructor"),E.extend(E.Image.prototype,{hasPoint:function(p,a){var u,c,l,v,_,h,y,b,x=this.transformations.length;return v=g.isObject(g.evaluate(this.visProp.precision))?g.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,0===x?(c=this.coords.scrCoords[2]-a,(u=p-this.coords.scrCoords[1])>=-(l=v)&&u-this.size[0]<=l&&c>=-l&&c-this.size[1]<=l):(h=[(_=(_=new T(I.COORDS_BY_SCREEN,[p,a],this.board)).usrCoords)[0]-this.span[0][0],_[1]-this.span[0][1],_[2]-this.span[0][2]],0<=(y=(b=w.innerProduct)(h,this.span[1]))&&y<=b(this.span[1],this.span[1])&&0<=(y=b(h,this.span[2]))&&y<=b(this.span[2],this.span[2]))},update:function(p){return this.needsUpdate?(this.updateCoords(p),this.updateSize(),this.updateSpan(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateImage")},updateSize:function(){return this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)],this},updateSpan:function(){var p,a,u=this.transformations.length,c=[];if(0===u)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(c[0]=[this.Z(),this.X(),this.Y()],c[1]=[this.Z(),this.X()+this.W(),this.Y()],c[2]=[this.Z(),this.X(),this.Y()+this.H()],p=0;p<u;p++)for(a=0;a<3;a++)c[a]=w.matVecMult(this.transformations[p].matrix,c[a]);for(a=0;a<3;a++)c[a][1]/=c[a][0],c[a][2]/=c[a][0],c[a][0]/=c[a][0];for(a=1;a<3;a++)c[a][0]-=c[0][0],c[a][1]-=c[0][1],c[a][2]-=c[0][2];this.span=c}return this},addTransform:function(p){var a;if(g.isArray(p))for(a=0;a<p.length;a++)this.transformations.push(p[a]);else this.transformations.push(p);return this},getParents:function(){var p=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(p=this.parents),p},setSize:function(p,a){return this.W=g.createFunction(p,this.board,""),this.H=g.createFunction(a,this.board,""),this},W:function(){},H:function(){}}),E.createImage=function(p,a,u){var c,l,f=a[0],v=a[1],_=a[2];if(c=g.copyAttributes(u,p.options,"image"),!(l=m.create(E.Image,p,v,c,f,_)))throw new Error("JSXGraph: Can't create image with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [x,y], [z,x,y], [element,transformation]");return 0!==c.rotate&&l.addRotation(c.rotate),l},E.registerElement("image",E.createImage),{Image:E.Image,createImage:E.createImage}}),define("element/slider",["jxg","math/math","base/constants","base/coords","utils/type","base/point"],function(E,I,T,S,w,g){"use strict";return E.createSlider=function(m,p,a){var u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L,B,V,U,j,z;return B=(z=w.copyAttributes(a,m.options,"slider")).withticks,L=z.withlabel,V=z.snapwidth,z=w.copyAttributes(a,m.options,"slider","point1"),h=m.create("point",p[0],z),z=w.copyAttributes(a,m.options,"slider","point2"),y=m.create("point",p[1],z),z=w.copyAttributes(a,m.options,"slider","baseline"),(b=m.create("segment",[h,y],z)).updateStdform(),u=h.coords.usrCoords.slice(1),c=y.coords.usrCoords.slice(1),f=p[2][1],_=(v=p[2][2])-(l=p[2][0]),j=-1===(U=w.evaluate(V))?f:Math.round(f/U)*U,D=u[0]+(c[0]-u[0])*(j-l)/(v-l),M=u[1]+(c[1]-u[1])*(j-l)/(v-l),(z=w.copyAttributes(a,m.options,"slider")).withLabel=!1,(O=m.create("glider",[D,M,b],z)).setAttribute({snapwidth:V}),z=w.copyAttributes(a,m.options,"slider","highline"),A=m.create("segment",[h,O],z),O.Value=function(){var $=this._smax-this._smin,X=w.evaluate(this.visProp.snapwidth);return-1===X?this.position*$+this._smin:Math.round((this.position*$+this._smin)/X)*X},O.methodMap=w.deepCopy(O.methodMap,{Value:"Value",setValue:"setValue",smax:"_smax",smin:"_smin",setMax:"setMax",setMin:"setMin"}),O._smax=v,O._smin=l,O.setMax=function($){return this._smax=$,this},O.setValue=function($){var X=this._smax-this._smin;return this.position=Math.abs(X)>I.eps?($-this._smin)/X:0,this.position=Math.max(0,Math.min(1,this.position)),this},O.setMin=function($){return this._smin=$,this},L&&(z=w.copyAttributes(a,m.options,"slider","label"),N=m.create("text",[function(){return.05*(y.X()-h.X())+y.X()},function(){return.05*(y.Y()-h.Y())+y.Y()},function(){var $,X=w.evaluate(O.visProp.digits),Z=w.evaluate(O.visProp.suffixlabel),W=w.evaluate(O.visProp.unitlabel),ee=w.evaluate(O.visProp.postlabel);return 2===X&&2!==w.evaluate(O.visProp.precision)&&(X=w.evaluate(O.visProp.precision)),$=null!==Z?Z:O.name&&""!==O.name?O.name+" = ":"",$+=w.toFixed(O.Value(),X),null!==W&&($+=W),null!==ee&&($+=ee),$}],z),O.label=N,O.visProp.withlabel=!0,O.hasLabel=!0),O.point1=h,O.point2=y,O.baseline=b,O.highline=A,B&&(z=w.copyAttributes(a,m.options,"slider","ticks"),w.exists(z.generatelabeltext)||(z.generateLabelText=function($,X,Z){var W=O.point1.Dist(O.point2),ee=O._smin,ie=O._smax,re=this.getDistanceFromZero(X,$)*(ie-ee)/W+ee;return W<I.eps||Math.abs(re)<I.eps?"0":this.formatLabelText(re)}),x=m.create("ticks",[O.baseline,O.point1.Dist(h)/2,function($){var X=O.point1.Dist(O.point2),Z=O.point1.coords.distance(T.COORDS_BY_USER,$);return X<I.eps?0:Z/X*_+l}],z),O.ticks=x),O.remove=function(){L&&m.removeObject(N),m.removeObject(A),m.removeObject(b),m.removeObject(y),m.removeObject(h),g.Point.prototype.remove.call(O)},h.dump=!1,y.dump=!1,b.dump=!1,A.dump=!1,L&&(N.dump=!1),O.elType="slider",O.parents=p,O.subs={point1:h,point2:y,baseLine:b,highLine:A},O.inherits.push(h,y,b,A),B&&(x.dump=!1,O.subs.ticks=x,O.inherits.push(x)),O.getParents=function(){return[this.point1.coords.usrCoords.slice(1),this.point2.coords.usrCoords.slice(1),[this._smin,this.position*(this._smax-this._smin)+this._smin,this._smax]]},O.baseline.on("up",function($){var X,Z;w.evaluate(O.visProp.moveonup)&&!w.evaluate(O.visProp.fixed)&&(X=b.board.getMousePosition($,0),Z=new S(T.COORDS_BY_SCREEN,X,this.board),O.moveTo([Z.usrCoords[1],Z.usrCoords[2]]))}),O.prepareUpdate().update(),m.isSuspendedUpdate||(O.updateVisibility().updateRenderer(),O.baseline.updateVisibility().updateRenderer(),O.highline.updateVisibility().updateRenderer(),B&&O.ticks.updateVisibility().updateRenderer()),O},E.registerElement("slider",E.createSlider),{createSlider:E.createSlider}}),define("element/measure",["jxg","utils/type","base/element"],function(E,I,T){"use strict";return E.createTapemeasure=function(S,w,g){var m,p,a,u,c,l,f,v,_,h,y;return m=w[0],p=w[1],a=I.copyAttributes(g,S.options,"tapemeasure","point1"),v=S.create("point",m,a),a=I.copyAttributes(g,S.options,"tapemeasure","point2"),_=S.create("point",p,a),v.setAttribute({ignoredSnapToPoints:[_]}),_.setAttribute({ignoredSnapToPoints:[v]}),a=I.copyAttributes(g,S.options,"tapemeasure"),u=a.withticks,2===(l=a.digits)&&2!==a.precision&&(l=a.precision),(c=a.withlabel)&&(a.withlabel=!0),f=S.create("segment",[v,_],a),c&&(h=g.name&&""!==g.name?g.name+" = ":"",f.label.setText(function(){return h+I.toFixed(v.Dist(_),l)})),u&&(a=I.copyAttributes(g,S.options,"tapemeasure","ticks"),y=S.create("ticks",[f,.1],a),f.inherits.push(y)),f.remove=function(){u&&f.removeTicks(y),S.removeObject(_),S.removeObject(v),T.prototype.remove.call(this)},f.Value=function(){return v.Dist(_)},v.dump=!1,_.dump=!1,f.elType="tapemeasure",f.getParents=function(){return[[v.X(),v.Y()],[_.X(),_.Y()]]},f.subs={point1:v,point2:_},u&&(y.dump=!1),f.methodMap=E.deepCopy(f.methodMap,{Value:"Value"}),f.prepareUpdate().update(),S.isSuspendedUpdate||(f.updateVisibility().updateRenderer(),f.point1.updateVisibility().updateRenderer(),f.point2.updateVisibility().updateRenderer()),f},E.registerElement("tapemeasure",E.createTapemeasure),{createTapemeasure:E.createTapemeasure}}),define("parser/datasource",["jxg","utils/type"],function(E,I){"use strict";return E.DataSource=function(){return this.data=[],this.columnHeaders=[],this.rowHeaders=[],this},E.extend(E.DataSource.prototype,{loadFromArray:function(T,S,w){var g,m,p;if(I.isArray(S)&&(this.columnHeaders=S,S=!1),I.isArray(w)&&(this.rowHeaders=w,w=!1),this.data=[],S&&(this.columnHeaders=[]),w&&(this.rowHeaders=[]),I.exists(T)){for(this.data=[],g=0;g<T.length;g++)for(this.data[g]=[],m=0;m<T[g].length;m++)p=T[g][m],this.data[g][m]=parseFloat(p).toString()===p?parseFloat(p):"-"!==p?p:NaN;if(S&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),w)for(this.rowHeaders=[],g=0;g<this.data.length;g++)this.rowHeaders.push(this.data[g][0]),this.data[g]=this.data[g].slice(1)}return this},loadFromTable:function(T,S,w){var g,m,p,a,u;if(I.isArray(S)&&(this.columnHeaders=S,S=!1),I.isArray(w)&&(this.rowHeaders=w,w=!1),this.data=[],S&&(this.columnHeaders=[]),w&&(this.rowHeaders=[]),T=document.getElementById(T),I.exists(T)){for(g=T.getElementsByTagName("tr"),this.data=[],m=0;m<g.length;m++)for(a=g[m].getElementsByTagName("td"),this.data[m]=[],p=0;p<a.length;p++)u=a[p].innerHTML,this.data[m][p]=parseFloat(u).toString()===u?parseFloat(u):"-"!==u?u:NaN;if(S&&(this.columnHeaders=this.data[0].slice(1),this.data=this.data.slice(1)),w)for(this.rowHeaders=[],m=0;m<this.data.length;m++)this.rowHeaders.push(this.data[m][0]),this.data[m]=this.data[m].slice(1)}return this},addColumn:function(T,S,w){throw new Error("not implemented")},addRow:function(T,S,w){throw new Error("not implemented")},getColumn:function(T){var S,w=[];if(I.isString(T))for(S=0;S<this.columnHeaders.length;S++)if(T===this.columnHeaders[S]){T=S;break}for(S=0;S<this.data.length;S++)this.data[S].length>T&&(w[S]=parseFloat(this.data[S][T]));return w},getRow:function(T){var S,w;if(I.isString(T))for(w=0;w<this.rowHeaders.length;w++)if(T===this.rowHeaders[w]){T=w;break}for(S=[],w=0;w<this.data[T].length;w++)S[w]=this.data[T][w];return S}}),E.DataSource}),define("base/chart",["jxg","math/numerics","math/statistics","base/constants","base/coords","base/element","parser/datasource","utils/color","utils/type","utils/env","base/curve","base/point","base/text","base/polygon","element/sector","base/transformation","base/line","base/circle"],function(E,I,T,S,w,g,m,p,a,u,c,l,f,v,_,h,y,b){"use strict";return E.Chart=function(x,D,M){var O,A,N,L,B,V;if(this.constructor(x,M),!a.isArray(D)||0===D.length)throw new Error("JSXGraph: Can't create a chart without data");if(this.elements=[],a.isNumber(D[0]))for(A=D,O=[],N=0;N<A.length;N++)O[N]=N+1;else if(1===D.length&&a.isArray(D[0]))for(O=[],V=a.evaluate(A=D[0]).length,N=0;N<V;N++)O[N]=N+1;else 2===D.length&&(V=Math.min(D[0].length,D[1].length),O=D[0].slice(0,V),A=D[1].slice(0,V));if(a.isArray(A)&&0===A.length)throw new Error("JSXGraph: Can't create charts without data.");for(B=M.chartstyle.replace(/ /g,"").split(","),N=0;N<B.length;N++){switch(B[N]){case"bar":L=this.drawBar(x,O,A,M);break;case"line":L=this.drawLine(x,O,A,M);break;case"fit":L=this.drawFit(x,O,A,M);break;case"spline":L=this.drawSpline(x,O,A,M);break;case"pie":L=this.drawPie(x,A,M);break;case"point":L=this.drawPoints(x,O,A,M);break;case"radar":L=this.drawRadar(x,D,M)}this.elements.push(L)}return this.id=this.board.setId(this,"Chart"),this.elements},E.Chart.prototype=new g,E.extend(E.Chart.prototype,{drawLine:function(x,D,M,O){return O.fillcolor="none",O.highlightfillcolor="none",x.create("curve",[D,M],O)},drawSpline:function(x,D,M,O){return O.fillColor="none",O.highlightfillcolor="none",x.create("spline",[D,M],O)},drawFit:function(x,D,M,O){var A=O.degree;return A=Math.max(parseInt(A,10),1)||1,O.fillcolor="none",O.highlightfillcolor="none",x.create("functiongraph",[I.regressionPolynomial(A,D,M)],O)},drawBar:function(x,D,M,O){var A,N,L,B,V,U,j,z,$,X,Z=[],W=[],ee=function(re,Me){return function(){return D[re]()-Me*L}},ie={fixed:!0,withLabel:!1,visible:!1,name:""};if(($=a.copyAttributes(O,x.options,"chart"))&&$.width)L=$.width;else{if(D.length<=1)L=1;else for(L=D[1]-D[0],A=1;A<D.length-1;A++)L=D[A+1]-D[A]<L?D[A+1]-D[A]:L;L*=.8}for(X=a.copyAttributes(O,x.options,"chart","label"),A=0;A<D.length;A++)a.isFunction(D[A])?(B=ee(A,-.5),V=ee(A,0),U=ee(A,.5)):(B=D[A]-.5*L,V=D[A],U=D[A]+.5*L),a.isFunction(M[A])&&M[A](),j=M[A],"horizontal"===$.dir?(W[0]=x.create("point",[0,B],ie),W[1]=x.create("point",[j,B],ie),W[2]=x.create("point",[j,U],ie),W[3]=x.create("point",[0,U],ie),a.exists($.labels)&&a.exists($.labels[A])&&(X.anchorY="middle",(N=x.create("text",[j,V,$.labels[A]],X)).visProp.anchorx=function(re){return function(){return re.X()>=0?"left":"right"}}(N))):(W[0]=x.create("point",[B,0],ie),W[1]=x.create("point",[B,j],ie),W[2]=x.create("point",[U,j],ie),W[3]=x.create("point",[U,0],ie),a.exists($.labels)&&a.exists($.labels[A])&&(X.anchorX="middle",(N=x.create("text",[V,j,$.labels[A]],X)).visProp.anchory=function(re){return function(){return re.Y()>=0?"bottom":"top"}}(N))),a.isArray($.colors)&&($.fillcolor=(z=$.colors)[A%z.length]),Z[A]=x.create("polygon",W,$),a.exists($.labels)&&a.exists($.labels[A])&&(Z[A].text=N);return Z},drawPoints:function(x,D,M,O){var A,N=[],L=O.infoboxarray;for(O.fixed=!0,O.name="",A=0;A<D.length;A++)O.infoboxtext=!!L&&L[A%L.length],N[A]=x.create("point",[D[A],M[A]],O);return N},drawPie:function(x,D,M){var O,A,N=[],L=[],B=(T.sum(D),M.colors),V=M.highlightcolors,U=M.labels,j=M.radius||4,z=j,$=M.center||[0,0],X=$[0],Z=$[1],W=function(Pe,Oe,Se){return function(){var me,_e,ye,le=0;for(_e=0;_e<=Pe;_e++)le+=parseFloat(a.evaluate(D[_e]));for(me=le,_e=Pe+1;_e<D.length;_e++)me+=parseFloat(a.evaluate(D[_e]));return ye=0!==me?2*Math.PI*le/me:0,z()*Math[Oe](ye)+Se}},ee=function(Pe,Oe){var Se=-this.point1.coords.usrCoords[1]+this.point2.coords.usrCoords[1],me=-this.point1.coords.usrCoords[2]+this.point2.coords.usrCoords[2];a.exists(this.label)&&(this.label.rendNode.style.fontSize=Oe*a.evaluate(this.label.visProp.fontsize)+"px",this.label.fullUpdate()),this.point2.coords=new w(S.COORDS_BY_USER,[this.point1.coords.usrCoords[1]+Se*Pe,this.point1.coords.usrCoords[2]+me*Pe],this.board),this.fullUpdate()},ie=function(){this.highlighted||(this.highlighted=!0,this.board.highlightedObjects[this.id]=this,this.board.renderer.highlight(this),ee.call(this,1.1,2))},re=function(){this.highlighted&&(this.highlighted=!1,this.board.renderer.noHighlight(this),ee.call(this,.9090909,1))},Me={fixed:!0,withLabel:!1,visible:!1,name:""};if(!a.isArray(U))for(U=[],O=0;O<D.length;O++)U[O]="";for(a.isFunction(j)||(z=function(){return j}),M.highlightonsector=M.highlightonsector||!1,M.straightfirst=!1,M.straightlast=!1,A=x.create("point",[X,Z],Me),N[0]=x.create("point",[function(){return z()+X},function(){return Z}],Me),O=0;O<D.length;O++)N[O+1]=x.create("point",[W(O,"cos",X),W(O,"sin",Z)],Me),M.name=U[O],M.withlabel=""!==M.name,M.fillcolor=B&&B[O%B.length],M.labelcolor=B&&B[O%B.length],M.highlightfillcolor=V&&V[O%V.length],L[O]=x.create("sector",[A,N[O],N[O+1]],M),M.highlightonsector&&(L[O].hasPoint=L[O].hasPointSector),M.highlightbysize&&(L[O].highlight=ie,L[O].noHighlight=re);return{sectors:L,points:N,midpoint:A}},drawRadar:function(x,D,M){var O,A,N,L,B,V,U,j,z,$,X,Z,W,ee,ie,re,Me,Pe,Oe,Se,me,_e,ye,le,be,Ce,He,bt,dt,gt,Xe,De,Et,rn,hi,ti,Rt,ir,Pr,Fe=D.length,To=function(){var Nt,Ie,ze,_t,$e=a.evaluate(this.visProp.label.offset).slice(0);return Nt=this.point1.X(),Ie=this.point2.X(),ze=this.point1.Y(),_t=this.point2.Y(),Ie<Nt&&($e[0]=-$e[0]),_t<ze&&($e[1]=-$e[1]),this.setLabelRelativeCoords($e),new w(S.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)},qr=function(Nt,Ie){var ze,_t,$e;return ze=x.create("transform",[-(ie[Ie]-W[Ie]),0],{type:"translate"}),_t=x.create("transform",[Oe/(re[Ie]+ee[Ie]-(ie[Ie]-W[Ie])),1],{type:"scale"}),ze.melt(_t),$e=x.create("transform",[Nt],{type:"rotate"}),ze.melt($e),ze};if(Fe<=0)throw new Error("JSXGraph radar chart: no data");if(!a.exists(N=M.paramarray))throw new Error("JSXGraph radar chart: need paramArray attribute");if((L=N.length)<=1)throw new Error("JSXGraph radar chart: need more than one param in paramArray");for(O=0;O<Fe;O++)if(L!==D[O].length)throw new Error("JSXGraph radar chart: use data length equal to number of params ("+D[O].length+" != "+L+")");for(B=[],V=[],A=0;A<L;A++)B[A]=D[0][A],V[A]=B[A];for(O=1;O<Fe;O++)for(A=0;A<L;A++)D[O][A]>B[A]&&(B[A]=D[O][A]),D[O][A]<V[A]&&(V[A]=D[O][A]);for(U=[],j=[],O=0;O<Fe;O++)U[O]="",j[O]=[];for(z=[],$=[],X=M.startshiftratio||0,Z=M.endshiftratio||0,O=0;O<L;O++)z[O]=(B[O]-V[O])*X,$[O]=(B[O]-V[O])*Z;if(W=M.startshiftarray||z,ee=M.endshiftarray||$,ie=M.startarray||V,a.exists(M.start))for(O=0;O<L;O++)ie[O]=M.start;if(re=M.endarray||B,a.exists(M.end))for(O=0;O<L;O++)re[O]=M.end;if(W.length!==L)throw new Error("JSXGraph radar chart: start shifts length is not equal to number of parameters");if(ee.length!==L)throw new Error("JSXGraph radar chart: end shifts length is not equal to number of parameters");if(ie.length!==L)throw new Error("JSXGraph radar chart: starts length is not equal to number of parameters");if(re.length!==L)throw new Error("JSXGraph radar chart: snds length is not equal to number of parameters");for(Me=M.labelarray||U,Pe=M.colors,Oe=M.radius||10,Pr=M.strokewidth||1,a.exists(M.highlightonsector)||(M.highlightonsector=!1),Se={name:M.name,id:M.id,strokewidth:Pr,polystrokewidth:M.polystrokewidth||Pr,strokecolor:M.strokecolor||"black",straightfirst:!1,straightlast:!1,fillcolor:M.fillColor||"#FFFF88",fillopacity:M.fillOpacity||.4,highlightfillcolor:M.highlightFillColor||"#FF7400",highlightstrokecolor:M.highlightStrokeColor||"black",gradient:M.gradient||"none"},_e=(me=M.center||[0,0])[0],le=x.create("point",[_e,ye=me[1]],{name:"",fixed:!0,withlabel:!1,visible:!1}),Math,Math,Ce=be=M.startangle||0,He=[],bt=[],O=0;O<L;O++)for(Ce+=2*Math.PI/L,gt=Oe*Math.cos(Ce)+_e,Xe=Oe*Math.sin(Ce)+ye,He[O]=x.create("point",[gt,Xe],{name:"",fixed:!0,withlabel:!1,visible:!1}),bt[O]=x.create("line",[le,He[O]],{name:N[O],strokeColor:Se.strokecolor,strokeWidth:Se.strokewidth,strokeOpacity:1,straightFirst:!1,straightLast:!1,withLabel:!0,highlightStrokeColor:Se.highlightstrokecolor}),bt[O].getLabelAnchor=To,dt=qr(Ce,O),A=0;A<D.length;A++)j[A][O]=x.create("point",[D[A][O],0],{name:"",fixed:!0,withlabel:!1,visible:!1}),j[A][O].addTransform(j[A][O],dt);for(De=[],O=0;O<Fe;O++)for(Se.labelcolor=Pe&&Pe[O%Pe.length],Se.strokecolor=Pe&&Pe[O%Pe.length],Se.fillcolor=Pe&&Pe[O%Pe.length],De[O]=x.create("polygon",j[O],{withLines:!0,withLabel:!1,fillColor:Se.fillcolor,fillOpacity:Se.fillopacity,highlightFillColor:Se.highlightfillcolor}),A=0;A<L;A++)De[O].borders[A].setAttribute("strokecolor:"+Pe[O%Pe.length]),De[O].borders[A].setAttribute("strokewidth:"+Se.polystrokewidth);switch(M.legendposition||"none"){case"right":this.legend=x.create("legend",[_e+Oe+(M.legendleftoffset||2),ye+Oe-(M.legendtopoffset||1)],{labels:Me,colors:Pe});break;case"none":break;default:E.debug("Unknown legend position")}if(Et=[],M.showcircles){for(rn=[],O=0;O<6;O++)rn[O]=20*O;if(rn[0]="0",(ti=(hi=M.circlelabelarray||rn).length)<2)throw new Error("JSXGraph radar chart: too less circles in circleLabelArray");for(Rt=[],dt=qr(be+Math.PI/L,0),Se.fillcolor="none",Se.highlightfillcolor="none",Se.strokecolor=M.strokecolor||"black",Se.strokewidth=M.circlestrokewidth||.5,Se.layer=0,ir=(re[0]-ie[0])/(ti-1),O=0;O<ti;O++)Rt[O]=x.create("point",[ie[0]+O*ir,0],{name:hi[O],size:0,fixed:!0,withLabel:!0,visible:!0}),Rt[O].addTransform(Rt[O],dt),Et[O]=x.create("circle",[le,Rt[O]],Se)}return this.rendNode=De[0].rendNode,{circles:Et,lines:bt,points:j,midpoint:le,polygons:De}},updateRenderer:function(){return this},update:function(){return this.needsUpdate&&this.updateDataArray(),this},updateDataArray:function(){return this}}),E.createChart=function(x,D,M){var O,A,N,L,B,V,U,j,z,$,X,Z,W,ee,ie,re,Me=[],Pe=u.isBrowser?x.document.getElementById(D[0]):null;if(1===D.length&&a.isString(D[0])){if(a.exists(Pe)){if(z=a.copyAttributes(M,x.options,"chart"),O=(Pe=(new m).loadFromTable(D[0],z.withheaders,z.withheaders)).data,B=Pe.columnHeaders,A=Pe.rowHeaders,$=z.width,X=z.name,Z=z.strokecolor,W=z.fillcolor,ee=z.highlightstrokecolor,ie=z.highlightfillcolor,x.suspendUpdate(),re=O.length,j=[],z.rows&&a.isArray(z.rows)){for(N=0;N<re;N++)for(L=0;L<z.rows.length;L++)if(z.rows[L]===N||z.withheaders&&z.rows[L]===A[N]){j.push(O[N]);break}}else j=O;for(re=j.length,N=0;N<re;N++){if(U=[],z.chartstyle&&-1!==z.chartstyle.indexOf("bar")){for(U.push(1-(V=$||.8)/2+(N+.5)*V/re),L=1;L<j[N].length;L++)U.push(U[L-1]+1);z.width=V/re}X&&X.length===re?z.name=X[N]:z.withheaders&&(z.name=B[N]),z.strokecolor=Z&&Z.length===re?Z[N]:p.hsv2rgb((N+1)/re*360,.9,.6),z.fillcolor=W&&W.length===re?W[N]:p.hsv2rgb((N+1)/re*360,.9,1),z.highlightstrokecolor=ee&&ee.length===re?ee[N]:p.hsv2rgb((N+1)/re*360,.9,1),z.highlightfillcolor=ie&&ie.length===re?ie[N]:p.hsv2rgb((N+1)/re*360,.9,.6),z.chartstyle&&-1!==z.chartstyle.indexOf("bar")?Me.push(new E.Chart(x,[U,j[N]],z)):Me.push(new E.Chart(x,[j[N]],z))}x.unsuspendUpdate()}return Me}return z=a.copyAttributes(M,x.options,"chart"),new E.Chart(x,D,z)},E.registerElement("chart",E.createChart),E.Legend=function(x,D,M){var O;if(this.constructor(),O=a.copyAttributes(M,x.options,"legend"),this.board=x,this.coords=new w(S.COORDS_BY_USER,D,this.board),this.myAtts={},this.label_array=O.labelarray||O.labels,this.color_array=O.colorarray||O.colors,this.lines=[],this.myAtts.strokewidth=O.strokewidth||5,this.myAtts.straightfirst=!1,this.myAtts.straightlast=!1,this.myAtts.withlabel=!0,this.myAtts.fixed=!0,this.style=O.legendstyle||O.style,"vertical"!==this.style)throw new Error("JSXGraph: Unknown legend style: "+this.style);this.drawVerticalLegend(x,O)},E.Legend.prototype=new g,E.Legend.prototype.drawVerticalLegend=function(x,D){var M,O=D.linelength||1,A=(D.rowheight||20)/this.board.unitY,N=function(){return this.setLabelRelativeCoords(this.visProp.label.offset),new w(S.COORDS_BY_USER,[this.point2.X(),this.point2.Y()],this.board)};for(M=0;M<this.label_array.length;M++)this.myAtts.name=this.label_array[M],this.myAtts.strokecolor=this.color_array[M%this.color_array.length],this.myAtts.highlightstrokecolor=this.color_array[M%this.color_array.length],this.myAtts.label={offset:[10,0],strokeColor:this.color_array[M%this.color_array.length],strokeWidth:this.myAtts.strokewidth},this.lines[M]=x.create("line",[[this.coords.usrCoords[1],this.coords.usrCoords[2]-M*A],[this.coords.usrCoords[1]+O,this.coords.usrCoords[2]-M*A]],this.myAtts),this.lines[M].getLabelAnchor=N,this.lines[M].prepareUpdate().update().updateVisibility(a.evaluate(this.lines[M].visProp.visible)).updateRenderer()},E.createLegend=function(x,D,M){if(!a.exists(D)||2!==D.length)throw new Error("JSXGraph: Legend element needs two numbers as parameters");return new E.Legend(x,D,M)},E.registerElement("legend",E.createLegend),{Chart:E.Chart,Legend:E.Legend,createChart:E.createChart,createLegend:E.createLegend}}),define("base/turtle",["jxg","base/constants","base/element","utils/type"],function(E,I,T,S){"use strict";return E.Turtle=function(w,g,m){var p,a,u;return this.constructor(w,m,I.OBJECT_TYPE_TURTLE,I.OBJECT_CLASS_OTHER),this.turtleIsHidden=!1,this.board=w,this.visProp.curveType="plot",this._attributes=S.copyAttributes(this.visProp,w.options,"turtle"),delete this._attributes.id,p=0,a=0,u=90,0!==g.length&&(3===g.length?(p=g[0],a=g[1],u=g[2]):2===g.length?S.isArray(g[0])?(p=g[0][0],a=g[0][1],u=g[1]):(p=g[0],a=g[1]):(p=g[0][0],a=g[0][1])),this.init(p,a,u),this.methodMap=S.deepCopy(this.methodMap,{forward:"forward",fd:"forward",back:"back",bk:"back",right:"right",rt:"right",left:"left",lt:"left",penUp:"penUp",pu:"penUp",penDown:"penDown",pd:"penDown",clearScreen:"clearScreen",cs:"clearScreen",clean:"clean",setPos:"setPos",home:"home",hideTurtle:"hideTurtle",ht:"hideTurtle",showTurtle:"showTurtle",st:"showTurtle",penSize:"setPenSize",penColor:"setPenColor",pushTurtle:"pushTurtle",push:"pushTurtle",popTurtle:"popTurtle",pop:"popTurtle",lookTo:"lookTo",pos:"pos",moveTo:"moveTo",X:"X",Y:"Y"}),this},E.Turtle.prototype=new T,E.extend(E.Turtle.prototype,{init:function(w,g,m){var p={fixed:!0,name:"",visible:!1,withLabel:!1};this.arrowLen=20/Math.sqrt(this.board.unitX*this.board.unitX+this.board.unitY*this.board.unitY),this.pos=[w,g],this.isPenDown=!0,this.dir=90,this.stack=[],this.objects=[],this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.turtle=this.board.create("point",this.pos,p),this.objects.push(this.turtle),this.turtle2=this.board.create("point",[this.pos[0],this.pos[1]+this.arrowLen],p),this.objects.push(this.turtle2),this.visProp.arrow.lastArrow=!0,this.visProp.arrow.straightFirst=!1,this.visProp.arrow.straightLast=!1,this.arrow=this.board.create("line",[this.turtle,this.turtle2],this.visProp.arrow),this.objects.push(this.arrow),this.subs={arrow:this.arrow},this.inherits.push(this.arrow),this.right(90-m),this.board.update()},forward:function(w){if(0===w)return this;var g,m=w*Math.cos(this.dir*Math.PI/180),p=w*Math.sin(this.dir*Math.PI/180);return this.turtleIsHidden||((g=this.board.create("transform",[m,p],{type:"translate"})).applyOnce(this.turtle),g.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]+=m,this.pos[1]+=p,this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update(),this},back:function(w){return this.forward(-w)},right:function(w){return this.dir-=w,this.dir%=360,this.turtleIsHidden||this.board.create("transform",[-w*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2),this.board.update(),this},left:function(w){return this.right(-w)},penUp:function(){return this.isPenDown=!1,this},penDown:function(){return this.isPenDown=!0,this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this},clean:function(){var w,g;for(w=0;w<this.objects.length;w++)(g=this.objects[w]).type===I.OBJECT_TYPE_CURVE&&(this.board.removeObject(g),this.objects.splice(w,1));return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},clearScreen:function(){var w,m=this.objects.length;for(w=0;w<m;w++)this.board.removeObject(this.objects[w]);return this.init(0,0,90),this},setPos:function(w,g){return this.pos=S.isArray(w)?w:[w,g],this.turtleIsHidden||(this.turtle.setPositionDirectly(I.COORDS_BY_USER,[w,g]),this.turtle2.setPositionDirectly(I.COORDS_BY_USER,[w,g+this.arrowLen]),this.board.create("transform",[-(this.dir-90)*Math.PI/180,this.turtle],{type:"rotate"}).applyOnce(this.turtle2)),this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve),this.board.update(),this},setPenSize:function(w){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeWidth",w)),this.objects.push(this.curve),this},setPenColor:function(w){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("strokeColor",w)),this.objects.push(this.curve),this},setHighlightPenColor:function(w){return this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this.copyAttr("highlightStrokeColor",w)),this.objects.push(this.curve),this},setAttribute:function(w){var g,m,p,a=this.objects.length;for(g=0;g<a;g++)(m=this.objects[g]).type===I.OBJECT_TYPE_CURVE&&m.setAttribute(w);return p=this.visProp.id,this.visProp=S.deepCopy(this.curve.visProp),this.visProp.id=p,this._attributes=S.deepCopy(this.visProp),delete this._attributes.id,this},copyAttr:function(w,g){return this._attributes[w.toLowerCase()]=g,this._attributes},showTurtle:function(){return this.turtleIsHidden=!1,this.arrow.setAttribute({visible:!0}),this.visProp.arrow.visible=!1,this.setPos(this.pos[0],this.pos[1]),this.board.update(),this},hideTurtle:function(){return this.turtleIsHidden=!0,this.arrow.setAttribute({visible:!1}),this.visProp.arrow.visible=!1,this.board.update(),this},home:function(){return this.pos=[0,0],this.setPos(this.pos[0],this.pos[1]),this},pushTurtle:function(){return this.stack.push([this.pos[0],this.pos[1],this.dir]),this},popTurtle:function(){var w=this.stack.pop();return this.pos[0]=w[0],this.pos[1]=w[1],this.dir=w[2],this.setPos(this.pos[0],this.pos[1]),this},lookTo:function(w){var u;return S.isArray(w)?(u=Math.atan2(w[1]-this.pos[1],w[0]-this.pos[0]),this.right(this.dir-180*u/Math.PI)):S.isNumber(w)&&this.right(this.dir-w),this},moveTo:function(w){var p;return S.isArray(w)&&(this.turtleIsHidden||((p=this.board.create("transform",[w[0]-this.pos[0],w[1]-this.pos[1]],{type:"translate"})).applyOnce(this.turtle),p.applyOnce(this.turtle2)),this.isPenDown&&this.curve.dataX.length>=8192&&(this.curve=this.board.create("curve",[[this.pos[0]],[this.pos[1]]],this._attributes),this.objects.push(this.curve)),this.pos[0]=w[0],this.pos[1]=w[1],this.isPenDown&&(this.curve.dataX.push(this.pos[0]),this.curve.dataY.push(this.pos[1])),this.board.update()),this},fd:function(w){return this.forward(w)},bk:function(w){return this.back(w)},lt:function(w){return this.left(w)},rt:function(w){return this.right(w)},pu:function(){return this.penUp()},pd:function(){return this.penDown()},ht:function(){return this.hideTurtle()},st:function(){return this.showTurtle()},cs:function(){return this.clearScreen()},push:function(){return this.pushTurtle()},pop:function(){return this.popTurtle()},evalAt:function(w,g){var m,p,a,c=this.objects.length;for(m=0,p=0;m<c;m++)if((a=this.objects[m]).elementClass===I.OBJECT_CLASS_CURVE){if(p<=w&&w<p+a.numberPoints)return a[g](w-p);p+=a.numberPoints}return this[g]()},X:function(w){return S.exists(w)?this.evalAt(w,"X"):this.pos[0]},Y:function(w){return S.exists(w)?this.evalAt(w,"Y"):this.pos[1]},Z:function(w){return 1},minX:function(){return 0},maxX:function(){var w,g=this.objects.length,m=0;for(w=0;w<g;w++)this.objects[w].elementClass===I.OBJECT_CLASS_CURVE&&(m+=this.objects[w].numberPoints);return m},hasPoint:function(w,g){var m,p;for(m=0;m<this.objects.length;m++)if((p=this.objects[m]).type===I.OBJECT_TYPE_CURVE&&p.hasPoint(w,g))return!0;return!1}}),E.createTurtle=function(w,g,m){var p;return g=g||[],p=S.copyAttributes(m,w.options,"turtle"),new E.Turtle(w,g,p)},E.registerElement("turtle",E.createTurtle),{Turtle:E.Turtle,createTurtle:E.createTurtle}}),define("base/ticks",["jxg","math/math","math/geometry","math/numerics","base/constants","base/element","base/coords","utils/type","base/text"],function(E,I,T,S,w,g,m,p,a){"use strict";return E.Ticks=function(u,c,l){if(this.constructor(u.board,l,w.OBJECT_TYPE_TICKS,w.OBJECT_CLASS_OTHER),this.line=u,this.board=this.line.board,this.ticksFunction=null,this.fixedTicks=null,this.equidistant=!1,this.labelsData=[],p.isFunction(c))throw this.ticksFunction=c,new Error("Function arguments are no longer supported.");p.isArray(c)?this.fixedTicks=c:((Math.abs(c)<I.eps||c<0)&&(c=l.defaultdistance),this.ticksFunction=this.makeTicksFunction(c),this.equidistant=!0),this.minTicksDistance=l.minticksdistance,this.ticks=[],this.ticksDelta=1,this.labels=[],this.labelData=[],this.labelCounter=0,this.id=this.line.addTicks(this),this.elType="ticks",this.inherits.push(this.labels),this.board.setId(this,"Ti")},E.Ticks.prototype=new g,E.extend(E.Ticks.prototype,{makeTicksFunction:function(u){return function(){var c,l,f;return p.evaluate(this.visProp.insertticks)?((f=(l=this.getLowerAndUpperBounds(this.getZeroCoordinates(),"ticksdistance")).upper-l.lower)<=6*(c=Math.pow(10,Math.floor(Math.log(.6*f)/Math.LN10)))&&(c*=.5),c):u}},hasPoint:function(u,c){var l,f,v,h=this.ticks&&this.ticks.length||0;if(v=p.isObject(p.evaluate(this.visProp.precision))?p.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,v+=.5*p.evaluate(this.visProp.strokewidth),!p.evaluate(this.line.visProp.scalable)||this.line.elementClass===w.OBJECT_CLASS_CURVE||0!==this.line.stdform[1]&&0!==this.line.stdform[2]&&this.line.type!==w.OBJECT_TYPE_AXIS)return!1;for(l=0;l<h;l++)if((f=this.ticks[l])[2]&&!(0===this.line.stdform[1]&&Math.abs(f[0][0]-this.line.point1.coords.scrCoords[1])<I.eps||0===this.line.stdform[2]&&Math.abs(f[1][0]-this.line.point1.coords.scrCoords[2])<I.eps)&&(Math.abs(f[0][0]-f[0][1])>=1||Math.abs(f[1][0]-f[1][1])>=1))if(0===this.line.stdform[1]){if(Math.abs(c-.5*(f[1][0]+f[1][1]))<2*v&&f[0][0]-v<u&&u<f[0][1]+v)return!0}else if(0===this.line.stdform[2]&&Math.abs(u-.5*(f[0][0]+f[0][1]))<2*v&&f[1][0]-v<c&&c<f[1][1]+v)return!0;return!1},setPositionDirectly:function(u,c,l){var f,v,_=new m(u,c,this.board),h=new m(u,l,this.board),y=this.board.getBoundingBox();return this.line.type===w.OBJECT_TYPE_AXIS&&p.evaluate(this.line.visProp.scalable)?(Math.abs(this.line.stdform[1])<I.eps&&Math.abs(_.usrCoords[1]*h.usrCoords[1])>I.eps?(y[0]*=f=h.usrCoords[1]/_.usrCoords[1],y[2]*=f,this.board.setBoundingBox(y,this.board.keepaspectratio,"update")):Math.abs(this.line.stdform[2])<I.eps&&Math.abs(_.usrCoords[2]*h.usrCoords[2])>I.eps&&(y[3]*=v=h.usrCoords[2]/_.usrCoords[2],y[1]*=v,this.board.setBoundingBox(y,this.board.keepaspectratio,"update")),this):this},calculateTicksCoordinates:function(){var u,c,l,f;if(!(this.line.elementClass===w.OBJECT_CLASS_LINE&&(this.setTicksSizeVariables(),Math.abs(this.dx)<I.eps&&Math.abs(this.dy)<I.eps)))return u=this.getZeroCoordinates(),c=this.line.elementClass===w.OBJECT_CLASS_LINE?this.getLowerAndUpperBounds(u):{lower:this.line.minX(),upper:this.line.maxX()},"polar"===p.evaluate(this.visProp.type)&&(f=this.board.getBoundingBox(),l=Math.max(Math.sqrt(f[0]*f[0]+f[1]*f[1]),Math.sqrt(f[2]*f[2]+f[3]*f[3])),c.upper=l),this.ticks=[],this.labelsData=[],this.equidistant?this.generateEquidistantTicks(u,c):this.generateFixedTicks(u,c),this},setTicksSizeVariables:function(u){var c,l,f,v,_=.5*p.evaluate(this.visProp.majorheight),h=.5*p.evaluate(this.visProp.minorheight);p.exists(u)?(l=this.line.minX(),f=this.line.maxX(),(v=this.line.points.length)<2?(this.dxMaj=0,this.dyMaj=0):I.relDif(u,l)<I.eps?(this.dxMaj=this.line.points[0].usrCoords[2]-this.line.points[1].usrCoords[2],this.dyMaj=this.line.points[1].usrCoords[1]-this.line.points[0].usrCoords[1]):I.relDif(u,f)<I.eps?(this.dxMaj=this.line.points[v-2].usrCoords[2]-this.line.points[v-1].usrCoords[2],this.dyMaj=this.line.points[v-1].usrCoords[1]-this.line.points[v-2].usrCoords[1]):(this.dxMaj=-S.D(this.line.Y)(u),this.dyMaj=S.D(this.line.X)(u))):(this.dxMaj=this.line.stdform[1],this.dyMaj=this.line.stdform[2]),this.dxMin=this.dxMaj,this.dyMin=this.dyMaj,this.dx=this.dxMaj,this.dy=this.dyMaj,c=Math.sqrt(this.dxMaj*this.dxMaj*this.board.unitX*this.board.unitX+this.dyMaj*this.dyMaj*this.board.unitY*this.board.unitY),this.dxMaj*=_/c*this.board.unitX,this.dyMaj*=_/c*this.board.unitY,this.dxMin*=h/c*this.board.unitX,this.dyMin*=h/c*this.board.unitY,this.minStyle=p.evaluate(this.visProp.minorheight)<0?"infinite":"finite",this.majStyle=p.evaluate(this.visProp.majorheight)<0?"infinite":"finite"},getZeroCoordinates:function(){var u,c,l,f,v,_,h,y,b=p.evaluate(this.visProp.anchor);return this.line.elementClass===w.OBJECT_CLASS_LINE?this.line.type===w.OBJECT_TYPE_AXIS?T.projectPointToLine({coords:{usrCoords:[1,0,0]}},this.line,this.board):(l=this.line.point1.coords.usrCoords[0],u=this.line.point1.coords.usrCoords[1],c=this.line.point1.coords.usrCoords[2],_=this.line.point2.coords.usrCoords[0],f=this.line.point2.coords.usrCoords[1],v=this.line.point2.coords.usrCoords[2],"right"===b?this.line.point2.coords:"middle"===b?new m(w.COORDS_BY_USER,[.5*(l+_),.5*(u+f),.5*(c+v)],this.board):p.isNumber(b)?new m(w.COORDS_BY_USER,[l+(_-l)*b,u+(f-u)*b,c+(v-c)*b],this.board):this.line.point1.coords):(h=this.line.minX(),y=this.line.maxX(),"right"===b?y:"middle"===b?.5*(h+y):p.isNumber(b)?h*(1-b)+y*b:h)},getLowerAndUpperBounds:function(u,c){var l,f,v,_,h,y,b,x,D,M,O=p.evaluate(this.line.visProp.straightfirst),A=p.evaluate(this.line.visProp.straightlast),N=p.evaluate(this.visProp.includeboundaries);return this.line.elementClass===w.OBJECT_CLASS_CURVE?{lower:this.line.minX(),upper:this.line.maxX()}:(h=new m(w.COORDS_BY_USER,this.line.point1.coords.usrCoords,this.board),y=new m(w.COORDS_BY_USER,this.line.point2.coords.usrCoords,this.board),b=Math.abs(h.usrCoords[0])>=I.eps&&h.scrCoords[1]>=0&&h.scrCoords[1]<=this.board.canvasWidth&&h.scrCoords[2]>=0&&h.scrCoords[2]<=this.board.canvasHeight,x=Math.abs(y.usrCoords[0])>=I.eps&&y.scrCoords[1]>=0&&y.scrCoords[1]<=this.board.canvasWidth&&y.scrCoords[2]>=0&&y.scrCoords[2]<=this.board.canvasHeight,p.exists(c)||"tickdistance"===c?T.calcStraight(this.line,h,y,p.evaluate(this.line.visProp.margin)):T.calcLineDelimitingPoints(this.line,h,y),v=p.evaluate(this.line.visProp.firstarrow),_=p.evaluate(this.line.visProp.lastarrow),(v||_)&&(this.board.renderer.getPositionArrowHead(this.line,h,y,p.evaluate(this.line.visProp.strokewidth)),v&&h.setCoordinates(w.COORDS_BY_SCREEN,[h.scrCoords[1],h.scrCoords[2]]),_&&y.setCoordinates(w.COORDS_BY_SCREEN,[y.scrCoords[1],y.scrCoords[2]])),(D=this.getDistanceFromZero(u,h))<(M=this.getDistanceFromZero(u,y))?(l=D,O||!b||N||(l+=I.eps),f=M,A||!x||N||(f-=I.eps)):M<D?(l=M,A||!x||N||(l+=I.eps),f=D,O||!b||N||(f-=I.eps)):(l=0,f=0),{lower:l,upper:f})},getDistanceFromZero:function(u,c){var l,f,h;return l=this.line.point1.coords,f=this.line.point2.coords,h=u.distance(w.COORDS_BY_USER,c),I.innerProduct([f.usrCoords[0]-l.usrCoords[0],f.usrCoords[1]-l.usrCoords[1],f.usrCoords[2]-l.usrCoords[2]],[c.usrCoords[0]-u.usrCoords[0],c.usrCoords[1]-u.usrCoords[1],c.usrCoords[2]-u.usrCoords[2]],3)<0&&(h*=-1),h},generateEquidistantTicks:function(u,c){var l,f,v=I.eps,_=this.equidistant?this.ticksFunction(1):this.ticksDelta,h=p.evaluate(this.visProp.insertticks),y=p.evaluate(this.visProp.minorticks);if(this.line.elementClass===w.OBJECT_CLASS_LINE&&(f=this.getXandYdeltas()),_*=p.evaluate(this.visProp.scale),h&&this.minTicksDistance>I.eps?(_=this.adjustTickDistance(_,u,f),_/=y+1):h||(_/=y+1),this.ticksDelta=_,!(_<I.eps)){for(l=0,p.evaluate(this.visProp.drawzero)||(l=_);l<=c.upper+v&&(l>=c.lower-v&&this.processTickPosition(u,l,_,f),!(c.upper-(l+=_)>1e4*_)););for(l=-_;l>=c.lower-v&&(l<=c.upper+v&&this.processTickPosition(u,l,_,f),!((l-=_)-c.lower>1e4*_)););}},adjustTickDistance:function(u,c,l){var _,h=1,y=p.evaluate(this.visProp.minorticks);if(this.line.elementClass===w.OBJECT_CLASS_CURVE)return u;if(this.getLowerAndUpperBounds(c,"ticksdistance"),_=c.distance(w.COORDS_BY_SCREEN,new m(w.COORDS_BY_USER,[c.usrCoords[1]+l.x*u,c.usrCoords[2]+l.y*u],this.board)),0===u)return 0;for(;_/(y+1)<this.minTicksDistance;)u*=1===h?2:5,h*=-1,_=c.distance(w.COORDS_BY_SCREEN,new m(w.COORDS_BY_USER,[c.usrCoords[1]+l.x*u,c.usrCoords[2]+l.y*u],this.board));return u},processTickPosition:function(u,c,l,f){var v,_,h,y,b,x=p.evaluate(this.visProp.ticksperlabel),D=null;this.line.elementClass===w.OBJECT_CLASS_LINE?(v=u.usrCoords[1]+c*f.x,_=u.usrCoords[2]+c*f.y):(v=this.line.X(u+c),_=this.line.Y(u+c)),h=new m(w.COORDS_BY_USER,[v,_],this.board),this.line.elementClass===w.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(D=u+c),h.major=Math.round(c/l)%(p.evaluate(this.visProp.minorticks)+1)==0,x||(x=p.evaluate(this.visProp.minorticks)+1),b=Math.round(c/l)%x==0,3===(y=this.createTickPath(h,h.major)).length&&(this.ticks.push(y),b&&p.evaluate(this.visProp.drawlabels)?this.labelsData.push(this.generateLabelData(this.generateLabelText(h,u,D),h,this.ticks.length)):this.labelsData.push(null))},generateFixedTicks:function(u,c){var l,f,v,_,h,y,b,x,D=I.eps,M=p.isArray(this.visProp.labels),O=p.evaluate(this.visProp.drawlabels);for(this.line.elementClass===w.OBJECT_CLASS_LINE&&(x=this.getXandYdeltas()),v=0;v<this.fixedTicks.length;v++)this.line.elementClass===w.OBJECT_CLASS_LINE?(h=u.usrCoords[1]+(b=this.fixedTicks[v])*x.x,y=u.usrCoords[2]+b*x.y):(h=this.line.X(b=u+this.fixedTicks[v]),y=this.line.Y(b)),l=new m(w.COORDS_BY_USER,[h,y],this.board),this.line.elementClass===w.OBJECT_CLASS_CURVE&&this.setTicksSizeVariables(b),3===(_=this.createTickPath(l,!0)).length&&b>=c.lower-D&&b<=c.upper+D&&(this.ticks.push(_),O&&(M||p.exists(this.visProp.labels[v]))?(f=M?p.evaluate(this.visProp.labels[v]):b,this.labelsData.push(this.generateLabelData(this.generateLabelText(l,u,f),l,v))):this.labelsData.push(null))},getXandYdeltas:function(){var u,c,l=this.line.point1.Dist(this.line.point2);return this.line.type===w.OBJECT_TYPE_AXIS?((u=this.line.point1.coords.usrCoords)[1]>(c=this.line.point2.coords.usrCoords)[1]||Math.abs(u[1]-c[1])<I.eps&&u[2]>c[2])&&(u=this.line.point2.coords.usrCoords,c=this.line.point1.coords.usrCoords):(u=this.line.point1.coords.usrCoords,c=this.line.point2.coords.usrCoords),{x:(c[1]-u[1])/l,y:(c[2]-u[2])/l}},_isInsideCanvas:function(u,c,l){var f=this.board.canvasWidth,v=this.board.canvasHeight;return void 0===l&&(l=0),u[0]>=l&&u[0]<=f-l&&c[0]>=l&&c[0]<=v-l||u[1]>=l&&u[1]<=f-l&&c[1]>=l&&c[1]<=v-l},createTickPath:function(u,c){var l,f,v,_,h,y,b,x,D,M,O,A,N,L,B=[-2e6,-2e6],V=[-2e6,-2e6];if(c?(_=this.dxMaj,h=this.dyMaj,D=this.majStyle):(_=this.dxMin,h=this.dyMin,D=this.minStyle),f=[-h*(l=u.scrCoords)[1]-_*l[2],h,_],c&&"polar"===p.evaluate(this.visProp.type)){if(A=this.board.getBoundingBox(),L=(N=2*Math.PI)/180,l=u.usrCoords,(O=Math.sqrt(l[1]*l[1]+l[2]*l[2]))<Math.max(Math.sqrt(A[0]*A[0]+A[1]*A[1]),Math.sqrt(A[2]*A[2]+A[3]*A[3]))){for(B=[],V=[],M=0;M<=N;M+=L)B.push(this.board.origin.scrCoords[1]+O*Math.cos(M)*this.board.unitX),V.push(this.board.origin.scrCoords[2]+O*Math.sin(M)*this.board.unitY);return[B,V,c]}}else if("infinite"===D?(v=T.meetLineBoard(f,this.board),B[0]=v[0].scrCoords[1],B[1]=v[1].scrCoords[1],V[0]=v[0].scrCoords[2],V[1]=v[1].scrCoords[2]):(x=">"===p.evaluate(this.visProp.face)?Math.PI/4:"<"===p.evaluate(this.visProp.face)?-Math.PI/4:0,y=Math.cos(x)*_-Math.sin(x)*h,b=Math.sin(x)*_+Math.cos(x)*h,B[0]=l[1]+y*p.evaluate(this.visProp.tickendings[0]),V[0]=l[2]-b*p.evaluate(this.visProp.tickendings[0]),B[1]=l[1],V[1]=l[2],x=-x,y=Math.cos(x)*_-Math.sin(x)*h,b=Math.sin(x)*_+Math.cos(x)*h,B[2]=l[1]-y*p.evaluate(this.visProp.tickendings[1]),V[2]=l[2]+b*p.evaluate(this.visProp.tickendings[1])),this._isInsideCanvas(B,V))return[B,V,c];return[]},formatLabelText:function(u){var c,l,f=p.evaluate(this.visProp.scalesymbol);return p.isNumber(u)?(((c=(Math.round(1e11*u)/1e11).toString()).length>p.evaluate(this.visProp.maxlabellength)||-1!==c.indexOf("e"))&&(l=p.evaluate(this.visProp.digits),3!==p.evaluate(this.visProp.precision)&&3===l&&(l=p.evaluate(this.visProp.precision)),c=u.toExponential(l).toString()),p.evaluate(this.visProp.beautifulscientificticklabels)&&(c=this.beautifyScientificNotationLabel(c)),c.indexOf(".")>-1&&-1===c.indexOf("e")&&(c=(c=c.replace(/0+$/,"")).replace(/\.$/,""))):c=u.toString(),f.length>0&&("1"===c?c=f:"-1"===c?c="-"+f:"0"!==c&&(c+=f)),p.evaluate(this.visProp.useunicodeminus)&&(c=c.replace(/-/g,"\u2212")),c},beautifyScientificNotationLabel:function(u){return-1===u.indexOf("e")?u:(parseFloat(u.substring(0,u.indexOf("e")))+u.substring(u.indexOf("e"))).replace(/e(.*)$/g,function(c,l){return"\u202210"+l.replace(/-/g,"\u207b").replace(/\+/g,"").replace(/0/g,"\u2070").replace(/1/g,"\xb9").replace(/2/g,"\xb2").replace(/3/g,"\xb3").replace(/4/g,"\u2074").replace(/5/g,"\u2075").replace(/6/g,"\u2076").replace(/7/g,"\u2077").replace(/8/g,"\u2078").replace(/9/g,"\u2079")})},generateLabelText:function(u,c,l){var f;if(!p.exists(l)){if(f=this.getDistanceFromZero(c,u),Math.abs(f)<I.eps)return"0";l=f/p.evaluate(this.visProp.scale)}return this.formatLabelText(l)},generateLabelData:function(u,c,l){var f,v,_,h;return _=void 0===(h=p.evaluate(this.visProp.label.fontsize))?12:h,this._isInsideCanvas(f=[c.scrCoords[1],c.scrCoords[1]],v=[c.scrCoords[2],c.scrCoords[2]],_*=.5)?(f=p.evaluate(this.visProp.label.offset[0]),v=p.evaluate(this.visProp.label.offset[1]),{x:c.usrCoords[1]+f/this.board.unitX,y:c.usrCoords[2]+v/this.board.unitY,t:u,i:l}):null},update:function(){return this.needsUpdate&&0!==this.board.canvasWidth&&0!==this.board.canvasHeight&&this.calculateTicksCoordinates(),this},updateRenderer:function(){return this.needsUpdate?(this.visPropCalc.visible&&this.board.renderer.updateTicks(this),this.updateRendererLabels(),this.setDisplayRendNode(),this.needsUpdate=!1,this):this},updateRendererLabels:function(){var u,c,l,f,v,_,h,y;for(l=this.labelsData.length,f=this.labels.length,u=0,c=0;u<l;u++)null!==this.labelsData[u]&&(h=this.labelsData[u],c<f?((_=this.labels[c]).setText(h.t),_.setCoords(h.x,h.y),c++):(this.labelCounter+=1,(v=p.deepCopy(v={isLabel:!0,layer:this.board.options.layer.line,highlightStrokeColor:this.board.options.text.strokeColor,highlightStrokeWidth:this.board.options.text.strokeWidth,highlightStrokeOpacity:this.board.options.text.strokeOpacity,priv:this.visProp.priv},this.visProp.label)).id=this.id+h.i+"Label"+this.labelCounter,_=a.createText(this.board,[h.x,h.y,h.t],v),this.addChild(_),_.setParents(this),_.isDraggable=!1,_.dump=!1,this.labels.push(_)),"inherit"===(y=p.evaluate(this.visProp.label.visible))&&(y=this.visPropCalc.visible),_.prepareUpdate().updateVisibility(y).updateRenderer(),_.distanceX=p.evaluate(this.visProp.label.offset[0]),_.distanceY=p.evaluate(this.visProp.label.offset[1]));for(c=l=c;c<f;c++)this.board.renderer.display(this.labels[c],!1),this.labels[c].visProp.visible=this.labels[c].visPropCalc.visible=!1;return this},hideElement:function(){var u;for(E.deprecated("Element.hideElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!1,this.board.renderer.display(this,!1),u=0;u<this.labels.length;u++)p.exists(this.labels[u])&&this.labels[u].hideElement();return this},showElement:function(){var u;for(E.deprecated("Element.showElement()","Element.setDisplayRendNode()"),this.visPropCalc.visible=!0,this.board.renderer.display(this,!1),u=0;u<this.labels.length;u++)p.exists(this.labels[u])&&this.labels[u].showElement();return this}}),E.createTicks=function(u,c,l){var f,v,_=p.copyAttributes(l,u.options,"ticks");if(v=c.length<2?_.ticksdistance:c[1],c[0].elementClass!==w.OBJECT_CLASS_LINE&&c[0].elementClass!==w.OBJECT_CLASS_CURVE)throw new Error("JSXGraph: Can't create Ticks with parent types '"+typeof c[0]+"'.");return f=new E.Ticks(c[0],v,_),p.isFunction(_.generatelabelvalue)&&(f.generateLabelText=_.generatelabelvalue),p.isFunction(_.generatelabeltext)&&(f.generateLabelText=_.generatelabeltext),f.setParents(c[0]),f.isDraggable=!0,f.fullUpdate(c[0].visPropCalc.visible),f},E.createHatchmark=function(u,c,l){var f,v,_,h,y,b=[],x=p.copyAttributes(l,u.options,"hatch");if(c[0].elementClass!==w.OBJECT_CLASS_LINE&&c[0].elementClass!==w.OBJECT_CLASS_CURVE||"number"!=typeof c[1])throw new Error("JSXGraph: Can't create Hatch mark with parent types '"+typeof c[0]+"' and '"+typeof c[1]+" and ''"+typeof c[2]+"'.");for(_=-((f=c[1])-1)*(h=x.ticksdistance)*.5,v=0;v<f;v++)b[v]=_+v*h;return(y=u.create("ticks",[c[0],b],x)).elType="hatch",y},E.registerElement("ticks",E.createTicks),E.registerElement("hash",E.createHatchmark),E.registerElement("hatch",E.createHatchmark),{Ticks:E.Ticks,createTicks:E.createTicks,createHashmark:E.createHatchmark,createHatchmark:E.createHatchmark}}),define("parser/ca",["jxg","base/constants","base/text","math/math","math/geometry","math/statistics","utils/type","utils/env"],function(E,I,T,S,w,g,m,p){"use strict";return E.CA=function(a,u,c){this.node=a,this.createNode=u,this.parser=c},E.extend(E.CA.prototype,{findMapNode:function(a,u){var c,l,f;if("op_assign"===u.value&&u.children[0].value===a)return u.children[1];if(u.children)for(l=u.children.length,c=0;c<l;++c)if(null!==(f=this.findMapNode(a,u.children[c])))return f;return null},setMath:function(a){var u,c;if(("node_op"!=a.type||"op_add"!=a.value&&"op_sub"!=a.value&&"op_mul"!=a.value&&"op_div"!=a.value&&"op_neg"!=a.value&&"op_execfun"!=a.value&&"op_exp"!=a.value)&&"node_var"!=a.type&&"node_const"!=a.type||(a.isMath=!0),a.children)for(c=a.children.length,u=0;u<c;++u)this.setMath(a.children[u])},deriveElementary:function(a,u){var c,l=a.children[0].value,f=a.children[1];switch(l){case"abs":c=this.createNode("node_op","op_div",f[0],this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0]))]));break;case"sqrt":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_mul",this.createNode("node_const",2),this.createNode(a.type,a.value,m.deepCopy(a.children[0]),m.deepCopy(a.children[1]))));break;case"sin":c=this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),m.deepCopy(f));break;case"cos":c=this.createNode("node_op","op_neg",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),m.deepCopy(f)));break;case"tan":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","cos"),m.deepCopy(f)),this.createNode("node_const",2)));break;case"cot":c=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","sin"),m.deepCopy(f)),this.createNode("node_const",2))));break;case"exp":c=this.createNode(a.type,a.value,m.deepCopy(a.children[0]),m.deepCopy(a.children[1]));break;case"pow":c=this.createNode("node_op","op_mul",this.createNode("node_op","op_execfun",m.deepCopy(a.children[0]),m.deepCopy(a.children[1])),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(a.children[1][0],u),this.createNode("node_op","op_div",m.deepCopy(a.children[1][1]),m.deepCopy(a.children[1][0]))),this.createNode("node_op","op_mul",this.derivative(a.children[1][1],u),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[m.deepCopy(a.children[1][0])]))));break;case"log":case"ln":c=this.createNode("node_op","op_div",this.createNode("node_const",1),m.deepCopy(f[0]));break;case"log2":case"lb":case"ld":c=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),m.deepCopy(f[0])),this.createNode("node_const",1.4426950408889634));break;case"log10":case"lg":c=this.createNode("node_op","op_mul",this.createNode("node_op","op_div",this.createNode("node_const",1),m.deepCopy(f[0])),this.createNode("node_const",.43429448190325176));break;case"asin":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0])))]));break;case"acos":c=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0])))])));break;case"atan":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0]))));break;case"acot":c=this.createNode("node_op","op_neg",this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_add",this.createNode("node_const",1),this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0])))));break;case"sinh":c=this.createNode("node_op","op_execfun",this.createNode("node_var","cosh"),[m.deepCopy(f[0])]);break;case"cosh":c=this.createNode("node_op","op_execfun",this.createNode("node_var","sinh"),[m.deepCopy(f[0])]);break;case"tanh":c=this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_exp",this.createNode("node_op","op_execfun",this.createNode("node_var","tanh"),[m.deepCopy(f[0])]),this.createNode("node_const",2)));break;case"asinh":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_add",this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0])),this.createNode("node_const",1))]));break;case"acosh":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_execfun",this.createNode("node_var","sqrt"),[this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0])),this.createNode("node_const",1))]));break;case"atanh":c=this.createNode("node_op","op_div",this.createNode("node_const",1),this.createNode("node_op","op_sub",this.createNode("node_const",1),this.createNode("node_op","op_mul",m.deepCopy(f[0]),m.deepCopy(f[0]))));break;default:throw c=this.createNode("node_const",0),console.log('Derivative of "'+l+'" not yet implemented'),new Error("Error("+this.line+"): ")}return c},derivative:function(a,u){var c;switch(a.type){case"node_op":switch(a.value){case"op_execfun":c="pow"==a.children[0].value?this.deriveElementary(a,u):0===a.children[1].length?this.createNode("node_const",0):this.createNode("node_op","op_mul",this.deriveElementary(a,u),this.derivative(a.children[1][0],u));break;case"op_div":c=this.createNode("node_op","op_div",this.createNode("node_op","op_sub",this.createNode("node_op","op_mul",this.derivative(a.children[0],u),m.deepCopy(a.children[1])),this.createNode("node_op","op_mul",m.deepCopy(a.children[0]),this.derivative(a.children[1],u))),this.createNode("node_op","op_mul",m.deepCopy(a.children[1]),m.deepCopy(a.children[1])));break;case"op_mul":c=this.createNode("node_op","op_add",this.createNode("node_op","op_mul",m.deepCopy(a.children[0]),this.derivative(a.children[1],u)),this.createNode("node_op","op_mul",this.derivative(a.children[0],u),m.deepCopy(a.children[1])));break;case"op_neg":c=this.createNode("node_op","op_neg",this.derivative(a.children[0],u));break;case"op_add":case"op_sub":c=this.createNode("node_op",a.value,this.derivative(a.children[0],u),this.derivative(a.children[1],u));break;case"op_exp":c=this.createNode("node_op","op_mul",m.deepCopy(a),this.createNode("node_op","op_add",this.createNode("node_op","op_mul",this.derivative(a.children[0],u),this.createNode("node_op","op_div",m.deepCopy(a.children[1]),m.deepCopy(a.children[0]))),this.createNode("node_op","op_mul",this.derivative(a.children[1],u),this.createNode("node_op","op_execfun",this.createNode("node_var","log"),[m.deepCopy(a.children[0])]))))}break;case"node_var":c=this.createNode("node_const",a.value===u?1:0);break;case"node_const":c=this.createNode("node_const",0)}return c},expandDerivatives:function(a,u,c){var l,f,v,_,h,y,b,D,M,O;if(!a)return 0;for(this.line=a.line,this.col=a.col,l=a.children.length,f=0;f<l;++f)if(a.children[f]&&a.children[f].type)a.children[f]=this.expandDerivatives(a.children[f],a,c);else if(m.isArray(a.children[f]))for(v=0;v<a.children[f].length;++v)a.children[f][v]&&a.children[f][v].type&&(a.children[f][v]=this.expandDerivatives(a.children[f][v],a,c));if("node_op"===a.type&&"op_execfun"===a.value&&a.children[0]&&"D"===a.children[0].value){if("node_var"==a.children[1][0].type?(M=(_=this.findMapNode(a.children[1][0].value,c)).children[0],D=a.children[1].length>=2?a.children[1][1].value:_.children[0][0],h=_.children[1]):(h=a.children[1][0],M=["x"],D=a.children[1].length>=2?a.children[1][1].value:"x"),b=h,(O=a.children[1].length>=3?a.children[1][2].value:1)>=1)for(;O>=1;)b=this.derivative(b,D),b=this.removeTrivialNodes(b),O--;y="node_op"==u.type&&"op_assign"==u.value?this.createNode("node_op","op_map",M,b):b,this.setMath(y),a.type=y.type,a.value=y.value,a.children[0]=y.children[0],a.children[1]=y.children[1]}return a},removeTrivialNodes:function(a){var u,c,l,f,v;if(m.isArray(a))for(c=a.length,u=0;u<c;++u)a[u]=this.removeTrivialNodes(a[u]);if("node_op"!=a.type||!a.children)return a;for(c=a.children.length,u=0;u<c;++u){this.mayNotBeSimplified=!1;do{a.children[u]=this.removeTrivialNodes(a.children[u])}while(this.mayNotBeSimplified)}switch(a.value){case"op_map":if(l=a.children[0],"node_var"==(f=a.children[1]).type)for(u=0;u<l.length;++u)if(l[u]==f.value){f.isMath=!0;break}break;case"op_add":if(f=a.children[1],"node_const"==(l=a.children[0]).type&&0===l.value)return f;if("node_const"==f.type&&0===f.value)return l;if("node_const"==l.type&&"node_const"==f.type)return l.value+=f.value,l;break;case"op_mul":if(f=a.children[1],"node_const"==(l=a.children[0]).type&&1==l.value)return f;if("node_const"==f.type&&1==f.value||"node_const"==l.type&&0===l.value)return l;if("node_const"==f.type&&0===f.value||"node_const"==f.type&&0===f.value)return f;if("node_op"==l.type&&"op_neg"==l.value&&"node_op"==f.type&&"op_neg"==f.value)return a.children=[l.children[0],f.children[0]],this.mayNotBeSimplified=!0,a;if("op_neg"==l.value&&"op_neg"!=f.value)return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_mul",l.children[0],f)],this.mayNotBeSimplified=!0,a;if("op_neg"!=l.value&&"op_neg"==f.value)return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_mul",l,f.children[0])],this.mayNotBeSimplified=!0,a;if("op_div"==l.value&&"node_const"==l.children[0].type&&1==l.children[0].value)return a.type="node_op",a.value="op_div",a.children=[f,l.children[1]],this.mayNotBeSimplified=!0,a;if("op_div"==f.value&&"node_const"==f.children[0].type&&1==f.children[0].value)return a.type="node_op",a.value="op_div",a.children=[l,f.children[1]],this.mayNotBeSimplified=!0,a;if("node_const"!=l.type&&"node_const"==f.type)return a.children=[f,l],this.mayNotBeSimplified=!0,a;if("node_const"!=l.type&&"node_op"==f.type&&"op_neg"==f.value&&"node_const"==f.children[0].type)return a.children=[f,l],this.mayNotBeSimplified=!0,a;if("node_op"==l.type&&"op_execfun"!=l.value&&("node_var"==f.type||"node_op"==f.type&&"op_execfun"==f.value))return a.children=[f,l],this.mayNotBeSimplified=!0,a;if("node_op"!=l.type&&"node_op"==f.type&&"op_neg"==f.value&&"node_var"==f.children[0].type)return a.children=[f,l],this.mayNotBeSimplified=!0,a;if("node_const"!=l.type&&"node_op"==f.type&&("op_mul"==f.value||"op_div"==f.value)&&"node_const"==f.children[0].type)return v=f.children[0],f.children[0]=l,a.children=[v,f],this.mayNotBeSimplified=!0,a;if("node_const"!=f.type&&"node_op"==l.type&&"op_mul"==l.value&&"node_const"==l.children[0].type)return a.children=[l.children[0],this.createNode("node_op","op_mul",l.children[1],f)],this.mayNotBeSimplified=!0,a;if("node_const"==l.type&&"node_const"==f.type)return l.value*=f.value,l;if("node_const"==l.type&&"node_op"==f.type&&("op_mul"==f.value||"op_div"==f.value)&&"node_const"==f.children[0].type)return f.children[0].value*=l.value,f;if(l.hash=this.parser.compile(l),f.hash=this.parser.compile(f),l.hash===f.hash)return a.value="op_exp",a.children[1]=this.createNode("node_const",2),a;if("node_const"==l.type&&"node_op"==f.type&&("op_mul"==f.value||"op_div"==f.value)&&"node_const"==f.children[0].type)return f.children[0].value*=l.value,f;if("node_op"==f.type&&"op_exp"==f.value&&(l.hash||(l.hash=this.parser.compile(l)),f.children[0].hash||(f.children[0].hash=this.parser.compile(f.children[0])),l.hash===f.children[0].hash))return f.children[1]=this.createNode("node_op","op_add",f.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,f;if("node_op"==l.type&&"op_exp"==l.value&&"node_op"==f.type&&"op_exp"==f.value&&(l.children[0].hash=this.parser.compile(l.children[0]),f.children[0].hash=this.parser.compile(f.children[0]),l.children[0].hash===f.children[0].hash))return l.children[1]=this.createNode("node_op","op_add",l.children[1],f.children[1]),this.mayNotBeSimplified=!0,l;break;case"op_sub":if(f=a.children[1],"node_const"==(l=a.children[0]).type&&0===l.value)return a.value="op_neg",a.children[0]=f,a;if("node_const"==f.type&&0===f.value)return l;if("node_const"==l.type&&"node_const"==f.type&&l.value==f.value)return this.createNode("node_const",0);if("node_var"==l.type&&"node_var"==f.type&&l.value==f.value)return this.createNode("node_const",0);if("node_const"==l.type&&"node_const"==f.type)return l.value-=f.value,l;if("node_op"==l.type&&"op_mul"==l.value&&"node_op"==f.type&&"op_mul"==f.value&&(l.children[1].hash=this.parser.compile(l.children[1]),f.children[1].hash=this.parser.compile(f.children[1]),l.children[1].hash===f.children[1].hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_sub",l.children[0],f.children[0]),l.children[1]],this.mayNotBeSimplified=!0,a;if("node_op"==l.type&&"op_mul"==l.value&&(l.children[1].hash=this.parser.compile(l.children[1]),f.hash=this.parser.compile(f),l.children[1].hash===f.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_sub",l.children[0],this.createNode("node_const",1)),f],this.mayNotBeSimplified=!0,a;if("node_op"==f.type&&"op_mul"==f.value&&(f.children[1].hash=this.parser.compile(f.children[1]),l.hash=this.parser.compile(l),f.children[1].hash===l.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_sub",this.createNode("node_const",1),f.children[0]),l],this.mayNotBeSimplified=!0,a;break;case"op_neg":if("node_const"==(l=a.children[0]).type&&0===l.value)return l;if("node_op"==l.type&&"op_neg"==l.value)return l.children[0];break;case"op_div":if(f=a.children[1],"node_const"==(l=a.children[0]).type&&"node_const"==f.type&&l.value==f.value&&0!==l.value)return l.value=1,l;if("node_const"==l.type&&0===l.value&&"node_const"==f.type&&0!==f.value)return l.value=0,l;if("node_const"==l.type&&0===l.value&&("node_op"==f.type||"node_var"==f.type))return a.type="node_const",a.value=0,a;if("node_var"==l.type&&"node_var"==f.type&&l.value==f.value)return this.createNode("node_const",1);if("node_const"==l.type&&0!==l.value&&"node_const"==f.type&&0===f.value)return l.value=l.value>0?1/0:-1/0,l;if("node_op"==l.type&&"op_neg"==l.value&&"node_op"==f.type&&"op_neg"==f.value)return a.children=[l.children[0],f.children[0]],this.mayNotBeSimplified=!0,a;if("op_neg"==l.value&&"op_neg"!=f.value)return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_div",l.children[0],f)],this.mayNotBeSimplified=!0,a;if("op_neg"!=l.value&&"op_neg"==f.value)return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_op","op_div",l,f.children[0])],this.mayNotBeSimplified=!0,a;if("node_op"==l.type&&"op_exp"==l.value&&(f.hash||(f.hash=this.parser.compile(f)),l.children[0].hash||(l.children[0].hash=this.parser.compile(l.children[0])),f.hash===l.children[0].hash))return l.children[1]=this.createNode("node_op","op_sub",l.children[1],this.createNode("node_const",1)),this.mayNotBeSimplified=!0,l;if("node_const"!=f.type&&"node_op"==l.type&&"op_mul"==l.value&&"node_const"==l.children[0].type)return a.value="op_mul",a.children=[l.children[0],this.createNode("node_op","op_div",l.children[1],f)],this.mayNotBeSimplified=!0,a;if("node_op"==l.type&&"op_exp"==l.value&&"node_op"==f.type&&"op_exp"==f.value&&(l.children[0].hash=this.parser.compile(l.children[0]),f.children[0].hash=this.parser.compile(f.children[0]),l.children[0].hash===f.children[0].hash))return l.children[1]=this.createNode("node_op","op_sub",l.children[1],f.children[1]),this.mayNotBeSimplified=!0,l;break;case"op_exp":if(l=a.children[0],"node_const"==(f=a.children[1]).type&&0===f.value)return f.value=1,f;if("node_const"==f.type&&1==f.value||"node_const"==l.type&&1==l.value||"node_const"==l.type&&0===l.value&&"node_const"==f.type&&0!==f.value)return l;if("node_op"==l.type&&"op_exp"==l.value)return a.children=[l.children[0],this.createNode("node_op","op_mul",l.children[1],f)],a}switch(a.value){case"op_add":if(f=a.children[1],"node_const"==(l=a.children[0]).type&&"node_const"==f.type&&l.value==f.value)return l.value+=f.value,l;if("node_var"==l.type&&"node_var"==f.type&&l.value==f.value)return a.children[0]=this.createNode("node_const",2),a.value="op_mul",a;if("node_op"==l.type&&"op_neg"==l.value)return a.value="op_sub",a.children[0]=f,a.children[1]=l.children[0],this.mayNotBeSimplified=!0,a;if("node_op"==f.type&&"op_neg"==f.value)return a.value="op_sub",a.children[1]=f.children[0],this.mayNotBeSimplified=!0,a;if("node_op"==l.type&&"op_mul"==l.value&&"node_op"==f.type&&"op_mul"==f.value&&(l.children[1].hash=this.parser.compile(l.children[1]),f.children[1].hash=this.parser.compile(f.children[1]),l.children[1].hash===f.children[1].hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_add",l.children[0],f.children[0]),l.children[1]],this.mayNotBeSimplified=!0,a;if("node_op"==l.type&&"op_mul"==l.value&&(l.children[1].hash=this.parser.compile(l.children[1]),f.hash=this.parser.compile(f),l.children[1].hash===f.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_add",l.children[0],this.createNode("node_const",1)),f],this.mayNotBeSimplified=!0,a;if("node_op"==f.type&&"op_mul"==f.value&&(f.children[1].hash=this.parser.compile(f.children[1]),l.hash=this.parser.compile(l),f.children[1].hash===l.hash))return a.value="op_mul",a.children=[this.createNode("node_op","op_add",this.createNode("node_const",1),f.children[0]),l],this.mayNotBeSimplified=!0,a;break;case"op_sub":if(l=a.children[0],"node_op"==(f=a.children[1]).type&&"op_neg"==f.value)return a.value="op_add",a.children[1]=f.children[0],this.mayNotBeSimplified=!0,a;break;case"op_execfun":return this.simplifyElementary(a)}return a},simplifyElementary:function(a){var c=a.children[1];if(0==c.length)return a;switch(a.children[0].value){case"sin":case"tan":if("node_const"==c[0].type&&0===c[0].value||"node_var"==c[0].type&&"PI"==c[0].value||"node_op"==c[0].type&&"op_mul"==c[0].value&&"node_const"==c[0].children[0].type&&c[0].children[0].value%1==0&&"node_var"==c[0].children[1].type&&"PI"==c[0].children[1].value)return a.type="node_const",a.value=0,a;break;case"cos":if("node_const"==c[0].type&&0===c[0].value)return a.type="node_const",a.value=1,a;if("node_var"==c[0].type&&"PI"==c[0].value)return a.type="node_op",a.value="op_neg",a.children=[this.createNode("node_const",1)],a;break;case"exp":if("node_const"==c[0].type&&0===c[0].value)return a.type="node_const",a.value=1,a;break;case"pow":if("node_const"==c[1].type&&0===c[1].value)return a.type="node_const",a.value=1,a}return a}}),E.CA}),define("utils/dump",["jxg","utils/type"],function(E,I){"use strict";return E.Dump={addMarkers:function(T,S,w){var g,m,p;for(g in I.isArray(S)||(S=[S]),I.isArray(w)||(w=[w]),m=Math.min(S.length,w.length),S.length=m,w.length=m,T.objects)if(T.objects.hasOwnProperty(g))for(p=0;p<m;p++)T.objects[g][S[p]]=w[p]},deleteMarkers:function(T,S){var w,g,m;for(w in I.isArray(S)||(S=[S]),S.length=g=S.length,T.objects)if(T.objects.hasOwnProperty(w))for(m=0;m<g;m++)delete T.objects[w][S[m]]},str:function(T){return"string"==typeof T&&"function"!==T.substr(0,7)&&(T='"'+T+'"'),T},minimizeObject:function(T,S){var w,g,m,p={},a=I.deepCopy(T),u=[];for(m=1;m<arguments.length;m++)u.push(arguments[m]);for(p=I.deepCopy(p,E.Options.elements,!0),m=u.length;m>0;m--)p=I.deepCopy(p,u[m-1],!0);for(w in p)p.hasOwnProperty(w)&&(g=w.toLowerCase(),"object"!=typeof p[w]&&p[w]===a[g]&&delete a[g]);return a},prepareAttributes:function(T,S){var w,g;for(g in w=this.minimizeObject(S.getAttributes(),E.Options[S.elType]),S.subs)S.subs.hasOwnProperty(g)&&(w[g]=this.minimizeObject(S.subs[g].getAttributes(),E.Options[S.elType][g],E.Options[S.subs[g].elType]),w[g].id=S.subs[g].id,w[g].name=S.subs[g].name);return w.id=S.id,w.name=S.name,w},setBoundingBox:function(T,S,w){return T.push({obj:w,method:"setBoundingBox",params:[S.getBoundingBox(),S.keepaspectratio]}),T},dump:function(T){var S,w,g,m,p=[],a=[],u=T.objectsList.length;for(this.addMarkers(T,"dumped",!1),S=0;S<u;S++)if(g={},!(w=T.objectsList[S]).dumped&&w.dump){for(g.type=w.getType(),g.parents=w.getParents().slice(),"point"===g.type&&1===g.parents[0]&&(g.parents=g.parents.slice(1)),m=0;m<g.parents.length;m++)I.isString(g.parents[m])&&"'"!==g.parents[m][0]&&'"'!==g.parents[m][0]?g.parents[m]='"'+g.parents[m]+'"':I.isArray(g.parents[m])&&(g.parents[m]="["+g.parents[m].toString()+"]");g.attributes=this.prepareAttributes(T,w),"glider"===g.type&&w.onPolygon&&p.push({obj:w.id,prop:"onPolygon",val:!0}),a.push(g)}return this.deleteMarkers(T,"dumped"),{elements:a,props:p,methods:[]}},arrayToParamStr:function(T,S){var w,g=[];for(w=0;w<T.length;w++)g.push(S.call(this,T[w]));return g.join(", ")},toJCAN:function(T){var S,w,g;switch(typeof T){case"object":if(T){if(w=[],I.isArray(T)){for(S=0;S<T.length;S++)w.push(this.toJCAN(T[S]));return"["+w.join(",")+"]"}for(g in T)T.hasOwnProperty(g)&&w.push(g+": "+this.toJCAN(T[g]));return"<<"+w.join(", ")+">> "}return"null";case"string":return"'"+T.replace(/\\/g,"\\\\").replace(/(["'])/g,"\\$1")+"'";case"number":case"boolean":return T.toString();case"null":return"null"}},toJessie:function(T){var S,w,m=this.dump(T),p=[];for(m.methods=this.setBoundingBox(m.methods,T,"$board"),w=m.elements,S=0;S<w.length;S++)w[S].attributes.name.length>0&&p.push("// "+w[S].attributes.name),p.push("s"+S+" = "+w[S].type+"("+w[S].parents.join(", ")+") "+this.toJCAN(w[S].attributes).replace(/\n/,"\\n")+";"),"axis"===w[S].type&&null===T.objects[w[S].attributes.id].defaultTicks&&p.push("s"+S+".removeAllTicks();"),p.push("");for(S=0;S<m.methods.length;S++)p.push(m.methods[S].obj+"."+m.methods[S].method+"("+this.arrayToParamStr(m.methods[S].params,this.toJCAN)+");"),p.push("");for(S=0;S<m.props.length;S++)p.push(m.props[S].obj+"."+m.props[S].prop+" = "+this.toJCAN(m.props[S].val)+";"),p.push("");return p.join("\n")},toJavaScript:function(T){var S,w,g,m=this.dump(T),p=[];for(m.methods=this.setBoundingBox(m.methods,T,"board"),w=m.elements,S=0;S<w.length;S++)p.push('board.create("'+w[S].type+'", ['+w[S].parents.join(", ")+"], "+I.toJSON(w[S].attributes)+");"),"axis"===w[S].type&&null===T.objects[g=w[S].attributes.id].defaultTicks&&p.push('board.objects["'+g+'"].removeTicks(board.objects["'+g+'"].defaultTicks);');for(S=0;S<m.methods.length;S++)p.push(m.methods[S].obj+"."+m.methods[S].method+"("+this.arrayToParamStr(m.methods[S].params,I.toJSON)+");"),p.push("");for(S=0;S<m.props.length;S++)p.push(m.props[S].obj+"."+m.props[S].prop+" = "+I.toJSON(m.props[S].val)+";"),p.push("");return p.join("\n")}},E.Dump}),define("element/comb",["jxg","utils/type","base/point"],function(E,I,T){"use strict";return E.createComb=function(S,w,g){var m,p,a,u,c;if(2!==w.length)throw c=w.map(function(l){return"'"+typeof l+"'"}),new Error("JSXGraph: Can't create comb with parent types "+c.join(", ")+".\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");if(I.isArray(w[0])&&w[0].length>1)u=I.copyAttributes(g,S.options,"comb","point1"),m=S.create("point",w[0],u);else if(I.isString(w[0])||I.isPoint(w[0]))m=S.select(w[0]);else if(I.isFunction(w[0])&&I.isPoint(w[0]()))m=w[0]();else{if(!(I.isFunction(w[0])&&w[0]().length&&w[0]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof w[0]+"' and '"+typeof w[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");u=I.copyAttributes(g,S.options,"comb","point1"),m=T.createPoint(S,w[0](),u)}if(I.isArray(w[1])&&w[1].length>1)u=I.copyAttributes(g,S.options,"comb","point2"),p=S.create("point",w[1],u);else if(I.isString(w[1])||I.isPoint(w[1]))p=S.select(w[1]);else if(I.isFunction(w[1])&&I.isPoint(w[1]()))p=w[1]();else{if(!(I.isFunction(w[1])&&w[1]().length&&w[1]().length>=2))throw new Error("JSXGraph: Can't create comb with parent types '"+typeof w[0]+"' and '"+typeof w[1]+"'.\nPossible parent types: [point,point], [[x1,y1],[x2,y2]]");u=I.copyAttributes(g,S.options,"comb","point2"),p=T.createPoint(S,w[1](),u)}return u=I.copyAttributes(g,S.options,"comb"),I.merge(u,I.copyAttributes(g,S.options,"comb","curve")),(a=S.create("curve",[[0],[0]],u)).updateDataArray=function(){var l,f,v,_,h,y,b,x,D,M,O=0,A=m.Dist(p),N=m,L=p;for(x=I.evaluate(a.visProp.frequency),D=-I.evaluate(a.visProp.angle),M=I.evaluate(a.visProp.width),I.evaluate(a.visProp.reverse)&&(N=p,L=m,D=-D),l=Math.cos(D),f=Math.sin(D),v=(L.X()-N.X())/A,_=(L.Y()-N.Y())/A,l*=M/Math.abs(f),f*=M/Math.abs(f),this.dataX=[],this.dataY=[];O<A;)h=N.X()+v*O,y=N.Y()+_*O,f*=b=Math.min(l,A-O)/Math.abs(l),l*=b,this.dataX.push(h),this.dataY.push(y),this.dataX.push(h+v*l+_*f),this.dataY.push(y-v*f+_*l),this.dataX.push(NaN),this.dataY.push(NaN),O+=x},a},E.registerElement("comb",E.createComb),{createComb:E.createComb}}),define("element/slopetriangle",["jxg","utils/type","base/constants","base/polygon"],function(E,I,T,S){"use strict";var w=function(){S.Polygon.prototype.remove.call(this),this.board.removeObject(this.toppoint),this.board.removeObject(this.glider),this.board.removeObject(this.baseline),this.board.removeObject(this.basepoint),this.board.removeObject(this.label),this._isPrivateTangent&&this.board.removeObject(this.tangent)},g=function(){return this.tangent.getSlope()};return E.createSlopeTriangle=function(m,p,a){var u,c,l,f,v,_,h,y,b,x=!1;if(1===p.length&&p[0].type===T.OBJECT_TYPE_TANGENT)l=(c=p[0]).glider;else if(1===p.length&&p[0].type===T.OBJECT_TYPE_GLIDER)l=p[0],b=I.copyAttributes(a,m.options,"slopetriangle","tangent"),c=m.create("tangent",[l],b),x=!0;else{if(2!==p.length||p[0].elementClass!==T.OBJECT_CLASS_LINE||!I.isPoint(p[1]))throw new Error("JSXGraph: Can't create slope triangle with parent types '"+typeof p[0]+"'.");c=p[0],l=p[1]}return b=I.copyAttributes(a,m.options,"slopetriangle","basepoint"),h=m.create("point",[function(){return[l.X()+1,l.Y()]}],b),b=I.copyAttributes(a,m.options,"slopetriangle","baseline"),_=m.create("line",[l,h],b),b=I.copyAttributes(a,m.options,"slopetriangle","glider"),f=m.create("glider",[l.X()+1,l.Y(),_],b),b=I.copyAttributes(a,m.options,"slopetriangle","toppoint"),v=m.create("point",[function(){return[f.X(),f.Y()+(f.X()-l.X())*c.getSlope()]}],b),(b=I.copyAttributes(a,m.options,"slopetriangle")).borders=I.copyAttributes(b.borders,m.options,"slopetriangle","borders"),(u=m.create("polygon",[l,f,v],b)).Value=g,u.tangent=c,u._isPrivateTangent=x,u.borders[2].setArrow(!1,!1),b=I.copyAttributes(a,m.options,"slopetriangle","label"),(y=m.create("text",[function(){return f.X()+.1},function(){return.5*(f.Y()+v.Y())},function(){return""}],b))._setText(function(){return I.toFixed(u.Value(),I.evaluate(y.visProp.digits))}),y.fullUpdate(),u.glider=f,u.basepoint=h,u.baseline=_,u.toppoint=v,u.label=y,u.subs={glider:f,basePoint:h,baseLine:_,topPoint:v,label:y},u.inherits.push(f,h,_,v,y),u.methodMap=E.deepCopy(u.methodMap,{tangent:"tangent",glider:"glider",basepoint:"basepoint",baseline:"baseline",toppoint:"toppoint",label:"label",Value:"Value",V:"Value"}),u.remove=w,u},E.registerElement("slopetriangle",E.createSlopeTriangle),{createSlopeTriangle:E.createSlopeTriangle}}),define("element/checkbox",["jxg","utils/env","utils/type"],function(E,I,T){"use strict";var S=function(){this._value=this.rendNodeCheckbox.checked,this.board.update()};return E.createCheckbox=function(w,g,m){var p,u=T.copyAttributes(m,w.options,"checkbox");return(p=w.create("text",[g[0],g[1],'<span style="display:inline"><input type="checkbox" /><label for=""></label></span>'],u)).type=T.OBJECT_TYPE_CHECKBOX,p.rendNodeCheckbox=p.rendNode.childNodes[0].childNodes[0],p.rendNodeLabel=p.rendNode.childNodes[0].childNodes[1],p.rendNodeTag=p.rendNodeCheckbox,p.rendNodeTag.disabled=!!u.disabled,p.rendNodeCheckbox.id=p.rendNode.id+"_checkbox",p.rendNodeLabel.id=p.rendNode.id+"_label",p.rendNodeLabel.setAttribute("for",p.rendNodeCheckbox.id),p.setText(g[2]),p.visPropOld.fontsize="0px",w.renderer.updateTextStyle(p,!1),p.rendNodeCheckbox.checked=u.checked,p._value=u.checked,p.Value=function(){return this._value},p.update=function(){return this.needsUpdate&&(E.Text.prototype.update.call(this),this._value=this.rendNodeCheckbox.checked),this},I.addEvent(p.rendNodeCheckbox,"change",S,p),p},E.registerElement("checkbox",E.createCheckbox),{createCheckbox:E.createCheckbox}}),define("element/input",["jxg","utils/env","utils/type"],function(E,I,T){"use strict";var S=function(w){this._value=this.rendNodeInput.value,this.board.update()};return E.createInput=function(w,g,m){var p,u=T.copyAttributes(m,w.options,"input");return(p=w.create("text",[g[0],g[1],'<span style="display:inline; white-space:nowrap; padding:0px;"><span></span><input type="text" maxlength="'+u.maxlength+'" style="width:100%"/></span>'],u)).type=T.OBJECT_TYPE_INPUT,p.rendNodeLabel=p.rendNode.childNodes[0].childNodes[0],p.rendNodeInput=p.rendNode.childNodes[0].childNodes[1],p.rendNodeInput.value=g[2],p.rendNodeTag=p.rendNodeInput,p.rendNodeTag.disabled=!!u.disabled,p.rendNodeLabel.id=p.rendNode.id+"_label",p.rendNodeInput.id=p.rendNode.id+"_input",p.setText(g[3]),p._value=g[2],p.update=function(){return this.needsUpdate&&(E.Text.prototype.update.call(this),this._value=this.rendNodeInput.value),this},p.Value=function(){return this._value},p.set=function(c){return this._value=c,this.rendNodeInput.value=c,this},I.addEvent(p.rendNodeInput,"input",S,p),I.addEvent(p.rendNodeInput,"mousedown",function(c){T.exists(c.stopPropagation)&&c.stopPropagation()},p),I.addEvent(p.rendNodeInput,"touchstart",function(c){T.exists(c.stopPropagation)&&c.stopPropagation()},p),I.addEvent(p.rendNodeInput,"pointerdown",function(c){T.exists(c.stopPropagation)&&c.stopPropagation()},p),p.visPropOld.fontsize="0px",w.renderer.updateTextStyle(p,!1),p},E.registerElement("input",E.createInput),{createInput:E.createInput}}),define("element/button",["jxg","utils/env","utils/type"],function(E,I,T){"use strict";var S=function(){this._handler&&this._handler(),this.board.update()};return E.createButton=function(w,g,m){var p,u=T.copyAttributes(m,w.options,"button");return(p=w.create("text",[g[0],g[1],'<button type="button" style="width:100%;"></button>'],u)).type=T.OBJECT_TYPE_BUTTON,p.rendNodeButton=p.rendNode.childNodes[0],p.rendNodeButton.id=p.rendNode.id+"_button",p.rendNodeTag=p.rendNodeButton,p.rendNodeTag.disabled=!!u.disabled,p.setText(g[2]),p.visPropOld.fontsize="0px",w.renderer.updateTextStyle(p,!1),g[3]&&(T.isString(g[3])?(p._jc=new E.JessieCode,p._jc.use(w),p._handler=function(){p._jc.parse(g[3])}):p._handler=g[3]),I.addEvent(p.rendNodeButton,"click",S,p),I.addEvent(p.rendNodeButton,"mousedown",function(c){T.exists(c.stopPropagation)&&c.stopPropagation()},p),I.addEvent(p.rendNodeButton,"touchstart",function(c){T.exists(c.stopPropagation)&&c.stopPropagation()},p),I.addEvent(p.rendNodeButton,"pointerdown",function(c){T.exists(c.stopPropagation)&&c.stopPropagation()},p),p},E.registerElement("button",E.createButton),{createButton:E.createButton}}),define("base/foreignobject",["jxg","base/constants","base/coords","base/element","math/math","utils/type","base/coordselement"],function(E,I,T,S,w,g,m){"use strict";return E.ForeignObject=function(p,a,u,c,l){this.constructor(p,u,I.OBJECT_TYPE_FOREIGNOBJECT,I.OBJECT_CLASS_OTHER),this.element=this.board.select(u.anchor),this.coordsConstructor(a),this._useUserSize=!1,this.size=[1,1],g.exists(l)&&l.length>0&&(this._useUserSize=!0,this.W=g.createFunction(l[0],this.board,""),this.H=g.createFunction(l[1],this.board,""),this.usrSize=[this.W(),this.H()]),this.content=c,this.elType="foreignobject",this.id=this.board.setId(this,"Im"),this.board.renderer.drawForeignObject(this),this.board.finalizeAdding(this),this.methodMap=E.deepCopy(this.methodMap,{addTransformation:"addTransform",trans:"addTransform"})},E.ForeignObject.prototype=new S,g.copyPrototypeMethods(E.ForeignObject,m,"coordsConstructor"),E.extend(E.ForeignObject.prototype,{hasPoint:function(p,a){var u,c,l,v,_,h,y,b,x=this.transformations.length;return v=g.isObject(g.evaluate(this.visProp.precision))?g.evaluate(this.visProp.precision[this.board._inputDevice]):this.board.options.precision.hasPoint,0===x?(c=this.coords.scrCoords[2]-a,(u=p-this.coords.scrCoords[1])>=-(l=v)&&u-this.size[0]<=l&&c>=-l&&c-this.size[1]<=l):(h=[(_=(_=new T(I.COORDS_BY_SCREEN,[p,a],this.board)).usrCoords)[0]-this.span[0][0],_[1]-this.span[0][1],_[2]-this.span[0][2]],0<=(y=(b=w.innerProduct)(h,this.span[1]))&&y<=b(this.span[1],this.span[1])&&0<=(y=b(h,this.span[2]))&&y<=b(this.span[2],this.span[2]))},update:function(p){return this.needsUpdate?(this.updateCoords(p),this.updateSize(),this):this},updateRenderer:function(){return this.updateRendererGeneric("updateForeignObject")},updateSize:function(){var p=[0,0];return this._useUserSize?(this.usrSize=[this.W(),this.H()],this.size=[Math.abs(this.usrSize[0]*this.board.unitX),Math.abs(this.usrSize[1]*this.board.unitY)]):this.rendNode.hasChildNodes()&&(p=this.rendNode.childNodes[0].getBoundingClientRect(),this.size=[p.width,p.height]),this},updateSpan:function(){var p,a,u=this.transformations.length,c=[];if(0===u)this.span=[[this.Z(),this.X(),this.Y()],[this.Z(),this.W(),0],[this.Z(),0,this.H()]];else{for(c[0]=[this.Z(),this.X(),this.Y()],c[1]=[this.Z(),this.X()+this.W(),this.Y()],c[2]=[this.Z(),this.X(),this.Y()+this.H()],p=0;p<u;p++)for(a=0;a<3;a++)c[a]=w.matVecMult(this.transformations[p].matrix,c[a]);for(a=0;a<3;a++)c[a][1]/=c[a][0],c[a][2]/=c[a][0],c[a][0]/=c[a][0];for(a=1;a<3;a++)c[a][0]-=c[0][0],c[a][1]-=c[0][1],c[a][2]-=c[0][2];this.span=c}return this},addTransform:function(p){var a;if(g.isArray(p))for(a=0;a<p.length;a++)this.transformations.push(p[a]);else this.transformations.push(p);return this},getParents:function(){var p=[this.url,[this.Z(),this.X(),this.Y()],this.usrSize];return 0!==this.parents.length&&(p=this.parents),p},setSize:function(p,a){return this.W=g.createFunction(p,this.board,""),this.H=g.createFunction(a,this.board,""),this._useUserSize=!0,this},W:function(){},H:function(){}}),E.createForeignObject=function(p,a,u){var c,l,f=a[0],v=a[1],_=[];if(a.length>=2&&(_=a[2]),c=g.copyAttributes(u,p.options,"foreignobject"),!(l=m.create(E.ForeignObject,p,v,c,f,_)))throw new Error("JSXGraph: Can't create foreignObject with parent types '"+typeof a[0]+"' and '"+typeof a[1]+"'.\nPossible parent types: [string, [x, y], [w, h]], [string, [x, y]], [element,transformation]");return l},E.registerElement("foreignobject",E.createForeignObject),E.registerElement("fo",E.createForeignObject),{ForeignObject:E.ForeignObject,createForeignobject:E.createForeignObject}}),define("options3d",["jxg","options"],function(E,I){"use strict";return E.extend(I,{axes3d:{axesPosition:"center",xAxis:{visible:!0,point2:{name:"x"}},yAxis:{visible:!0,point2:{name:"y"}},zAxis:{visible:!0,point2:{name:"z"}},xPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},yPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},zPlaneRear:{visible:!0,layer:0,mesh3d:{layer:1}},xPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},yPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},zPlaneFront:{visible:!1,layer:0,mesh3d:{layer:1}},xPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},xPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneRearZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},yPlaneFrontZAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneRearYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontXAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1},zPlaneFrontYAxis:{visible:"inherit",strokeColor:"#888888",strokeWidth:1}},axis3d:{highlight:!1,strokecolor:"black",strokeWidth:1,tabindex:null,point1:{visible:!1,name:""},point2:{visible:!1,name:"",label:{visible:!0}}},curve3d:{highlight:!1,tabindex:-1,strokeWidth:1,numberPointsHigh:200},mesh3d:{strokeWidth:1,strokeColor:"#9a9a9a",strokeOpacity:.6,highlight:!1,fillColor:"#9a9a9a",fillOpacity:.1,tabindex:null,visible:"inherit"},line3d:{strokeWidth:1,strokeColor:"black",fixed:!0,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",point:{visible:!1,name:""},point1:{visible:!1,name:""},point2:{visible:!1,name:""}},plane3d:{strokeWidth:0,strokeColor:"black",strokeOpacity:1,highlight:!1,tabindex:null,gradient:"linear",gradientSecondColor:"#ffffff",gradientAngle:Math.PI,fillColor:"#a7a7a7",fillOpacity:.6,point:{visible:!1,name:"",fixed:!0}},point3d:{infoboxDigits:"auto",strokeWidth:0,gradient:"radial",gradientSecondColor:"#555555",fillColor:"yellow",highlightStrokeColor:"#555555"},surface3d:{highlight:!1,tabindex:-1,strokeWidth:1,stepsU:30,stepsV:30},view3d:{needsRegularUpdate:!0}}),E.Options}),define("3d/view3d",["jxg","options","base/constants","utils/type","math/math","base/element","base/composition"],function(E,I,T,S,w,g,m){"use strict";return E.View3D=function(p,a,u){this.constructor(p,u,T.OBJECT_TYPE_VIEW3D,T.OBJECT_CLASS_3D),this.objects={},this.objectsList=[],this.elementsByName={},this.defaultAxes=null,this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.llftCorner=a[0],this.size=a[1],this.bbox3D=a[2],this.r=-1,this.timeoutAzimuth=null,this.id=this.board.setId(this,"V"),this.board.finalizeAdding(this),this.elType="view3d",this.methodMap=S.deepCopy(this.methodMap,{})},E.View3D.prototype=new g,E.extend(E.View3D.prototype,{create:function(p,a,u){var c=[];return p.indexOf("3d")>0&&c.push(this),this.board.create(p,c.concat(a),u)},select:function(p,a){var u,c,l,f,v=p;if(null===v)return v;if(S.isString(v)&&""!==v)S.exists(this.objects[v])?v=this.objects[v]:S.exists(this.elementsByName[v])&&(v=this.elementsByName[v]);else if(!a&&(S.isFunction(v)||S.isObject(v)&&!S.isFunction(v.setAttribute))){for(c={},f=(u=S.filterElements(this.objectsList,v)).length,l=0;l<f;l++)c[u[l].id]=u[l];v=new m(c)}else S.isObject(v)&&S.exists(v.id)&&!S.exists(this.objects[v.id])&&(v=null);return v},update:function(){var p,a,u,c,l;return S.exists(this.el_slide)&&S.exists(this.az_slide)&&this.needsUpdate?(p=this.el_slide.Value(),a=this.r,u=this.az_slide.Value(),c=a*Math.sin(p),l=[[1,0,0],[0,1,0],[0,0,1]],this.matrix3D=[[1,0,0,0],[0,1,0,0],[0,0,1,0]],this.matrix3D[1][1]=a*Math.cos(u),this.matrix3D[1][2]=-a*Math.sin(u),this.matrix3D[2][1]=c*Math.sin(u),this.matrix3D[2][2]=c*Math.cos(u),this.matrix3D[2][3]=Math.cos(p),l[1][1]=this.size[0]/(this.bbox3D[0][1]-this.bbox3D[0][0]),l[2][2]=this.size[1]/(this.bbox3D[1][1]-this.bbox3D[1][0]),l[1][0]=this.llftCorner[0]-l[1][1]*this.bbox3D[0][0],l[2][0]=this.llftCorner[1]-l[2][2]*this.bbox3D[1][0],this.matrix3D=w.matMatMult(l,this.matrix3D),this):this},updateRenderer:function(){return this.needsUpdate=!1,this},project3DTo2D:function(p,a,u){var c;return c=3===arguments.length?[1,p,a,u]:3===p.length?[1].concat(p):p,w.matVecMult(this.matrix3D,c)},project2DTo3DPlane:function(p,a,u){var c,l,f,v,_=a.slice(1),h=[1,0,0,0];u=u||[1,0,0,0],v=w.norm(_,3),f=w.innerProduct(u.slice(1),_,3)/v,(c=this.matrix3D.slice(0,3)).push([0].concat(_)),l=p.coords.usrCoords.concat([f]);try{1===c[2][3]&&(c[2][1]=c[2][2]=.001*w.eps),h=w.Numerics.Gauss(c,l)}catch{h=[0,NaN,NaN,NaN]}return h},project3DToCube:function(p){var a=this.bbox3D;return p[1]<a[0][0]&&(p[1]=a[0][0]),p[1]>a[0][1]&&(p[1]=a[0][1]),p[2]<a[1][0]&&(p[2]=a[1][0]),p[2]>a[1][1]&&(p[2]=a[1][1]),p[3]<a[2][0]&&(p[3]=a[2][0]),p[3]>a[2][1]&&(p[3]=a[2][1]),p},intersectionLineCube:function(p,a,u){var c,l,f,v;for(c=u,l=0;l<3;l++)0!==a[l]&&(f=(this.bbox3D[l][0]-p[l])/a[l],v=(this.bbox3D[l][1]-p[l])/a[l],c=u<0?Math.max(c,Math.min(f,v)):Math.min(c,Math.max(f,v)));return c},isInCube:function(p){return p[0]>this.bbox3D[0][0]-w.eps&&p[0]<this.bbox3D[0][1]+w.eps&&p[1]>this.bbox3D[1][0]-w.eps&&p[1]<this.bbox3D[1][1]+w.eps&&p[2]>this.bbox3D[2][0]-w.eps&&p[2]<this.bbox3D[2][1]+w.eps},intersectionPlanePlane:function(p,a,u){var c,l,f,v,_=[[],[]];return c=w.Geometry.meet3Planes(p.normal,p.d,a.normal,u=u||a.d,w.crossProduct(p.normal,a.normal),0),l=w.Geometry.meetPlanePlane(p.vec1,p.vec2,a.vec1,a.vec2),f=this.intersectionLineCube(c,l,1/0),v=w.axpy(f,l,c),this.isInCube(v)&&(_[0]=v),f=this.intersectionLineCube(c,l,-1/0),v=w.axpy(f,l,c),this.isInCube(v)&&(_[1]=v),_},getMesh:function(p,a,u){var c,l,f,v,_,h,y,b=[0,0,0],x=a[2],D=u[2],M=[],O=[];for(h=(S.evaluate(a[1])-S.evaluate(a[0]))/x,y=(S.evaluate(u[1])-S.evaluate(u[0]))/D,c=0;c<=x;c++){for(f=a[0]+h*c,l=0;l<=D;l++)v=u[0]+y*l,b=S.isFunction(p)?p(f,v):[p[0](f,v),p[1](f,v),p[2](f,v)],_=this.project3DTo2D(b),M.push(_[1]),O.push(_[2]);M.push(NaN),O.push(NaN)}for(l=0;l<=D;l++){for(v=u[0]+y*l,c=0;c<=x;c++)f=a[0]+h*c,b=S.isFunction(p)?p(f,v):[p[0](f,v),p[1](f,v),p[2](f,v)],_=this.project3DTo2D(b),M.push(_[1]),O.push(_[2]);M.push(NaN),O.push(NaN)}return[M,O]},animateAzimuth:function(){var p=this.az_slide._smin,a=this.az_slide._smax-p,u=this.az_slide.Value()+.1;this.az_slide.position=(u-p)/a,this.az_slide.position>1&&(this.az_slide.position=0),this.board.update(),this.timeoutAzimuth=setTimeout(function(){this.animateAzimuth()}.bind(this),200)},stopAzimuth:function(){clearTimeout(this.timeoutAzimuth),this.timeoutAzimuth=null}}),E.createView3D=function(p,a,u){var c,l,f,v,h,y=a[0],b=a[1];return l=S.copyAttributes(u,p.options,"view3d"),(c=new E.View3D(p,a,l)).defaultAxes=c.create("axes3d",a,u),h=b[1],c.az_slide=p.create("slider",[[(f=y[0])-1,(v=y[1])-2],[f+b[0]+1,v-2],[0,1,2*Math.PI]],{style:6,name:"az",point1:{frozen:!0},point2:{frozen:!0}}),c.el_slide=p.create("slider",[[f-1,v],[f-1,v+h],[0,.3,Math.PI/2]],{style:6,name:"el",point1:{frozen:!0},point2:{frozen:!0}}),c.board.highlightInfobox=function(x,D,M){var O,A,N,B=M.board,V=null;for(A=0;A<M.parents.length&&!(V=B.objects[M.parents[A]]).is3D;A++);if(V){if(N=c.project2DTo3DPlane(V.element2D,[1,0,0,1],[1,0,0,V.coords[3]]),!c.isInCube(N))return void c.board.highlightCustomInfobox("",V);"auto"===(O=S.evaluate(V.visProp.infoboxdigits))?c.board.highlightCustomInfobox("("+S.autoDigits(V.X())+" | "+S.autoDigits(V.Y())+" | "+S.autoDigits(V.Z())+")",V):c.board.highlightCustomInfobox("("+S.toFixed(V.X(),O)+" | "+S.toFixed(V.Y(),O)+" | "+S.toFixed(V.Z(),O)+")",V)}else c.board.highlightCustomInfobox("("+x+", "+D+")",M)},c.board.update(),c},E.registerElement("view3d",E.createView3D),E.View3D}),define("3d/element3d",["jxg"],function(E){"use strict";return E.GeometryElement3D=function(I,T){this.elType=T,this.id=this.board.setId(this,T),this.view=I,this.element2D=null,this.is3D=!0,this.view.objects[this.id]=this,this.view.objectsList.push(this),""!==this.name&&(this.view.elementsByName[this.name]=this)},E.GeometryElement3D}),define("3d/box3d",["jxg","utils/type","math/math","math/geometry"],function(E,I,T,S){"use strict";E.createAxes3D=function(w,g,m){var p,a,u,c,l,f,v,_,h,y,b,x,D,M,O,A,N,L=g[0],B=["x","y","z"],V="Axis",U=["Rear","Front"],j=[0,0,0],z=[0,0,0],$={};if(I.exists(L.bbox3D))for(p=0;p<B.length;p++)j[p]=L.bbox3D[p][0],z[p]=L.bbox3D[p][1];else for(p=0;p<B.length;p++)j[p]=g[1][p],z[p]=g[2][1];for(v=(f=I.copyAttributes(m,w.options,"axes3d")).axesposition,p=0;p<B.length;p++)O=(_=B[p])+V,"center"===v?(h=[0,0,0],(y=[0,0,0])[p]=z[p],$[O]=L.create("axis3d",[h,y],f[O.toLowerCase()])):(O+="Border",h=j.slice(),y=z.slice(),2===p?(h[1]=z[1],y[0]=j[0]):(h[p]=z[p],y[2]=j[2]),y[p]=z[p],f[O.toLowerCase()].lastArrow=!1,$[O]=L.create("axis3d",[h,y],f[O.toLowerCase()]),N={visible:!0,minorTicks:0,tickEndings:[0,1],drawLabels:!1},2===p&&(N.tickEndings=[1,0]),$[O+"Ticks"]=L.create("ticks",[$[O],1],N));for($.O=L.create("intersection",[$[B[0]+V],$[B[1]+V]],{name:"",visible:!1,withLabel:!1}),p=0;p<B.length;p++)for(c=(p+1)%3,l=(p+2)%3,_=B[p],a=0;a<U.length;a++)(h=[0,0,0])[p]=0===a?j[p]:z[p],x=[0,0,0],(b=[0,0,0])[c]=1,x[l]=1,D=[j[c],z[c]],M=[j[l],z[l]],f=I.copyAttributes(m,w.options,"axes3d",O=_+"Plane"+U[a]),$[O]=L.create("plane3d",[h,b,x,D,M],f),$[O].elType="axisplane3d";for(p=0;p<B.length;p++)for(_=B[p],a=0;a<U.length;a++)for(u=1;u<=2;u++)O=_+"Plane"+U[a]+B[c=(p+u)%3].toUpperCase()+"Axis",A=_+"Plane"+U[a],(h=[0,0,0])[p]=(y=[0,0,0])[p]=0===a?j[p]:z[p],h[c]=j[c],y[c]=z[c],f=I.copyAttributes(m,w.options,"axes3d",O),$[O]=L.create("axis3d",[h,y],f),$[A].addChild($[O]),$[A].element2D.inherits.push($[O]);return $},E.registerElement("axes3d",E.createAxes3D),E.createAxis3D=function(w,g,m){var p,a,u,c,l,f,y,b,x,v=g[0],_=g[1],h=g[2];return p=I.copyAttributes(m.point1,w.options,"axis3d","point1"),a=v.create("point",[(c=_[0],l=_[1],f=_[2],function(){return v.project3DTo2D(c,l,f)[1]}),(y=_[0],b=_[1],x=_[2],function(){return v.project3DTo2D(y,b,x)[2]})],p),p=I.copyAttributes(m.point2,w.options,"axis3d","point2"),u=v.create("point",[function(y,b,x){return function(){return v.project3DTo2D(y,b,x)[1]}}(h[0],h[1],h[2]),function(y,b,x){return function(){return v.project3DTo2D(y,b,x)[2]}}(h[0],h[1],h[2])],p),p=I.copyAttributes(m,w.options,"axis3d"),v.create("arrow",[a,u],p)},E.registerElement("axis3d",E.createAxis3D),E.createMesh3D=function(w,g,m){var p,a=g[0],u=g[1],c=g[2],l=g[3],f=g[4],v=g[5];return(p=a.create("curve",[[],[]],m)).updateDataArray=function(){var _,h,y,b,x=l[0],D=l[1],M=v[0],O=v[1],A=[0,0,0],N=[0,0,0],L=[0,0,0];if(this.dataX=[],this.dataY=[],I.isFunction(u))L=u().slice(1);else for(b=0;b<3;b++)L[b]=I.evaluate(u[b]);for(b=0;b<3;b++)A[b]=I.evaluate(c[b]),N[b]=I.evaluate(f[b]);for(_=E.Math.norm(A,3),h=E.Math.norm(N,3),b=0;b<3;b++)A[b]/=_,N[b]/=h;y=a.getMesh([function(B,V){return L[0]+B*A[0]+V*N[0]},function(B,V){return L[1]+B*A[1]+V*N[1]},function(B,V){return L[2]+B*A[2]+V*N[2]}],[Math.ceil(x),Math.floor(D),(Math.ceil(D)-Math.floor(x))/1],[Math.ceil(M),Math.floor(O),(Math.ceil(O)-Math.floor(M))/1]),this.dataX=y[0],this.dataY=y[1]},p},E.registerElement("mesh3d",E.createMesh3D)}),define("3d/point3d",["jxg","base/constants","math/math","math/geometry","utils/type"],function(E,I,T,S,w){"use strict";E.Point3D=function(g,m,p,a){this.constructor(g.board,a,I.OBJECT_TYPE_POINT3D,I.OBJECT_CLASS_3D),this.constructor3D(g,"point3d"),this.id=this.view.board.setId(this,"P3D"),this.board.finalizeAdding(this),this.coords=[0,0,0,0],this.F=m,this.slide=p,this.X=function(){return this.coords[1]},this.Y=function(){return this.coords[2]},this.Z=function(){return this.coords[3]},this._params=null,this._c2d=null,this.methodMap=w.deepCopy(this.methodMap,{})},E.Point3D.prototype=new E.GeometryElement,w.copyPrototypeMethods(E.Point3D,E.GeometryElement3D,"constructor3D"),E.extend(E.Point3D.prototype,{updateCoords:function(){var g;if(w.isFunction(this.F))this.coords=[1].concat(w.evaluate(this.F));else for(this.coords[0]=1,g=0;g<3;g++)w.isFunction(this.F[g])&&(this.coords[g+1]=w.evaluate(this.F[g]));return this},initCoords:function(){var g;if(w.isFunction(this.F))this.coords=[1].concat(w.evaluate(this.F));else for(this.coords[0]=1,g=0;g<3;g++)this.coords[g+1]=w.evaluate(this.F[g]);return this},normalizeCoords:function(){return Math.abs(this.coords[0])>T.eps&&(this.coords[1]/=this.coords[0],this.coords[2]/=this.coords[0],this.coords[3]/=this.coords[0],this.coords[0]=1),this},setPosition:function(g,m){var p=this.coords;return this.coords.slice(),3===g.length?(p[0]=1,p[1]=g[0],p[2]=g[1],p[3]=g[2]):(p[0]=g[0],p[1]=g[1],p[2]=g[2],p[3]=g[2],this.normalizeCoords()),this},update:function(g){var m;return this.element2D.draggable()&&0!==S.distance(this._c2d,this.element2D.coords.usrCoords)?this.slide?this.projectCoords2Surface():0!==(m=this.view.project2DTo3DPlane(this.element2D,[1,0,0,1],[1,0,0,this.coords[3]]))[0]&&(this.coords=this.view.project3DToCube(m)):(this.updateCoords(),this.element2D.coords.setCoordinates(I.COORDS_BY_USER,this.view.project3DTo2D([1,this.X(),this.Y(),this.Z()]))),this._c2d=this.element2D.coords.usrCoords.slice(),this},updateRenderer:function(){return this.needsUpdate=!1,this},projectCoords2Surface:function(){var g,m,p,a=[0,0],u=this.slide,c=this;null!==u&&(p=function(l,f,v,_){var h=[1,u.X(v[0],v[1]),u.Y(v[0],v[1]),u.Z(v[0],v[1])],y=c.view.project3DTo2D(h);return _[0]=c.element2D.X()-y[1],_[1]=c.element2D.Y()-y[2],_[0]*_[0]+_[1]*_[1]},w.exists(this._params)&&(a=this._params.slice()),T.Nlp.FindMinimum(p,2,2,a,5,1e-6,0,200),g=[1,u.X(a[0],a[1]),u.Y(a[0],a[1]),u.Z(a[0],a[1])],m=this.view.project3DTo2D(g),this._params=a,this.coords=g,this.element2D.coords.setCoordinates(I.COORDS_BY_USER,m),this._c2d=m)},__evt__update3D:function(g){}}),E.createPoint3D=function(g,m,p){var a,u,c,l,f,v=m[0];if(c=m.length>2&&w.exists(m[m.length-1].is3D)?m.pop():null,2===m.length)u=m[1];else{if(4!==m.length)throw new Error("JSXGraph: Can't create point3d with parent types '"+typeof m[0]+"' and '"+typeof m[1]+"'.\nPossible parent types: [[x,y,z]], [x,y,z]");u=m.slice(1)}return a=w.copyAttributes(p,g.options,"point3d"),(f=new E.Point3D(v,u,c,a)).initCoords(),l=v.project3DTo2D(f.coords),a.name=f.name,f.element2D=v.create("point",l,a),f.addChild(f.element2D),f.inherits.push(f.element2D),f.element2D.setParents(f),f._c2d=f.element2D.coords.usrCoords.slice(),f},E.registerElement("point3d",E.createPoint3D)}),define("3d/curve3d",["jxg","base/constants","utils/type"],function(E,I,T){"use strict";E.Curve3D=function(S,w,g,m,p,a,u){this.constructor(S.board,u,I.OBJECT_TYPE_CURVE3D,I.OBJECT_CLASS_3D),this.constructor3D(S,"surface3d"),this.id=this.view.board.setId(this,"S3D"),this.board.finalizeAdding(this),this.F=w,this.X=g,this.Y=m,this.Z=p,null!==this.F&&(this.X=function(c){return this.F(c)[0]},this.Y=function(c){return this.F(c)[1]},this.Z=function(c){return this.F(c)[2]}),this.range=a,this.methodMap=T.deepCopy(this.methodMap,{})},E.Curve3D.prototype=new E.GeometryElement,T.copyPrototypeMethods(E.Curve3D,E.GeometryElement3D,"constructor3D"),E.extend(E.Curve3D.prototype,{updateDataArray:function(){var S,w,g,m,p,a,u,c,l=T.evaluate(this.visProp.numberpointshigh),f=[0,0,0];if(u=[],c=[],T.isArray(this.X))for(l=this.X.length,a=0;a<l;a++)p=this.view.project3DTo2D(f=[this.X[a],this.Y[a],this.Z[a]]),u.push(p[1]),c.push(p[2]);else for(w=(S=T.evaluate(this.range))[0],m=((g=S[1])-w)/(l-1),a=w;a<=g;a+=m)f=null!==this.F?this.F(a):[this.X(a),this.Y(a),this.Z(a)],p=this.view.project3DTo2D(f),u.push(p[1]),c.push(p[2]);return{X:u,Y:c}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),E.createCurve3D=function(S,w,g){var m,p,a,u,c,l,f,v=w[0];return 3===w.length?(m=w[1],c=w[2],p=null,a=null,u=null):(p=w[1],a=w[2],u=w[3],c=w[4],m=null),l=T.copyAttributes(g,S.options,"curve3d"),(f=new E.Curve3D(v,m,p,a,u,c,l)).element2D=S.create("curve",[[],[]],l),f.element2D.updateDataArray=function(){var _=f.updateDataArray();this.dataX=_.X,this.dataY=_.Y},f.addChild(f.element2D),f.inherits.push(f.element2D),f.element2D.setParents(f),f.element2D.prepareUpdate().update(),S.isSuspendedUpdate||f.element2D.updateVisibility().updateRenderer(),f},E.registerElement("curve3d",E.createCurve3D)}),define("3d/linspace3d",["jxg","base/constants","utils/type","math/math","math/geometry"],function(E,I,T,S,w){"use strict";E.Line3D=function(g,m,p,a,u){this.constructor(g.board,u,I.OBJECT_TYPE_LINE3D,I.OBJECT_CLASS_3D),this.constructor3D(g,"line3d"),this.id=this.view.board.setId(this,"L3D"),this.board.finalizeAdding(this),this.point=m,this.direction=p,this.range=a||[-1/0,1/0],this.point1=null,this.point2=null,this.methodMap=T.deepCopy(this.methodMap,{})},E.Line3D.prototype=new E.GeometryElement,T.copyPrototypeMethods(E.Line3D,E.GeometryElement3D,"constructor3D"),E.extend(E.Line3D.prototype,{getPointCoords:function(g){var m,p,a,u=[];if(m=[this.point.X(),this.point.Y(),this.point.Z()],T.isFunction(this.direction))u=this.direction();else for(p=1;p<4;p++)u.push(T.evaluate(this.direction[p]));return a=T.evaluate(g),Math.abs(a)===1/0&&(g=this.view.intersectionLineCube(m,u,a)),[m[0]+u[0]*a,m[1]+u[1]*a,m[2]+u[2]*a]},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),E.createLine3D=function(g,m,p){var a,u,c,l,f,v,_,h,y=m[0];return a=T.copyAttributes(p,g.options,"line3d"),c=T.providePoints3D(y,[m[1]],p,"line3d",["point"])[0],T.isPoint3D(m[2])||T.isArray(m[2])&&3===m.length?(v=c,_=T.providePoints3D(y,[m[2]],p,"line3d",["point2"])[0],l=function(){return[_.X()-c.X(),_.Y()-c.Y(),_.Z()-c.Z()]},h=new E.Line3D(y,c,l,f=[0,1],a)):(T.isFunction(m[2])?l=m[2]:3===m[2].length?l=[1].concat(m[2]):4===m[2].length&&(l=m[2]),f=m[3],u=T.providePoints3D(y,[[0,0,0],[0,0,0]],p,"line3d",["point1","point2"]),h=new E.Line3D(y,c,l,f,a),u[0].F=function(){return h.getPointCoords(T.evaluate(h.range[0]))},u[0].prepareUpdate().update(),v=u[0],u[1].F=function(){return h.getPointCoords(T.evaluate(h.range[1]))},u[1].prepareUpdate().update(),_=u[1]),h.element2D=y.create("segment",[v.element2D,_.element2D],a),h.addChild(h.element2D),h.inherits.push(h.element2D),h.element2D.setParents(h),v.addChild(h),_.addChild(h),h.point1=v,h.point2=_,h.update(),h.element2D.prepareUpdate().update().updateRenderer(),h},E.registerElement("line3d",E.createLine3D),E.Plane3D=function(g,m,p,a,u,c,l){this.constructor(g.board,l,I.OBJECT_TYPE_PLANE3D,I.OBJECT_CLASS_3D),this.constructor3D(g,"plane3d"),this.id=this.view.board.setId(this,"PL3D"),this.board.finalizeAdding(this),this.point=m,this.direction1=p,this.direction2=u,this.range1=a||[-1/0,1/0],this.range2=c||[-1/0,1/0],this.vec1=[0,0,0],this.vec2=[0,0,0],this.grid=null,this.normal=[0,0,0],this.d=0,this.updateNormal(),this.methodMap=T.deepCopy(this.methodMap,{})},E.Plane3D.prototype=new E.GeometryElement,T.copyPrototypeMethods(E.Plane3D,E.GeometryElement3D,"constructor3D"),E.extend(E.Plane3D.prototype,{updateNormal:function(){var g,m;for(g=0;g<3;g++)this.vec1[g]=T.evaluate(this.direction1[g]),this.vec2[g]=T.evaluate(this.direction2[g]);if(this.normal=S.crossProduct(this.vec1,this.vec2),m=S.norm(this.normal),Math.abs(m)>S.eps)for(g=0;g<3;g++)this.normal[g]/=m;return this.d=S.innerProduct(this.point.coords.slice(1),this.normal,3),this},updateDataArray:function(){var g,m,p,a,u,c,l,f,v,_,h,y,b,x,D=["xPlaneRear","yPlaneRear","zPlaneRear"],M=[],O=[0,0,0],A=[0,0,0],N=[0,0,0],L=[0,0,0],B=this.view;if(this.dataX=[],this.dataY=[],this.updateNormal(),"axisplane3d"!==this.elType&&B.defaultAxes&&T.evaluate(this.range1[0])===-1/0&&T.evaluate(this.range1[1])===1/0&&T.evaluate(this.range2[0])===-1/0&&T.evaluate(this.range2[1])===1/0){for(_=0;_<D.length;_++){if(3===(L=B.intersectionPlanePlane(this,B.defaultAxes[D[_]]))[0].length&&3===L[1].length){for(v=0;v<M.length&&!(w.distance(L[0],M[v][0],3)<S.eps&&w.distance(L[1],M[v][1],3)<S.eps||w.distance(L[0],M[v][1],3)<S.eps&&w.distance(L[1],M[v][0],3)<S.eps);v++);v===M.length&&M.push(L.slice())}if((L=[0,0,0])[_]=B.bbox3D[_][1],f=S.innerProduct(L,B.defaultAxes[D[_]].normal,3),3===(L=B.intersectionPlanePlane(this,B.defaultAxes[D[_]],f))[0].length&&3===L[1].length){for(v=0;v<M.length&&!(w.distance(L[0],M[v][0],3)<S.eps&&w.distance(L[1],M[v][1],3)<S.eps||w.distance(L[0],M[v][1],3)<S.eps&&w.distance(L[1],M[v][0],3)<S.eps);v++);v===M.length&&M.push(L.slice())}}b=0,v=0;do{for(3===(L=M[b][v]).length&&(u=B.project3DTo2D(L),this.dataX.push(u[1]),this.dataY.push(u[2])),L=M[b][v=(v+1)%2],x=b,_=0;_<M.length;_++){if(_!==b&&w.distance(L,M[_][0])<S.eps){b=_,v=0;break}if(_!==b&&w.distance(L,M[_][1])<S.eps){b=_,v=1;break}}if(b===x){console.log("Error: update plane3d: did not find next",b);break}}while(0!==b);u=B.project3DTo2D(M[0][0]),this.dataX.push(u[1]),this.dataY.push(u[2])}else{for(g=T.evaluate(this.range1[0]),m=T.evaluate(this.range1[1]),p=T.evaluate(this.range2[0]),a=T.evaluate(this.range2[1]),N=this.point.coords.slice(1),O=this.vec1.slice(),A=this.vec2.slice(),c=S.norm(O,3),l=S.norm(A,3),v=0;v<3;v++)O[v]/=c,A[v]/=l;for(_=0;_<4;_++){switch(_){case 0:h=g,y=p;break;case 1:h=m,y=p;break;case 2:h=m,y=a;break;case 3:h=g,y=a}for(v=0;v<3;v++)L[v]=N[v]+h*O[v]+y*A[v];u=B.project3DTo2D(L),this.dataX.push(u[1]),this.dataY.push(u[2])}this.dataX.push(this.dataX[0]),this.dataY.push(this.dataY[0])}return{X:this.dataX,Y:this.dataY}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),E.createPlane3D=function(g,m,p){var a,u,c,l,f=m[0],v=m[2],_=m[3],h=m[4]||[-1/0,1/0],y=m[5]||[-1/0,1/0];return u=T.providePoints3D(f,[m[1]],p,"plane3d",["point"])[0],a=T.copyAttributes(p,g.options,"plane3d"),c=new E.Plane3D(f,u,v,h,_,y,a),u.addChild(c),c.element2D=f.create("curve",[[],[]],a),c.element2D.updateDataArray=function(){var b=c.updateDataArray();this.dataX=b.X,this.dataY=b.Y},c.addChild(c.element2D),c.inherits.push(c.element2D),c.element2D.setParents(c),a=T.copyAttributes(p.mesh3d,g.options,"mesh3d"),Math.abs(c.range1[0])!==1/0&&Math.abs(c.range1[1])!==1/0&&Math.abs(c.range2[0])!==1/0&&Math.abs(c.range2[1])!==1/0&&(l=f.create("mesh3d",[function(){return u.coords},v,h,_,y],a),c.grid=l,c.addChild(l),c.inherits.push(l),l.setParents(c)),c.element2D.prepareUpdate().update(),g.isSuspendedUpdate||c.element2D.updateVisibility().updateRenderer(),c},E.registerElement("plane3d",E.createPlane3D)}),define("3d/surface3d",["jxg","base/constants","utils/type"],function(E,I,T){"use strict";E.Surface3D=function(S,w,g,m,p,a,u,c){this.constructor(S.board,c,I.OBJECT_TYPE_SURFACE3D,I.OBJECT_CLASS_3D),this.constructor3D(S,"surface3d"),this.id=this.view.board.setId(this,"S3D"),this.board.finalizeAdding(this),this.F=w,this.X=g,this.Y=m,this.Z=p,null!==this.F&&(this.X=function(l,f){return this.F(l,f)[0]},this.Y=function(l,f){return this.F(l,f)[1]},this.Z=function(l,f){return this.F(l,f)[2]}),this.range_u=a,this.range_v=u,this.methodMap=T.deepCopy(this.methodMap,{})},E.Surface3D.prototype=new E.GeometryElement,T.copyPrototypeMethods(E.Surface3D,E.GeometryElement3D,"constructor3D"),E.extend(E.Surface3D.prototype,{updateDataArray:function(){var w,g=T.evaluate(this.visProp.stepsu),m=T.evaluate(this.visProp.stepsv),p=T.evaluate(this.range_u),a=T.evaluate(this.range_v);return{X:(w=this.view.getMesh(null!==this.F?this.F:[this.X,this.Y,this.Z],p.concat([g]),a.concat([m])))[0],Y:w[1]}},update:function(){return this},updateRenderer:function(){return this.needsUpdate=!1,this}}),E.createParametricSurface3D=function(S,w,g){var m,p,a,u,c,l,f,v,_=w[0];return 4===w.length?(m=w[1],c=w[2],l=w[3],p=null,a=null,u=null):(p=w[1],a=w[2],u=w[3],c=w[4],l=w[5],m=null),f=T.copyAttributes(g,S.options,"surface3d"),(v=new E.Surface3D(_,m,p,a,u,c,l,f)).element2D=_.create("curve",[[],[]],f),v.element2D.updateDataArray=function(){var h=v.updateDataArray();this.dataX=h.X,this.dataY=h.Y},v.addChild(v.element2D),v.inherits.push(v.element2D),v.element2D.setParents(v),v.element2D.prepareUpdate().update(),S.isSuspendedUpdate||v.element2D.updateVisibility().updateRenderer(),v},E.registerElement("parametricsurface3d",E.createParametricSurface3D),E.createFunctiongraph3D=function(S,w,g){return w[0].create("parametricsurface3d",[function(c,l){return c},function(c,l){return l},w[1],w[2],w[3]],g)},E.registerElement("functiongraph3d",E.createFunctiongraph3D)}),define("../build/core.deps.js",["jxg","utils/env","base/constants","utils/type","utils/xml","utils/event","utils/expect","math/math","math/probfuncs","math/ia","math/extrapolate","math/qdt","math/numerics","math/nlp","math/plot","math/metapost","math/statistics","math/symbolic","math/geometry","math/clip","math/poly","math/complex","renderer/abstract","reader/file","parser/geonext","base/board","options","jsxgraph","base/element","base/coords","base/coordselement","base/point","base/line","base/group","base/circle","element/conic","base/polygon","base/curve","element/arc","element/sector","base/composition","element/composition","element/locus","base/text","base/image","element/slider","element/measure","base/chart","base/transformation","base/turtle","utils/color","base/ticks","utils/zip","utils/base64","utils/uuid","utils/encoding","server/server","parser/datasource","parser/jessiecode","parser/ca","utils/dump","renderer/svg","renderer/vml","renderer/canvas","renderer/no","element/comb","element/slopetriangle","element/checkbox","element/input","element/button","base/foreignobject","options3d","3d/view3d","3d/element3d","3d/box3d","3d/point3d","3d/curve3d","3d/linspace3d","3d/surface3d"],function(E,I){"use strict";return I.isBrowser?window.JXG=E:I.isNode()?module.exports=E:I.isWebWorker()&&(self.JXG=E),E}),require("../build/core.deps.js")},__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0!==(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=I)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}},E=>{E(E.s=999)}]);